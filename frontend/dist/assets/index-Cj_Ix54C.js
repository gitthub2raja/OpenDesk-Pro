function tX(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var mb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bM={exports:{}},Ey={},wM={exports:{}},Dn={};var uI;function nX(){if(uI)return Dn;uI=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function m(X){return X===null||typeof X!="object"?null:(X=h&&X[h]||X["@@iterator"],typeof X=="function"?X:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function x(X,ne,se){this.props=X,this.context=ne,this.refs=b,this.updater=se||y}x.prototype.isReactComponent={},x.prototype.setState=function(X,ne){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ne,"setState")},x.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function _(){}_.prototype=x.prototype;function M(X,ne,se){this.props=X,this.context=ne,this.refs=b,this.updater=se||y}var T=M.prototype=new _;T.constructor=M,w(T,x.prototype),T.isPureReactComponent=!0;var A=Array.isArray,R=Object.prototype.hasOwnProperty,N={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function k(X,ne,se){var ye,Ne={},Ee=null,Oe=null;if(ne!=null)for(ye in ne.ref!==void 0&&(Oe=ne.ref),ne.key!==void 0&&(Ee=""+ne.key),ne)R.call(ne,ye)&&!O.hasOwnProperty(ye)&&(Ne[ye]=ne[ye]);var $e=arguments.length-2;if($e===1)Ne.children=se;else if(1<$e){for(var Ie=Array($e),qe=0;qe<$e;qe++)Ie[qe]=arguments[qe+2];Ne.children=Ie}if(X&&X.defaultProps)for(ye in $e=X.defaultProps,$e)Ne[ye]===void 0&&(Ne[ye]=$e[ye]);return{$$typeof:t,type:X,key:Ee,ref:Oe,props:Ne,_owner:N.current}}function C(X,ne){return{$$typeof:t,type:X.type,key:ne,ref:X.ref,props:X.props,_owner:X._owner}}function I(X){return typeof X=="object"&&X!==null&&X.$$typeof===t}function F(X){var ne={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(se){return ne[se]})}var V=/\/+/g;function W(X,ne){return typeof X=="object"&&X!==null&&X.key!=null?F(""+X.key):ne.toString(36)}function G(X,ne,se,ye,Ne){var Ee=typeof X;(Ee==="undefined"||Ee==="boolean")&&(X=null);var Oe=!1;if(X===null)Oe=!0;else switch(Ee){case"string":case"number":Oe=!0;break;case"object":switch(X.$$typeof){case t:case e:Oe=!0}}if(Oe)return Oe=X,Ne=Ne(Oe),X=ye===""?"."+W(Oe,0):ye,A(Ne)?(se="",X!=null&&(se=X.replace(V,"$&/")+"/"),G(Ne,ne,se,"",function(qe){return qe})):Ne!=null&&(I(Ne)&&(Ne=C(Ne,se+(!Ne.key||Oe&&Oe.key===Ne.key?"":(""+Ne.key).replace(V,"$&/")+"/")+X)),ne.push(Ne)),1;if(Oe=0,ye=ye===""?".":ye+":",A(X))for(var $e=0;$e<X.length;$e++){Ee=X[$e];var Ie=ye+W(Ee,$e);Oe+=G(Ee,ne,se,Ie,Ne)}else if(Ie=m(X),typeof Ie=="function")for(X=Ie.call(X),$e=0;!(Ee=X.next()).done;)Ee=Ee.value,Ie=ye+W(Ee,$e++),Oe+=G(Ee,ne,se,Ie,Ne);else if(Ee==="object")throw ne=String(X),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return Oe}function J(X,ne,se){if(X==null)return X;var ye=[],Ne=0;return G(X,ye,"","",function(Ee){return ne.call(se,Ee,Ne++)}),ye}function ee(X){if(X._status===-1){var ne=X._result;ne=ne(),ne.then(function(se){(X._status===0||X._status===-1)&&(X._status=1,X._result=se)},function(se){(X._status===0||X._status===-1)&&(X._status=2,X._result=se)}),X._status===-1&&(X._status=0,X._result=ne)}if(X._status===1)return X._result.default;throw X._result}var ae={current:null},$={transition:null},B={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:$,ReactCurrentOwner:N};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Dn.Children={map:J,forEach:function(X,ne,se){J(X,function(){ne.apply(this,arguments)},se)},count:function(X){var ne=0;return J(X,function(){ne++}),ne},toArray:function(X){return J(X,function(ne){return ne})||[]},only:function(X){if(!I(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Dn.Component=x,Dn.Fragment=n,Dn.Profiler=i,Dn.PureComponent=M,Dn.StrictMode=r,Dn.Suspense=l,Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,Dn.act=Y,Dn.cloneElement=function(X,ne,se){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var ye=w({},X.props),Ne=X.key,Ee=X.ref,Oe=X._owner;if(ne!=null){if(ne.ref!==void 0&&(Ee=ne.ref,Oe=N.current),ne.key!==void 0&&(Ne=""+ne.key),X.type&&X.type.defaultProps)var $e=X.type.defaultProps;for(Ie in ne)R.call(ne,Ie)&&!O.hasOwnProperty(Ie)&&(ye[Ie]=ne[Ie]===void 0&&$e!==void 0?$e[Ie]:ne[Ie])}var Ie=arguments.length-2;if(Ie===1)ye.children=se;else if(1<Ie){$e=Array(Ie);for(var qe=0;qe<Ie;qe++)$e[qe]=arguments[qe+2];ye.children=$e}return{$$typeof:t,type:X.type,key:Ne,ref:Ee,props:ye,_owner:Oe}},Dn.createContext=function(X){return X={$$typeof:s,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:a,_context:X},X.Consumer=X},Dn.createElement=k,Dn.createFactory=function(X){var ne=k.bind(null,X);return ne.type=X,ne},Dn.createRef=function(){return{current:null}},Dn.forwardRef=function(X){return{$$typeof:o,render:X}},Dn.isValidElement=I,Dn.lazy=function(X){return{$$typeof:f,_payload:{_status:-1,_result:X},_init:ee}},Dn.memo=function(X,ne){return{$$typeof:u,type:X,compare:ne===void 0?null:ne}},Dn.startTransition=function(X){var ne=$.transition;$.transition={};try{X()}finally{$.transition=ne}},Dn.unstable_act=Y,Dn.useCallback=function(X,ne){return ae.current.useCallback(X,ne)},Dn.useContext=function(X){return ae.current.useContext(X)},Dn.useDebugValue=function(){},Dn.useDeferredValue=function(X){return ae.current.useDeferredValue(X)},Dn.useEffect=function(X,ne){return ae.current.useEffect(X,ne)},Dn.useId=function(){return ae.current.useId()},Dn.useImperativeHandle=function(X,ne,se){return ae.current.useImperativeHandle(X,ne,se)},Dn.useInsertionEffect=function(X,ne){return ae.current.useInsertionEffect(X,ne)},Dn.useLayoutEffect=function(X,ne){return ae.current.useLayoutEffect(X,ne)},Dn.useMemo=function(X,ne){return ae.current.useMemo(X,ne)},Dn.useReducer=function(X,ne,se){return ae.current.useReducer(X,ne,se)},Dn.useRef=function(X){return ae.current.useRef(X)},Dn.useState=function(X){return ae.current.useState(X)},Dn.useSyncExternalStore=function(X,ne,se){return ae.current.useSyncExternalStore(X,ne,se)},Dn.useTransition=function(){return ae.current.useTransition()},Dn.version="18.3.1",Dn}var dI;function w_(){return dI||(dI=1,wM.exports=nX()),wM.exports}var fI;function rX(){if(fI)return Ey;fI=1;var t=w_(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function s(o,l,u){var f,h={},m=null,y=null;u!==void 0&&(m=""+u),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(y=l.ref);for(f in l)r.call(l,f)&&!a.hasOwnProperty(f)&&(h[f]=l[f]);if(o&&o.defaultProps)for(f in l=o.defaultProps,l)h[f]===void 0&&(h[f]=l[f]);return{$$typeof:e,type:o,key:m,ref:y,props:h,_owner:i.current}}return Ey.Fragment=n,Ey.jsx=s,Ey.jsxs=s,Ey}var hI;function iX(){return hI||(hI=1,bM.exports=rX()),bM.exports}var c=iX(),L=w_();const xe=Zn(L),aX=tX({__proto__:null,default:xe},[L]);var gb={},_M={exports:{}},cs={},SM={exports:{}},MM={};var pI;function sX(){return pI||(pI=1,(function(t){function e($,B){var Y=$.length;$.push(B);e:for(;0<Y;){var X=Y-1>>>1,ne=$[X];if(0<i(ne,B))$[X]=B,$[Y]=ne,Y=X;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var B=$[0],Y=$.pop();if(Y!==B){$[0]=Y;e:for(var X=0,ne=$.length,se=ne>>>1;X<se;){var ye=2*(X+1)-1,Ne=$[ye],Ee=ye+1,Oe=$[Ee];if(0>i(Ne,Y))Ee<ne&&0>i(Oe,Ne)?($[X]=Oe,$[Ee]=Y,X=Ee):($[X]=Ne,$[ye]=Y,X=ye);else if(Ee<ne&&0>i(Oe,Y))$[X]=Oe,$[Ee]=Y,X=Ee;else break e}}return B}function i($,B){var Y=$.sortIndex-B.sortIndex;return Y!==0?Y:$.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],u=[],f=1,h=null,m=3,y=!1,w=!1,b=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T($){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=$)r(u),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(u)}}function A($){if(b=!1,T($),!w)if(n(l)!==null)w=!0,ee(R);else{var B=n(u);B!==null&&ae(A,B.startTime-$)}}function R($,B){w=!1,b&&(b=!1,_(k),k=-1),y=!0;var Y=m;try{for(T(B),h=n(l);h!==null&&(!(h.expirationTime>B)||$&&!F());){var X=h.callback;if(typeof X=="function"){h.callback=null,m=h.priorityLevel;var ne=X(h.expirationTime<=B);B=t.unstable_now(),typeof ne=="function"?h.callback=ne:h===n(l)&&r(l),T(B)}else r(l);h=n(l)}if(h!==null)var se=!0;else{var ye=n(u);ye!==null&&ae(A,ye.startTime-B),se=!1}return se}finally{h=null,m=Y,y=!1}}var N=!1,O=null,k=-1,C=5,I=-1;function F(){return!(t.unstable_now()-I<C)}function V(){if(O!==null){var $=t.unstable_now();I=$;var B=!0;try{B=O(!0,$)}finally{B?W():(N=!1,O=null)}}else N=!1}var W;if(typeof M=="function")W=function(){M(V)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,J=G.port2;G.port1.onmessage=V,W=function(){J.postMessage(null)}}else W=function(){x(V,0)};function ee($){O=$,N||(N=!0,W())}function ae($,B){k=x(function(){$(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,ee(R))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var Y=m;m=B;try{return $()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,B){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Y=m;m=$;try{return B()}finally{m=Y}},t.unstable_scheduleCallback=function($,B,Y){var X=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?X+Y:X):Y=X,$){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Y+ne,$={id:f++,callback:B,priorityLevel:$,startTime:Y,expirationTime:ne,sortIndex:-1},Y>X?($.sortIndex=Y,e(u,$),n(l)===null&&$===n(u)&&(b?(_(k),k=-1):b=!0,ae(A,Y-X))):($.sortIndex=ne,e(l,$),w||y||(w=!0,ee(R))),$},t.unstable_shouldYield=F,t.unstable_wrapCallback=function($){var B=m;return function(){var Y=m;m=B;try{return $.apply(this,arguments)}finally{m=Y}}}})(MM)),MM}var mI;function oX(){return mI||(mI=1,SM.exports=sX()),SM.exports}var gI;function lX(){if(gI)return cs;gI=1;var t=w_(),e=oX();function n(d){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+d,S=1;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(d,p){s(d,p),s(d+"Capture",p)}function s(d,p){for(i[d]=p,d=0;d<p.length;d++)r.add(p[d])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},h={};function m(d){return l.call(h,d)?!0:l.call(f,d)?!1:u.test(d)?h[d]=!0:(f[d]=!0,!1)}function y(d,p,S,P){if(S!==null&&S.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return P?!1:S!==null?!S.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function w(d,p,S,P){if(p===null||typeof p>"u"||y(d,p,S,P))return!0;if(P)return!1;if(S!==null)switch(S.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function b(d,p,S,P,D,z,Q){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=P,this.attributeNamespace=D,this.mustUseProperty=S,this.propertyName=d,this.type=p,this.sanitizeURL=z,this.removeEmptyString=Q}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){x[d]=new b(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var p=d[0];x[p]=new b(p,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){x[d]=new b(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){x[d]=new b(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){x[d]=new b(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){x[d]=new b(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){x[d]=new b(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){x[d]=new b(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){x[d]=new b(d,5,!1,d.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function M(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var p=d.replace(_,M);x[p]=new b(p,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var p=d.replace(_,M);x[p]=new b(p,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var p=d.replace(_,M);x[p]=new b(p,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){x[d]=new b(d,1,!1,d.toLowerCase(),null,!1,!1)}),x.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){x[d]=new b(d,1,!1,d.toLowerCase(),null,!0,!0)});function T(d,p,S,P){var D=x.hasOwnProperty(p)?x[p]:null;(D!==null?D.type!==0:P||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(w(p,S,D,P)&&(S=null),P||D===null?m(p)&&(S===null?d.removeAttribute(p):d.setAttribute(p,""+S)):D.mustUseProperty?d[D.propertyName]=S===null?D.type===3?!1:"":S:(p=D.attributeName,P=D.attributeNamespace,S===null?d.removeAttribute(p):(D=D.type,S=D===3||D===4&&S===!0?"":""+S,P?d.setAttributeNS(P,p,S):d.setAttribute(p,S))))}var A=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),N=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),F=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),$=Symbol.iterator;function B(d){return d===null||typeof d!="object"?null:(d=$&&d[$]||d["@@iterator"],typeof d=="function"?d:null)}var Y=Object.assign,X;function ne(d){if(X===void 0)try{throw Error()}catch(S){var p=S.stack.trim().match(/\n( *(at )?)/);X=p&&p[1]||""}return`
`+X+d}var se=!1;function ye(d,p){if(!d||se)return"";se=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(Fe){var P=Fe}Reflect.construct(d,[],p)}else{try{p.call()}catch(Fe){P=Fe}d.call(p.prototype)}else{try{throw Error()}catch(Fe){P=Fe}d()}}catch(Fe){if(Fe&&P&&typeof Fe.stack=="string"){for(var D=Fe.stack.split(`
`),z=P.stack.split(`
`),Q=D.length-1,fe=z.length-1;1<=Q&&0<=fe&&D[Q]!==z[fe];)fe--;for(;1<=Q&&0<=fe;Q--,fe--)if(D[Q]!==z[fe]){if(Q!==1||fe!==1)do if(Q--,fe--,0>fe||D[Q]!==z[fe]){var we=`
`+D[Q].replace(" at new "," at ");return d.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",d.displayName)),we}while(1<=Q&&0<=fe);break}}}finally{se=!1,Error.prepareStackTrace=S}return(d=d?d.displayName||d.name:"")?ne(d):""}function Ne(d){switch(d.tag){case 5:return ne(d.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return d=ye(d.type,!1),d;case 11:return d=ye(d.type.render,!1),d;case 1:return d=ye(d.type,!0),d;default:return""}}function Ee(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case O:return"Fragment";case N:return"Portal";case C:return"Profiler";case k:return"StrictMode";case W:return"Suspense";case G:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case F:return(d.displayName||"Context")+".Consumer";case I:return(d._context.displayName||"Context")+".Provider";case V:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case J:return p=d.displayName||null,p!==null?p:Ee(d.type)||"Memo";case ee:p=d._payload,d=d._init;try{return Ee(d(p))}catch{}}return null}function Oe(d){var p=d.type;switch(d.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=p.render,d=d.displayName||d.name||"",p.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(p);case 8:return p===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function $e(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Ie(d){var p=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function qe(d){var p=Ie(d)?"checked":"value",S=Object.getOwnPropertyDescriptor(d.constructor.prototype,p),P=""+d[p];if(!d.hasOwnProperty(p)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var D=S.get,z=S.set;return Object.defineProperty(d,p,{configurable:!0,get:function(){return D.call(this)},set:function(Q){P=""+Q,z.call(this,Q)}}),Object.defineProperty(d,p,{enumerable:S.enumerable}),{getValue:function(){return P},setValue:function(Q){P=""+Q},stopTracking:function(){d._valueTracker=null,delete d[p]}}}}function ve(d){d._valueTracker||(d._valueTracker=qe(d))}function Z(d){if(!d)return!1;var p=d._valueTracker;if(!p)return!0;var S=p.getValue(),P="";return d&&(P=Ie(d)?d.checked?"true":"false":d.value),d=P,d!==S?(p.setValue(d),!0):!1}function Pe(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function Me(d,p){var S=p.checked;return Y({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:S??d._wrapperState.initialChecked})}function We(d,p){var S=p.defaultValue==null?"":p.defaultValue,P=p.checked!=null?p.checked:p.defaultChecked;S=$e(p.value!=null?p.value:S),d._wrapperState={initialChecked:P,initialValue:S,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function ke(d,p){p=p.checked,p!=null&&T(d,"checked",p,!1)}function ct(d,p){ke(d,p);var S=$e(p.value),P=p.type;if(S!=null)P==="number"?(S===0&&d.value===""||d.value!=S)&&(d.value=""+S):d.value!==""+S&&(d.value=""+S);else if(P==="submit"||P==="reset"){d.removeAttribute("value");return}p.hasOwnProperty("value")?ie(d,p.type,S):p.hasOwnProperty("defaultValue")&&ie(d,p.type,$e(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(d.defaultChecked=!!p.defaultChecked)}function ot(d,p,S){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var P=p.type;if(!(P!=="submit"&&P!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+d._wrapperState.initialValue,S||p===d.value||(d.value=p),d.defaultValue=p}S=d.name,S!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,S!==""&&(d.name=S)}function ie(d,p,S){(p!=="number"||Pe(d.ownerDocument)!==d)&&(S==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+S&&(d.defaultValue=""+S))}var te=Array.isArray;function Ae(d,p,S,P){if(d=d.options,p){p={};for(var D=0;D<S.length;D++)p["$"+S[D]]=!0;for(S=0;S<d.length;S++)D=p.hasOwnProperty("$"+d[S].value),d[S].selected!==D&&(d[S].selected=D),D&&P&&(d[S].defaultSelected=!0)}else{for(S=""+$e(S),p=null,D=0;D<d.length;D++){if(d[D].value===S){d[D].selected=!0,P&&(d[D].defaultSelected=!0);return}p!==null||d[D].disabled||(p=d[D])}p!==null&&(p.selected=!0)}}function Je(d,p){if(p.dangerouslySetInnerHTML!=null)throw Error(n(91));return Y({},p,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function Qe(d,p){var S=p.value;if(S==null){if(S=p.children,p=p.defaultValue,S!=null){if(p!=null)throw Error(n(92));if(te(S)){if(1<S.length)throw Error(n(93));S=S[0]}p=S}p==null&&(p=""),S=p}d._wrapperState={initialValue:$e(S)}}function Ze(d,p){var S=$e(p.value),P=$e(p.defaultValue);S!=null&&(S=""+S,S!==d.value&&(d.value=S),p.defaultValue==null&&d.defaultValue!==S&&(d.defaultValue=S)),P!=null&&(d.defaultValue=""+P)}function At(d){var p=d.textContent;p===d._wrapperState.initialValue&&p!==""&&p!==null&&(d.value=p)}function gt(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function St(d,p){return d==null||d==="http://www.w3.org/1999/xhtml"?gt(p):d==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var Ft,Yt=(function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,S,P,D){MSApp.execUnsafeLocalFunction(function(){return d(p,S,P,D)})}:d})(function(d,p){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=p;else{for(Ft=Ft||document.createElement("div"),Ft.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=Ft.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;p.firstChild;)d.appendChild(p.firstChild)}});function tt(d,p){if(p){var S=d.firstChild;if(S&&S===d.lastChild&&S.nodeType===3){S.nodeValue=p;return}}d.textContent=p}var yn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gn=["Webkit","ms","Moz","O"];Object.keys(yn).forEach(function(d){gn.forEach(function(p){p=p+d.charAt(0).toUpperCase()+d.substring(1),yn[p]=yn[d]})});function $t(d,p,S){return p==null||typeof p=="boolean"||p===""?"":S||typeof p!="number"||p===0||yn.hasOwnProperty(d)&&yn[d]?(""+p).trim():p+"px"}function Mt(d,p){d=d.style;for(var S in p)if(p.hasOwnProperty(S)){var P=S.indexOf("--")===0,D=$t(S,p[S],P);S==="float"&&(S="cssFloat"),P?d.setProperty(S,D):d[S]=D}}var Et=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function me(d,p){if(p){if(Et[d]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(n(137,d));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(n(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(n(61))}if(p.style!=null&&typeof p.style!="object")throw Error(n(62))}}function Ge(d,p){if(d.indexOf("-")===-1)return typeof p.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dt=null;function wt(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Ce=null,ge=null,ut=null;function vt(d){if(d=Ao(d)){if(typeof Ce!="function")throw Error(n(280));var p=d.stateNode;p&&(p=cp(p),Ce(d.stateNode,d.type,p))}}function Gt(d){ge?ut?ut.push(d):ut=[d]:ge=d}function It(){if(ge){var d=ge,p=ut;if(ut=ge=null,vt(d),p)for(d=0;d<p.length;d++)vt(p[d])}}function wn(d,p){return d(p)}function On(){}var Vn=!1;function ir(d,p,S){if(Vn)return d(p,S);Vn=!0;try{return wn(d,p,S)}finally{Vn=!1,(ge!==null||ut!==null)&&(On(),It())}}function Tn(d,p){var S=d.stateNode;if(S===null)return null;var P=cp(S);if(P===null)return null;S=P[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(P=!P.disabled)||(d=d.type,P=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!P;break e;default:d=!1}if(d)return null;if(S&&typeof S!="function")throw Error(n(231,p,typeof S));return S}var Vr=!1;if(o)try{var di={};Object.defineProperty(di,"passive",{get:function(){Vr=!0}}),window.addEventListener("test",di,di),window.removeEventListener("test",di,di)}catch{Vr=!1}function Gs(d,p,S,P,D,z,Q,fe,we){var Fe=Array.prototype.slice.call(arguments,3);try{p.apply(S,Fe)}catch(at){this.onError(at)}}var xs=!1,ta=null,Ti=!1,fn=null,Vl={onError:function(d){xs=!0,ta=d}};function ru(d,p,S,P,D,z,Q,fe,we){xs=!1,ta=null,Gs.apply(Vl,arguments)}function K(d,p,S,P,D,z,Q,fe,we){if(ru.apply(this,arguments),xs){if(xs){var Fe=ta;xs=!1,ta=null}else throw Error(n(198));Ti||(Ti=!0,fn=Fe)}}function re(d){var p=d,S=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,(p.flags&4098)!==0&&(S=p.return),d=p.return;while(d)}return p.tag===3?S:null}function be(d){if(d.tag===13){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function q(d){if(re(d)!==d)throw Error(n(188))}function oe(d){var p=d.alternate;if(!p){if(p=re(d),p===null)throw Error(n(188));return p!==d?null:d}for(var S=d,P=p;;){var D=S.return;if(D===null)break;var z=D.alternate;if(z===null){if(P=D.return,P!==null){S=P;continue}break}if(D.child===z.child){for(z=D.child;z;){if(z===S)return q(D),d;if(z===P)return q(D),p;z=z.sibling}throw Error(n(188))}if(S.return!==P.return)S=D,P=z;else{for(var Q=!1,fe=D.child;fe;){if(fe===S){Q=!0,S=D,P=z;break}if(fe===P){Q=!0,P=D,S=z;break}fe=fe.sibling}if(!Q){for(fe=z.child;fe;){if(fe===S){Q=!0,S=z,P=D;break}if(fe===P){Q=!0,P=z,S=D;break}fe=fe.sibling}if(!Q)throw Error(n(189))}}if(S.alternate!==P)throw Error(n(190))}if(S.tag!==3)throw Error(n(188));return S.stateNode.current===S?d:p}function ce(d){return d=oe(d),d!==null?pe(d):null}function pe(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var p=pe(d);if(p!==null)return p;d=d.sibling}return null}var he=e.unstable_scheduleCallback,Ue=e.unstable_cancelCallback,ze=e.unstable_shouldYield,Ve=e.unstable_requestPaint,De=e.unstable_now,Ct=e.unstable_getCurrentPriorityLevel,nt=e.unstable_ImmediatePriority,it=e.unstable_UserBlockingPriority,Pt=e.unstable_NormalPriority,Wt=e.unstable_LowPriority,qt=e.unstable_IdlePriority,nn=null,xt=null;function yt(d){if(xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(nn,d,void 0,(d.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:Kn,Kt=Math.log,rn=Math.LN2;function Kn(d){return d>>>=0,d===0?32:31-(Kt(d)/rn|0)|0}var vr=64,ar=4194304;function Rn(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function _n(d,p){var S=d.pendingLanes;if(S===0)return 0;var P=0,D=d.suspendedLanes,z=d.pingedLanes,Q=S&268435455;if(Q!==0){var fe=Q&~D;fe!==0?P=Rn(fe):(z&=Q,z!==0&&(P=Rn(z)))}else Q=S&~D,Q!==0?P=Rn(Q):z!==0&&(P=Rn(z));if(P===0)return 0;if(p!==0&&p!==P&&(p&D)===0&&(D=P&-P,z=p&-p,D>=z||D===16&&(z&4194240)!==0))return p;if((P&4)!==0&&(P|=S&16),p=d.entangledLanes,p!==0)for(d=d.entanglements,p&=P;0<p;)S=31-tn(p),D=1<<S,P|=d[S],p&=~D;return P}function Or(d,p){switch(d){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vn(d,p){for(var S=d.suspendedLanes,P=d.pingedLanes,D=d.expirationTimes,z=d.pendingLanes;0<z;){var Q=31-tn(z),fe=1<<Q,we=D[Q];we===-1?((fe&S)===0||(fe&P)!==0)&&(D[Q]=Or(fe,p)):we<=p&&(d.expiredLanes|=fe),z&=~fe}}function kn(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function sr(){var d=vr;return vr<<=1,(vr&4194240)===0&&(vr=64),d}function pa(d){for(var p=[],S=0;31>S;S++)p.push(d);return p}function ri(d,p,S){d.pendingLanes|=p,p!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,p=31-tn(p),d[p]=S}function $s(d,p){var S=d.pendingLanes&~p;d.pendingLanes=p,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=p,d.mutableReadLanes&=p,d.entangledLanes&=p,p=d.entanglements;var P=d.eventTimes;for(d=d.expirationTimes;0<S;){var D=31-tn(S),z=1<<D;p[D]=0,P[D]=-1,d[D]=-1,S&=~z}}function iu(d,p){var S=d.entangledLanes|=p;for(d=d.entanglements;S;){var P=31-tn(S),D=1<<P;D&p|d[P]&p&&(d[P]|=p),S&=~D}}var zn=0;function au(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var Ad,kg,Sx,Oh,Rh,Hl=!1,kh=[],qs=null,An=null,vo=null,Wl=new Map,su=new Map,ol=[],GS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ii(d,p){switch(d){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":vo=null;break;case"pointerover":case"pointerout":Wl.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":su.delete(p.pointerId)}}function Gl(d,p,S,P,D,z){return d===null||d.nativeEvent!==z?(d={blockedOn:p,domEventName:S,eventSystemFlags:P,nativeEvent:z,targetContainers:[D]},p!==null&&(p=Ao(p),p!==null&&kg(p)),d):(d.eventSystemFlags|=P,p=d.targetContainers,D!==null&&p.indexOf(D)===-1&&p.push(D),d)}function $S(d,p,S,P,D){switch(p){case"focusin":return qs=Gl(qs,d,p,S,P,D),!0;case"dragenter":return An=Gl(An,d,p,S,P,D),!0;case"mouseover":return vo=Gl(vo,d,p,S,P,D),!0;case"pointerover":var z=D.pointerId;return Wl.set(z,Gl(Wl.get(z)||null,d,p,S,P,D)),!0;case"gotpointercapture":return z=D.pointerId,su.set(z,Gl(su.get(z)||null,d,p,S,P,D)),!0}return!1}function jh(d){var p=pl(d.target);if(p!==null){var S=re(p);if(S!==null){if(p=S.tag,p===13){if(p=be(S),p!==null){d.blockedOn=p,Rh(d.priority,function(){Sx(S)});return}}else if(p===3&&S.stateNode.current.memoizedState.isDehydrated){d.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}d.blockedOn=null}function Ih(d){if(d.blockedOn!==null)return!1;for(var p=d.targetContainers;0<p.length;){var S=Qa(d.domEventName,d.eventSystemFlags,p[0],d.nativeEvent);if(S===null){S=d.nativeEvent;var P=new S.constructor(S.type,S);dt=P,S.target.dispatchEvent(P),dt=null}else return p=Ao(S),p!==null&&kg(p),d.blockedOn=S,!1;p.shift()}return!0}function Ed(d,p,S){Ih(d)&&S.delete(p)}function Xs(){Hl=!1,qs!==null&&Ih(qs)&&(qs=null),An!==null&&Ih(An)&&(An=null),vo!==null&&Ih(vo)&&(vo=null),Wl.forEach(Ed),su.forEach(Ed)}function Cd(d,p){d.blockedOn===p&&(d.blockedOn=null,Hl||(Hl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Xs)))}function Pd(d){function p(D){return Cd(D,d)}if(0<kh.length){Cd(kh[0],d);for(var S=1;S<kh.length;S++){var P=kh[S];P.blockedOn===d&&(P.blockedOn=null)}}for(qs!==null&&Cd(qs,d),An!==null&&Cd(An,d),vo!==null&&Cd(vo,d),Wl.forEach(p),su.forEach(p),S=0;S<ol.length;S++)P=ol[S],P.blockedOn===d&&(P.blockedOn=null);for(;0<ol.length&&(S=ol[0],S.blockedOn===null);)jh(S),S.blockedOn===null&&ol.shift()}var na=A.ReactCurrentBatchConfig,Ja=!0;function Dh(d,p,S,P){var D=zn,z=na.transition;na.transition=null;try{zn=1,Lh(d,p,S,P)}finally{zn=D,na.transition=z}}function jg(d,p,S,P){var D=zn,z=na.transition;na.transition=null;try{zn=4,Lh(d,p,S,P)}finally{zn=D,na.transition=z}}function Lh(d,p,S,P){if(Ja){var D=Qa(d,p,S,P);if(D===null)rp(d,p,P,Uh,S),ii(d,P);else if($S(D,d,p,S,P))P.stopPropagation();else if(ii(d,P),p&4&&-1<GS.indexOf(d)){for(;D!==null;){var z=Ao(D);if(z!==null&&Ad(z),z=Qa(d,p,S,P),z===null&&rp(d,p,P,Uh,S),z===D)break;D=z}D!==null&&P.stopPropagation()}else rp(d,p,P,null,S)}}var Uh=null;function Qa(d,p,S,P){if(Uh=null,d=wt(P),d=pl(d),d!==null)if(p=re(d),p===null)d=null;else if(S=p.tag,S===13){if(d=be(p),d!==null)return d;d=null}else if(S===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;d=null}else p!==d&&(d=null);return Uh=d,null}function Mx(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ct()){case nt:return 1;case it:return 4;case Pt:case Wt:return 16;case qt:return 536870912;default:return 16}default:return 16}}var bs=null,Ig=null,ma=null;function Nd(){if(ma)return ma;var d,p=Ig,S=p.length,P,D="value"in bs?bs.value:bs.textContent,z=D.length;for(d=0;d<S&&p[d]===D[d];d++);var Q=S-d;for(P=1;P<=Q&&p[S-P]===D[z-P];P++);return ma=D.slice(d,1<P?1-P:void 0)}function $l(d){var p=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&p===13&&(d=13)):d=p,d===10&&(d=13),32<=d||d===13?d:0}function xo(){return!0}function Fh(){return!1}function ra(d){function p(S,P,D,z,Q){this._reactName=S,this._targetInst=D,this.type=P,this.nativeEvent=z,this.target=Q,this.currentTarget=null;for(var fe in d)d.hasOwnProperty(fe)&&(S=d[fe],this[fe]=S?S(z):z[fe]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?xo:Fh,this.isPropagationStopped=Fh,this}return Y(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=xo)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=xo)},persist:function(){},isPersistent:xo}),p}var ql={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Od=ra(ql),Xl=Y({},ql,{view:0,detail:0}),ou=ra(Xl),ga,es,ts,lu=Y({},Xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cl,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==ts&&(ts&&d.type==="mousemove"?(ga=d.screenX-ts.screenX,es=d.screenY-ts.screenY):es=ga=0,ts=d),ga)},movementY:function(d){return"movementY"in d?d.movementY:es}}),Dg=ra(lu),bo=Y({},lu,{dataTransfer:0}),ll=ra(bo),zh=Y({},Xl,{relatedTarget:0}),Bh=ra(zh),Vh=Y({},ql,{animationName:0,elapsedTime:0,pseudoElement:0}),Tx=ra(Vh),Ax=Y({},ql,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Lg=ra(Ax),Hh=Y({},ql,{data:0}),Ug=ra(Hh),Ex={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cu(d){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(d):(d=Fg[d])?!!p[d]:!1}function cl(){return cu}var Wh=Y({},Xl,{key:function(d){if(d.key){var p=Ex[d.key]||d.key;if(p!=="Unidentified")return p}return d.type==="keypress"?(d=$l(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Cx[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cl,charCode:function(d){return d.type==="keypress"?$l(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?$l(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Gh=ra(Wh),ns=Y({},lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ra=ra(ns),Yl=Y({},Xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cl}),wo=ra(Yl),_o=Y({},ql,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kl=ra(_o),Px=Y({},lu,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),zg=ra(Px),Bg=[9,13,27,32],ia=o&&"CompositionEvent"in window,Ai=null;o&&"documentMode"in document&&(Ai=document.documentMode);var Mr=o&&"TextEvent"in window&&!Ai,uu=o&&(!ia||Ai&&8<Ai&&11>=Ai),rs=" ",Vg=!1;function Hg(d,p){switch(d){case"keyup":return Bg.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $h(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var ul=!1;function Nx(d,p){switch(d){case"compositionend":return $h(p);case"keypress":return p.which!==32?null:(Vg=!0,rs);case"textInput":return d=p.data,d===rs&&Vg?null:d;default:return null}}function Rd(d,p){if(ul)return d==="compositionend"||!ia&&Hg(d,p)?(d=Nd(),ma=Ig=bs=null,ul=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return uu&&p.locale!=="ko"?null:p.data;default:return null}}var du={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qh(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p==="input"?!!du[d.type]:p==="textarea"}function fu(d,p,S,P){Gt(P),p=ip(p,"onChange"),0<p.length&&(S=new Od("onChange","change",null,S,P),d.push({event:S,listeners:p}))}var dl=null,hu=null;function Ox(d){yu(d,0)}function So(d){var p=Hr(d);if(Z(p))return d}function Rx(d,p){if(d==="change")return p}var pu=!1;if(o){var ya;if(o){var Zl="oninput"in document;if(!Zl){var Jl=document.createElement("div");Jl.setAttribute("oninput","return;"),Zl=typeof Jl.oninput=="function"}ya=Zl}else ya=!1;pu=ya&&(!document.documentMode||9<document.documentMode)}function ws(){dl&&(dl.detachEvent("onpropertychange",Xh),hu=dl=null)}function Xh(d){if(d.propertyName==="value"&&So(hu)){var p=[];fu(p,hu,d,wt(d)),ir(Ox,p)}}function mu(d,p,S){d==="focusin"?(ws(),dl=p,hu=S,dl.attachEvent("onpropertychange",Xh)):d==="focusout"&&ws()}function kx(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return So(hu)}function Wg(d,p){if(d==="click")return So(p)}function Rr(d,p){if(d==="input"||d==="change")return So(p)}function Yh(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var ka=typeof Object.is=="function"?Object.is:Yh;function Ql(d,p){if(ka(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var S=Object.keys(d),P=Object.keys(p);if(S.length!==P.length)return!1;for(P=0;P<S.length;P++){var D=S[P];if(!l.call(p,D)||!ka(d[D],p[D]))return!1}return!0}function kd(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function ja(d,p){var S=kd(d);d=0;for(var P;S;){if(S.nodeType===3){if(P=d+S.textContent.length,d<=p&&P>=p)return{node:S,offset:p-d};d=P}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=kd(S)}}function ec(d,p){return d&&p?d===p?!0:d&&d.nodeType===3?!1:p&&p.nodeType===3?ec(d,p.parentNode):"contains"in d?d.contains(p):d.compareDocumentPosition?!!(d.compareDocumentPosition(p)&16):!1:!1}function kr(){for(var d=window,p=Pe();p instanceof d.HTMLIFrameElement;){try{var S=typeof p.contentWindow.location.href=="string"}catch{S=!1}if(S)d=p.contentWindow;else break;p=Pe(d.document)}return p}function fi(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p&&(p==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||p==="textarea"||d.contentEditable==="true")}function hi(d){var p=kr(),S=d.focusedElem,P=d.selectionRange;if(p!==S&&S&&S.ownerDocument&&ec(S.ownerDocument.documentElement,S)){if(P!==null&&fi(S)){if(p=P.start,d=P.end,d===void 0&&(d=p),"selectionStart"in S)S.selectionStart=p,S.selectionEnd=Math.min(d,S.value.length);else if(d=(p=S.ownerDocument||document)&&p.defaultView||window,d.getSelection){d=d.getSelection();var D=S.textContent.length,z=Math.min(P.start,D);P=P.end===void 0?z:Math.min(P.end,D),!d.extend&&z>P&&(D=P,P=z,z=D),D=ja(S,z);var Q=ja(S,P);D&&Q&&(d.rangeCount!==1||d.anchorNode!==D.node||d.anchorOffset!==D.offset||d.focusNode!==Q.node||d.focusOffset!==Q.offset)&&(p=p.createRange(),p.setStart(D.node,D.offset),d.removeAllRanges(),z>P?(d.addRange(p),d.extend(Q.node,Q.offset)):(p.setEnd(Q.node,Q.offset),d.addRange(p)))}}for(p=[],d=S;d=d.parentNode;)d.nodeType===1&&p.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<p.length;S++)d=p[S],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var Kh=o&&"documentMode"in document&&11>=document.documentMode,Ys=null,tc=null,jd=null,pi=!1;function Zh(d,p,S){var P=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;pi||Ys==null||Ys!==Pe(P)||(P=Ys,"selectionStart"in P&&fi(P)?P={start:P.selectionStart,end:P.selectionEnd}:(P=(P.ownerDocument&&P.ownerDocument.defaultView||window).getSelection(),P={anchorNode:P.anchorNode,anchorOffset:P.anchorOffset,focusNode:P.focusNode,focusOffset:P.focusOffset}),jd&&Ql(jd,P)||(jd=P,P=ip(tc,"onSelect"),0<P.length&&(p=new Od("onSelect","select",null,p,S),d.push({event:p,listeners:P}),p.target=Ys)))}function gu(d,p){var S={};return S[d.toLowerCase()]=p.toLowerCase(),S["Webkit"+d]="webkit"+p,S["Moz"+d]="moz"+p,S}var fl={animationend:gu("Animation","AnimationEnd"),animationiteration:gu("Animation","AnimationIteration"),animationstart:gu("Animation","AnimationStart"),transitionend:gu("Transition","TransitionEnd")},_s={},Ss={};o&&(Ss=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function Ks(d){if(_s[d])return _s[d];if(!fl[d])return d;var p=fl[d],S;for(S in p)if(p.hasOwnProperty(S)&&S in Ss)return _s[d]=p[S];return d}var Id=Ks("animationend"),Dd=Ks("animationiteration"),Gg=Ks("animationstart"),$g=Ks("transitionend"),qg=new Map,Xg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mo(d,p){qg.set(d,p),a(p,[d])}for(var Jh=0;Jh<Xg.length;Jh++){var Ld=Xg[Jh],Ud=Ld.toLowerCase(),jx=Ld[0].toUpperCase()+Ld.slice(1);Mo(Ud,"on"+jx)}Mo(Id,"onAnimationEnd"),Mo(Dd,"onAnimationIteration"),Mo(Gg,"onAnimationStart"),Mo("dblclick","onDoubleClick"),Mo("focusin","onFocus"),Mo("focusout","onBlur"),Mo($g,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qh=new Set("cancel close invalid load scroll toggle".split(" ").concat(hl));function ep(d,p,S){var P=d.type||"unknown-event";d.currentTarget=S,K(P,p,void 0,d),d.currentTarget=null}function yu(d,p){p=(p&4)!==0;for(var S=0;S<d.length;S++){var P=d[S],D=P.event;P=P.listeners;e:{var z=void 0;if(p)for(var Q=P.length-1;0<=Q;Q--){var fe=P[Q],we=fe.instance,Fe=fe.currentTarget;if(fe=fe.listener,we!==z&&D.isPropagationStopped())break e;ep(D,fe,Fe),z=we}else for(Q=0;Q<P.length;Q++){if(fe=P[Q],we=fe.instance,Fe=fe.currentTarget,fe=fe.listener,we!==z&&D.isPropagationStopped())break e;ep(D,fe,Fe),z=we}}}if(Ti)throw d=fn,Ti=!1,fn=null,d}function pr(d,p){var S=p[ic];S===void 0&&(S=p[ic]=new Set);var P=d+"__bubble";S.has(P)||(np(p,d,2,!1),S.add(P))}function tp(d,p,S){var P=0;p&&(P|=4),np(S,d,P,p)}var Fd="_reactListening"+Math.random().toString(36).slice(2);function vu(d){if(!d[Fd]){d[Fd]=!0,r.forEach(function(S){S!=="selectionchange"&&(Qh.has(S)||tp(S,!1,d),tp(S,!0,d))});var p=d.nodeType===9?d:d.ownerDocument;p===null||p[Fd]||(p[Fd]=!0,tp("selectionchange",!1,p))}}function np(d,p,S,P){switch(Mx(p)){case 1:var D=Dh;break;case 4:D=jg;break;default:D=Lh}S=D.bind(null,p,S,d),D=void 0,!Vr||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(D=!0),P?D!==void 0?d.addEventListener(p,S,{capture:!0,passive:D}):d.addEventListener(p,S,!0):D!==void 0?d.addEventListener(p,S,{passive:D}):d.addEventListener(p,S,!1)}function rp(d,p,S,P,D){var z=P;if((p&1)===0&&(p&2)===0&&P!==null)e:for(;;){if(P===null)return;var Q=P.tag;if(Q===3||Q===4){var fe=P.stateNode.containerInfo;if(fe===D||fe.nodeType===8&&fe.parentNode===D)break;if(Q===4)for(Q=P.return;Q!==null;){var we=Q.tag;if((we===3||we===4)&&(we=Q.stateNode.containerInfo,we===D||we.nodeType===8&&we.parentNode===D))return;Q=Q.return}for(;fe!==null;){if(Q=pl(fe),Q===null)return;if(we=Q.tag,we===5||we===6){P=z=Q;continue e}fe=fe.parentNode}}P=P.return}ir(function(){var Fe=z,at=wt(S),lt=[];e:{var rt=qg.get(d);if(rt!==void 0){var Ot=Od,Ut=d;switch(d){case"keypress":if($l(S)===0)break e;case"keydown":case"keyup":Ot=Gh;break;case"focusin":Ut="focus",Ot=Bh;break;case"focusout":Ut="blur",Ot=Bh;break;case"beforeblur":case"afterblur":Ot=Bh;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ot=Dg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ot=ll;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ot=wo;break;case Id:case Dd:case Gg:Ot=Tx;break;case $g:Ot=Kl;break;case"scroll":Ot=ou;break;case"wheel":Ot=zg;break;case"copy":case"cut":case"paste":Ot=Lg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ot=Ra}var zt=(p&4)!==0,si=!zt&&d==="scroll",Re=zt?rt!==null?rt+"Capture":null:rt;zt=[];for(var _e=Fe,je;_e!==null;){je=_e;var ht=je.stateNode;if(je.tag===5&&ht!==null&&(je=ht,Re!==null&&(ht=Tn(_e,Re),ht!=null&&zt.push(xu(_e,ht,je)))),si)break;_e=_e.return}0<zt.length&&(rt=new Ot(rt,Ut,null,S,at),lt.push({event:rt,listeners:zt}))}}if((p&7)===0){e:{if(rt=d==="mouseover"||d==="pointerover",Ot=d==="mouseout"||d==="pointerout",rt&&S!==dt&&(Ut=S.relatedTarget||S.fromElement)&&(pl(Ut)||Ut[Ia]))break e;if((Ot||rt)&&(rt=at.window===at?at:(rt=at.ownerDocument)?rt.defaultView||rt.parentWindow:window,Ot?(Ut=S.relatedTarget||S.toElement,Ot=Fe,Ut=Ut?pl(Ut):null,Ut!==null&&(si=re(Ut),Ut!==si||Ut.tag!==5&&Ut.tag!==6)&&(Ut=null)):(Ot=null,Ut=Fe),Ot!==Ut)){if(zt=Dg,ht="onMouseLeave",Re="onMouseEnter",_e="mouse",(d==="pointerout"||d==="pointerover")&&(zt=Ra,ht="onPointerLeave",Re="onPointerEnter",_e="pointer"),si=Ot==null?rt:Hr(Ot),je=Ut==null?rt:Hr(Ut),rt=new zt(ht,_e+"leave",Ot,S,at),rt.target=si,rt.relatedTarget=je,ht=null,pl(at)===Fe&&(zt=new zt(Re,_e+"enter",Ut,S,at),zt.target=je,zt.relatedTarget=si,ht=zt),si=ht,Ot&&Ut)t:{for(zt=Ot,Re=Ut,_e=0,je=zt;je;je=nc(je))_e++;for(je=0,ht=Re;ht;ht=nc(ht))je++;for(;0<_e-je;)zt=nc(zt),_e--;for(;0<je-_e;)Re=nc(Re),je--;for(;_e--;){if(zt===Re||Re!==null&&zt===Re.alternate)break t;zt=nc(zt),Re=nc(Re)}zt=null}else zt=null;Ot!==null&&Ix(lt,rt,Ot,zt,!1),Ut!==null&&si!==null&&Ix(lt,si,Ut,zt,!0)}}e:{if(rt=Fe?Hr(Fe):window,Ot=rt.nodeName&&rt.nodeName.toLowerCase(),Ot==="select"||Ot==="input"&&rt.type==="file")var Ht=Rx;else if(qh(rt))if(pu)Ht=Rr;else{Ht=kx;var Zt=mu}else(Ot=rt.nodeName)&&Ot.toLowerCase()==="input"&&(rt.type==="checkbox"||rt.type==="radio")&&(Ht=Wg);if(Ht&&(Ht=Ht(d,Fe))){fu(lt,Ht,S,at);break e}Zt&&Zt(d,rt,Fe),d==="focusout"&&(Zt=rt._wrapperState)&&Zt.controlled&&rt.type==="number"&&ie(rt,"number",rt.value)}switch(Zt=Fe?Hr(Fe):window,d){case"focusin":(qh(Zt)||Zt.contentEditable==="true")&&(Ys=Zt,tc=Fe,jd=null);break;case"focusout":jd=tc=Ys=null;break;case"mousedown":pi=!0;break;case"contextmenu":case"mouseup":case"dragend":pi=!1,Zh(lt,S,at);break;case"selectionchange":if(Kh)break;case"keydown":case"keyup":Zh(lt,S,at)}var Jt;if(ia)e:{switch(d){case"compositionstart":var cn="onCompositionStart";break e;case"compositionend":cn="onCompositionEnd";break e;case"compositionupdate":cn="onCompositionUpdate";break e}cn=void 0}else ul?Hg(d,S)&&(cn="onCompositionEnd"):d==="keydown"&&S.keyCode===229&&(cn="onCompositionStart");cn&&(uu&&S.locale!=="ko"&&(ul||cn!=="onCompositionStart"?cn==="onCompositionEnd"&&ul&&(Jt=Nd()):(bs=at,Ig="value"in bs?bs.value:bs.textContent,ul=!0)),Zt=ip(Fe,cn),0<Zt.length&&(cn=new Ug(cn,d,null,S,at),lt.push({event:cn,listeners:Zt}),Jt?cn.data=Jt:(Jt=$h(S),Jt!==null&&(cn.data=Jt)))),(Jt=Mr?Nx(d,S):Rd(d,S))&&(Fe=ip(Fe,"onBeforeInput"),0<Fe.length&&(at=new Ug("onBeforeInput","beforeinput",null,S,at),lt.push({event:at,listeners:Fe}),at.data=Jt))}yu(lt,p)})}function xu(d,p,S){return{instance:d,listener:p,currentTarget:S}}function ip(d,p){for(var S=p+"Capture",P=[];d!==null;){var D=d,z=D.stateNode;D.tag===5&&z!==null&&(D=z,z=Tn(d,S),z!=null&&P.unshift(xu(d,z,D)),z=Tn(d,p),z!=null&&P.push(xu(d,z,D))),d=d.return}return P}function nc(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function Ix(d,p,S,P,D){for(var z=p._reactName,Q=[];S!==null&&S!==P;){var fe=S,we=fe.alternate,Fe=fe.stateNode;if(we!==null&&we===P)break;fe.tag===5&&Fe!==null&&(fe=Fe,D?(we=Tn(S,z),we!=null&&Q.unshift(xu(S,we,fe))):D||(we=Tn(S,z),we!=null&&Q.push(xu(S,we,fe)))),S=S.return}Q.length!==0&&d.push({event:p,listeners:Q})}var qS=/\r\n?/g,Dx=/\u0000|\uFFFD/g;function Yg(d){return(typeof d=="string"?d:""+d).replace(qS,`
`).replace(Dx,"")}function zd(d,p,S){if(p=Yg(p),Yg(d)!==p&&S)throw Error(n(425))}function Bd(){}var bu=null,Kg=null;function Zg(d,p){return d==="textarea"||d==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var Jg=typeof setTimeout=="function"?setTimeout:void 0,Qg=typeof clearTimeout=="function"?clearTimeout:void 0,ap=typeof Promise=="function"?Promise:void 0,XS=typeof queueMicrotask=="function"?queueMicrotask:typeof ap<"u"?function(d){return ap.resolve(null).then(d).catch(Lx)}:Jg;function Lx(d){setTimeout(function(){throw d})}function sp(d,p){var S=p,P=0;do{var D=S.nextSibling;if(d.removeChild(S),D&&D.nodeType===8)if(S=D.data,S==="/$"){if(P===0){d.removeChild(D),Pd(p);return}P--}else S!=="$"&&S!=="$?"&&S!=="$!"||P++;S=D}while(S);Pd(p)}function To(d){for(;d!=null;d=d.nextSibling){var p=d.nodeType;if(p===1||p===3)break;if(p===8){if(p=d.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return d}function ey(d){d=d.previousSibling;for(var p=0;d;){if(d.nodeType===8){var S=d.data;if(S==="$"||S==="$!"||S==="$?"){if(p===0)return d;p--}else S==="/$"&&p++}d=d.previousSibling}return null}var rc=Math.random().toString(36).slice(2),ai="__reactFiber$"+rc,wu="__reactProps$"+rc,Ia="__reactContainer$"+rc,ic="__reactEvents$"+rc,op="__reactListeners$"+rc,lp="__reactHandles$"+rc;function pl(d){var p=d[ai];if(p)return p;for(var S=d.parentNode;S;){if(p=S[Ia]||S[ai]){if(S=p.alternate,p.child!==null||S!==null&&S.child!==null)for(d=ey(d);d!==null;){if(S=d[ai])return S;d=ey(d)}return p}d=S,S=d.parentNode}return null}function Ao(d){return d=d[ai]||d[Ia],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Hr(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(n(33))}function cp(d){return d[wu]||null}var ty=[],mi=-1;function Dr(d){return{current:d}}function mr(d){0>mi||(d.current=ty[mi],ty[mi]=null,mi--)}function or(d,p){mi++,ty[mi]=d.current,d.current=p}var Eo={},Ei=Dr(Eo),aa=Dr(!1),Co=Eo;function ac(d,p){var S=d.type.contextTypes;if(!S)return Eo;var P=d.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===p)return P.__reactInternalMemoizedMaskedChildContext;var D={},z;for(z in S)D[z]=p[z];return P&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=p,d.__reactInternalMemoizedMaskedChildContext=D),D}function Wi(d){return d=d.childContextTypes,d!=null}function Vd(){mr(aa),mr(Ei)}function ny(d,p,S){if(Ei.current!==Eo)throw Error(n(168));or(Ei,p),or(aa,S)}function Hd(d,p,S){var P=d.stateNode;if(p=p.childContextTypes,typeof P.getChildContext!="function")return S;P=P.getChildContext();for(var D in P)if(!(D in p))throw Error(n(108,Oe(d)||"Unknown",D));return Y({},S,P)}function sc(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Eo,Co=Ei.current,or(Ei,d),or(aa,aa.current),!0}function ry(d,p,S){var P=d.stateNode;if(!P)throw Error(n(169));S?(d=Hd(d,p,Co),P.__reactInternalMemoizedMergedChildContext=d,mr(aa),mr(Ei),or(Ei,d)):mr(aa),or(aa,S)}var Ms=null,Wd=!1,up=!1;function Gd(d){Ms===null?Ms=[d]:Ms.push(d)}function Ux(d){Wd=!0,Gd(d)}function Zs(){if(!up&&Ms!==null){up=!0;var d=0,p=zn;try{var S=Ms;for(zn=1;d<S.length;d++){var P=S[d];do P=P(!0);while(P!==null)}Ms=null,Wd=!1}catch(D){throw Ms!==null&&(Ms=Ms.slice(d+1)),he(nt,Zs),D}finally{zn=p,up=!1}}return null}var oc=[],va=0,dp=null,fp=0,sa=[],gi=0,lc=null,mt=1,is="";function Po(d,p){oc[va++]=fp,oc[va++]=dp,dp=d,fp=p}function iy(d,p,S){sa[gi++]=mt,sa[gi++]=is,sa[gi++]=lc,lc=d;var P=mt;d=is;var D=32-tn(P)-1;P&=~(1<<D),S+=1;var z=32-tn(p)+D;if(30<z){var Q=D-D%5;z=(P&(1<<Q)-1).toString(32),P>>=Q,D-=Q,mt=1<<32-tn(p)+D|S<<D|P,is=z+d}else mt=1<<z|S<<D|P,is=d}function ay(d){d.return!==null&&(Po(d,1),iy(d,1,0))}function No(d){for(;d===dp;)dp=oc[--va],oc[va]=null,fp=oc[--va],oc[va]=null;for(;d===lc;)lc=sa[--gi],sa[gi]=null,is=sa[--gi],sa[gi]=null,mt=sa[--gi],sa[gi]=null}var Ci=null,oa=null,xr=!1,as=null;function sy(d,p){var S=no(5,null,null,0);S.elementType="DELETED",S.stateNode=p,S.return=d,p=d.deletions,p===null?(d.deletions=[S],d.flags|=16):p.push(S)}function oy(d,p){switch(d.tag){case 5:var S=d.type;return p=p.nodeType!==1||S.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(d.stateNode=p,Ci=d,oa=To(p.firstChild),!0):!1;case 6:return p=d.pendingProps===""||p.nodeType!==3?null:p,p!==null?(d.stateNode=p,Ci=d,oa=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(S=lc!==null?{id:mt,overflow:is}:null,d.memoizedState={dehydrated:p,treeContext:S,retryLane:1073741824},S=no(18,null,null,0),S.stateNode=p,S.return=d,d.child=S,Ci=d,oa=null,!0):!1;default:return!1}}function hp(d){return(d.mode&1)!==0&&(d.flags&128)===0}function pp(d){if(xr){var p=oa;if(p){var S=p;if(!oy(d,p)){if(hp(d))throw Error(n(418));p=To(S.nextSibling);var P=Ci;p&&oy(d,p)?sy(P,S):(d.flags=d.flags&-4097|2,xr=!1,Ci=d)}}else{if(hp(d))throw Error(n(418));d.flags=d.flags&-4097|2,xr=!1,Ci=d}}}function mp(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Ci=d}function _u(d){if(d!==Ci)return!1;if(!xr)return mp(d),xr=!0,!1;var p;if((p=d.tag!==3)&&!(p=d.tag!==5)&&(p=d.type,p=p!=="head"&&p!=="body"&&!Zg(d.type,d.memoizedProps)),p&&(p=oa)){if(hp(d))throw ly(),Error(n(418));for(;p;)sy(d,p),p=To(p.nextSibling)}if(mp(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));e:{for(d=d.nextSibling,p=0;d;){if(d.nodeType===8){var S=d.data;if(S==="/$"){if(p===0){oa=To(d.nextSibling);break e}p--}else S!=="$"&&S!=="$!"&&S!=="$?"||p++}d=d.nextSibling}oa=null}}else oa=Ci?To(d.stateNode.nextSibling):null;return!0}function ly(){for(var d=oa;d;)d=To(d.nextSibling)}function ml(){oa=Ci=null,xr=!1}function Su(d){as===null?as=[d]:as.push(d)}var YS=A.ReactCurrentBatchConfig;function $d(d,p,S){if(d=S.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(n(309));var P=S.stateNode}if(!P)throw Error(n(147,d));var D=P,z=""+d;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===z?p.ref:(p=function(Q){var fe=D.refs;Q===null?delete fe[z]:fe[z]=Q},p._stringRef=z,p)}if(typeof d!="string")throw Error(n(284));if(!S._owner)throw Error(n(290,d))}return d}function qd(d,p){throw d=Object.prototype.toString.call(p),Error(n(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d))}function cy(d){var p=d._init;return p(d._payload)}function uy(d){function p(Re,_e){if(d){var je=Re.deletions;je===null?(Re.deletions=[_e],Re.flags|=16):je.push(_e)}}function S(Re,_e){if(!d)return null;for(;_e!==null;)p(Re,_e),_e=_e.sibling;return null}function P(Re,_e){for(Re=new Map;_e!==null;)_e.key!==null?Re.set(_e.key,_e):Re.set(_e.index,_e),_e=_e.sibling;return Re}function D(Re,_e){return Re=ju(Re,_e),Re.index=0,Re.sibling=null,Re}function z(Re,_e,je){return Re.index=je,d?(je=Re.alternate,je!==null?(je=je.index,je<_e?(Re.flags|=2,_e):je):(Re.flags|=2,_e)):(Re.flags|=1048576,_e)}function Q(Re){return d&&Re.alternate===null&&(Re.flags|=2),Re}function fe(Re,_e,je,ht){return _e===null||_e.tag!==6?(_e=pM(je,Re.mode,ht),_e.return=Re,_e):(_e=D(_e,je),_e.return=Re,_e)}function we(Re,_e,je,ht){var Ht=je.type;return Ht===O?at(Re,_e,je.props.children,ht,je.key):_e!==null&&(_e.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===ee&&cy(Ht)===_e.type)?(ht=D(_e,je.props),ht.ref=$d(Re,_e,je),ht.return=Re,ht):(ht=ob(je.type,je.key,je.props,null,Re.mode,ht),ht.ref=$d(Re,_e,je),ht.return=Re,ht)}function Fe(Re,_e,je,ht){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==je.containerInfo||_e.stateNode.implementation!==je.implementation?(_e=mM(je,Re.mode,ht),_e.return=Re,_e):(_e=D(_e,je.children||[]),_e.return=Re,_e)}function at(Re,_e,je,ht,Ht){return _e===null||_e.tag!==7?(_e=df(je,Re.mode,ht,Ht),_e.return=Re,_e):(_e=D(_e,je),_e.return=Re,_e)}function lt(Re,_e,je){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return _e=pM(""+_e,Re.mode,je),_e.return=Re,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case R:return je=ob(_e.type,_e.key,_e.props,null,Re.mode,je),je.ref=$d(Re,null,_e),je.return=Re,je;case N:return _e=mM(_e,Re.mode,je),_e.return=Re,_e;case ee:var ht=_e._init;return lt(Re,ht(_e._payload),je)}if(te(_e)||B(_e))return _e=df(_e,Re.mode,je,null),_e.return=Re,_e;qd(Re,_e)}return null}function rt(Re,_e,je,ht){var Ht=_e!==null?_e.key:null;if(typeof je=="string"&&je!==""||typeof je=="number")return Ht!==null?null:fe(Re,_e,""+je,ht);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case R:return je.key===Ht?we(Re,_e,je,ht):null;case N:return je.key===Ht?Fe(Re,_e,je,ht):null;case ee:return Ht=je._init,rt(Re,_e,Ht(je._payload),ht)}if(te(je)||B(je))return Ht!==null?null:at(Re,_e,je,ht,null);qd(Re,je)}return null}function Ot(Re,_e,je,ht,Ht){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return Re=Re.get(je)||null,fe(_e,Re,""+ht,Ht);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case R:return Re=Re.get(ht.key===null?je:ht.key)||null,we(_e,Re,ht,Ht);case N:return Re=Re.get(ht.key===null?je:ht.key)||null,Fe(_e,Re,ht,Ht);case ee:var Zt=ht._init;return Ot(Re,_e,je,Zt(ht._payload),Ht)}if(te(ht)||B(ht))return Re=Re.get(je)||null,at(_e,Re,ht,Ht,null);qd(_e,ht)}return null}function Ut(Re,_e,je,ht){for(var Ht=null,Zt=null,Jt=_e,cn=_e=0,Xi=null;Jt!==null&&cn<je.length;cn++){Jt.index>cn?(Xi=Jt,Jt=null):Xi=Jt.sibling;var $n=rt(Re,Jt,je[cn],ht);if($n===null){Jt===null&&(Jt=Xi);break}d&&Jt&&$n.alternate===null&&p(Re,Jt),_e=z($n,_e,cn),Zt===null?Ht=$n:Zt.sibling=$n,Zt=$n,Jt=Xi}if(cn===je.length)return S(Re,Jt),xr&&Po(Re,cn),Ht;if(Jt===null){for(;cn<je.length;cn++)Jt=lt(Re,je[cn],ht),Jt!==null&&(_e=z(Jt,_e,cn),Zt===null?Ht=Jt:Zt.sibling=Jt,Zt=Jt);return xr&&Po(Re,cn),Ht}for(Jt=P(Re,Jt);cn<je.length;cn++)Xi=Ot(Jt,Re,cn,je[cn],ht),Xi!==null&&(d&&Xi.alternate!==null&&Jt.delete(Xi.key===null?cn:Xi.key),_e=z(Xi,_e,cn),Zt===null?Ht=Xi:Zt.sibling=Xi,Zt=Xi);return d&&Jt.forEach(function(Iu){return p(Re,Iu)}),xr&&Po(Re,cn),Ht}function zt(Re,_e,je,ht){var Ht=B(je);if(typeof Ht!="function")throw Error(n(150));if(je=Ht.call(je),je==null)throw Error(n(151));for(var Zt=Ht=null,Jt=_e,cn=_e=0,Xi=null,$n=je.next();Jt!==null&&!$n.done;cn++,$n=je.next()){Jt.index>cn?(Xi=Jt,Jt=null):Xi=Jt.sibling;var Iu=rt(Re,Jt,$n.value,ht);if(Iu===null){Jt===null&&(Jt=Xi);break}d&&Jt&&Iu.alternate===null&&p(Re,Jt),_e=z(Iu,_e,cn),Zt===null?Ht=Iu:Zt.sibling=Iu,Zt=Iu,Jt=Xi}if($n.done)return S(Re,Jt),xr&&Po(Re,cn),Ht;if(Jt===null){for(;!$n.done;cn++,$n=je.next())$n=lt(Re,$n.value,ht),$n!==null&&(_e=z($n,_e,cn),Zt===null?Ht=$n:Zt.sibling=$n,Zt=$n);return xr&&Po(Re,cn),Ht}for(Jt=P(Re,Jt);!$n.done;cn++,$n=je.next())$n=Ot(Jt,Re,cn,$n.value,ht),$n!==null&&(d&&$n.alternate!==null&&Jt.delete($n.key===null?cn:$n.key),_e=z($n,_e,cn),Zt===null?Ht=$n:Zt.sibling=$n,Zt=$n);return d&&Jt.forEach(function(eX){return p(Re,eX)}),xr&&Po(Re,cn),Ht}function si(Re,_e,je,ht){if(typeof je=="object"&&je!==null&&je.type===O&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case R:e:{for(var Ht=je.key,Zt=_e;Zt!==null;){if(Zt.key===Ht){if(Ht=je.type,Ht===O){if(Zt.tag===7){S(Re,Zt.sibling),_e=D(Zt,je.props.children),_e.return=Re,Re=_e;break e}}else if(Zt.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===ee&&cy(Ht)===Zt.type){S(Re,Zt.sibling),_e=D(Zt,je.props),_e.ref=$d(Re,Zt,je),_e.return=Re,Re=_e;break e}S(Re,Zt);break}else p(Re,Zt);Zt=Zt.sibling}je.type===O?(_e=df(je.props.children,Re.mode,ht,je.key),_e.return=Re,Re=_e):(ht=ob(je.type,je.key,je.props,null,Re.mode,ht),ht.ref=$d(Re,_e,je),ht.return=Re,Re=ht)}return Q(Re);case N:e:{for(Zt=je.key;_e!==null;){if(_e.key===Zt)if(_e.tag===4&&_e.stateNode.containerInfo===je.containerInfo&&_e.stateNode.implementation===je.implementation){S(Re,_e.sibling),_e=D(_e,je.children||[]),_e.return=Re,Re=_e;break e}else{S(Re,_e);break}else p(Re,_e);_e=_e.sibling}_e=mM(je,Re.mode,ht),_e.return=Re,Re=_e}return Q(Re);case ee:return Zt=je._init,si(Re,_e,Zt(je._payload),ht)}if(te(je))return Ut(Re,_e,je,ht);if(B(je))return zt(Re,_e,je,ht);qd(Re,je)}return typeof je=="string"&&je!==""||typeof je=="number"?(je=""+je,_e!==null&&_e.tag===6?(S(Re,_e.sibling),_e=D(_e,je),_e.return=Re,Re=_e):(S(Re,_e),_e=pM(je,Re.mode,ht),_e.return=Re,Re=_e),Q(Re)):S(Re,_e)}return si}var cc=uy(!0),Xd=uy(!1),uc=Dr(null),dc=null,Oo=null,Mu=null;function fc(){Mu=Oo=dc=null}function Yd(d){var p=uc.current;mr(uc),d._currentValue=p}function Kd(d,p,S){for(;d!==null;){var P=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,P!==null&&(P.childLanes|=p)):P!==null&&(P.childLanes&p)!==p&&(P.childLanes|=p),d===S)break;d=d.return}}function gl(d,p){dc=d,Mu=Oo=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&p)!==0&&(Mn=!0),d.firstContext=null)}function Da(d){var p=d._currentValue;if(Mu!==d)if(d={context:d,memoizedValue:p,next:null},Oo===null){if(dc===null)throw Error(n(308));Oo=d,dc.dependencies={lanes:0,firstContext:d}}else Oo=Oo.next=d;return p}var Ro=null;function dy(d){Ro===null?Ro=[d]:Ro.push(d)}function Zd(d,p,S,P){var D=p.interleaved;return D===null?(S.next=S,dy(p)):(S.next=D.next,D.next=S),p.interleaved=S,Ts(d,P)}function Ts(d,p){d.lanes|=p;var S=d.alternate;for(S!==null&&(S.lanes|=p),S=d,d=d.return;d!==null;)d.childLanes|=p,S=d.alternate,S!==null&&(S.childLanes|=p),S=d,d=d.return;return S.tag===3?S.stateNode:null}var Jn=!1;function Sn(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wr(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Qn(d,p){return{eventTime:d,lane:p,tag:0,payload:null,callback:null,next:null}}function Tr(d,p,S){var P=d.updateQueue;if(P===null)return null;if(P=P.shared,(Hn&2)!==0){var D=P.pending;return D===null?p.next=p:(p.next=D.next,D.next=p),P.pending=p,Ts(d,S)}return D=P.interleaved,D===null?(p.next=p,dy(P)):(p.next=D.next,D.next=p),P.interleaved=p,Ts(d,S)}function Gi(d,p,S){if(p=p.updateQueue,p!==null&&(p=p.shared,(S&4194240)!==0)){var P=p.lanes;P&=d.pendingLanes,S|=P,p.lanes=S,iu(d,S)}}function hc(d,p){var S=d.updateQueue,P=d.alternate;if(P!==null&&(P=P.updateQueue,S===P)){var D=null,z=null;if(S=S.firstBaseUpdate,S!==null){do{var Q={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};z===null?D=z=Q:z=z.next=Q,S=S.next}while(S!==null);z===null?D=z=p:z=z.next=p}else D=z=p;S={baseState:P.baseState,firstBaseUpdate:D,lastBaseUpdate:z,shared:P.shared,effects:P.effects},d.updateQueue=S;return}d=S.lastBaseUpdate,d===null?S.firstBaseUpdate=p:d.next=p,S.lastBaseUpdate=p}function Lr(d,p,S,P){var D=d.updateQueue;Jn=!1;var z=D.firstBaseUpdate,Q=D.lastBaseUpdate,fe=D.shared.pending;if(fe!==null){D.shared.pending=null;var we=fe,Fe=we.next;we.next=null,Q===null?z=Fe:Q.next=Fe,Q=we;var at=d.alternate;at!==null&&(at=at.updateQueue,fe=at.lastBaseUpdate,fe!==Q&&(fe===null?at.firstBaseUpdate=Fe:fe.next=Fe,at.lastBaseUpdate=we))}if(z!==null){var lt=D.baseState;Q=0,at=Fe=we=null,fe=z;do{var rt=fe.lane,Ot=fe.eventTime;if((P&rt)===rt){at!==null&&(at=at.next={eventTime:Ot,lane:0,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null});e:{var Ut=d,zt=fe;switch(rt=p,Ot=S,zt.tag){case 1:if(Ut=zt.payload,typeof Ut=="function"){lt=Ut.call(Ot,lt,rt);break e}lt=Ut;break e;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=zt.payload,rt=typeof Ut=="function"?Ut.call(Ot,lt,rt):Ut,rt==null)break e;lt=Y({},lt,rt);break e;case 2:Jn=!0}}fe.callback!==null&&fe.lane!==0&&(d.flags|=64,rt=D.effects,rt===null?D.effects=[fe]:rt.push(fe))}else Ot={eventTime:Ot,lane:rt,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},at===null?(Fe=at=Ot,we=lt):at=at.next=Ot,Q|=rt;if(fe=fe.next,fe===null){if(fe=D.shared.pending,fe===null)break;rt=fe,fe=rt.next,rt.next=null,D.lastBaseUpdate=rt,D.shared.pending=null}}while(!0);if(at===null&&(we=lt),D.baseState=we,D.firstBaseUpdate=Fe,D.lastBaseUpdate=at,p=D.shared.interleaved,p!==null){D=p;do Q|=D.lane,D=D.next;while(D!==p)}else z===null&&(D.shared.lanes=0);of|=Q,d.lanes=Q,d.memoizedState=lt}}function Tu(d,p,S){if(d=p.effects,p.effects=null,d!==null)for(p=0;p<d.length;p++){var P=d[p],D=P.callback;if(D!==null){if(P.callback=null,P=S,typeof D!="function")throw Error(n(191,D));D.call(P)}}}var Js={},La=Dr(Js),pc=Dr(Js),ko=Dr(Js);function Xr(d){if(d===Js)throw Error(n(174));return d}function Jd(d,p){switch(or(ko,p),or(pc,d),or(La,Js),d=p.nodeType,d){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:St(null,"");break;default:d=d===8?p.parentNode:p,p=d.namespaceURI||null,d=d.tagName,p=St(p,d)}mr(La),or(La,p)}function yl(){mr(La),mr(pc),mr(ko)}function mc(d){Xr(ko.current);var p=Xr(La.current),S=St(p,d.type);p!==S&&(or(pc,d),or(La,S))}function Au(d){pc.current===d&&(mr(La),mr(pc))}var br=Dr(0);function As(d){for(var p=d;p!==null;){if(p.tag===13){var S=p.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||S.data==="$?"||S.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Eu=[];function Qs(){for(var d=0;d<Eu.length;d++)Eu[d]._workInProgressVersionPrimary=null;Eu.length=0}var gc=A.ReactCurrentDispatcher,yc=A.ReactCurrentBatchConfig,jo=0,gr=null,Ur=null,Bn=null,Es=!1,$i=!1,vl=0,xa=0;function Pi(){throw Error(n(321))}function Qd(d,p){if(p===null)return!1;for(var S=0;S<p.length&&S<d.length;S++)if(!ka(d[S],p[S]))return!1;return!0}function ef(d,p,S,P,D,z){if(jo=z,gr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,gc.current=d===null||d.memoizedState===null?Gx:$x,d=S(P,D),$i){z=0;do{if($i=!1,vl=0,25<=z)throw Error(n(301));z+=1,Bn=Ur=null,p.updateQueue=null,gc.current=qx,d=S(P,D)}while($i)}if(gc.current=_p,p=Ur!==null&&Ur.next!==null,jo=0,Bn=Ur=gr=null,Es=!1,p)throw Error(n(300));return d}function fy(){var d=vl!==0;return vl=0,d}function Ni(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?gr.memoizedState=Bn=d:Bn=Bn.next=d,Bn}function Ua(){if(Ur===null){var d=gr.alternate;d=d!==null?d.memoizedState:null}else d=Ur.next;var p=Bn===null?gr.memoizedState:Bn.next;if(p!==null)Bn=p,Ur=d;else{if(d===null)throw Error(n(310));Ur=d,d={memoizedState:Ur.memoizedState,baseState:Ur.baseState,baseQueue:Ur.baseQueue,queue:Ur.queue,next:null},Bn===null?gr.memoizedState=Bn=d:Bn=Bn.next=d}return Bn}function Cu(d,p){return typeof p=="function"?p(d):p}function tf(d){var p=Ua(),S=p.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=d;var P=Ur,D=P.baseQueue,z=S.pending;if(z!==null){if(D!==null){var Q=D.next;D.next=z.next,z.next=Q}P.baseQueue=D=z,S.pending=null}if(D!==null){z=D.next,P=P.baseState;var fe=Q=null,we=null,Fe=z;do{var at=Fe.lane;if((jo&at)===at)we!==null&&(we=we.next={lane:0,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),P=Fe.hasEagerState?Fe.eagerState:d(P,Fe.action);else{var lt={lane:at,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null};we===null?(fe=we=lt,Q=P):we=we.next=lt,gr.lanes|=at,of|=at}Fe=Fe.next}while(Fe!==null&&Fe!==z);we===null?Q=P:we.next=fe,ka(P,p.memoizedState)||(Mn=!0),p.memoizedState=P,p.baseState=Q,p.baseQueue=we,S.lastRenderedState=P}if(d=S.interleaved,d!==null){D=d;do z=D.lane,gr.lanes|=z,of|=z,D=D.next;while(D!==d)}else D===null&&(S.lanes=0);return[p.memoizedState,S.dispatch]}function Io(d){var p=Ua(),S=p.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=d;var P=S.dispatch,D=S.pending,z=p.memoizedState;if(D!==null){S.pending=null;var Q=D=D.next;do z=d(z,Q.action),Q=Q.next;while(Q!==D);ka(z,p.memoizedState)||(Mn=!0),p.memoizedState=z,p.baseQueue===null&&(p.baseState=z),S.lastRenderedState=z}return[z,P]}function hy(){}function py(d,p){var S=gr,P=Ua(),D=p(),z=!ka(P.memoizedState,D);if(z&&(P.memoizedState=D,Mn=!0),P=P.queue,yy(Fx.bind(null,S,P,d),[d]),P.getSnapshot!==p||z||Bn!==null&&Bn.memoizedState.tag&1){if(S.flags|=2048,Cs(9,nf.bind(null,S,P,D,p),void 0,null),qi===null)throw Error(n(349));(jo&30)!==0||gp(S,p,D)}return D}function gp(d,p,S){d.flags|=16384,d={getSnapshot:p,value:S},p=gr.updateQueue,p===null?(p={lastEffect:null,stores:null},gr.updateQueue=p,p.stores=[d]):(S=p.stores,S===null?p.stores=[d]:S.push(d))}function nf(d,p,S,P){p.value=S,p.getSnapshot=P,zx(p)&&my(d)}function Fx(d,p,S){return S(function(){zx(p)&&my(d)})}function zx(d){var p=d.getSnapshot;d=d.value;try{var S=p();return!ka(d,S)}catch{return!0}}function my(d){var p=Ts(d,1);p!==null&&zo(p,d,1,-1)}function gy(d){var p=Ni();return typeof d=="function"&&(d=d()),p.memoizedState=p.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cu,lastRenderedState:d},p.queue=d,d=d.dispatch=vc.bind(null,gr,d),[p.memoizedState,d]}function Cs(d,p,S,P){return d={tag:d,create:p,destroy:S,deps:P,next:null},p=gr.updateQueue,p===null?(p={lastEffect:null,stores:null},gr.updateQueue=p,p.lastEffect=d.next=d):(S=p.lastEffect,S===null?p.lastEffect=d.next=d:(P=S.next,S.next=d,d.next=P,p.lastEffect=d)),d}function Bx(){return Ua().memoizedState}function eo(d,p,S,P){var D=Ni();gr.flags|=d,D.memoizedState=Cs(1|p,S,void 0,P===void 0?null:P)}function rf(d,p,S,P){var D=Ua();P=P===void 0?null:P;var z=void 0;if(Ur!==null){var Q=Ur.memoizedState;if(z=Q.destroy,P!==null&&Qd(P,Q.deps)){D.memoizedState=Cs(p,S,z,P);return}}gr.flags|=d,D.memoizedState=Cs(1|p,S,z,P)}function la(d,p){return eo(8390656,8,d,p)}function yy(d,p){return rf(2048,8,d,p)}function vy(d,p){return rf(4,2,d,p)}function Vx(d,p){return rf(4,4,d,p)}function Hx(d,p){if(typeof p=="function")return d=d(),p(d),function(){p(null)};if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function xy(d,p,S){return S=S!=null?S.concat([d]):null,rf(4,4,Hx.bind(null,p,d),S)}function yp(){}function Wx(d,p){var S=Ua();p=p===void 0?null:p;var P=S.memoizedState;return P!==null&&p!==null&&Qd(p,P[1])?P[0]:(S.memoizedState=[d,p],d)}function Fa(d,p){var S=Ua();p=p===void 0?null:p;var P=S.memoizedState;return P!==null&&p!==null&&Qd(p,P[1])?P[0]:(d=d(),S.memoizedState=[d,p],d)}function vp(d,p,S){return(jo&21)===0?(d.baseState&&(d.baseState=!1,Mn=!0),d.memoizedState=S):(ka(S,p)||(S=sr(),gr.lanes|=S,of|=S,d.baseState=!0),p)}function KS(d,p){var S=zn;zn=S!==0&&4>S?S:4,d(!0);var P=yc.transition;yc.transition={};try{d(!1),p()}finally{zn=S,yc.transition=P}}function Do(){return Ua().memoizedState}function xp(d,p,S){var P=Ru(d);if(S={lane:P,action:S,hasEagerState:!1,eagerState:null,next:null},af(d))bp(p,S);else if(S=Zd(d,p,S,P),S!==null){var D=Ba();zo(S,d,P,D),wp(S,p,P)}}function vc(d,p,S){var P=Ru(d),D={lane:P,action:S,hasEagerState:!1,eagerState:null,next:null};if(af(d))bp(p,D);else{var z=d.alternate;if(d.lanes===0&&(z===null||z.lanes===0)&&(z=p.lastRenderedReducer,z!==null))try{var Q=p.lastRenderedState,fe=z(Q,S);if(D.hasEagerState=!0,D.eagerState=fe,ka(fe,Q)){var we=p.interleaved;we===null?(D.next=D,dy(p)):(D.next=we.next,we.next=D),p.interleaved=D;return}}catch{}finally{}S=Zd(d,p,D,P),S!==null&&(D=Ba(),zo(S,d,P,D),wp(S,p,P))}}function af(d){var p=d.alternate;return d===gr||p!==null&&p===gr}function bp(d,p){$i=Es=!0;var S=d.pending;S===null?p.next=p:(p.next=S.next,S.next=p),d.pending=p}function wp(d,p,S){if((S&4194240)!==0){var P=p.lanes;P&=d.pendingLanes,S|=P,p.lanes=S,iu(d,S)}}var _p={readContext:Da,useCallback:Pi,useContext:Pi,useEffect:Pi,useImperativeHandle:Pi,useInsertionEffect:Pi,useLayoutEffect:Pi,useMemo:Pi,useReducer:Pi,useRef:Pi,useState:Pi,useDebugValue:Pi,useDeferredValue:Pi,useTransition:Pi,useMutableSource:Pi,useSyncExternalStore:Pi,useId:Pi,unstable_isNewReconciler:!1},Gx={readContext:Da,useCallback:function(d,p){return Ni().memoizedState=[d,p===void 0?null:p],d},useContext:Da,useEffect:la,useImperativeHandle:function(d,p,S){return S=S!=null?S.concat([d]):null,eo(4194308,4,Hx.bind(null,p,d),S)},useLayoutEffect:function(d,p){return eo(4194308,4,d,p)},useInsertionEffect:function(d,p){return eo(4,2,d,p)},useMemo:function(d,p){var S=Ni();return p=p===void 0?null:p,d=d(),S.memoizedState=[d,p],d},useReducer:function(d,p,S){var P=Ni();return p=S!==void 0?S(p):p,P.memoizedState=P.baseState=p,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:p},P.queue=d,d=d.dispatch=xp.bind(null,gr,d),[P.memoizedState,d]},useRef:function(d){var p=Ni();return d={current:d},p.memoizedState=d},useState:gy,useDebugValue:yp,useDeferredValue:function(d){return Ni().memoizedState=d},useTransition:function(){var d=gy(!1),p=d[0];return d=KS.bind(null,d[1]),Ni().memoizedState=d,[p,d]},useMutableSource:function(){},useSyncExternalStore:function(d,p,S){var P=gr,D=Ni();if(xr){if(S===void 0)throw Error(n(407));S=S()}else{if(S=p(),qi===null)throw Error(n(349));(jo&30)!==0||gp(P,p,S)}D.memoizedState=S;var z={value:S,getSnapshot:p};return D.queue=z,la(Fx.bind(null,P,z,d),[d]),P.flags|=2048,Cs(9,nf.bind(null,P,z,S,p),void 0,null),S},useId:function(){var d=Ni(),p=qi.identifierPrefix;if(xr){var S=is,P=mt;S=(P&~(1<<32-tn(P)-1)).toString(32)+S,p=":"+p+"R"+S,S=vl++,0<S&&(p+="H"+S.toString(32)),p+=":"}else S=xa++,p=":"+p+"r"+S.toString(32)+":";return d.memoizedState=p},unstable_isNewReconciler:!1},$x={readContext:Da,useCallback:Wx,useContext:Da,useEffect:yy,useImperativeHandle:xy,useInsertionEffect:vy,useLayoutEffect:Vx,useMemo:Fa,useReducer:tf,useRef:Bx,useState:function(){return tf(Cu)},useDebugValue:yp,useDeferredValue:function(d){var p=Ua();return vp(p,Ur.memoizedState,d)},useTransition:function(){var d=tf(Cu)[0],p=Ua().memoizedState;return[d,p]},useMutableSource:hy,useSyncExternalStore:py,useId:Do,unstable_isNewReconciler:!1},qx={readContext:Da,useCallback:Wx,useContext:Da,useEffect:yy,useImperativeHandle:xy,useInsertionEffect:vy,useLayoutEffect:Vx,useMemo:Fa,useReducer:Io,useRef:Bx,useState:function(){return Io(Cu)},useDebugValue:yp,useDeferredValue:function(d){var p=Ua();return Ur===null?p.memoizedState=d:vp(p,Ur.memoizedState,d)},useTransition:function(){var d=Io(Cu)[0],p=Ua().memoizedState;return[d,p]},useMutableSource:hy,useSyncExternalStore:py,useId:Do,unstable_isNewReconciler:!1};function ss(d,p){if(d&&d.defaultProps){p=Y({},p),d=d.defaultProps;for(var S in d)p[S]===void 0&&(p[S]=d[S]);return p}return p}function sf(d,p,S,P){p=d.memoizedState,S=S(P,p),S=S==null?p:Y({},p,S),d.memoizedState=S,d.lanes===0&&(d.updateQueue.baseState=S)}var Sp={isMounted:function(d){return(d=d._reactInternals)?re(d)===d:!1},enqueueSetState:function(d,p,S){d=d._reactInternals;var P=Ba(),D=Ru(d),z=Qn(P,D);z.payload=p,S!=null&&(z.callback=S),p=Tr(d,z,D),p!==null&&(zo(p,d,D,P),Gi(p,d,D))},enqueueReplaceState:function(d,p,S){d=d._reactInternals;var P=Ba(),D=Ru(d),z=Qn(P,D);z.tag=1,z.payload=p,S!=null&&(z.callback=S),p=Tr(d,z,D),p!==null&&(zo(p,d,D,P),Gi(p,d,D))},enqueueForceUpdate:function(d,p){d=d._reactInternals;var S=Ba(),P=Ru(d),D=Qn(S,P);D.tag=2,p!=null&&(D.callback=p),p=Tr(d,D,P),p!==null&&(zo(p,d,P,S),Gi(p,d,P))}};function Xx(d,p,S,P,D,z,Q){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(P,z,Q):p.prototype&&p.prototype.isPureReactComponent?!Ql(S,P)||!Ql(D,z):!0}function g(d,p,S){var P=!1,D=Eo,z=p.contextType;return typeof z=="object"&&z!==null?z=Da(z):(D=Wi(p)?Co:Ei.current,P=p.contextTypes,z=(P=P!=null)?ac(d,D):Eo),p=new p(S,z),d.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Sp,d.stateNode=p,p._reactInternals=d,P&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=D,d.__reactInternalMemoizedMaskedChildContext=z),p}function v(d,p,S,P){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(S,P),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(S,P),p.state!==d&&Sp.enqueueReplaceState(p,p.state,null)}function E(d,p,S,P){var D=d.stateNode;D.props=S,D.state=d.memoizedState,D.refs={},Sn(d);var z=p.contextType;typeof z=="object"&&z!==null?D.context=Da(z):(z=Wi(p)?Co:Ei.current,D.context=ac(d,z)),D.state=d.memoizedState,z=p.getDerivedStateFromProps,typeof z=="function"&&(sf(d,p,z,S),D.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(p=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),p!==D.state&&Sp.enqueueReplaceState(D,D.state,null),Lr(d,S,D,P),D.state=d.memoizedState),typeof D.componentDidMount=="function"&&(d.flags|=4194308)}function j(d,p){try{var S="",P=p;do S+=Ne(P),P=P.return;while(P);var D=S}catch(z){D=`
Error generating stack: `+z.message+`
`+z.stack}return{value:d,source:p,stack:D,digest:null}}function U(d,p,S){return{value:d,source:null,stack:S??null,digest:p??null}}function H(d,p){try{console.error(p.value)}catch(S){setTimeout(function(){throw S})}}var ue=typeof WeakMap=="function"?WeakMap:Map;function Se(d,p,S){S=Qn(-1,S),S.tag=3,S.payload={element:null};var P=p.value;return S.callback=function(){tb||(tb=!0,sM=P),H(d,p)},S}function He(d,p,S){S=Qn(-1,S),S.tag=3;var P=d.type.getDerivedStateFromError;if(typeof P=="function"){var D=p.value;S.payload=function(){return P(D)},S.callback=function(){H(d,p)}}var z=d.stateNode;return z!==null&&typeof z.componentDidCatch=="function"&&(S.callback=function(){H(d,p),typeof P!="function"&&(Nu===null?Nu=new Set([this]):Nu.add(this));var Q=p.stack;this.componentDidCatch(p.value,{componentStack:Q!==null?Q:""})}),S}function ft(d,p,S){var P=d.pingCache;if(P===null){P=d.pingCache=new ue;var D=new Set;P.set(p,D)}else D=P.get(p),D===void 0&&(D=new Set,P.set(p,D));D.has(S)||(D.add(S),d=Hq.bind(null,d,p,S),p.then(d,d))}function Rt(d){do{var p;if((p=d.tag===13)&&(p=d.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return d;d=d.return}while(d!==null);return null}function hn(d,p,S,P,D){return(d.mode&1)===0?(d===p?d.flags|=65536:(d.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(p=Qn(-1,1),p.tag=2,Tr(S,p,1))),S.lanes|=1),d):(d.flags|=65536,d.lanes=D,d)}var Xt=A.ReactCurrentOwner,Mn=!1;function Tt(d,p,S,P){p.child=d===null?Xd(p,null,S,P):cc(p,d.child,S,P)}function Oi(d,p,S,P,D){S=S.render;var z=p.ref;return gl(p,D),P=ef(d,p,S,P,z,D),S=fy(),d!==null&&!Mn?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~D,xc(d,p,D)):(xr&&S&&ay(p),p.flags|=1,Tt(d,p,P,D),p.child)}function za(d,p,S,P,D){if(d===null){var z=S.type;return typeof z=="function"&&!hM(z)&&z.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(p.tag=15,p.type=z,Le(d,p,z,P,D)):(d=ob(S.type,null,P,p,p.mode,D),d.ref=p.ref,d.return=p,p.child=d)}if(z=d.child,(d.lanes&D)===0){var Q=z.memoizedProps;if(S=S.compare,S=S!==null?S:Ql,S(Q,P)&&d.ref===p.ref)return xc(d,p,D)}return p.flags|=1,d=ju(z,P),d.ref=p.ref,d.return=p,p.child=d}function Le(d,p,S,P,D){if(d!==null){var z=d.memoizedProps;if(Ql(z,P)&&d.ref===p.ref)if(Mn=!1,p.pendingProps=P=z,(d.lanes&D)!==0)(d.flags&131072)!==0&&(Mn=!0);else return p.lanes=d.lanes,xc(d,p,D)}return _t(d,p,S,P,D)}function Te(d,p,S){var P=p.pendingProps,D=P.children,z=d!==null?d.memoizedState:null;if(P.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},or(Tp,Ps),Ps|=S;else{if((S&1073741824)===0)return d=z!==null?z.baseLanes|S:S,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:d,cachePool:null,transitions:null},p.updateQueue=null,or(Tp,Ps),Ps|=d,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},P=z!==null?z.baseLanes:S,or(Tp,Ps),Ps|=P}else z!==null?(P=z.baseLanes|S,p.memoizedState=null):P=S,or(Tp,Ps),Ps|=P;return Tt(d,p,D,S),p.child}function Be(d,p){var S=p.ref;(d===null&&S!==null||d!==null&&d.ref!==S)&&(p.flags|=512,p.flags|=2097152)}function _t(d,p,S,P,D){var z=Wi(S)?Co:Ei.current;return z=ac(p,z),gl(p,D),S=ef(d,p,S,P,z,D),P=fy(),d!==null&&!Mn?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~D,xc(d,p,D)):(xr&&P&&ay(p),p.flags|=1,Tt(d,p,S,D),p.child)}function Bt(d,p,S,P,D){if(Wi(S)){var z=!0;sc(p)}else z=!1;if(gl(p,D),p.stateNode===null)Kx(d,p),g(p,S,P),E(p,S,P,D),P=!0;else if(d===null){var Q=p.stateNode,fe=p.memoizedProps;Q.props=fe;var we=Q.context,Fe=S.contextType;typeof Fe=="object"&&Fe!==null?Fe=Da(Fe):(Fe=Wi(S)?Co:Ei.current,Fe=ac(p,Fe));var at=S.getDerivedStateFromProps,lt=typeof at=="function"||typeof Q.getSnapshotBeforeUpdate=="function";lt||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(fe!==P||we!==Fe)&&v(p,Q,P,Fe),Jn=!1;var rt=p.memoizedState;Q.state=rt,Lr(p,P,Q,D),we=p.memoizedState,fe!==P||rt!==we||aa.current||Jn?(typeof at=="function"&&(sf(p,S,at,P),we=p.memoizedState),(fe=Jn||Xx(p,S,fe,P,rt,we,Fe))?(lt||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(p.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=P,p.memoizedState=we),Q.props=P,Q.state=we,Q.context=Fe,P=fe):(typeof Q.componentDidMount=="function"&&(p.flags|=4194308),P=!1)}else{Q=p.stateNode,Wr(d,p),fe=p.memoizedProps,Fe=p.type===p.elementType?fe:ss(p.type,fe),Q.props=Fe,lt=p.pendingProps,rt=Q.context,we=S.contextType,typeof we=="object"&&we!==null?we=Da(we):(we=Wi(S)?Co:Ei.current,we=ac(p,we));var Ot=S.getDerivedStateFromProps;(at=typeof Ot=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(fe!==lt||rt!==we)&&v(p,Q,P,we),Jn=!1,rt=p.memoizedState,Q.state=rt,Lr(p,P,Q,D);var Ut=p.memoizedState;fe!==lt||rt!==Ut||aa.current||Jn?(typeof Ot=="function"&&(sf(p,S,Ot,P),Ut=p.memoizedState),(Fe=Jn||Xx(p,S,Fe,P,rt,Ut,we)||!1)?(at||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(P,Ut,we),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(P,Ut,we)),typeof Q.componentDidUpdate=="function"&&(p.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof Q.componentDidUpdate!="function"||fe===d.memoizedProps&&rt===d.memoizedState||(p.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||fe===d.memoizedProps&&rt===d.memoizedState||(p.flags|=1024),p.memoizedProps=P,p.memoizedState=Ut),Q.props=P,Q.state=Ut,Q.context=we,P=Fe):(typeof Q.componentDidUpdate!="function"||fe===d.memoizedProps&&rt===d.memoizedState||(p.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||fe===d.memoizedProps&&rt===d.memoizedState||(p.flags|=1024),P=!1)}return xn(d,p,S,P,z,D)}function xn(d,p,S,P,D,z){Be(d,p);var Q=(p.flags&128)!==0;if(!P&&!Q)return D&&ry(p,S,!1),xc(d,p,z);P=p.stateNode,Xt.current=p;var fe=Q&&typeof S.getDerivedStateFromError!="function"?null:P.render();return p.flags|=1,d!==null&&Q?(p.child=cc(p,d.child,null,z),p.child=cc(p,null,fe,z)):Tt(d,p,fe,z),p.memoizedState=P.state,D&&ry(p,S,!0),p.child}function pn(d){var p=d.stateNode;p.pendingContext?ny(d,p.pendingContext,p.pendingContext!==p.context):p.context&&ny(d,p.context,!1),Jd(d,p.containerInfo)}function Fn(d,p,S,P,D){return ml(),Su(D),p.flags|=256,Tt(d,p,S,P),p.child}var Yr={dehydrated:null,treeContext:null,retryLane:0};function Un(d){return{baseLanes:d,cachePool:null,transitions:null}}function Lo(d,p,S){var P=p.pendingProps,D=br.current,z=!1,Q=(p.flags&128)!==0,fe;if((fe=Q)||(fe=d!==null&&d.memoizedState===null?!1:(D&2)!==0),fe?(z=!0,p.flags&=-129):(d===null||d.memoizedState!==null)&&(D|=1),or(br,D&1),d===null)return pp(p),d=p.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((p.mode&1)===0?p.lanes=1:d.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(Q=P.children,d=P.fallback,z?(P=p.mode,z=p.child,Q={mode:"hidden",children:Q},(P&1)===0&&z!==null?(z.childLanes=0,z.pendingProps=Q):z=lb(Q,P,0,null),d=df(d,P,S,null),z.return=p,d.return=p,z.sibling=d,p.child=z,p.child.memoizedState=Un(S),p.memoizedState=Yr,d):by(p,Q));if(D=d.memoizedState,D!==null&&(fe=D.dehydrated,fe!==null))return Oq(d,p,Q,P,fe,D,S);if(z){z=P.fallback,Q=p.mode,D=d.child,fe=D.sibling;var we={mode:"hidden",children:P.children};return(Q&1)===0&&p.child!==D?(P=p.child,P.childLanes=0,P.pendingProps=we,p.deletions=null):(P=ju(D,we),P.subtreeFlags=D.subtreeFlags&14680064),fe!==null?z=ju(fe,z):(z=df(z,Q,S,null),z.flags|=2),z.return=p,P.return=p,P.sibling=z,p.child=P,P=z,z=p.child,Q=d.child.memoizedState,Q=Q===null?Un(S):{baseLanes:Q.baseLanes|S,cachePool:null,transitions:Q.transitions},z.memoizedState=Q,z.childLanes=d.childLanes&~S,p.memoizedState=Yr,P}return z=d.child,d=z.sibling,P=ju(z,{mode:"visible",children:P.children}),(p.mode&1)===0&&(P.lanes=S),P.return=p,P.sibling=null,d!==null&&(S=p.deletions,S===null?(p.deletions=[d],p.flags|=16):S.push(d)),p.child=P,p.memoizedState=null,P}function by(d,p){return p=lb({mode:"visible",children:p},d.mode,0,null),p.return=d,d.child=p}function Yx(d,p,S,P){return P!==null&&Su(P),cc(p,d.child,null,S),d=by(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function Oq(d,p,S,P,D,z,Q){if(S)return p.flags&256?(p.flags&=-257,P=U(Error(n(422))),Yx(d,p,Q,P)):p.memoizedState!==null?(p.child=d.child,p.flags|=128,null):(z=P.fallback,D=p.mode,P=lb({mode:"visible",children:P.children},D,0,null),z=df(z,D,Q,null),z.flags|=2,P.return=p,z.return=p,P.sibling=z,p.child=P,(p.mode&1)!==0&&cc(p,d.child,null,Q),p.child.memoizedState=Un(Q),p.memoizedState=Yr,z);if((p.mode&1)===0)return Yx(d,p,Q,null);if(D.data==="$!"){if(P=D.nextSibling&&D.nextSibling.dataset,P)var fe=P.dgst;return P=fe,z=Error(n(419)),P=U(z,P,void 0),Yx(d,p,Q,P)}if(fe=(Q&d.childLanes)!==0,Mn||fe){if(P=qi,P!==null){switch(Q&-Q){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}D=(D&(P.suspendedLanes|Q))!==0?0:D,D!==0&&D!==z.retryLane&&(z.retryLane=D,Ts(d,D),zo(P,d,D,-1))}return fM(),P=U(Error(n(421))),Yx(d,p,Q,P)}return D.data==="$?"?(p.flags|=128,p.child=d.child,p=Wq.bind(null,d),D._reactRetry=p,null):(d=z.treeContext,oa=To(D.nextSibling),Ci=p,xr=!0,as=null,d!==null&&(sa[gi++]=mt,sa[gi++]=is,sa[gi++]=lc,mt=d.id,is=d.overflow,lc=p),p=by(p,P.children),p.flags|=4096,p)}function kj(d,p,S){d.lanes|=p;var P=d.alternate;P!==null&&(P.lanes|=p),Kd(d.return,p,S)}function ZS(d,p,S,P,D){var z=d.memoizedState;z===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:P,tail:S,tailMode:D}:(z.isBackwards=p,z.rendering=null,z.renderingStartTime=0,z.last=P,z.tail=S,z.tailMode=D)}function jj(d,p,S){var P=p.pendingProps,D=P.revealOrder,z=P.tail;if(Tt(d,p,P.children,S),P=br.current,(P&2)!==0)P=P&1|2,p.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&kj(d,S,p);else if(d.tag===19)kj(d,S,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}P&=1}if(or(br,P),(p.mode&1)===0)p.memoizedState=null;else switch(D){case"forwards":for(S=p.child,D=null;S!==null;)d=S.alternate,d!==null&&As(d)===null&&(D=S),S=S.sibling;S=D,S===null?(D=p.child,p.child=null):(D=S.sibling,S.sibling=null),ZS(p,!1,D,S,z);break;case"backwards":for(S=null,D=p.child,p.child=null;D!==null;){if(d=D.alternate,d!==null&&As(d)===null){p.child=D;break}d=D.sibling,D.sibling=S,S=D,D=d}ZS(p,!0,S,null,z);break;case"together":ZS(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Kx(d,p){(p.mode&1)===0&&d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2)}function xc(d,p,S){if(d!==null&&(p.dependencies=d.dependencies),of|=p.lanes,(S&p.childLanes)===0)return null;if(d!==null&&p.child!==d.child)throw Error(n(153));if(p.child!==null){for(d=p.child,S=ju(d,d.pendingProps),p.child=S,S.return=p;d.sibling!==null;)d=d.sibling,S=S.sibling=ju(d,d.pendingProps),S.return=p;S.sibling=null}return p.child}function Rq(d,p,S){switch(p.tag){case 3:pn(p),ml();break;case 5:mc(p);break;case 1:Wi(p.type)&&sc(p);break;case 4:Jd(p,p.stateNode.containerInfo);break;case 10:var P=p.type._context,D=p.memoizedProps.value;or(uc,P._currentValue),P._currentValue=D;break;case 13:if(P=p.memoizedState,P!==null)return P.dehydrated!==null?(or(br,br.current&1),p.flags|=128,null):(S&p.child.childLanes)!==0?Lo(d,p,S):(or(br,br.current&1),d=xc(d,p,S),d!==null?d.sibling:null);or(br,br.current&1);break;case 19:if(P=(S&p.childLanes)!==0,(d.flags&128)!==0){if(P)return jj(d,p,S);p.flags|=128}if(D=p.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),or(br,br.current),P)break;return null;case 22:case 23:return p.lanes=0,Te(d,p,S)}return xc(d,p,S)}var Ij,JS,Dj,Lj;Ij=function(d,p){for(var S=p.child;S!==null;){if(S.tag===5||S.tag===6)d.appendChild(S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===p)break;for(;S.sibling===null;){if(S.return===null||S.return===p)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},JS=function(){},Dj=function(d,p,S,P){var D=d.memoizedProps;if(D!==P){d=p.stateNode,Xr(La.current);var z=null;switch(S){case"input":D=Me(d,D),P=Me(d,P),z=[];break;case"select":D=Y({},D,{value:void 0}),P=Y({},P,{value:void 0}),z=[];break;case"textarea":D=Je(d,D),P=Je(d,P),z=[];break;default:typeof D.onClick!="function"&&typeof P.onClick=="function"&&(d.onclick=Bd)}me(S,P);var Q;S=null;for(Fe in D)if(!P.hasOwnProperty(Fe)&&D.hasOwnProperty(Fe)&&D[Fe]!=null)if(Fe==="style"){var fe=D[Fe];for(Q in fe)fe.hasOwnProperty(Q)&&(S||(S={}),S[Q]="")}else Fe!=="dangerouslySetInnerHTML"&&Fe!=="children"&&Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&Fe!=="autoFocus"&&(i.hasOwnProperty(Fe)?z||(z=[]):(z=z||[]).push(Fe,null));for(Fe in P){var we=P[Fe];if(fe=D?.[Fe],P.hasOwnProperty(Fe)&&we!==fe&&(we!=null||fe!=null))if(Fe==="style")if(fe){for(Q in fe)!fe.hasOwnProperty(Q)||we&&we.hasOwnProperty(Q)||(S||(S={}),S[Q]="");for(Q in we)we.hasOwnProperty(Q)&&fe[Q]!==we[Q]&&(S||(S={}),S[Q]=we[Q])}else S||(z||(z=[]),z.push(Fe,S)),S=we;else Fe==="dangerouslySetInnerHTML"?(we=we?we.__html:void 0,fe=fe?fe.__html:void 0,we!=null&&fe!==we&&(z=z||[]).push(Fe,we)):Fe==="children"?typeof we!="string"&&typeof we!="number"||(z=z||[]).push(Fe,""+we):Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Fe)?(we!=null&&Fe==="onScroll"&&pr("scroll",d),z||fe===we||(z=[])):(z=z||[]).push(Fe,we))}S&&(z=z||[]).push("style",S);var Fe=z;(p.updateQueue=Fe)&&(p.flags|=4)}},Lj=function(d,p,S,P){S!==P&&(p.flags|=4)};function wy(d,p){if(!xr)switch(d.tailMode){case"hidden":p=d.tail;for(var S=null;p!==null;)p.alternate!==null&&(S=p),p=p.sibling;S===null?d.tail=null:S.sibling=null;break;case"collapsed":S=d.tail;for(var P=null;S!==null;)S.alternate!==null&&(P=S),S=S.sibling;P===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:P.sibling=null}}function ba(d){var p=d.alternate!==null&&d.alternate.child===d.child,S=0,P=0;if(p)for(var D=d.child;D!==null;)S|=D.lanes|D.childLanes,P|=D.subtreeFlags&14680064,P|=D.flags&14680064,D.return=d,D=D.sibling;else for(D=d.child;D!==null;)S|=D.lanes|D.childLanes,P|=D.subtreeFlags,P|=D.flags,D.return=d,D=D.sibling;return d.subtreeFlags|=P,d.childLanes=S,p}function kq(d,p,S){var P=p.pendingProps;switch(No(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ba(p),null;case 1:return Wi(p.type)&&Vd(),ba(p),null;case 3:return P=p.stateNode,yl(),mr(aa),mr(Ei),Qs(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(d===null||d.child===null)&&(_u(p)?p.flags|=4:d===null||d.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,as!==null&&(cM(as),as=null))),JS(d,p),ba(p),null;case 5:Au(p);var D=Xr(ko.current);if(S=p.type,d!==null&&p.stateNode!=null)Dj(d,p,S,P,D),d.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!P){if(p.stateNode===null)throw Error(n(166));return ba(p),null}if(d=Xr(La.current),_u(p)){P=p.stateNode,S=p.type;var z=p.memoizedProps;switch(P[ai]=p,P[wu]=z,d=(p.mode&1)!==0,S){case"dialog":pr("cancel",P),pr("close",P);break;case"iframe":case"object":case"embed":pr("load",P);break;case"video":case"audio":for(D=0;D<hl.length;D++)pr(hl[D],P);break;case"source":pr("error",P);break;case"img":case"image":case"link":pr("error",P),pr("load",P);break;case"details":pr("toggle",P);break;case"input":We(P,z),pr("invalid",P);break;case"select":P._wrapperState={wasMultiple:!!z.multiple},pr("invalid",P);break;case"textarea":Qe(P,z),pr("invalid",P)}me(S,z),D=null;for(var Q in z)if(z.hasOwnProperty(Q)){var fe=z[Q];Q==="children"?typeof fe=="string"?P.textContent!==fe&&(z.suppressHydrationWarning!==!0&&zd(P.textContent,fe,d),D=["children",fe]):typeof fe=="number"&&P.textContent!==""+fe&&(z.suppressHydrationWarning!==!0&&zd(P.textContent,fe,d),D=["children",""+fe]):i.hasOwnProperty(Q)&&fe!=null&&Q==="onScroll"&&pr("scroll",P)}switch(S){case"input":ve(P),ot(P,z,!0);break;case"textarea":ve(P),At(P);break;case"select":case"option":break;default:typeof z.onClick=="function"&&(P.onclick=Bd)}P=D,p.updateQueue=P,P!==null&&(p.flags|=4)}else{Q=D.nodeType===9?D:D.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=gt(S)),d==="http://www.w3.org/1999/xhtml"?S==="script"?(d=Q.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof P.is=="string"?d=Q.createElement(S,{is:P.is}):(d=Q.createElement(S),S==="select"&&(Q=d,P.multiple?Q.multiple=!0:P.size&&(Q.size=P.size))):d=Q.createElementNS(d,S),d[ai]=p,d[wu]=P,Ij(d,p,!1,!1),p.stateNode=d;e:{switch(Q=Ge(S,P),S){case"dialog":pr("cancel",d),pr("close",d),D=P;break;case"iframe":case"object":case"embed":pr("load",d),D=P;break;case"video":case"audio":for(D=0;D<hl.length;D++)pr(hl[D],d);D=P;break;case"source":pr("error",d),D=P;break;case"img":case"image":case"link":pr("error",d),pr("load",d),D=P;break;case"details":pr("toggle",d),D=P;break;case"input":We(d,P),D=Me(d,P),pr("invalid",d);break;case"option":D=P;break;case"select":d._wrapperState={wasMultiple:!!P.multiple},D=Y({},P,{value:void 0}),pr("invalid",d);break;case"textarea":Qe(d,P),D=Je(d,P),pr("invalid",d);break;default:D=P}me(S,D),fe=D;for(z in fe)if(fe.hasOwnProperty(z)){var we=fe[z];z==="style"?Mt(d,we):z==="dangerouslySetInnerHTML"?(we=we?we.__html:void 0,we!=null&&Yt(d,we)):z==="children"?typeof we=="string"?(S!=="textarea"||we!=="")&&tt(d,we):typeof we=="number"&&tt(d,""+we):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(i.hasOwnProperty(z)?we!=null&&z==="onScroll"&&pr("scroll",d):we!=null&&T(d,z,we,Q))}switch(S){case"input":ve(d),ot(d,P,!1);break;case"textarea":ve(d),At(d);break;case"option":P.value!=null&&d.setAttribute("value",""+$e(P.value));break;case"select":d.multiple=!!P.multiple,z=P.value,z!=null?Ae(d,!!P.multiple,z,!1):P.defaultValue!=null&&Ae(d,!!P.multiple,P.defaultValue,!0);break;default:typeof D.onClick=="function"&&(d.onclick=Bd)}switch(S){case"button":case"input":case"select":case"textarea":P=!!P.autoFocus;break e;case"img":P=!0;break e;default:P=!1}}P&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return ba(p),null;case 6:if(d&&p.stateNode!=null)Lj(d,p,d.memoizedProps,P);else{if(typeof P!="string"&&p.stateNode===null)throw Error(n(166));if(S=Xr(ko.current),Xr(La.current),_u(p)){if(P=p.stateNode,S=p.memoizedProps,P[ai]=p,(z=P.nodeValue!==S)&&(d=Ci,d!==null))switch(d.tag){case 3:zd(P.nodeValue,S,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&zd(P.nodeValue,S,(d.mode&1)!==0)}z&&(p.flags|=4)}else P=(S.nodeType===9?S:S.ownerDocument).createTextNode(P),P[ai]=p,p.stateNode=P}return ba(p),null;case 13:if(mr(br),P=p.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(xr&&oa!==null&&(p.mode&1)!==0&&(p.flags&128)===0)ly(),ml(),p.flags|=98560,z=!1;else if(z=_u(p),P!==null&&P.dehydrated!==null){if(d===null){if(!z)throw Error(n(318));if(z=p.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(n(317));z[ai]=p}else ml(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;ba(p),z=!1}else as!==null&&(cM(as),as=null),z=!0;if(!z)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=S,p):(P=P!==null,P!==(d!==null&&d.memoizedState!==null)&&P&&(p.child.flags|=8192,(p.mode&1)!==0&&(d===null||(br.current&1)!==0?Ri===0&&(Ri=3):fM())),p.updateQueue!==null&&(p.flags|=4),ba(p),null);case 4:return yl(),JS(d,p),d===null&&vu(p.stateNode.containerInfo),ba(p),null;case 10:return Yd(p.type._context),ba(p),null;case 17:return Wi(p.type)&&Vd(),ba(p),null;case 19:if(mr(br),z=p.memoizedState,z===null)return ba(p),null;if(P=(p.flags&128)!==0,Q=z.rendering,Q===null)if(P)wy(z,!1);else{if(Ri!==0||d!==null&&(d.flags&128)!==0)for(d=p.child;d!==null;){if(Q=As(d),Q!==null){for(p.flags|=128,wy(z,!1),P=Q.updateQueue,P!==null&&(p.updateQueue=P,p.flags|=4),p.subtreeFlags=0,P=S,S=p.child;S!==null;)z=S,d=P,z.flags&=14680066,Q=z.alternate,Q===null?(z.childLanes=0,z.lanes=d,z.child=null,z.subtreeFlags=0,z.memoizedProps=null,z.memoizedState=null,z.updateQueue=null,z.dependencies=null,z.stateNode=null):(z.childLanes=Q.childLanes,z.lanes=Q.lanes,z.child=Q.child,z.subtreeFlags=0,z.deletions=null,z.memoizedProps=Q.memoizedProps,z.memoizedState=Q.memoizedState,z.updateQueue=Q.updateQueue,z.type=Q.type,d=Q.dependencies,z.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),S=S.sibling;return or(br,br.current&1|2),p.child}d=d.sibling}z.tail!==null&&De()>Ap&&(p.flags|=128,P=!0,wy(z,!1),p.lanes=4194304)}else{if(!P)if(d=As(Q),d!==null){if(p.flags|=128,P=!0,S=d.updateQueue,S!==null&&(p.updateQueue=S,p.flags|=4),wy(z,!0),z.tail===null&&z.tailMode==="hidden"&&!Q.alternate&&!xr)return ba(p),null}else 2*De()-z.renderingStartTime>Ap&&S!==1073741824&&(p.flags|=128,P=!0,wy(z,!1),p.lanes=4194304);z.isBackwards?(Q.sibling=p.child,p.child=Q):(S=z.last,S!==null?S.sibling=Q:p.child=Q,z.last=Q)}return z.tail!==null?(p=z.tail,z.rendering=p,z.tail=p.sibling,z.renderingStartTime=De(),p.sibling=null,S=br.current,or(br,P?S&1|2:S&1),p):(ba(p),null);case 22:case 23:return dM(),P=p.memoizedState!==null,d!==null&&d.memoizedState!==null!==P&&(p.flags|=8192),P&&(p.mode&1)!==0?(Ps&1073741824)!==0&&(ba(p),p.subtreeFlags&6&&(p.flags|=8192)):ba(p),null;case 24:return null;case 25:return null}throw Error(n(156,p.tag))}function jq(d,p){switch(No(p),p.tag){case 1:return Wi(p.type)&&Vd(),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return yl(),mr(aa),mr(Ei),Qs(),d=p.flags,(d&65536)!==0&&(d&128)===0?(p.flags=d&-65537|128,p):null;case 5:return Au(p),null;case 13:if(mr(br),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(n(340));ml()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return mr(br),null;case 4:return yl(),null;case 10:return Yd(p.type._context),null;case 22:case 23:return dM(),null;case 24:return null;default:return null}}var Zx=!1,wa=!1,Iq=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function Mp(d,p){var S=d.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(P){Kr(d,p,P)}else S.current=null}function QS(d,p,S){try{S()}catch(P){Kr(d,p,P)}}var Uj=!1;function Dq(d,p){if(bu=Ja,d=kr(),fi(d)){if("selectionStart"in d)var S={start:d.selectionStart,end:d.selectionEnd};else e:{S=(S=d.ownerDocument)&&S.defaultView||window;var P=S.getSelection&&S.getSelection();if(P&&P.rangeCount!==0){S=P.anchorNode;var D=P.anchorOffset,z=P.focusNode;P=P.focusOffset;try{S.nodeType,z.nodeType}catch{S=null;break e}var Q=0,fe=-1,we=-1,Fe=0,at=0,lt=d,rt=null;t:for(;;){for(var Ot;lt!==S||D!==0&&lt.nodeType!==3||(fe=Q+D),lt!==z||P!==0&&lt.nodeType!==3||(we=Q+P),lt.nodeType===3&&(Q+=lt.nodeValue.length),(Ot=lt.firstChild)!==null;)rt=lt,lt=Ot;for(;;){if(lt===d)break t;if(rt===S&&++Fe===D&&(fe=Q),rt===z&&++at===P&&(we=Q),(Ot=lt.nextSibling)!==null)break;lt=rt,rt=lt.parentNode}lt=Ot}S=fe===-1||we===-1?null:{start:fe,end:we}}else S=null}S=S||{start:0,end:0}}else S=null;for(Kg={focusedElem:d,selectionRange:S},Ja=!1,Dt=p;Dt!==null;)if(p=Dt,d=p.child,(p.subtreeFlags&1028)!==0&&d!==null)d.return=p,Dt=d;else for(;Dt!==null;){p=Dt;try{var Ut=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Ut!==null){var zt=Ut.memoizedProps,si=Ut.memoizedState,Re=p.stateNode,_e=Re.getSnapshotBeforeUpdate(p.elementType===p.type?zt:ss(p.type,zt),si);Re.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:var je=p.stateNode.containerInfo;je.nodeType===1?je.textContent="":je.nodeType===9&&je.documentElement&&je.removeChild(je.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ht){Kr(p,p.return,ht)}if(d=p.sibling,d!==null){d.return=p.return,Dt=d;break}Dt=p.return}return Ut=Uj,Uj=!1,Ut}function _y(d,p,S){var P=p.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var D=P=P.next;do{if((D.tag&d)===d){var z=D.destroy;D.destroy=void 0,z!==void 0&&QS(p,S,z)}D=D.next}while(D!==P)}}function Jx(d,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var S=p=p.next;do{if((S.tag&d)===d){var P=S.create;S.destroy=P()}S=S.next}while(S!==p)}}function eM(d){var p=d.ref;if(p!==null){var S=d.stateNode;switch(d.tag){case 5:d=S;break;default:d=S}typeof p=="function"?p(d):p.current=d}}function Fj(d){var p=d.alternate;p!==null&&(d.alternate=null,Fj(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&(delete p[ai],delete p[wu],delete p[ic],delete p[op],delete p[lp])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function zj(d){return d.tag===5||d.tag===3||d.tag===4}function Bj(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||zj(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function tM(d,p,S){var P=d.tag;if(P===5||P===6)d=d.stateNode,p?S.nodeType===8?S.parentNode.insertBefore(d,p):S.insertBefore(d,p):(S.nodeType===8?(p=S.parentNode,p.insertBefore(d,S)):(p=S,p.appendChild(d)),S=S._reactRootContainer,S!=null||p.onclick!==null||(p.onclick=Bd));else if(P!==4&&(d=d.child,d!==null))for(tM(d,p,S),d=d.sibling;d!==null;)tM(d,p,S),d=d.sibling}function nM(d,p,S){var P=d.tag;if(P===5||P===6)d=d.stateNode,p?S.insertBefore(d,p):S.appendChild(d);else if(P!==4&&(d=d.child,d!==null))for(nM(d,p,S),d=d.sibling;d!==null;)nM(d,p,S),d=d.sibling}var ca=null,Uo=!1;function Pu(d,p,S){for(S=S.child;S!==null;)Vj(d,p,S),S=S.sibling}function Vj(d,p,S){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(nn,S)}catch{}switch(S.tag){case 5:wa||Mp(S,p);case 6:var P=ca,D=Uo;ca=null,Pu(d,p,S),ca=P,Uo=D,ca!==null&&(Uo?(d=ca,S=S.stateNode,d.nodeType===8?d.parentNode.removeChild(S):d.removeChild(S)):ca.removeChild(S.stateNode));break;case 18:ca!==null&&(Uo?(d=ca,S=S.stateNode,d.nodeType===8?sp(d.parentNode,S):d.nodeType===1&&sp(d,S),Pd(d)):sp(ca,S.stateNode));break;case 4:P=ca,D=Uo,ca=S.stateNode.containerInfo,Uo=!0,Pu(d,p,S),ca=P,Uo=D;break;case 0:case 11:case 14:case 15:if(!wa&&(P=S.updateQueue,P!==null&&(P=P.lastEffect,P!==null))){D=P=P.next;do{var z=D,Q=z.destroy;z=z.tag,Q!==void 0&&((z&2)!==0||(z&4)!==0)&&QS(S,p,Q),D=D.next}while(D!==P)}Pu(d,p,S);break;case 1:if(!wa&&(Mp(S,p),P=S.stateNode,typeof P.componentWillUnmount=="function"))try{P.props=S.memoizedProps,P.state=S.memoizedState,P.componentWillUnmount()}catch(fe){Kr(S,p,fe)}Pu(d,p,S);break;case 21:Pu(d,p,S);break;case 22:S.mode&1?(wa=(P=wa)||S.memoizedState!==null,Pu(d,p,S),wa=P):Pu(d,p,S);break;default:Pu(d,p,S)}}function Hj(d){var p=d.updateQueue;if(p!==null){d.updateQueue=null;var S=d.stateNode;S===null&&(S=d.stateNode=new Iq),p.forEach(function(P){var D=Gq.bind(null,d,P);S.has(P)||(S.add(P),P.then(D,D))})}}function Fo(d,p){var S=p.deletions;if(S!==null)for(var P=0;P<S.length;P++){var D=S[P];try{var z=d,Q=p,fe=Q;e:for(;fe!==null;){switch(fe.tag){case 5:ca=fe.stateNode,Uo=!1;break e;case 3:ca=fe.stateNode.containerInfo,Uo=!0;break e;case 4:ca=fe.stateNode.containerInfo,Uo=!0;break e}fe=fe.return}if(ca===null)throw Error(n(160));Vj(z,Q,D),ca=null,Uo=!1;var we=D.alternate;we!==null&&(we.return=null),D.return=null}catch(Fe){Kr(D,p,Fe)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)Wj(p,d),p=p.sibling}function Wj(d,p){var S=d.alternate,P=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(Fo(p,d),xl(d),P&4){try{_y(3,d,d.return),Jx(3,d)}catch(zt){Kr(d,d.return,zt)}try{_y(5,d,d.return)}catch(zt){Kr(d,d.return,zt)}}break;case 1:Fo(p,d),xl(d),P&512&&S!==null&&Mp(S,S.return);break;case 5:if(Fo(p,d),xl(d),P&512&&S!==null&&Mp(S,S.return),d.flags&32){var D=d.stateNode;try{tt(D,"")}catch(zt){Kr(d,d.return,zt)}}if(P&4&&(D=d.stateNode,D!=null)){var z=d.memoizedProps,Q=S!==null?S.memoizedProps:z,fe=d.type,we=d.updateQueue;if(d.updateQueue=null,we!==null)try{fe==="input"&&z.type==="radio"&&z.name!=null&&ke(D,z),Ge(fe,Q);var Fe=Ge(fe,z);for(Q=0;Q<we.length;Q+=2){var at=we[Q],lt=we[Q+1];at==="style"?Mt(D,lt):at==="dangerouslySetInnerHTML"?Yt(D,lt):at==="children"?tt(D,lt):T(D,at,lt,Fe)}switch(fe){case"input":ct(D,z);break;case"textarea":Ze(D,z);break;case"select":var rt=D._wrapperState.wasMultiple;D._wrapperState.wasMultiple=!!z.multiple;var Ot=z.value;Ot!=null?Ae(D,!!z.multiple,Ot,!1):rt!==!!z.multiple&&(z.defaultValue!=null?Ae(D,!!z.multiple,z.defaultValue,!0):Ae(D,!!z.multiple,z.multiple?[]:"",!1))}D[wu]=z}catch(zt){Kr(d,d.return,zt)}}break;case 6:if(Fo(p,d),xl(d),P&4){if(d.stateNode===null)throw Error(n(162));D=d.stateNode,z=d.memoizedProps;try{D.nodeValue=z}catch(zt){Kr(d,d.return,zt)}}break;case 3:if(Fo(p,d),xl(d),P&4&&S!==null&&S.memoizedState.isDehydrated)try{Pd(p.containerInfo)}catch(zt){Kr(d,d.return,zt)}break;case 4:Fo(p,d),xl(d);break;case 13:Fo(p,d),xl(d),D=d.child,D.flags&8192&&(z=D.memoizedState!==null,D.stateNode.isHidden=z,!z||D.alternate!==null&&D.alternate.memoizedState!==null||(aM=De())),P&4&&Hj(d);break;case 22:if(at=S!==null&&S.memoizedState!==null,d.mode&1?(wa=(Fe=wa)||at,Fo(p,d),wa=Fe):Fo(p,d),xl(d),P&8192){if(Fe=d.memoizedState!==null,(d.stateNode.isHidden=Fe)&&!at&&(d.mode&1)!==0)for(Dt=d,at=d.child;at!==null;){for(lt=Dt=at;Dt!==null;){switch(rt=Dt,Ot=rt.child,rt.tag){case 0:case 11:case 14:case 15:_y(4,rt,rt.return);break;case 1:Mp(rt,rt.return);var Ut=rt.stateNode;if(typeof Ut.componentWillUnmount=="function"){P=rt,S=rt.return;try{p=P,Ut.props=p.memoizedProps,Ut.state=p.memoizedState,Ut.componentWillUnmount()}catch(zt){Kr(P,S,zt)}}break;case 5:Mp(rt,rt.return);break;case 22:if(rt.memoizedState!==null){qj(lt);continue}}Ot!==null?(Ot.return=rt,Dt=Ot):qj(lt)}at=at.sibling}e:for(at=null,lt=d;;){if(lt.tag===5){if(at===null){at=lt;try{D=lt.stateNode,Fe?(z=D.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none"):(fe=lt.stateNode,we=lt.memoizedProps.style,Q=we!=null&&we.hasOwnProperty("display")?we.display:null,fe.style.display=$t("display",Q))}catch(zt){Kr(d,d.return,zt)}}}else if(lt.tag===6){if(at===null)try{lt.stateNode.nodeValue=Fe?"":lt.memoizedProps}catch(zt){Kr(d,d.return,zt)}}else if((lt.tag!==22&&lt.tag!==23||lt.memoizedState===null||lt===d)&&lt.child!==null){lt.child.return=lt,lt=lt.child;continue}if(lt===d)break e;for(;lt.sibling===null;){if(lt.return===null||lt.return===d)break e;at===lt&&(at=null),lt=lt.return}at===lt&&(at=null),lt.sibling.return=lt.return,lt=lt.sibling}}break;case 19:Fo(p,d),xl(d),P&4&&Hj(d);break;case 21:break;default:Fo(p,d),xl(d)}}function xl(d){var p=d.flags;if(p&2){try{e:{for(var S=d.return;S!==null;){if(zj(S)){var P=S;break e}S=S.return}throw Error(n(160))}switch(P.tag){case 5:var D=P.stateNode;P.flags&32&&(tt(D,""),P.flags&=-33);var z=Bj(d);nM(d,z,D);break;case 3:case 4:var Q=P.stateNode.containerInfo,fe=Bj(d);tM(d,fe,Q);break;default:throw Error(n(161))}}catch(we){Kr(d,d.return,we)}d.flags&=-3}p&4096&&(d.flags&=-4097)}function Lq(d,p,S){Dt=d,Gj(d)}function Gj(d,p,S){for(var P=(d.mode&1)!==0;Dt!==null;){var D=Dt,z=D.child;if(D.tag===22&&P){var Q=D.memoizedState!==null||Zx;if(!Q){var fe=D.alternate,we=fe!==null&&fe.memoizedState!==null||wa;fe=Zx;var Fe=wa;if(Zx=Q,(wa=we)&&!Fe)for(Dt=D;Dt!==null;)Q=Dt,we=Q.child,Q.tag===22&&Q.memoizedState!==null?Xj(D):we!==null?(we.return=Q,Dt=we):Xj(D);for(;z!==null;)Dt=z,Gj(z),z=z.sibling;Dt=D,Zx=fe,wa=Fe}$j(d)}else(D.subtreeFlags&8772)!==0&&z!==null?(z.return=D,Dt=z):$j(d)}}function $j(d){for(;Dt!==null;){var p=Dt;if((p.flags&8772)!==0){var S=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:wa||Jx(5,p);break;case 1:var P=p.stateNode;if(p.flags&4&&!wa)if(S===null)P.componentDidMount();else{var D=p.elementType===p.type?S.memoizedProps:ss(p.type,S.memoizedProps);P.componentDidUpdate(D,S.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var z=p.updateQueue;z!==null&&Tu(p,z,P);break;case 3:var Q=p.updateQueue;if(Q!==null){if(S=null,p.child!==null)switch(p.child.tag){case 5:S=p.child.stateNode;break;case 1:S=p.child.stateNode}Tu(p,Q,S)}break;case 5:var fe=p.stateNode;if(S===null&&p.flags&4){S=fe;var we=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":we.autoFocus&&S.focus();break;case"img":we.src&&(S.src=we.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var Fe=p.alternate;if(Fe!==null){var at=Fe.memoizedState;if(at!==null){var lt=at.dehydrated;lt!==null&&Pd(lt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}wa||p.flags&512&&eM(p)}catch(rt){Kr(p,p.return,rt)}}if(p===d){Dt=null;break}if(S=p.sibling,S!==null){S.return=p.return,Dt=S;break}Dt=p.return}}function qj(d){for(;Dt!==null;){var p=Dt;if(p===d){Dt=null;break}var S=p.sibling;if(S!==null){S.return=p.return,Dt=S;break}Dt=p.return}}function Xj(d){for(;Dt!==null;){var p=Dt;try{switch(p.tag){case 0:case 11:case 15:var S=p.return;try{Jx(4,p)}catch(we){Kr(p,S,we)}break;case 1:var P=p.stateNode;if(typeof P.componentDidMount=="function"){var D=p.return;try{P.componentDidMount()}catch(we){Kr(p,D,we)}}var z=p.return;try{eM(p)}catch(we){Kr(p,z,we)}break;case 5:var Q=p.return;try{eM(p)}catch(we){Kr(p,Q,we)}}}catch(we){Kr(p,p.return,we)}if(p===d){Dt=null;break}var fe=p.sibling;if(fe!==null){fe.return=p.return,Dt=fe;break}Dt=p.return}}var Uq=Math.ceil,Qx=A.ReactCurrentDispatcher,rM=A.ReactCurrentOwner,to=A.ReactCurrentBatchConfig,Hn=0,qi=null,yi=null,ua=0,Ps=0,Tp=Dr(0),Ri=0,Sy=null,of=0,eb=0,iM=0,My=null,os=null,aM=0,Ap=1/0,bc=null,tb=!1,sM=null,Nu=null,nb=!1,Ou=null,rb=0,Ty=0,oM=null,ib=-1,ab=0;function Ba(){return(Hn&6)!==0?De():ib!==-1?ib:ib=De()}function Ru(d){return(d.mode&1)===0?1:(Hn&2)!==0&&ua!==0?ua&-ua:YS.transition!==null?(ab===0&&(ab=sr()),ab):(d=zn,d!==0||(d=window.event,d=d===void 0?16:Mx(d.type)),d)}function zo(d,p,S,P){if(50<Ty)throw Ty=0,oM=null,Error(n(185));ri(d,S,P),((Hn&2)===0||d!==qi)&&(d===qi&&((Hn&2)===0&&(eb|=S),Ri===4&&ku(d,ua)),ls(d,P),S===1&&Hn===0&&(p.mode&1)===0&&(Ap=De()+500,Wd&&Zs()))}function ls(d,p){var S=d.callbackNode;vn(d,p);var P=_n(d,d===qi?ua:0);if(P===0)S!==null&&Ue(S),d.callbackNode=null,d.callbackPriority=0;else if(p=P&-P,d.callbackPriority!==p){if(S!=null&&Ue(S),p===1)d.tag===0?Ux(Kj.bind(null,d)):Gd(Kj.bind(null,d)),XS(function(){(Hn&6)===0&&Zs()}),S=null;else{switch(au(P)){case 1:S=nt;break;case 4:S=it;break;case 16:S=Pt;break;case 536870912:S=qt;break;default:S=Pt}S=iI(S,Yj.bind(null,d))}d.callbackPriority=p,d.callbackNode=S}}function Yj(d,p){if(ib=-1,ab=0,(Hn&6)!==0)throw Error(n(327));var S=d.callbackNode;if(Ep()&&d.callbackNode!==S)return null;var P=_n(d,d===qi?ua:0);if(P===0)return null;if((P&30)!==0||(P&d.expiredLanes)!==0||p)p=sb(d,P);else{p=P;var D=Hn;Hn|=2;var z=Jj();(qi!==d||ua!==p)&&(bc=null,Ap=De()+500,cf(d,p));do try{Bq();break}catch(fe){Zj(d,fe)}while(!0);fc(),Qx.current=z,Hn=D,yi!==null?p=0:(qi=null,ua=0,p=Ri)}if(p!==0){if(p===2&&(D=kn(d),D!==0&&(P=D,p=lM(d,D))),p===1)throw S=Sy,cf(d,0),ku(d,P),ls(d,De()),S;if(p===6)ku(d,P);else{if(D=d.current.alternate,(P&30)===0&&!Fq(D)&&(p=sb(d,P),p===2&&(z=kn(d),z!==0&&(P=z,p=lM(d,z))),p===1))throw S=Sy,cf(d,0),ku(d,P),ls(d,De()),S;switch(d.finishedWork=D,d.finishedLanes=P,p){case 0:case 1:throw Error(n(345));case 2:uf(d,os,bc);break;case 3:if(ku(d,P),(P&130023424)===P&&(p=aM+500-De(),10<p)){if(_n(d,0)!==0)break;if(D=d.suspendedLanes,(D&P)!==P){Ba(),d.pingedLanes|=d.suspendedLanes&D;break}d.timeoutHandle=Jg(uf.bind(null,d,os,bc),p);break}uf(d,os,bc);break;case 4:if(ku(d,P),(P&4194240)===P)break;for(p=d.eventTimes,D=-1;0<P;){var Q=31-tn(P);z=1<<Q,Q=p[Q],Q>D&&(D=Q),P&=~z}if(P=D,P=De()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*Uq(P/1960))-P,10<P){d.timeoutHandle=Jg(uf.bind(null,d,os,bc),P);break}uf(d,os,bc);break;case 5:uf(d,os,bc);break;default:throw Error(n(329))}}}return ls(d,De()),d.callbackNode===S?Yj.bind(null,d):null}function lM(d,p){var S=My;return d.current.memoizedState.isDehydrated&&(cf(d,p).flags|=256),d=sb(d,p),d!==2&&(p=os,os=S,p!==null&&cM(p)),d}function cM(d){os===null?os=d:os.push.apply(os,d)}function Fq(d){for(var p=d;;){if(p.flags&16384){var S=p.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var P=0;P<S.length;P++){var D=S[P],z=D.getSnapshot;D=D.value;try{if(!ka(z(),D))return!1}catch{return!1}}}if(S=p.child,p.subtreeFlags&16384&&S!==null)S.return=p,p=S;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function ku(d,p){for(p&=~iM,p&=~eb,d.suspendedLanes|=p,d.pingedLanes&=~p,d=d.expirationTimes;0<p;){var S=31-tn(p),P=1<<S;d[S]=-1,p&=~P}}function Kj(d){if((Hn&6)!==0)throw Error(n(327));Ep();var p=_n(d,0);if((p&1)===0)return ls(d,De()),null;var S=sb(d,p);if(d.tag!==0&&S===2){var P=kn(d);P!==0&&(p=P,S=lM(d,P))}if(S===1)throw S=Sy,cf(d,0),ku(d,p),ls(d,De()),S;if(S===6)throw Error(n(345));return d.finishedWork=d.current.alternate,d.finishedLanes=p,uf(d,os,bc),ls(d,De()),null}function uM(d,p){var S=Hn;Hn|=1;try{return d(p)}finally{Hn=S,Hn===0&&(Ap=De()+500,Wd&&Zs())}}function lf(d){Ou!==null&&Ou.tag===0&&(Hn&6)===0&&Ep();var p=Hn;Hn|=1;var S=to.transition,P=zn;try{if(to.transition=null,zn=1,d)return d()}finally{zn=P,to.transition=S,Hn=p,(Hn&6)===0&&Zs()}}function dM(){Ps=Tp.current,mr(Tp)}function cf(d,p){d.finishedWork=null,d.finishedLanes=0;var S=d.timeoutHandle;if(S!==-1&&(d.timeoutHandle=-1,Qg(S)),yi!==null)for(S=yi.return;S!==null;){var P=S;switch(No(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&Vd();break;case 3:yl(),mr(aa),mr(Ei),Qs();break;case 5:Au(P);break;case 4:yl();break;case 13:mr(br);break;case 19:mr(br);break;case 10:Yd(P.type._context);break;case 22:case 23:dM()}S=S.return}if(qi=d,yi=d=ju(d.current,null),ua=Ps=p,Ri=0,Sy=null,iM=eb=of=0,os=My=null,Ro!==null){for(p=0;p<Ro.length;p++)if(S=Ro[p],P=S.interleaved,P!==null){S.interleaved=null;var D=P.next,z=S.pending;if(z!==null){var Q=z.next;z.next=D,P.next=Q}S.pending=P}Ro=null}return d}function Zj(d,p){do{var S=yi;try{if(fc(),gc.current=_p,Es){for(var P=gr.memoizedState;P!==null;){var D=P.queue;D!==null&&(D.pending=null),P=P.next}Es=!1}if(jo=0,Bn=Ur=gr=null,$i=!1,vl=0,rM.current=null,S===null||S.return===null){Ri=1,Sy=p,yi=null;break}e:{var z=d,Q=S.return,fe=S,we=p;if(p=ua,fe.flags|=32768,we!==null&&typeof we=="object"&&typeof we.then=="function"){var Fe=we,at=fe,lt=at.tag;if((at.mode&1)===0&&(lt===0||lt===11||lt===15)){var rt=at.alternate;rt?(at.updateQueue=rt.updateQueue,at.memoizedState=rt.memoizedState,at.lanes=rt.lanes):(at.updateQueue=null,at.memoizedState=null)}var Ot=Rt(Q);if(Ot!==null){Ot.flags&=-257,hn(Ot,Q,fe,z,p),Ot.mode&1&&ft(z,Fe,p),p=Ot,we=Fe;var Ut=p.updateQueue;if(Ut===null){var zt=new Set;zt.add(we),p.updateQueue=zt}else Ut.add(we);break e}else{if((p&1)===0){ft(z,Fe,p),fM();break e}we=Error(n(426))}}else if(xr&&fe.mode&1){var si=Rt(Q);if(si!==null){(si.flags&65536)===0&&(si.flags|=256),hn(si,Q,fe,z,p),Su(j(we,fe));break e}}z=we=j(we,fe),Ri!==4&&(Ri=2),My===null?My=[z]:My.push(z),z=Q;do{switch(z.tag){case 3:z.flags|=65536,p&=-p,z.lanes|=p;var Re=Se(z,we,p);hc(z,Re);break e;case 1:fe=we;var _e=z.type,je=z.stateNode;if((z.flags&128)===0&&(typeof _e.getDerivedStateFromError=="function"||je!==null&&typeof je.componentDidCatch=="function"&&(Nu===null||!Nu.has(je)))){z.flags|=65536,p&=-p,z.lanes|=p;var ht=He(z,fe,p);hc(z,ht);break e}}z=z.return}while(z!==null)}eI(S)}catch(Ht){p=Ht,yi===S&&S!==null&&(yi=S=S.return);continue}break}while(!0)}function Jj(){var d=Qx.current;return Qx.current=_p,d===null?_p:d}function fM(){(Ri===0||Ri===3||Ri===2)&&(Ri=4),qi===null||(of&268435455)===0&&(eb&268435455)===0||ku(qi,ua)}function sb(d,p){var S=Hn;Hn|=2;var P=Jj();(qi!==d||ua!==p)&&(bc=null,cf(d,p));do try{zq();break}catch(D){Zj(d,D)}while(!0);if(fc(),Hn=S,Qx.current=P,yi!==null)throw Error(n(261));return qi=null,ua=0,Ri}function zq(){for(;yi!==null;)Qj(yi)}function Bq(){for(;yi!==null&&!ze();)Qj(yi)}function Qj(d){var p=rI(d.alternate,d,Ps);d.memoizedProps=d.pendingProps,p===null?eI(d):yi=p,rM.current=null}function eI(d){var p=d;do{var S=p.alternate;if(d=p.return,(p.flags&32768)===0){if(S=kq(S,p,Ps),S!==null){yi=S;return}}else{if(S=jq(S,p),S!==null){S.flags&=32767,yi=S;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Ri=6,yi=null;return}}if(p=p.sibling,p!==null){yi=p;return}yi=p=d}while(p!==null);Ri===0&&(Ri=5)}function uf(d,p,S){var P=zn,D=to.transition;try{to.transition=null,zn=1,Vq(d,p,S,P)}finally{to.transition=D,zn=P}return null}function Vq(d,p,S,P){do Ep();while(Ou!==null);if((Hn&6)!==0)throw Error(n(327));S=d.finishedWork;var D=d.finishedLanes;if(S===null)return null;if(d.finishedWork=null,d.finishedLanes=0,S===d.current)throw Error(n(177));d.callbackNode=null,d.callbackPriority=0;var z=S.lanes|S.childLanes;if($s(d,z),d===qi&&(yi=qi=null,ua=0),(S.subtreeFlags&2064)===0&&(S.flags&2064)===0||nb||(nb=!0,iI(Pt,function(){return Ep(),null})),z=(S.flags&15990)!==0,(S.subtreeFlags&15990)!==0||z){z=to.transition,to.transition=null;var Q=zn;zn=1;var fe=Hn;Hn|=4,rM.current=null,Dq(d,S),Wj(S,d),hi(Kg),Ja=!!bu,Kg=bu=null,d.current=S,Lq(S),Ve(),Hn=fe,zn=Q,to.transition=z}else d.current=S;if(nb&&(nb=!1,Ou=d,rb=D),z=d.pendingLanes,z===0&&(Nu=null),yt(S.stateNode),ls(d,De()),p!==null)for(P=d.onRecoverableError,S=0;S<p.length;S++)D=p[S],P(D.value,{componentStack:D.stack,digest:D.digest});if(tb)throw tb=!1,d=sM,sM=null,d;return(rb&1)!==0&&d.tag!==0&&Ep(),z=d.pendingLanes,(z&1)!==0?d===oM?Ty++:(Ty=0,oM=d):Ty=0,Zs(),null}function Ep(){if(Ou!==null){var d=au(rb),p=to.transition,S=zn;try{if(to.transition=null,zn=16>d?16:d,Ou===null)var P=!1;else{if(d=Ou,Ou=null,rb=0,(Hn&6)!==0)throw Error(n(331));var D=Hn;for(Hn|=4,Dt=d.current;Dt!==null;){var z=Dt,Q=z.child;if((Dt.flags&16)!==0){var fe=z.deletions;if(fe!==null){for(var we=0;we<fe.length;we++){var Fe=fe[we];for(Dt=Fe;Dt!==null;){var at=Dt;switch(at.tag){case 0:case 11:case 15:_y(8,at,z)}var lt=at.child;if(lt!==null)lt.return=at,Dt=lt;else for(;Dt!==null;){at=Dt;var rt=at.sibling,Ot=at.return;if(Fj(at),at===Fe){Dt=null;break}if(rt!==null){rt.return=Ot,Dt=rt;break}Dt=Ot}}}var Ut=z.alternate;if(Ut!==null){var zt=Ut.child;if(zt!==null){Ut.child=null;do{var si=zt.sibling;zt.sibling=null,zt=si}while(zt!==null)}}Dt=z}}if((z.subtreeFlags&2064)!==0&&Q!==null)Q.return=z,Dt=Q;else e:for(;Dt!==null;){if(z=Dt,(z.flags&2048)!==0)switch(z.tag){case 0:case 11:case 15:_y(9,z,z.return)}var Re=z.sibling;if(Re!==null){Re.return=z.return,Dt=Re;break e}Dt=z.return}}var _e=d.current;for(Dt=_e;Dt!==null;){Q=Dt;var je=Q.child;if((Q.subtreeFlags&2064)!==0&&je!==null)je.return=Q,Dt=je;else e:for(Q=_e;Dt!==null;){if(fe=Dt,(fe.flags&2048)!==0)try{switch(fe.tag){case 0:case 11:case 15:Jx(9,fe)}}catch(Ht){Kr(fe,fe.return,Ht)}if(fe===Q){Dt=null;break e}var ht=fe.sibling;if(ht!==null){ht.return=fe.return,Dt=ht;break e}Dt=fe.return}}if(Hn=D,Zs(),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(nn,d)}catch{}P=!0}return P}finally{zn=S,to.transition=p}}return!1}function tI(d,p,S){p=j(S,p),p=Se(d,p,1),d=Tr(d,p,1),p=Ba(),d!==null&&(ri(d,1,p),ls(d,p))}function Kr(d,p,S){if(d.tag===3)tI(d,d,S);else for(;p!==null;){if(p.tag===3){tI(p,d,S);break}else if(p.tag===1){var P=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(Nu===null||!Nu.has(P))){d=j(S,d),d=He(p,d,1),p=Tr(p,d,1),d=Ba(),p!==null&&(ri(p,1,d),ls(p,d));break}}p=p.return}}function Hq(d,p,S){var P=d.pingCache;P!==null&&P.delete(p),p=Ba(),d.pingedLanes|=d.suspendedLanes&S,qi===d&&(ua&S)===S&&(Ri===4||Ri===3&&(ua&130023424)===ua&&500>De()-aM?cf(d,0):iM|=S),ls(d,p)}function nI(d,p){p===0&&((d.mode&1)===0?p=1:(p=ar,ar<<=1,(ar&130023424)===0&&(ar=4194304)));var S=Ba();d=Ts(d,p),d!==null&&(ri(d,p,S),ls(d,S))}function Wq(d){var p=d.memoizedState,S=0;p!==null&&(S=p.retryLane),nI(d,S)}function Gq(d,p){var S=0;switch(d.tag){case 13:var P=d.stateNode,D=d.memoizedState;D!==null&&(S=D.retryLane);break;case 19:P=d.stateNode;break;default:throw Error(n(314))}P!==null&&P.delete(p),nI(d,S)}var rI;rI=function(d,p,S){if(d!==null)if(d.memoizedProps!==p.pendingProps||aa.current)Mn=!0;else{if((d.lanes&S)===0&&(p.flags&128)===0)return Mn=!1,Rq(d,p,S);Mn=(d.flags&131072)!==0}else Mn=!1,xr&&(p.flags&1048576)!==0&&iy(p,fp,p.index);switch(p.lanes=0,p.tag){case 2:var P=p.type;Kx(d,p),d=p.pendingProps;var D=ac(p,Ei.current);gl(p,S),D=ef(null,p,P,d,D,S);var z=fy();return p.flags|=1,typeof D=="object"&&D!==null&&typeof D.render=="function"&&D.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Wi(P)?(z=!0,sc(p)):z=!1,p.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,Sn(p),D.updater=Sp,p.stateNode=D,D._reactInternals=p,E(p,P,d,S),p=xn(null,p,P,!0,z,S)):(p.tag=0,xr&&z&&ay(p),Tt(null,p,D,S),p=p.child),p;case 16:P=p.elementType;e:{switch(Kx(d,p),d=p.pendingProps,D=P._init,P=D(P._payload),p.type=P,D=p.tag=qq(P),d=ss(P,d),D){case 0:p=_t(null,p,P,d,S);break e;case 1:p=Bt(null,p,P,d,S);break e;case 11:p=Oi(null,p,P,d,S);break e;case 14:p=za(null,p,P,ss(P.type,d),S);break e}throw Error(n(306,P,""))}return p;case 0:return P=p.type,D=p.pendingProps,D=p.elementType===P?D:ss(P,D),_t(d,p,P,D,S);case 1:return P=p.type,D=p.pendingProps,D=p.elementType===P?D:ss(P,D),Bt(d,p,P,D,S);case 3:e:{if(pn(p),d===null)throw Error(n(387));P=p.pendingProps,z=p.memoizedState,D=z.element,Wr(d,p),Lr(p,P,null,S);var Q=p.memoizedState;if(P=Q.element,z.isDehydrated)if(z={element:P,isDehydrated:!1,cache:Q.cache,pendingSuspenseBoundaries:Q.pendingSuspenseBoundaries,transitions:Q.transitions},p.updateQueue.baseState=z,p.memoizedState=z,p.flags&256){D=j(Error(n(423)),p),p=Fn(d,p,P,S,D);break e}else if(P!==D){D=j(Error(n(424)),p),p=Fn(d,p,P,S,D);break e}else for(oa=To(p.stateNode.containerInfo.firstChild),Ci=p,xr=!0,as=null,S=Xd(p,null,P,S),p.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(ml(),P===D){p=xc(d,p,S);break e}Tt(d,p,P,S)}p=p.child}return p;case 5:return mc(p),d===null&&pp(p),P=p.type,D=p.pendingProps,z=d!==null?d.memoizedProps:null,Q=D.children,Zg(P,D)?Q=null:z!==null&&Zg(P,z)&&(p.flags|=32),Be(d,p),Tt(d,p,Q,S),p.child;case 6:return d===null&&pp(p),null;case 13:return Lo(d,p,S);case 4:return Jd(p,p.stateNode.containerInfo),P=p.pendingProps,d===null?p.child=cc(p,null,P,S):Tt(d,p,P,S),p.child;case 11:return P=p.type,D=p.pendingProps,D=p.elementType===P?D:ss(P,D),Oi(d,p,P,D,S);case 7:return Tt(d,p,p.pendingProps,S),p.child;case 8:return Tt(d,p,p.pendingProps.children,S),p.child;case 12:return Tt(d,p,p.pendingProps.children,S),p.child;case 10:e:{if(P=p.type._context,D=p.pendingProps,z=p.memoizedProps,Q=D.value,or(uc,P._currentValue),P._currentValue=Q,z!==null)if(ka(z.value,Q)){if(z.children===D.children&&!aa.current){p=xc(d,p,S);break e}}else for(z=p.child,z!==null&&(z.return=p);z!==null;){var fe=z.dependencies;if(fe!==null){Q=z.child;for(var we=fe.firstContext;we!==null;){if(we.context===P){if(z.tag===1){we=Qn(-1,S&-S),we.tag=2;var Fe=z.updateQueue;if(Fe!==null){Fe=Fe.shared;var at=Fe.pending;at===null?we.next=we:(we.next=at.next,at.next=we),Fe.pending=we}}z.lanes|=S,we=z.alternate,we!==null&&(we.lanes|=S),Kd(z.return,S,p),fe.lanes|=S;break}we=we.next}}else if(z.tag===10)Q=z.type===p.type?null:z.child;else if(z.tag===18){if(Q=z.return,Q===null)throw Error(n(341));Q.lanes|=S,fe=Q.alternate,fe!==null&&(fe.lanes|=S),Kd(Q,S,p),Q=z.sibling}else Q=z.child;if(Q!==null)Q.return=z;else for(Q=z;Q!==null;){if(Q===p){Q=null;break}if(z=Q.sibling,z!==null){z.return=Q.return,Q=z;break}Q=Q.return}z=Q}Tt(d,p,D.children,S),p=p.child}return p;case 9:return D=p.type,P=p.pendingProps.children,gl(p,S),D=Da(D),P=P(D),p.flags|=1,Tt(d,p,P,S),p.child;case 14:return P=p.type,D=ss(P,p.pendingProps),D=ss(P.type,D),za(d,p,P,D,S);case 15:return Le(d,p,p.type,p.pendingProps,S);case 17:return P=p.type,D=p.pendingProps,D=p.elementType===P?D:ss(P,D),Kx(d,p),p.tag=1,Wi(P)?(d=!0,sc(p)):d=!1,gl(p,S),g(p,P,D),E(p,P,D,S),xn(null,p,P,!0,d,S);case 19:return jj(d,p,S);case 22:return Te(d,p,S)}throw Error(n(156,p.tag))};function iI(d,p){return he(d,p)}function $q(d,p,S,P){this.tag=d,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function no(d,p,S,P){return new $q(d,p,S,P)}function hM(d){return d=d.prototype,!(!d||!d.isReactComponent)}function qq(d){if(typeof d=="function")return hM(d)?1:0;if(d!=null){if(d=d.$$typeof,d===V)return 11;if(d===J)return 14}return 2}function ju(d,p){var S=d.alternate;return S===null?(S=no(d.tag,p,d.key,d.mode),S.elementType=d.elementType,S.type=d.type,S.stateNode=d.stateNode,S.alternate=d,d.alternate=S):(S.pendingProps=p,S.type=d.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=d.flags&14680064,S.childLanes=d.childLanes,S.lanes=d.lanes,S.child=d.child,S.memoizedProps=d.memoizedProps,S.memoizedState=d.memoizedState,S.updateQueue=d.updateQueue,p=d.dependencies,S.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},S.sibling=d.sibling,S.index=d.index,S.ref=d.ref,S}function ob(d,p,S,P,D,z){var Q=2;if(P=d,typeof d=="function")hM(d)&&(Q=1);else if(typeof d=="string")Q=5;else e:switch(d){case O:return df(S.children,D,z,p);case k:Q=8,D|=8;break;case C:return d=no(12,S,p,D|2),d.elementType=C,d.lanes=z,d;case W:return d=no(13,S,p,D),d.elementType=W,d.lanes=z,d;case G:return d=no(19,S,p,D),d.elementType=G,d.lanes=z,d;case ae:return lb(S,D,z,p);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case I:Q=10;break e;case F:Q=9;break e;case V:Q=11;break e;case J:Q=14;break e;case ee:Q=16,P=null;break e}throw Error(n(130,d==null?d:typeof d,""))}return p=no(Q,S,p,D),p.elementType=d,p.type=P,p.lanes=z,p}function df(d,p,S,P){return d=no(7,d,P,p),d.lanes=S,d}function lb(d,p,S,P){return d=no(22,d,P,p),d.elementType=ae,d.lanes=S,d.stateNode={isHidden:!1},d}function pM(d,p,S){return d=no(6,d,null,p),d.lanes=S,d}function mM(d,p,S){return p=no(4,d.children!==null?d.children:[],d.key,p),p.lanes=S,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}function Xq(d,p,S,P,D){this.tag=p,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pa(0),this.expirationTimes=pa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pa(0),this.identifierPrefix=P,this.onRecoverableError=D,this.mutableSourceEagerHydrationData=null}function gM(d,p,S,P,D,z,Q,fe,we){return d=new Xq(d,p,S,fe,we),p===1?(p=1,z===!0&&(p|=8)):p=0,z=no(3,null,null,p),d.current=z,z.stateNode=d,z.memoizedState={element:P,isDehydrated:S,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sn(z),d}function Yq(d,p,S){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:P==null?null:""+P,children:d,containerInfo:p,implementation:S}}function aI(d){if(!d)return Eo;d=d._reactInternals;e:{if(re(d)!==d||d.tag!==1)throw Error(n(170));var p=d;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Wi(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(n(171))}if(d.tag===1){var S=d.type;if(Wi(S))return Hd(d,S,p)}return p}function sI(d,p,S,P,D,z,Q,fe,we){return d=gM(S,P,!0,d,D,z,Q,fe,we),d.context=aI(null),S=d.current,P=Ba(),D=Ru(S),z=Qn(P,D),z.callback=p??null,Tr(S,z,D),d.current.lanes=D,ri(d,D,P),ls(d,P),d}function cb(d,p,S,P){var D=p.current,z=Ba(),Q=Ru(D);return S=aI(S),p.context===null?p.context=S:p.pendingContext=S,p=Qn(z,Q),p.payload={element:d},P=P===void 0?null:P,P!==null&&(p.callback=P),d=Tr(D,p,Q),d!==null&&(zo(d,D,Q,z),Gi(d,D,Q)),Q}function ub(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function oI(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var S=d.retryLane;d.retryLane=S!==0&&S<p?S:p}}function yM(d,p){oI(d,p),(d=d.alternate)&&oI(d,p)}function Kq(){return null}var lI=typeof reportError=="function"?reportError:function(d){console.error(d)};function vM(d){this._internalRoot=d}db.prototype.render=vM.prototype.render=function(d){var p=this._internalRoot;if(p===null)throw Error(n(409));cb(d,p,null,null)},db.prototype.unmount=vM.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var p=d.containerInfo;lf(function(){cb(null,d,null,null)}),p[Ia]=null}};function db(d){this._internalRoot=d}db.prototype.unstable_scheduleHydration=function(d){if(d){var p=Oh();d={blockedOn:null,target:d,priority:p};for(var S=0;S<ol.length&&p!==0&&p<ol[S].priority;S++);ol.splice(S,0,d),S===0&&jh(d)}};function xM(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function fb(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function cI(){}function Zq(d,p,S,P,D){if(D){if(typeof P=="function"){var z=P;P=function(){var Fe=ub(Q);z.call(Fe)}}var Q=sI(p,P,d,0,null,!1,!1,"",cI);return d._reactRootContainer=Q,d[Ia]=Q.current,vu(d.nodeType===8?d.parentNode:d),lf(),Q}for(;D=d.lastChild;)d.removeChild(D);if(typeof P=="function"){var fe=P;P=function(){var Fe=ub(we);fe.call(Fe)}}var we=gM(d,0,!1,null,null,!1,!1,"",cI);return d._reactRootContainer=we,d[Ia]=we.current,vu(d.nodeType===8?d.parentNode:d),lf(function(){cb(p,we,S,P)}),we}function hb(d,p,S,P,D){var z=S._reactRootContainer;if(z){var Q=z;if(typeof D=="function"){var fe=D;D=function(){var we=ub(Q);fe.call(we)}}cb(p,Q,d,D)}else Q=Zq(S,p,d,D,P);return ub(Q)}Ad=function(d){switch(d.tag){case 3:var p=d.stateNode;if(p.current.memoizedState.isDehydrated){var S=Rn(p.pendingLanes);S!==0&&(iu(p,S|1),ls(p,De()),(Hn&6)===0&&(Ap=De()+500,Zs()))}break;case 13:lf(function(){var P=Ts(d,1);if(P!==null){var D=Ba();zo(P,d,1,D)}}),yM(d,1)}},kg=function(d){if(d.tag===13){var p=Ts(d,134217728);if(p!==null){var S=Ba();zo(p,d,134217728,S)}yM(d,134217728)}},Sx=function(d){if(d.tag===13){var p=Ru(d),S=Ts(d,p);if(S!==null){var P=Ba();zo(S,d,p,P)}yM(d,p)}},Oh=function(){return zn},Rh=function(d,p){var S=zn;try{return zn=d,p()}finally{zn=S}},Ce=function(d,p,S){switch(p){case"input":if(ct(d,S),p=S.name,S.type==="radio"&&p!=null){for(S=d;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<S.length;p++){var P=S[p];if(P!==d&&P.form===d.form){var D=cp(P);if(!D)throw Error(n(90));Z(P),ct(P,D)}}}break;case"textarea":Ze(d,S);break;case"select":p=S.value,p!=null&&Ae(d,!!S.multiple,p,!1)}},wn=uM,On=lf;var Jq={usingClientEntryPoint:!1,Events:[Ao,Hr,cp,Gt,It,uM]},Ay={findFiberByHostInstance:pl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qq={bundleType:Ay.bundleType,version:Ay.version,rendererPackageName:Ay.rendererPackageName,rendererConfig:Ay.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=ce(d),d===null?null:d.stateNode},findFiberByHostInstance:Ay.findFiberByHostInstance||Kq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pb.isDisabled&&pb.supportsFiber)try{nn=pb.inject(Qq),xt=pb}catch{}}return cs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jq,cs.createPortal=function(d,p){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xM(p))throw Error(n(200));return Yq(d,p,null,S)},cs.createRoot=function(d,p){if(!xM(d))throw Error(n(299));var S=!1,P="",D=lI;return p!=null&&(p.unstable_strictMode===!0&&(S=!0),p.identifierPrefix!==void 0&&(P=p.identifierPrefix),p.onRecoverableError!==void 0&&(D=p.onRecoverableError)),p=gM(d,1,!1,null,null,S,!1,P,D),d[Ia]=p.current,vu(d.nodeType===8?d.parentNode:d),new vM(p)},cs.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(n(188)):(d=Object.keys(d).join(","),Error(n(268,d)));return d=ce(p),d=d===null?null:d.stateNode,d},cs.flushSync=function(d){return lf(d)},cs.hydrate=function(d,p,S){if(!fb(p))throw Error(n(200));return hb(null,d,p,!0,S)},cs.hydrateRoot=function(d,p,S){if(!xM(d))throw Error(n(405));var P=S!=null&&S.hydratedSources||null,D=!1,z="",Q=lI;if(S!=null&&(S.unstable_strictMode===!0&&(D=!0),S.identifierPrefix!==void 0&&(z=S.identifierPrefix),S.onRecoverableError!==void 0&&(Q=S.onRecoverableError)),p=sI(p,null,d,1,S??null,D,!1,z,Q),d[Ia]=p.current,vu(d),P)for(d=0;d<P.length;d++)S=P[d],D=S._getVersion,D=D(S._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[S,D]:p.mutableSourceEagerHydrationData.push(S,D);return new db(p)},cs.render=function(d,p,S){if(!fb(p))throw Error(n(200));return hb(null,d,p,!1,S)},cs.unmountComponentAtNode=function(d){if(!fb(d))throw Error(n(40));return d._reactRootContainer?(lf(function(){hb(null,null,d,!1,function(){d._reactRootContainer=null,d[Ia]=null})}),!0):!1},cs.unstable_batchedUpdates=uM,cs.unstable_renderSubtreeIntoContainer=function(d,p,S,P){if(!fb(S))throw Error(n(200));if(d==null||d._reactInternals===void 0)throw Error(n(38));return hb(d,p,S,!1,P)},cs.version="18.3.1-next-f1338f8080-20240426",cs}var yI;function n8(){if(yI)return _M.exports;yI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_M.exports=lX(),_M.exports}var vI;function cX(){if(vI)return gb;vI=1;var t=n8();return gb.createRoot=t.createRoot,gb.hydrateRoot=t.hydrateRoot,gb}var uX=cX();const dX=Zn(uX);n8();function Rv(){return Rv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rv.apply(this,arguments)}var Ju;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ju||(Ju={}));const xI="popstate";function fX(t){t===void 0&&(t={});function e(r,i){let{pathname:a,search:s,hash:o}=r.location;return $C("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Kw(i)}return pX(e,n,null,t)}function qr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function FO(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hX(){return Math.random().toString(36).substr(2,8)}function bI(t,e){return{usr:t.state,key:t.key,idx:e}}function $C(t,e,n,r){return n===void 0&&(n=null),Rv({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?mg(e):e,{state:n,key:e&&e.key||r||hX()})}function Kw(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function mg(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function pX(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o=Ju.Pop,l=null,u=f();u==null&&(u=0,s.replaceState(Rv({},s.state,{idx:u}),""));function f(){return(s.state||{idx:null}).idx}function h(){o=Ju.Pop;let x=f(),_=x==null?null:x-u;u=x,l&&l({action:o,location:b.location,delta:_})}function m(x,_){o=Ju.Push;let M=$C(b.location,x,_);u=f()+1;let T=bI(M,u),A=b.createHref(M);try{s.pushState(T,"",A)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(A)}a&&l&&l({action:o,location:b.location,delta:1})}function y(x,_){o=Ju.Replace;let M=$C(b.location,x,_);u=f();let T=bI(M,u),A=b.createHref(M);s.replaceState(T,"",A),a&&l&&l({action:o,location:b.location,delta:0})}function w(x){let _=i.location.origin!=="null"?i.location.origin:i.location.href,M=typeof x=="string"?x:Kw(x);return M=M.replace(/ $/,"%20"),qr(_,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,_)}let b={get action(){return o},get location(){return t(i,s)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(xI,h),l=x,()=>{i.removeEventListener(xI,h),l=null}},createHref(x){return e(i,x)},createURL:w,encodeLocation(x){let _=w(x);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:y,go(x){return s.go(x)}};return b}var wI;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(wI||(wI={}));function mX(t,e,n){return n===void 0&&(n="/"),gX(t,e,n)}function gX(t,e,n,r){let i=typeof e=="string"?mg(e):e,a=Nm(i.pathname||"/",n);if(a==null)return null;let s=r8(t);yX(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let u=CX(a);o=AX(s[l],u)}return o}function r8(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,s,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};l.relativePath.startsWith("/")&&(qr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=nd([r,l.relativePath]),f=n.concat(l);a.children&&a.children.length>0&&(qr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),r8(a.children,e,f,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:MX(u,a.index),routesMeta:f})};return t.forEach((a,s)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))i(a,s);else for(let l of i8(a.path))i(a,s,l)}),e}function i8(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=i8(r.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function yX(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:TX(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const vX=/^:[\w-]+$/,xX=3,bX=2,wX=1,_X=10,SX=-2,_I=t=>t==="*";function MX(t,e){let n=t.split("/"),r=n.length;return n.some(_I)&&(r+=SX),e&&(r+=bX),n.filter(i=>!_I(i)).reduce((i,a)=>i+(vX.test(a)?xX:a===""?wX:_X),r)}function TX(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function AX(t,e,n){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",h=qC({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f),m=l.route;if(!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:nd([a,h.pathname]),pathnameBase:kX(nd([a,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(a=nd([a,h.pathnameBase]))}return s}function qC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=EX(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,f,h)=>{let{paramName:m,isOptional:y}=f;if(m==="*"){let b=o[h]||"";s=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const w=o[h];return y&&!w?u[m]=void 0:u[m]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function EX(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),FO(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function CX(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return FO(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Nm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const PX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NX=t=>PX.test(t);function OX(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?mg(t):t,a;if(n)if(NX(n))a=n;else{if(n.includes("//")){let s=n;n=n.replace(/\/\/+/g,"/"),FO(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+n))}n.startsWith("/")?a=SI(n.substring(1),"/"):a=SI(n,e)}else a=e;return{pathname:a,search:jX(r),hash:IX(i)}}function SI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function TM(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function RX(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zO(t,e){let n=RX(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function BO(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=mg(t):(i=Rv({},t),qr(!i.pathname||!i.pathname.includes("?"),TM("?","pathname","search",i)),qr(!i.pathname||!i.pathname.includes("#"),TM("#","pathname","hash",i)),qr(!i.search||!i.search.includes("#"),TM("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}o=h>=0?e[h]:"/"}let l=OX(i,o),u=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||f)&&(l.pathname+="/"),l}const nd=t=>t.join("/").replace(/\/\/+/g,"/"),kX=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jX=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,IX=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function DX(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const a8=["post","put","patch","delete"];new Set(a8);const LX=["get",...a8];new Set(LX);function kv(){return kv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kv.apply(this,arguments)}const __=L.createContext(null),s8=L.createContext(null),Kc=L.createContext(null),S_=L.createContext(null),Zc=L.createContext({outlet:null,matches:[],isDataRoute:!1}),o8=L.createContext(null);function UX(t,e){let{relative:n}=e===void 0?{}:e;gg()||qr(!1);let{basename:r,navigator:i}=L.useContext(Kc),{hash:a,pathname:s,search:o}=M_(t,{relative:n}),l=s;return r!=="/"&&(l=s==="/"?r:nd([r,s])),i.createHref({pathname:l,search:o,hash:a})}function gg(){return L.useContext(S_)!=null}function Dl(){return gg()||qr(!1),L.useContext(S_).location}function l8(t){L.useContext(Kc).static||L.useLayoutEffect(t)}function ni(){let{isDataRoute:t}=L.useContext(Zc);return t?JX():FX()}function FX(){gg()||qr(!1);let t=L.useContext(__),{basename:e,future:n,navigator:r}=L.useContext(Kc),{matches:i}=L.useContext(Zc),{pathname:a}=Dl(),s=JSON.stringify(zO(i,n.v7_relativeSplatPath)),o=L.useRef(!1);return l8(()=>{o.current=!0}),L.useCallback(function(u,f){if(f===void 0&&(f={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let h=BO(u,JSON.parse(s),a,f.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:nd([e,h.pathname])),(f.replace?r.replace:r.push)(h,f.state,f)},[e,r,s,a,t])}function zX(){let{matches:t}=L.useContext(Zc),e=t[t.length-1];return e?e.params:{}}function M_(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=L.useContext(Kc),{matches:i}=L.useContext(Zc),{pathname:a}=Dl(),s=JSON.stringify(zO(i,r.v7_relativeSplatPath));return L.useMemo(()=>BO(t,JSON.parse(s),a,n==="path"),[t,s,a,n])}function BX(t,e){return VX(t,e)}function VX(t,e,n,r){gg()||qr(!1);let{navigator:i}=L.useContext(Kc),{matches:a}=L.useContext(Zc),s=a[a.length-1],o=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let u=Dl(),f;if(e){var h;let x=typeof e=="string"?mg(e):e;l==="/"||(h=x.pathname)!=null&&h.startsWith(l)||qr(!1),f=x}else f=u;let m=f.pathname||"/",y=m;if(l!=="/"){let x=l.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let w=mX(t,{pathname:y}),b=qX(w&&w.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:nd([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:nd([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),a,n,r);return e&&b?L.createElement(S_.Provider,{value:{location:kv({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ju.Pop}},b):b}function HX(){let t=ZX(),e=DX(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:i},n):null,null)}const WX=L.createElement(HX,null);class GX extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(Zc.Provider,{value:this.props.routeContext},L.createElement(o8.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $X(t){let{routeContext:e,match:n,children:r}=t,i=L.useContext(__);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(Zc.Provider,{value:e},r)}function qX(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let f=s.findIndex(h=>h.route.id&&o?.[h.route.id]!==void 0);f>=0||qr(!1),s=s.slice(0,Math.min(s.length,f+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<s.length;f++){let h=s[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=f),h.route.id){let{loaderData:m,errors:y}=n,w=h.route.loader&&m[h.route.id]===void 0&&(!y||y[h.route.id]===void 0);if(h.route.lazy||w){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((f,h,m)=>{let y,w=!1,b=null,x=null;n&&(y=o&&h.route.id?o[h.route.id]:void 0,b=h.route.errorElement||WX,l&&(u<0&&m===0?(QX("route-fallback"),w=!0,x=null):u===m&&(w=!0,x=h.route.hydrateFallbackElement||null)));let _=e.concat(s.slice(0,m+1)),M=()=>{let T;return y?T=b:w?T=x:h.route.Component?T=L.createElement(h.route.Component,null):h.route.element?T=h.route.element:T=f,L.createElement($X,{match:h,routeContext:{outlet:f,matches:_,isDataRoute:n!=null},children:T})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?L.createElement(GX,{location:n.location,revalidation:n.revalidation,component:b,error:y,children:M(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):M()},null)}var c8=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(c8||{}),u8=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(u8||{});function XX(t){let e=L.useContext(__);return e||qr(!1),e}function YX(t){let e=L.useContext(s8);return e||qr(!1),e}function KX(t){let e=L.useContext(Zc);return e||qr(!1),e}function d8(t){let e=KX(),n=e.matches[e.matches.length-1];return n.route.id||qr(!1),n.route.id}function ZX(){var t;let e=L.useContext(o8),n=YX(),r=d8();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function JX(){let{router:t}=XX(c8.UseNavigateStable),e=d8(u8.UseNavigateStable),n=L.useRef(!1);return l8(()=>{n.current=!0}),L.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,kv({fromRouteId:e},a)))},[t,e])}const MI={};function QX(t,e,n){MI[t]||(MI[t]=!0)}function eY(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function XC(t){let{to:e,replace:n,state:r,relative:i}=t;gg()||qr(!1);let{future:a,static:s}=L.useContext(Kc),{matches:o}=L.useContext(Zc),{pathname:l}=Dl(),u=ni(),f=BO(e,zO(o,a.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(f);return L.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:i}),[u,h,i,n,r]),null}function Ln(t){qr(!1)}function tY(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ju.Pop,navigator:a,static:s=!1,future:o}=t;gg()&&qr(!1);let l=e.replace(/^\/*/,"/"),u=L.useMemo(()=>({basename:l,navigator:a,static:s,future:kv({v7_relativeSplatPath:!1},o)}),[l,o,a,s]);typeof r=="string"&&(r=mg(r));let{pathname:f="/",search:h="",hash:m="",state:y=null,key:w="default"}=r,b=L.useMemo(()=>{let x=Nm(f,l);return x==null?null:{location:{pathname:x,search:h,hash:m,state:y,key:w},navigationType:i}},[l,f,h,m,y,w,i]);return b==null?null:L.createElement(Kc.Provider,{value:u},L.createElement(S_.Provider,{children:n,value:b}))}function nY(t){let{children:e,location:n}=t;return BX(YC(e),n)}new Promise(()=>{});function YC(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(r,i)=>{if(!L.isValidElement(r))return;let a=[...e,i];if(r.type===L.Fragment){n.push.apply(n,YC(r.props.children,a));return}r.type!==Ln&&qr(!1),!r.props.index||!r.props.children||qr(!1);let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=YC(r.props.children,a)),n.push(s)}),n}function Zw(){return Zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zw.apply(this,arguments)}function f8(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function rY(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function iY(t,e){return t.button===0&&(!e||e==="_self")&&!rY(t)}function KC(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function aY(t,e){let n=KC(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}const sY=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],oY=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],lY="6";try{window.__reactRouterVersion=lY}catch{}const cY=L.createContext({isTransitioning:!1}),uY="startTransition",TI=aX[uY];function dY(t){let{basename:e,children:n,future:r,window:i}=t,a=L.useRef();a.current==null&&(a.current=fX({window:i,v5Compat:!0}));let s=a.current,[o,l]=L.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},f=L.useCallback(h=>{u&&TI?TI(()=>l(h)):l(h)},[l,u]);return L.useLayoutEffect(()=>s.listen(f),[s,f]),L.useEffect(()=>eY(r),[r]),L.createElement(tY,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:s,future:r})}const fY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pY=L.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:s,state:o,target:l,to:u,preventScrollReset:f,viewTransition:h}=e,m=f8(e,sY),{basename:y}=L.useContext(Kc),w,b=!1;if(typeof u=="string"&&hY.test(u)&&(w=u,fY))try{let T=new URL(window.location.href),A=u.startsWith("//")?new URL(T.protocol+u):new URL(u),R=Nm(A.pathname,y);A.origin===T.origin&&R!=null?u=R+A.search+A.hash:b=!0}catch{}let x=UX(u,{relative:i}),_=gY(u,{replace:s,state:o,target:l,preventScrollReset:f,relative:i,viewTransition:h});function M(T){r&&r(T),T.defaultPrevented||_(T)}return L.createElement("a",Zw({},m,{href:w||x,onClick:b||a?r:M,ref:n,target:l}))}),h8=L.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:a="",end:s=!1,style:o,to:l,viewTransition:u,children:f}=e,h=f8(e,oY),m=M_(l,{relative:h.relative}),y=Dl(),w=L.useContext(s8),{navigator:b,basename:x}=L.useContext(Kc),_=w!=null&&vY(m)&&u===!0,M=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,T=y.pathname,A=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;i||(T=T.toLowerCase(),A=A?A.toLowerCase():null,M=M.toLowerCase()),A&&x&&(A=Nm(A,x)||A);const R=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let N=T===M||!s&&T.startsWith(M)&&T.charAt(R)==="/",O=A!=null&&(A===M||!s&&A.startsWith(M)&&A.charAt(M.length)==="/"),k={isActive:N,isPending:O,isTransitioning:_},C=N?r:void 0,I;typeof a=="function"?I=a(k):I=[a,N?"active":null,O?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let F=typeof o=="function"?o(k):o;return L.createElement(pY,Zw({},h,{"aria-current":C,className:I,ref:n,style:F,to:l,viewTransition:u}),typeof f=="function"?f(k):f)});var ZC;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ZC||(ZC={}));var AI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(AI||(AI={}));function mY(t){let e=L.useContext(__);return e||qr(!1),e}function gY(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:s,viewTransition:o}=e===void 0?{}:e,l=ni(),u=Dl(),f=M_(t,{relative:s});return L.useCallback(h=>{if(iY(h,n)){h.preventDefault();let m=r!==void 0?r:Kw(u)===Kw(f);l(t,{replace:m,state:i,preventScrollReset:a,relative:s,viewTransition:o})}},[u,l,f,r,i,n,t,a,s,o])}function yY(t){let e=L.useRef(KC(t)),n=L.useRef(!1),r=Dl(),i=L.useMemo(()=>aY(r.search,n.current?null:e.current),[r.search]),a=ni(),s=L.useCallback((o,l)=>{const u=KC(typeof o=="function"?o(i):o);n.current=!0,a("?"+u,l)},[a,i]);return[i,s]}function vY(t,e){e===void 0&&(e={});let n=L.useContext(cY);n==null&&qr(!1);let{basename:r}=mY(ZC.useViewTransitionState),i=M_(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=Nm(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Nm(n.nextLocation.pathname,r)||n.nextLocation.pathname;return qC(i.pathname,s)!=null||qC(i.pathname,a)!=null}let xY={data:""},bY=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||xY},wY=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,_Y=/\/\*[^]*?\*\/|  +/g,EI=/\n+/g,Yu=(t,e)=>{let n="",r="",i="";for(let a in t){let s=t[a];a[0]=="@"?a[1]=="i"?n=a+" "+s+";":r+=a[1]=="f"?Yu(s,a):a+"{"+Yu(s,a[1]=="k"?"":e)+"}":typeof s=="object"?r+=Yu(s,e?e.replace(/([^,])+/g,o=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):a):s!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Yu.p?Yu.p(a,s):a+":"+s+";")}return n+(e&&i?e+"{"+i+"}":i)+r},wc={},p8=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+p8(t[n]);return e}return t},SY=(t,e,n,r,i)=>{let a=p8(t),s=wc[a]||(wc[a]=(l=>{let u=0,f=11;for(;u<l.length;)f=101*f+l.charCodeAt(u++)>>>0;return"go"+f})(a));if(!wc[s]){let l=a!==t?t:(u=>{let f,h,m=[{}];for(;f=wY.exec(u.replace(_Y,""));)f[4]?m.shift():f[3]?(h=f[3].replace(EI," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][f[1]]=f[2].replace(EI," ").trim();return m[0]})(t);wc[s]=Yu(i?{["@keyframes "+s]:l}:l,n?"":"."+s)}let o=n&&wc.g?wc.g:null;return n&&(wc.g=wc[s]),((l,u,f,h)=>{h?u.data=u.data.replace(h,l):u.data.indexOf(l)===-1&&(u.data=f?l+u.data:u.data+l)})(wc[s],e,r,o),s},MY=(t,e,n)=>t.reduce((r,i,a)=>{let s=e[a];if(s&&s.call){let o=s(n),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;s=l?"."+l:o&&typeof o=="object"?o.props?"":Yu(o,""):o===!1?"":o}return r+i+(s??"")},"");function T_(t){let e=this||{},n=t.call?t(e.p):t;return SY(n.unshift?n.raw?MY(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,bY(e.target),e.g,e.o,e.k)}let m8,JC,QC;T_.bind({g:1});let Bc=T_.bind({k:1});function TY(t,e,n,r){Yu.p=e,m8=t,JC=n,QC=r}function gd(t,e){let n=this||{};return function(){let r=arguments;function i(a,s){let o=Object.assign({},a),l=o.className||i.className;n.p=Object.assign({theme:JC&&JC()},o),n.o=/ *go\d+/.test(l),o.className=T_.apply(n,r)+(l?" "+l:"");let u=t;return t[0]&&(u=o.as||t,delete o.as),QC&&u[0]&&QC(o),m8(u,o)}return i}}var AY=t=>typeof t=="function",Jw=(t,e)=>AY(t)?t(e):t,EY=(()=>{let t=0;return()=>(++t).toString()})(),g8=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),CY=20,VO="default",y8=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:r}=e;return y8(t,{type:t.toasts.find(s=>s.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(s=>s.id===i||i===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let a=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+a}))}}},Rw=[],v8={toasts:[],pausedAt:void 0,settings:{toastLimit:CY}},bl={},x8=(t,e=VO)=>{bl[e]=y8(bl[e]||v8,t),Rw.forEach(([n,r])=>{n===e&&r(bl[e])})},b8=t=>Object.keys(bl).forEach(e=>x8(t,e)),PY=t=>Object.keys(bl).find(e=>bl[e].toasts.some(n=>n.id===t)),A_=(t=VO)=>e=>{x8(e,t)},NY={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},OY=(t={},e=VO)=>{let[n,r]=L.useState(bl[e]||v8),i=L.useRef(bl[e]);L.useEffect(()=>(i.current!==bl[e]&&r(bl[e]),Rw.push([e,r]),()=>{let s=Rw.findIndex(([o])=>o===e);s>-1&&Rw.splice(s,1)}),[e]);let a=n.toasts.map(s=>{var o,l,u;return{...t,...t[s.type],...s,removeDelay:s.removeDelay||((o=t[s.type])==null?void 0:o.removeDelay)||t?.removeDelay,duration:s.duration||((l=t[s.type])==null?void 0:l.duration)||t?.duration||NY[s.type],style:{...t.style,...(u=t[s.type])==null?void 0:u.style,...s.style}}});return{...n,toasts:a}},RY=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||EY()}),$0=t=>(e,n)=>{let r=RY(e,t,n);return A_(r.toasterId||PY(r.id))({type:2,toast:r}),r.id},Li=(t,e)=>$0("blank")(t,e);Li.error=$0("error");Li.success=$0("success");Li.loading=$0("loading");Li.custom=$0("custom");Li.dismiss=(t,e)=>{let n={type:3,toastId:t};e?A_(e)(n):b8(n)};Li.dismissAll=t=>Li.dismiss(void 0,t);Li.remove=(t,e)=>{let n={type:4,toastId:t};e?A_(e)(n):b8(n)};Li.removeAll=t=>Li.remove(void 0,t);Li.promise=(t,e,n)=>{let r=Li.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let a=e.success?Jw(e.success,i):void 0;return a?Li.success(a,{id:r,...n,...n?.success}):Li.dismiss(r),i}).catch(i=>{let a=e.error?Jw(e.error,i):void 0;a?Li.error(a,{id:r,...n,...n?.error}):Li.dismiss(r)}),t};var kY=1e3,jY=(t,e="default")=>{let{toasts:n,pausedAt:r}=OY(t,e),i=L.useRef(new Map).current,a=L.useCallback((h,m=kY)=>{if(i.has(h))return;let y=setTimeout(()=>{i.delete(h),s({type:4,toastId:h})},m);i.set(h,y)},[]);L.useEffect(()=>{if(r)return;let h=Date.now(),m=n.map(y=>{if(y.duration===1/0)return;let w=(y.duration||0)+y.pauseDuration-(h-y.createdAt);if(w<0){y.visible&&Li.dismiss(y.id);return}return setTimeout(()=>Li.dismiss(y.id,e),w)});return()=>{m.forEach(y=>y&&clearTimeout(y))}},[n,r,e]);let s=L.useCallback(A_(e),[e]),o=L.useCallback(()=>{s({type:5,time:Date.now()})},[s]),l=L.useCallback((h,m)=>{s({type:1,toast:{id:h,height:m}})},[s]),u=L.useCallback(()=>{r&&s({type:6,time:Date.now()})},[r,s]),f=L.useCallback((h,m)=>{let{reverseOrder:y=!1,gutter:w=8,defaultPosition:b}=m||{},x=n.filter(T=>(T.position||b)===(h.position||b)&&T.height),_=x.findIndex(T=>T.id===h.id),M=x.filter((T,A)=>A<_&&T.visible).length;return x.filter(T=>T.visible).slice(...y?[M+1]:[0,M]).reduce((T,A)=>T+(A.height||0)+w,0)},[n]);return L.useEffect(()=>{n.forEach(h=>{if(h.dismissed)a(h.id,h.removeDelay);else{let m=i.get(h.id);m&&(clearTimeout(m),i.delete(h.id))}})},[n,a]),{toasts:n,handlers:{updateHeight:l,startPause:o,endPause:u,calculateOffset:f}}},IY=Bc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,DY=Bc`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,LY=Bc`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,UY=gd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${IY} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${DY} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${LY} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,FY=Bc`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,zY=gd("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${FY} 1s linear infinite;
`,BY=Bc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,VY=Bc`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,HY=gd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${BY} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${VY} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,WY=gd("div")`
  position: absolute;
`,GY=gd("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,$Y=Bc`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,qY=gd("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${$Y} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,XY=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?L.createElement(qY,null,e):e:n==="blank"?null:L.createElement(GY,null,L.createElement(zY,{...r}),n!=="loading"&&L.createElement(WY,null,n==="error"?L.createElement(UY,{...r}):L.createElement(HY,{...r})))},YY=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,KY=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,ZY="0%{opacity:0;} 100%{opacity:1;}",JY="0%{opacity:1;} 100%{opacity:0;}",QY=gd("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,eK=gd("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,tK=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=g8()?[ZY,JY]:[YY(n),KY(n)];return{animation:e?`${Bc(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Bc(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},nK=L.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?tK(t.position||e||"top-center",t.visible):{opacity:0},a=L.createElement(XY,{toast:t}),s=L.createElement(eK,{...t.ariaProps},Jw(t.message,t));return L.createElement(QY,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:a,message:s}):L.createElement(L.Fragment,null,a,s))});TY(L.createElement);var rK=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let a=L.useCallback(s=>{if(s){let o=()=>{let l=s.getBoundingClientRect().height;r(t,l)};o(),new MutationObserver(o).observe(s,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return L.createElement("div",{ref:a,className:e,style:n},i)},iK=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:g8()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},aK=T_`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,yb=16,sK=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,toasterId:a,containerStyle:s,containerClassName:o})=>{let{toasts:l,handlers:u}=jY(n,a);return L.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:yb,left:yb,right:yb,bottom:yb,pointerEvents:"none",...s},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(f=>{let h=f.position||e,m=u.calculateOffset(f,{reverseOrder:t,gutter:r,defaultPosition:e}),y=iK(h,m);return L.createElement(rK,{id:f.id,key:f.id,onHeightUpdate:u.updateHeight,className:f.visible?aK:"",style:y},f.type==="custom"?Jw(f.message,f):i?i(f):L.createElement(nK,{toast:f,position:h}))}))},de=Li;const jv="/api",Qw=()=>localStorage.getItem("token"),et=async(t,e={})=>{const n=Qw(),r={"Content-Type":"application/json",...e.headers};n&&(r.Authorization=`Bearer ${n}`);try{const i=await fetch(`${jv}${t}`,{...e,headers:r});if(!i.ok){if(i.status===401){localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname!=="/login"&&(window.location.href="/login");const s=await i.json().catch(()=>({message:"Session expired. Please login again."}));throw new Error(s.message||"Session expired. Please login again.")}const a=await i.json().catch(()=>({message:"An error occurred"}));throw new Error(a.message||"Request failed")}return i.json()}catch(i){throw i instanceof TypeError&&i.message.includes("fetch")?new Error("Network error: Unable to connect to server. Please check your connection and try again."):i}},kw={login:async(t,e)=>et("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:e})}),register:async t=>et("/auth/register",{method:"POST",body:JSON.stringify(t)}),getMe:async()=>et("/auth/me"),getOrganization:async t=>et(`/organizations/${t}`)},Di={getAll:async(t={})=>{const e=new URLSearchParams;t.status&&e.append("status",t.status),t.priority&&e.append("priority",t.priority),t.search&&e.append("search",t.search),t.organization&&e.append("organization",t.organization);const n=e.toString();return et(`/tickets${n?`?${n}`:""}`)},getById:async t=>et(`/tickets/${t}`),create:async t=>et("/tickets",{method:"POST",body:JSON.stringify(t)}),createWithFiles:async t=>{const e=localStorage.getItem("token"),n=await fetch(`${jv}/tickets`,{method:"POST",headers:{Authorization:`Bearer ${e}`},body:t});if(!n.ok){const r=await n.json();throw new Error(r.message||"Failed to create ticket")}return n.json()},update:async(t,e)=>et(`/tickets/${t}`,{method:"PUT",body:JSON.stringify(e)}),addComment:async(t,e)=>et(`/tickets/${t}/comments`,{method:"POST",body:JSON.stringify(e)}),approveTicket:async t=>et(`/tickets/${t}/approve`,{method:"POST"}),rejectTicket:async(t,e)=>et(`/tickets/${t}/reject`,{method:"POST",body:JSON.stringify({rejectionReason:e})}),getDashboardStats:async(t=null)=>{const e=new URLSearchParams;t&&e.append("organization",t);const n=e.toString();return et(`/tickets/stats/dashboard${n?`?${n}`:""}`)},importTickets:async t=>et("/tickets/import",{method:"POST",body:JSON.stringify({tickets:t})})},Jo={getAll:async(t=null)=>{const e=new URLSearchParams;t&&e.append("organization",t);const n=e.toString();return et(`/users${n?`?${n}`:""}`)},getMentions:async()=>et("/users/mentions"),getById:async t=>et(`/users/${t}`),create:async t=>et("/users",{method:"POST",body:JSON.stringify(t)}),update:async(t,e)=>et(`/users/${t}`,{method:"PUT",body:JSON.stringify(e)}),delete:async t=>et(`/users/${t}`,{method:"DELETE"})},nr={getSSOConfig:async()=>et("/admin/sso"),updateSSOConfig:async t=>et("/admin/sso",{method:"POST",body:JSON.stringify(t)}),getEmailSettings:async()=>et("/admin/email"),updateEmailSettings:async t=>et("/admin/email",{method:"PUT",body:JSON.stringify(t)}),testSMTP:async(t,e)=>et("/email/test-smtp",{method:"POST",body:JSON.stringify({to:t,settings:e})}),testIMAP:async t=>et("/email/test-imap",{method:"POST",body:JSON.stringify({settings:t})}),sendTestEmail:async(t,e,n)=>et("/email/send",{method:"POST",body:JSON.stringify({to:t,subject:e,html:n})}),getLogo:async()=>et("/admin/logo"),updateLogo:async(t,e,n,r=null)=>et("/admin/logo",{method:"POST",body:JSON.stringify({logo:t,filename:e,showOnLogin:n,loginTitle:r})}),getRoles:async()=>et("/admin/roles"),createRole:async t=>et("/admin/roles",{method:"POST",body:JSON.stringify(t)}),updateRole:async(t,e)=>et(`/admin/roles/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteRole:async t=>et(`/admin/roles/${t}`,{method:"DELETE"}),getSLAPolicies:async t=>{const e=t?`/admin/sla?organization=${t}`:"/admin/sla";return et(e)},createSLAPolicy:async t=>et("/admin/sla",{method:"POST",body:JSON.stringify(t)}),updateSLAPolicy:async(t,e)=>et(`/admin/sla/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteSLAPolicy:async t=>et(`/admin/sla/${t}`,{method:"DELETE"}),getEmailTemplates:async()=>et("/email-templates"),getEmailTemplate:async t=>et(`/email-templates/${t}`),createEmailTemplate:async t=>et("/email-templates",{method:"POST",body:JSON.stringify(t)}),updateEmailTemplate:async(t,e)=>et(`/email-templates/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteEmailTemplate:async t=>et(`/email-templates/${t}`,{method:"DELETE"}),previewEmailTemplate:async t=>et(`/email-templates/${t}/preview`,{method:"POST"}),createBackup:async()=>et("/backup/create",{method:"POST"}),listBackups:async()=>et("/backup/list"),downloadBackup:async t=>{const e=Qw(),n=await fetch(`${jv}/backup/download/${t}`,{headers:{Authorization:`Bearer ${e}`}});if(!n.ok){const s=await n.json().catch(()=>({message:"Download failed"}));throw new Error(s.message||"Download failed")}const r=await n.blob(),i=window.URL.createObjectURL(r),a=document.createElement("a");return a.href=i,a.download=`${t}.json`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(i),document.body.removeChild(a),{success:!0}},deleteBackup:async t=>et(`/backup/${t}`,{method:"DELETE"}),restoreBackup:async(t,e=!1)=>et("/backup/restore",{method:"POST",body:JSON.stringify({backupName:t,clearExisting:e})}),uploadBackup:async(t,e=!1)=>{const n=Qw(),r=new FormData;r.append("backupFile",t),r.append("clearExisting",e?"true":"false");const i=await fetch(`${jv}/backup/upload`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:r});if(!i.ok){const a=await i.json().catch(()=>({message:"Upload failed"}));throw new Error(a.message||"Upload failed")}return i.json()}},ha={getAll:async()=>et("/organizations"),getById:async t=>et(`/organizations/${t}`),create:async t=>et("/organizations",{method:"POST",body:JSON.stringify(t)}),update:async(t,e)=>et(`/organizations/${t}`,{method:"PUT",body:JSON.stringify(e)}),delete:async t=>et(`/organizations/${t}`,{method:"DELETE"})},sm={getAll:async()=>et("/categories"),getAllAdmin:async(t=null)=>{const e=new URLSearchParams;t&&e.append("organization",t);const n=e.toString();return et(`/categories/all${n?`?${n}`:""}`)},getById:async t=>et(`/categories/${t}`),create:async t=>et("/categories",{method:"POST",body:JSON.stringify(t)}),update:async(t,e)=>et(`/categories/${t}`,{method:"PUT",body:JSON.stringify(e)}),delete:async t=>et(`/categories/${t}`,{method:"DELETE"})},Rc={getAll:async()=>et("/departments"),getById:async t=>et(`/departments/${t}`),create:async t=>et("/departments",{method:"POST",body:JSON.stringify(t)}),update:async(t,e)=>et(`/departments/${t}`,{method:"PUT",body:JSON.stringify(e)}),delete:async t=>et(`/departments/${t}`,{method:"DELETE"})},e1={getSetup:async()=>et("/mfa/setup"),verify:async t=>et("/mfa/verify",{method:"POST",body:JSON.stringify({token:t})}),verifyLogin:async(t,e)=>et("/mfa/verify-login",{method:"POST",body:JSON.stringify({tempToken:t,code:e})}),disable:async()=>et("/mfa/disable",{method:"POST"})},Af={getDashboard:async(t="month",e=null)=>{const n=new URLSearchParams;return t&&n.append("period",t),e&&n.append("organization",e),et(`/reports/dashboard?${n.toString()}`)},getStatusWise:async(t="month",e=null)=>{const n=new URLSearchParams;return t&&n.append("period",t),e&&n.append("organization",e),et(`/reports/status-wise?${n.toString()}`)},getDepartmentWise:async(t="month",e=null)=>{const n=new URLSearchParams;return t&&n.append("period",t),e&&n.append("organization",e),et(`/reports/department-wise?${n.toString()}`)},getTechnicianPerformance:async(t="month",e=null)=>{const n=new URLSearchParams;return t&&n.append("period",t),e&&n.append("organization",e),et(`/reports/technician-performance?${n.toString()}`)},getSLACompliance:async(t="month",e=null)=>{const n=new URLSearchParams;return t&&n.append("period",t),e&&n.append("organization",e),et(`/reports/sla-compliance?${n.toString()}`)},getTrends:async(t="month",e=null,n="day")=>{const r=new URLSearchParams;return t&&r.append("period",t),e&&r.append("organization",e),n&&r.append("groupBy",n),et(`/reports/trends?${r.toString()}`)}},tv={getAll:async(t=null,e=null)=>{const n=new URLSearchParams;return t&&n.append("organization",t),e&&n.append("type",e),et(`/integrations?${n.toString()}`)},getById:async t=>et(`/integrations/${t}`),create:async t=>et("/integrations",{method:"POST",body:JSON.stringify(t)}),update:async(t,e)=>et(`/integrations/${t}`,{method:"PUT",body:JSON.stringify(e)}),delete:async t=>et(`/integrations/${t}`,{method:"DELETE"})},rm={getAll:async(t=null)=>{const e=new URLSearchParams;return t&&e.append("organization",t),et(`/api-keys?${e.toString()}`)},create:async t=>et("/api-keys",{method:"POST",body:JSON.stringify(t)}),update:async(t,e)=>et(`/api-keys/${t}`,{method:"PUT",body:JSON.stringify(e)}),delete:async t=>et(`/api-keys/${t}`,{method:"DELETE"}),revoke:async t=>et(`/api-keys/${t}/revoke`,{method:"POST"}),activate:async t=>et(`/api-keys/${t}/activate`,{method:"POST"})},om={getAll:async(t=null,e=null)=>{const n=new URLSearchParams;return t&&n.append("organization",t),e&&n.append("type",e),et(`/email-templates?${n.toString()}`)},getById:async t=>et(`/email-templates/${t}`),create:async t=>et("/email-templates",{method:"POST",body:JSON.stringify(t)}),update:async(t,e)=>et(`/email-templates/${t}`,{method:"PUT",body:JSON.stringify(e)}),delete:async t=>et(`/email-templates/${t}`,{method:"DELETE"}),preview:async t=>et(`/email-templates/${t}/preview`,{method:"POST"})},Ef={getAll:async(t=null)=>{const e=new URLSearchParams;return t&&e.append("organization",t),et(`/email-automation?${e.toString()}`)},getById:async t=>et(`/email-automation/${t}`),create:async t=>et("/email-automation",{method:"POST",body:JSON.stringify(t)}),update:async(t,e)=>et(`/email-automation/${t}`,{method:"PUT",body:JSON.stringify(e)}),delete:async t=>et(`/email-automation/${t}`,{method:"DELETE"}),run:async t=>et(`/email-automation/${t}/run`,{method:"POST"})},Zf={createSession:async(t="web")=>et("/chatbot/session",{method:"POST",body:JSON.stringify({platform:t})}),sendMessage:async(t,e,n=[])=>{const r=new FormData;t&&r.append("message",t),e&&r.append("sessionId",e),n.forEach(s=>{r.append("attachments",s)});const i=Qw(),a=await fetch(`${jv}/chatbot/message`,{method:"POST",headers:{Authorization:`Bearer ${i}`},body:r});if(!a.ok){const s=await a.json().catch(()=>({message:"An error occurred"}));throw new Error(s.message||"Request failed")}return a.json()},createTicket:async(t,e)=>et("/chatbot/create-ticket",{method:"POST",body:JSON.stringify({sessionId:t,...e})}),getHistory:async(t=null,e=50)=>{const n=new URLSearchParams;return t&&n.append("userId",t),n.append("limit",e),et(`/chatbot/history?${n.toString()}`)},getSession:async t=>et(`/chatbot/session/${t}`),escalate:async(t,e=null)=>et("/chatbot/escalate",{method:"POST",body:JSON.stringify({sessionId:t,departmentId:e})})},nv={getAll:async(t=null,e=null,n=null)=>{const r=new URLSearchParams;return t&&r.append("organization",t),e&&r.append("category",e),n&&r.append("search",n),et(`/faq?${r.toString()}`)},getById:async t=>et(`/faq/${t}`),create:async t=>et("/faq",{method:"POST",body:JSON.stringify(t)}),update:async(t,e)=>et(`/faq/${t}`,{method:"PUT",body:JSON.stringify(e)}),delete:async t=>et(`/faq/${t}`,{method:"DELETE"}),markHelpful:async t=>et(`/faq/${t}/helpful`,{method:"POST"})},rv={getConfig:async(t=null)=>{const e=new URLSearchParams;return t&&e.append("organization",t),et(`/teams/config?${e.toString()}`)},saveConfig:async(t,e=null)=>{const n=new URLSearchParams;return e&&n.append("organization",e),et(`/teams/config?${n.toString()}`,{method:"POST",body:JSON.stringify(t)})},updateConfig:async(t,e)=>et(`/teams/config/${t}`,{method:"PUT",body:JSON.stringify(e)}),deleteConfig:async t=>et(`/teams/config/${t}`,{method:"DELETE"}),testWebhook:async(t,e=null)=>{const n=new URLSearchParams;return e&&n.append("organization",e),et(`/teams/test?${n.toString()}`,{method:"POST",body:JSON.stringify({webhookUrl:t})})}},CI=Object.freeze(Object.defineProperty({__proto__:null,adminAPI:nr,apiKeysAPI:rm,authAPI:kw,categoriesAPI:sm,chatbotAPI:Zf,departmentsAPI:Rc,emailAutomationAPI:Ef,emailTemplatesAPI:om,faqAPI:nv,integrationsAPI:tv,mfaAPI:e1,organizationsAPI:ha,reportsAPI:Af,teamsAPI:rv,ticketsAPI:Di,usersAPI:Jo},Symbol.toStringTag,{value:"Module"})),w8=L.createContext(null),Sr=()=>{const t=L.useContext(w8);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},oK=({children:t})=>{const[e,n]=L.useState(null),[r,i]=L.useState(!0);L.useEffect(()=>{const l=localStorage.getItem("token"),u=localStorage.getItem("user");l&&u?kw.getMe().then(async f=>{if(f.organization)try{const h=typeof f.organization=="object"?f.organization._id||f.organization.id:f.organization;if(h){const m=await kw.getOrganization(h);f.organization=m}}catch(h){console.error("Error fetching organization:",h)}n(f)}).catch(()=>{localStorage.removeItem("token"),localStorage.removeItem("user")}).finally(()=>{i(!1)}):i(!1)},[]);const a=async(l,u)=>{try{const f=await kw.login(l,u);return f.mfaRequired||(localStorage.setItem("token",f.token),localStorage.setItem("user",JSON.stringify(f.user)),n(f.user)),f}catch(f){throw f}},s=()=>{n(null),localStorage.removeItem("token"),localStorage.removeItem("user")},o=l=>{n(l),localStorage.setItem("user",JSON.stringify(l))};return c.jsx(w8.Provider,{value:{user:e,login:a,logout:s,updateUser:o,loading:r},children:t})},_8=L.createContext(null),S8=()=>{const t=L.useContext(_8);if(!t)throw new Error("useSSO must be used within SSOProvider");return t},lK=({children:t})=>{const[e,n]=L.useState({azureEnabled:!1,googleEnabled:!1}),[r,i]=L.useState(!0);L.useEffect(()=>{a()},[]);const a=async()=>{try{const o=await nr.getSSOConfig(),l={azureEnabled:o.find(u=>u.provider==="azure")?.enabled||!1,googleEnabled:o.find(u=>u.provider==="google")?.enabled||!1};n(l)}catch(o){console.warn("SSO settings not available:",o.message),n({azureEnabled:!1,googleEnabled:!1})}finally{i(!1)}},s=async o=>{try{for(const[u,f]of Object.entries(o))if(u==="azureEnabled"||u==="googleEnabled"){const h=u.replace("Enabled","");await nr.updateSSOConfig({provider:h,enabled:f,config:{}})}const l={...e,...o};n(l)}catch(l){throw console.error("Failed to update SSO settings:",l),l}};return c.jsx(_8.Provider,{value:{ssoSettings:e,updateSSOSettings:s,loading:r},children:t})},M8=L.createContext(null),E_=()=>{const t=L.useContext(M8);if(!t)throw new Error("useLogo must be used within LogoProvider");return t},cK=({children:t})=>{const[e,n]=L.useState("/logo.svg"),[r,i]=L.useState(!0),[a,s]=L.useState(null),[o,l]=L.useState(!0);L.useEffect(()=>{u()},[]);const u=async()=>{try{const y=await nr.getLogo();y.logo?n(y.logo):n("/logo.svg"),y.showOnLogin!==void 0&&i(y.showOnLogin),y.loginTitle!==void 0&&s(y.loginTitle)}catch(y){console.error("Failed to load logo:",y),n("/logo.svg")}finally{l(!1)}},f=y=>{n(y)},h=y=>{i(y)},m=y=>{s(y)};return c.jsx(M8.Provider,{value:{logo:e,showOnLogin:r,loginTitle:a,loading:o,updateLogo:f,updateShowOnLogin:h,updateLoginTitle:m,reloadLogo:u},children:t})},lr=({children:t,requireAdmin:e=!1})=>{const{user:n,loading:r}=Sr();return r?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cyber-dark",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block animate-spin text-cyber-neon-cyan text-6xl mb-4",children:""}),c.jsx("p",{className:"text-cyber-neon-cyan font-cyber uppercase tracking-wider",children:"Loading..."})]})}):n?e&&n.role!=="admin"?c.jsx(XC,{to:"/dashboard",replace:!0}):t:c.jsx(XC,{to:"/login",replace:!0})};let uK=class extends L.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n)}render(){return this.state.hasError?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cyber-dark",children:c.jsxs("div",{className:"text-center p-8 card",children:[c.jsx("h1",{className:"text-2xl font-cyber font-bold text-red-400 mb-4 neon-text",children:"Error Loading Page"}),c.jsx("p",{className:"text-cyber-neon-cyan/70 font-mono mb-4",children:this.state.error?.message||"An unexpected error occurred"}),c.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"Reload Page"})]})}):this.props.children}};L.createContext();class dK{constructor(){this.audioContext=null;const e=localStorage.getItem("soundEnabled");this.enabled=e!==null?e==="true":!0,this.volume=.3,this.initAudioContext=()=>{this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext))}}playClick(){if(!this.enabled)return;this.initAudioContext();const e=this.audioContext.createOscillator(),n=this.audioContext.createGain();e.connect(n),n.connect(this.audioContext.destination),e.frequency.setValueAtTime(800,this.audioContext.currentTime),e.frequency.exponentialRampToValueAtTime(600,this.audioContext.currentTime+.05),e.type="sine",n.gain.setValueAtTime(0,this.audioContext.currentTime),n.gain.linearRampToValueAtTime(this.volume*.3,this.audioContext.currentTime+.01),n.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.1),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.1)}playConfirm(){if(!this.enabled)return;this.initAudioContext();const e=this.audioContext.createOscillator(),n=this.audioContext.createGain();e.connect(n),n.connect(this.audioContext.destination),e.frequency.setValueAtTime(600,this.audioContext.currentTime),e.frequency.exponentialRampToValueAtTime(800,this.audioContext.currentTime+.15),e.type="sine",n.gain.setValueAtTime(0,this.audioContext.currentTime),n.gain.linearRampToValueAtTime(this.volume*.4,this.audioContext.currentTime+.01),n.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.2),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.2)}playError(){if(!this.enabled)return;this.initAudioContext();const e=this.audioContext.createOscillator(),n=this.audioContext.createGain();e.connect(n),n.connect(this.audioContext.destination),e.frequency.setValueAtTime(500,this.audioContext.currentTime),e.frequency.exponentialRampToValueAtTime(300,this.audioContext.currentTime+.2),e.type="sawtooth",n.gain.setValueAtTime(0,this.audioContext.currentTime),n.gain.linearRampToValueAtTime(this.volume*.3,this.audioContext.currentTime+.01),n.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.25),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.25)}playHover(){if(!this.enabled)return;this.initAudioContext();const e=this.audioContext.createOscillator(),n=this.audioContext.createGain();e.connect(n),n.connect(this.audioContext.destination),e.frequency.setValueAtTime(700,this.audioContext.currentTime),e.type="sine",n.gain.setValueAtTime(0,this.audioContext.currentTime),n.gain.linearRampToValueAtTime(this.volume*.15,this.audioContext.currentTime+.01),n.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.05),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.05)}setEnabled(e){this.enabled=e,localStorage.setItem("soundEnabled",e.toString())}getEnabled(){return this.enabled}setVolume(e){this.volume=Math.max(0,Math.min(1,e))}}const Cp=new dK,T8=()=>({playClick:()=>Cp.playClick(),playConfirm:()=>Cp.playConfirm(),playError:()=>Cp.playError(),playHover:()=>Cp.playHover(),enabled:Cp.getEnabled(),setEnabled:t=>Cp.setEnabled(t)}),Ye=({children:t,variant:e="primary",size:n="md",className:r="",disabled:i=!1,onClick:a,type:s="button",transparent:o=!1,customColor:l,...u})=>{const f="btn relative overflow-hidden",h={primary:o?"bg-primary-500/20 backdrop-blur-md border border-primary-500/40 text-primary-700 hover:bg-primary-500/30 hover:border-primary-500/60 shadow-lg shadow-primary-500/20":"bg-gradient-to-r from-primary-600 to-primary-700 text-white shadow-lg shadow-primary-500/30 hover:shadow-xl hover:shadow-primary-500/40",secondary:o?"bg-gray-500/20 backdrop-blur-md border border-gray-500/40 text-gray-700 hover:bg-gray-500/30 hover:border-gray-500/60 shadow-md":"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 border border-gray-300 hover:from-gray-200 hover:to-gray-300 shadow-md",danger:o?"bg-red-500/20 backdrop-blur-md border border-red-500/40 text-red-700 hover:bg-red-500/30 hover:border-red-500/60 shadow-lg shadow-red-500/20":"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-lg shadow-red-500/30 hover:shadow-xl hover:shadow-red-500/40",outline:o?"bg-white/30 backdrop-blur-md border-2 border-primary-500/50 text-primary-600 hover:bg-primary-500/20 hover:border-primary-500/70 shadow-md":"bg-white/80 backdrop-blur-sm text-primary-600 border-2 border-primary-600 hover:bg-primary-50 shadow-md hover:shadow-lg"},m=h[e]||h.primary,y={sm:"px-4 py-2 text-sm",md:"px-6 py-3",lg:"px-8 py-4 text-lg"},w=l?{backgroundColor:o?`${l}20`:l,borderColor:o?`${l}60`:"transparent",color:o?l:"#ffffff",boxShadow:o?`0 4px 15px ${l}30`:`0 4px 15px ${l}40`}:{};return c.jsxs("button",{type:s,className:`${f} ${m} ${y[n]} ${r} ${i?"opacity-50 cursor-not-allowed":""}`,style:w,disabled:i,onClick:a,...u,children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full hover:translate-x-full transition-transform duration-1000 opacity-0 hover:opacity-100"}),c.jsx("span",{className:"relative z-10",children:t})]})},st=({label:t,error:e,className:n="",required:r=!1,icon:i,...a})=>c.jsxs("div",{className:"mb-4",children:[t&&c.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1.5",children:[t,r&&c.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),c.jsxs("div",{className:"relative group",children:[i&&c.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 transition-all duration-300 group-focus-within:scale-110 group-focus-within:text-primary-600",children:i}),c.jsx("input",{className:`input ${e?"border-red-500 focus:ring-red-500 focus:border-red-500":""} ${i?"pl-10":""} ${n} group-focus-within:scale-[1.01] group-focus-within:shadow-lg group-focus-within:shadow-primary-500/20`,...a}),e&&c.jsx("p",{className:"mt-1.5 text-sm text-red-600 animate-slide-down",children:e})]})]});var fK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hK=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),jt=(t,e)=>{const n=L.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:o="",children:l,...u},f)=>L.createElement("svg",{ref:f,...fK,width:i,height:i,stroke:r,strokeWidth:s?Number(a)*24/Number(i):a,className:["lucide",`lucide-${hK(t)}`,o].join(" "),...u},[...e.map(([h,m])=>L.createElement(h,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};const Iv=jt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const eP=jt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const q0=jt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const jw=jt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const A8=jt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const iv=jt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const pK=jt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const mK=jt("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);const t1=jt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const n1=jt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const _i=jt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const gK=jt("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);const PI=jt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Ml=jt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const AM=jt("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);const r1=jt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const av=jt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const sh=jt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const i1=jt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const Om=jt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const yK=jt("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);const NI=jt("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);const a1=jt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);const vK=jt("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);const E8=jt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const xK=jt("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);const Pp=jt("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);const C8=jt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const P8=jt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const N8=jt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const dv=jt("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);const bK=jt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const Vc=jt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const wK=jt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const wl=jt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const _K=jt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const SK=jt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const rd=jt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const MK=jt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const O8=jt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const R8=jt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);const TK=jt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const Ll=jt("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);const AK=jt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const k8=jt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const j8=jt("Plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]);const gs=jt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Df=jt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const HO=jt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const oh=jt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const WO=jt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const OI=jt("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);const I8=jt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const nl=jt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);const EK=jt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const D8=jt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const s1=jt("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);const fv=jt("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);const go=jt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Tl=jt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const Rm=jt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const GO=jt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const CK=jt("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);const PK=jt("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);const km=jt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const NK=jt("XSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const po=jt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const OK=jt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Dv=()=>{const t=new Uint8Array(32);return crypto.getRandomValues(t),Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")},$O=t=>{sessionStorage.setItem("csrf_token",t)},RK=(t,e=5,n=900*1e3)=>{const r=Date.now(),a=JSON.parse(localStorage.getItem(`rate_limit_${t}`)||"[]").filter(s=>r-s<n);return a.length>=e?{allowed:!1,remaining:0}:(a.push(r),localStorage.setItem(`rate_limit_${t}`,JSON.stringify(a)),{allowed:!0,remaining:e-a.length})},kK=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),jK=()=>{const[t,e]=L.useState(""),[n,r]=L.useState(""),[i,a]=L.useState(!1),[s,o]=L.useState({}),[l,u]=L.useState(!1),[f,h]=L.useState(!1),{login:m}=Sr(),{ssoSettings:y}=S8(),{logo:w,showOnLogin:b,loginTitle:x}=E_(),{playClick:_,playConfirm:M}=T8(),T=ni();L.useEffect(()=>{const C=Dv();$O(C)},[]);const A=async C=>{if(C.preventDefault(),o({}),a(!0),M(),!kK(t)){o({email:"Please enter a valid email address"}),a(!1);return}if(!RK(`login_${t}`,5,900*1e3).allowed){de.error("Too many login attempts. Please try again in 15 minutes."),a(!1);return}try{const F=await m(t,n);F.mfaRequired&&F.tempToken?T("/mfa-login",{state:{tempToken:F.tempToken,email:t}}):(de.success("Login successful!"),T("/dashboard"))}catch(F){o({password:F.message||"Invalid email or password"}),de.error(F.message||"Invalid credentials")}finally{a(!1)}},R=f?"#0a0a0a":"#ffffff",N=f?"#ffffff":"#000000",O=f?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",k=f?"rgba(20, 20, 20, 0.8)":"rgba(255, 255, 255, 0.9)";return c.jsxs("div",{className:"min-h-screen flex items-center justify-center p-8 relative transition-colors duration-500",style:{backgroundColor:R},children:[c.jsx("button",{onClick:()=>{h(!f),_()},className:"absolute top-8 right-8 z-20 p-3 rounded-full backdrop-blur-md border transition-all duration-300 hover:scale-110",style:{backgroundColor:f?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",borderColor:O,color:N},"aria-label":"Toggle dark mode",children:f?c.jsx(D8,{size:20}):c.jsx(O8,{size:20})}),c.jsx("div",{className:"w-full max-w-md relative z-10",children:c.jsx("div",{className:"rounded-3xl overflow-hidden backdrop-blur-2xl border transition-all duration-500 hover:scale-[1.02]",style:{background:k,borderColor:O,boxShadow:f?"0 20px 60px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 20px 60px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.05), inset 0 1px 0 rgba(255, 255, 255, 0.9)",transform:"perspective(1000px) rotateX(0deg)",transformStyle:"preserve-3d"},children:c.jsxs("div",{className:"p-8 sm:p-10",children:[w&&b&&c.jsx("div",{className:"text-center mb-8 animate-slide-down",children:c.jsx("div",{className:"inline-block backdrop-blur-md p-4 rounded-xl border transition-all duration-300 hover:scale-105",style:{background:f?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)",borderColor:O,boxShadow:f?"0 4px 15px rgba(0, 0, 0, 0.3)":"0 4px 15px rgba(0, 0, 0, 0.1)"},children:c.jsx("img",{src:w,alt:"Logo",className:"h-14 w-auto max-w-xs",style:{filter:f?"brightness(1.2)":"none",maxHeight:"56px",display:"block"},onError:C=>{C.target.src="/logo.svg"}})})}),x&&c.jsxs("div",{className:"text-center mb-8 animate-slide-down",style:{animationDelay:"0.1s"},children:[c.jsx("h1",{className:"text-4xl font-bold mb-2 tracking-tight",style:{color:N},children:x}),c.jsx("p",{className:"text-sm font-medium tracking-wide uppercase",style:{color:f?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)"},children:"Secure Access Portal"})]}),c.jsxs("form",{onSubmit:A,className:"space-y-6 animate-slide-down",style:{animationDelay:"0.2s"},children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-2 tracking-wide uppercase",style:{color:N},children:"Email Address"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-10 transition-all duration-300",style:{color:f?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)"},children:c.jsx(wl,{size:18})}),c.jsx("input",{type:"email",placeholder:"Enter your email",value:t,onChange:C=>{e(C.target.value),o({...s,email:""}),C.target.value&&_()},className:"w-full px-4 py-4 pl-12 rounded-xl border transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-0",style:{backgroundColor:f?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)",borderColor:s.email?f?"rgba(255, 0, 0, 0.5)":"rgba(255, 0, 0, 0.3)":O,color:N,focusRingColor:f?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.2)"},required:!0})]}),s.email&&c.jsx("p",{className:"mt-2 text-sm animate-slide-down",style:{color:"#ef4444"},children:s.email})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold mb-2 tracking-wide uppercase",style:{color:N},children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-10 transition-all duration-300",style:{color:f?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)"},children:c.jsx(Vc,{size:18})}),c.jsx("input",{type:l?"text":"password",placeholder:"Enter your password",value:n,onChange:C=>{r(C.target.value),o({...s,password:""}),C.target.value&&_()},className:"w-full px-4 py-4 pl-12 pr-12 rounded-xl border transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-0",style:{backgroundColor:f?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)",borderColor:s.password?f?"rgba(255, 0, 0, 0.5)":"rgba(255, 0, 0, 0.3)":O,color:N,focusRingColor:f?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.2)"},required:!0}),c.jsx("button",{type:"button",onClick:()=>{u(!l),_()},className:"absolute right-4 top-1/2 transform -translate-y-1/2 transition-colors",style:{color:f?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)"},children:l?c.jsx(i1,{size:18}):c.jsx(Om,{size:18})})]}),s.password&&c.jsx("p",{className:"mt-2 text-sm animate-slide-down",style:{color:"#ef4444"},children:s.password})]}),c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("label",{className:"flex items-center cursor-pointer group",children:[c.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border transition-all duration-200 cursor-pointer group-hover:scale-110",style:{backgroundColor:f?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)",borderColor:O},onChange:()=>_()}),c.jsx("span",{className:"ml-2 text-sm font-medium transition-colors",style:{color:f?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.7)"},children:"Remember me"})]})}),c.jsxs("button",{type:"submit",disabled:i,className:"w-full px-6 py-4 rounded-xl font-semibold text-base transition-all duration-300 hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 relative overflow-hidden group",style:{backgroundColor:f?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.9)",color:f?"#000000":"#ffffff",border:`1px solid ${O}`,boxShadow:f?"0 4px 15px rgba(0, 0, 0, 0.3)":"0 4px 15px rgba(0, 0, 0, 0.2)"},children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000",style:{backgroundColor:f?"rgba(255, 255, 255, 0.1)":"rgba(255, 255, 255, 0.2)"}}),c.jsx("span",{className:"relative flex items-center justify-center gap-2",children:i?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"animate-spin",children:""}),"Signing in..."]}):c.jsxs(c.Fragment,{children:[c.jsx(nl,{size:18,className:"group-hover:rotate-12 transition-transform duration-300"}),"Log in"]})})]})]}),(y.azureEnabled||y.googleEnabled)&&c.jsxs("div",{className:"mt-8 pt-8 animate-slide-down",style:{animationDelay:"0.3s",borderTop:`1px solid ${O}`},children:[c.jsxs("div",{className:"relative mb-6",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{style:{borderTop:`1px solid ${O}`,width:"100%"}})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-3 font-medium uppercase tracking-wide",style:{backgroundColor:k,color:f?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)"},children:"Or continue with"})})]}),c.jsxs("div",{className:"space-y-3",children:[y.googleEnabled&&c.jsxs("button",{type:"button",onClick:()=>{_(),T("/sso/google")},className:"w-full flex items-center justify-center space-x-3 py-3 px-4 rounded-xl border transition-all duration-300 hover:scale-[1.02] group",style:{backgroundColor:f?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)",borderColor:O},children:[c.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),c.jsx("span",{className:"text-sm font-medium transition-colors",style:{color:N},children:"Google Workspace"})]}),y.azureEnabled&&c.jsxs("button",{type:"button",onClick:()=>{_(),T("/sso/azure")},className:"w-full flex items-center justify-center space-x-3 py-3 px-4 rounded-xl border transition-all duration-300 hover:scale-[1.02] group",style:{backgroundColor:f?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)",borderColor:O},children:[c.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M0 0h11.5v11.5H0V0z",fill:"#F25022"}),c.jsx("path",{d:"M11.5 0H23v11.5H11.5V0z",fill:"#7FBA00"}),c.jsx("path",{d:"M0 11.5h11.5V23H0V11.5z",fill:"#00A4EF"}),c.jsx("path",{d:"M11.5 11.5H23V23H11.5V11.5z",fill:"#FFB900"})]}),c.jsx("span",{className:"text-sm font-medium transition-colors",style:{color:N},children:"Microsoft"})]})]})]})]})})}),c.jsx("style",{children:`
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          50% { transform: translateY(-20px) rotate(5deg); }
        }
        @keyframes slide-down {
          from {
            opacity: 0;
            transform: translateY(-20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-slide-down {
          animation: slide-down 0.5s ease-out forwards;
        }
        .animate-pulse {
          animation: pulse 3s ease-in-out infinite;
        }
      `})]})},Nt=({children:t,className:e="",title:n,actions:r,onClick:i,style:a})=>c.jsxs("div",{className:`card ${e}`,onClick:i,style:a,children:[(n||r)&&c.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200/50",children:[n&&c.jsx("h3",{className:"text-lg font-semibold text-gray-900 bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:n}),r&&c.jsx("div",{children:r})]}),c.jsx("div",{children:t})]}),IK=()=>{const[t,e]=L.useState(!1),{login:n}=Sr(),r=ni();L.useEffect(()=>{const a=Dv();$O(a)},[]);const i=async()=>{e(!0);try{const a=`https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=${encodeURIComponent("your-azure-client-id")}&response_type=code&redirect_uri=${encodeURIComponent(window.location.origin+"/sso/azure/callback")}&response_mode=query&scope=${encodeURIComponent("openid profile email")}&state=${Dv()}`;setTimeout(()=>{n({id:1,name:"Azure User",email:"user@microsoft.com",role:"user",mfaEnabled:!1,authProvider:"azure"}),de.success("Azure Entra ID authentication successful!"),r("/dashboard"),e(!1)},1500)}catch{de.error("Azure AD authentication failed"),e(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 px-4",children:c.jsxs("div",{className:"w-full max-w-md",children:[c.jsxs(Ye,{variant:"outline",onClick:()=>r("/login"),className:"mb-4",children:[c.jsx(q0,{size:16,className:"mr-2"}),"Back to Login"]}),c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-4 shadow-lg",children:c.jsxs("svg",{className:"w-10 h-10",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M11.5 0L0 4.5V11.5C0 17.3 4.2 22.5 11.5 23C18.8 22.5 23 17.3 23 11.5V4.5L11.5 0Z",fill:"#F25022"}),c.jsx("path",{d:"M11.5 0L23 4.5V11.5C23 17.3 18.8 22.5 11.5 23V0Z",fill:"#7FBA00"}),c.jsx("path",{d:"M11.5 0L0 4.5V11.5C0 17.3 4.2 22.5 11.5 23V0Z",fill:"#00A4EF"}),c.jsx("path",{d:"M11.5 0L0 4.5L11.5 11.5L23 4.5L11.5 0Z",fill:"#FFB900"})]})}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Azure Entra ID"}),c.jsx("p",{className:"text-gray-600",children:"Sign in with your Microsoft account"})]}),c.jsx(Nt,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-lg",children:[c.jsx("p",{className:"font-medium mb-2",children:"Azure Entra ID Authentication:"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[c.jsx("li",{children:"Secure OAuth 2.0 / OpenID Connect"}),c.jsx("li",{children:"Enterprise Single Sign-On (SSO)"}),c.jsx("li",{children:"Conditional Access policies"}),c.jsx("li",{children:"Multi-factor authentication support"})]})]}),c.jsx(Ye,{onClick:i,className:"w-full bg-[#0078D4] text-white hover:bg-[#0064B8]",disabled:t,children:t?"Authenticating...":c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{d:"M11.5 0L0 4.5V11.5C0 17.3 4.2 22.5 11.5 23C18.8 22.5 23 17.3 23 11.5V4.5L11.5 0Z",fill:"white"})}),c.jsx("span",{children:"Continue with Microsoft"})]})})]})})]})})},DK=()=>{const[t,e]=L.useState(!1),{login:n}=Sr(),r=ni();L.useEffect(()=>{const a=Dv();$O(a)},[]);const i=async()=>{e(!0);try{const a=`https://accounts.google.com/o/oauth2/v2/auth?client_id=${encodeURIComponent("your-google-client-id")}&redirect_uri=${encodeURIComponent(window.location.origin+"/sso/google/callback")}&response_type=code&scope=${encodeURIComponent("openid email profile")}&state=${Dv()}`;setTimeout(()=>{n({id:1,name:"Google User",email:"user@gmail.com",role:"user",mfaEnabled:!1,authProvider:"google"}),de.success("Google Workspace authentication successful!"),r("/dashboard"),e(!1)},1500)}catch{de.error("Google Workspace authentication failed"),e(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 px-4",children:c.jsxs("div",{className:"w-full max-w-md",children:[c.jsxs(Ye,{variant:"outline",onClick:()=>r("/login"),className:"mb-4",children:[c.jsx(q0,{size:16,className:"mr-2"}),"Back to Login"]}),c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-full mb-4 shadow-lg",children:c.jsxs("svg",{className:"w-10 h-10",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Google Workspace"}),c.jsx("p",{className:"text-gray-600",children:"Sign in with your Google Workspace account"})]}),c.jsx(Nt,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-lg",children:[c.jsx("p",{className:"font-medium mb-2",children:"Google Workspace Authentication:"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[c.jsx("li",{children:"Secure OAuth 2.0 authentication"}),c.jsx("li",{children:"Single Sign-On (SSO) support"}),c.jsx("li",{children:"Organization-wide access control"}),c.jsx("li",{children:"Multi-factor authentication support"})]})]}),c.jsx(Ye,{onClick:i,className:"w-full bg-white text-gray-700 border-2 border-gray-300 hover:bg-gray-50",disabled:t,children:t?"Authenticating...":c.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[c.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),c.jsx("span",{children:"Continue with Google Workspace"})]})})]})})]})})},LK={SLA_MANAGER:"PRO",SSO_INTEGRATION:"PRO",EXTERNAL_INTEGRATIONS:"PRO",ADVANCED_REPORTS:"PRO",EMAIL_AUTOMATION:"PRO",TEAMS_INTEGRATION:"PRO",AZURE_SENTINEL:"PRO",DOMAIN_RULES:"PRO",CUSTOM_ROLES:"PRO"},X0=()=>{const{user:t}=Sr(),e=L.useMemo(()=>t?.organization&&(typeof t.organization=="object"?t.organization:null)?.plan||"BASIC",[t]),n=L.useMemo(()=>{if(!t?.organization)return null;const s=typeof t.organization=="object"?t.organization:null;return s?.subscriptionExpiry?new Date(s.subscriptionExpiry):null},[t]),r=L.useMemo(()=>!(e!=="PRO"||n&&new Date>n),[e,n]),i=!r;return{hasAccess:L.useMemo(()=>s=>{const o=LK[s];return!o||o!=="PRO"?!0:r},[r]),plan:e,isPro:r,isBasic:i,subscriptionExpiry:n}},Na=({isOpen:t,onClose:e,title:n,children:r,size:i="md",footer:a})=>{if(!t)return null;const s={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"};return c.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:c.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[c.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-900/90 backdrop-blur-sm",onClick:e}),c.jsxs("div",{className:`inline-block align-bottom bg-white rounded-xl shadow-2xl text-left overflow-hidden transform transition-all sm:my-8 sm:align-middle w-full ${s[i]}`,onClick:o=>o.stopPropagation(),children:[c.jsxs("div",{className:"px-6 pt-6 pb-4 sm:p-6 relative z-10",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("div",{className:"flex-1",children:typeof n=="string"?c.jsx("h3",{className:"text-xl font-bold text-gray-900 uppercase tracking-wider",children:n}):c.jsx("div",{className:"text-xl font-bold text-gray-900 uppercase tracking-wider",children:n})}),c.jsx("button",{type:"button",onClick:e,className:"text-gray-400 hover:text-gray-600 focus:outline-none transition-colors duration-300 hover:scale-110 ml-4",children:c.jsx(po,{size:24})})]}),c.jsx("div",{className:"text-gray-700",children:r})]}),a&&c.jsx("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-4 sm:px-6 sm:flex sm:flex-row-reverse relative z-10",children:a})]})]})})},UK=t=>{const e=[{path:"/dashboard",icon:bK,label:"Dashboard"},{path:"/tickets",icon:fv,label:"Tickets"}];return(t==="admin"||t==="technician")&&e.push({path:"/reports",icon:a1,label:"Reports",feature:null}),e.push({path:"/settings",icon:I8,label:"Settings"}),e},FK=[{path:"/admin/organizations",icon:t1,label:"Organizations",feature:null},{path:"/admin/users",icon:GO,label:"Users",feature:null},{path:"/admin/categories",icon:s1,label:"Categories",feature:null},{path:"/admin/departments",icon:mK,label:"Departments",feature:null},{path:"/admin/roles",icon:nl,label:"Roles",feature:"CUSTOM_ROLES"},{path:"/admin/sla",icon:Ml,label:"SLA Policies",feature:"SLA_MANAGER"},{path:"/admin/tickets/import",icon:Tl,label:"Import Tickets",feature:null},{path:"/admin/analytics",icon:A8,label:"Analytics",feature:"ADVANCED_REPORTS"},{path:"/admin/api-keys",icon:dv,label:"API Keys",feature:null},{path:"/admin/integrations",icon:j8,label:"External Integrations",feature:"EXTERNAL_INTEGRATIONS"},{path:"/admin/email",icon:wl,label:"Email Settings",feature:null},{path:"/admin/domain-rules",icon:nl,label:"Domain Rules",feature:"DOMAIN_RULES"},{path:"/admin/email-templates",icon:yK,label:"Email Templates",feature:null},{path:"/admin/email-automation",icon:WO,label:"Email Automation",feature:"EMAIL_AUTOMATION"},{path:"/admin/faq",icon:C8,label:"FAQ Management",feature:null},{path:"/admin/chat-history",icon:rd,label:"Chat History",feature:null},{path:"/admin/teams-integration",icon:rd,label:"Microsoft Teams",feature:"TEAMS_INTEGRATION"},{path:"/admin/sso",icon:nl,label:"SSO Configuration",feature:"SSO_INTEGRATION"},{path:"/admin/logo",icon:P8,label:"Logo Management",feature:null},{path:"/admin/backup-restore",icon:av,label:"Backup & Restore",feature:null}],RI=({item:t,onClick:e,hasAccess:n,onUpgradeClick:r})=>{const a=Dl().pathname===t.path,s=t.icon,o=t.feature&&!n,l=f=>{if(o){f.preventDefault(),r&&r();return}e&&e()},u=c.jsxs(c.Fragment,{children:[c.jsx(s,{size:20,className:`mr-3 ${a?"text-primary-600":o?"text-gray-400":"text-gray-500 group-hover:text-primary-600"} transition-colors`}),c.jsx("span",{className:"text-sm flex-1",children:t.label}),o&&c.jsx(Vc,{size:14,className:"text-gray-400 ml-2"}),a&&!o&&c.jsx("div",{className:"absolute right-2 w-2 h-2 bg-primary-600 rounded-full animate-glow-pulse shadow-lg shadow-primary-500/50"})]});return o?c.jsx("div",{onClick:l,className:"flex items-center px-4 py-3 rounded-xl transition-all duration-300 relative group cursor-pointer text-gray-400 cursor-pointer opacity-75 hover:opacity-100 hover:bg-white/20",children:u}):c.jsx(h8,{to:t.path,onClick:l,className:`flex items-center px-4 py-3 rounded-xl transition-all duration-300 relative group ${a?"bg-gradient-to-r from-primary-500/20 via-primary-500/15 to-primary-500/10 text-primary-700 font-semibold backdrop-blur-md border border-primary-500/30 shadow-lg shadow-primary-500/20":"text-gray-700 hover:bg-white/40 hover:backdrop-blur-md hover:text-gray-900 hover:border hover:border-white/30 hover:shadow-md"}`,style:{backgroundColor:a?"rgba(14, 165, 233, 0.15)":"transparent"},children:u})},zK=({isOpen:t,onClose:e})=>{const{user:n,logout:r}=Sr(),{logo:i}=E_(),{hasAccess:a}=X0(),s=ni(),o=n?.role==="admin";n?.role;const[l,u]=L.useState(!1),[f,h]=L.useState(!1),[m,y]=L.useState(()=>localStorage.getItem("manualTicketId")||""),w=()=>{if(!o)return;const x=parseInt(m);if(isNaN(x)||x<1){de.error("Please enter a valid ticket ID (must be a positive number)");return}localStorage.setItem("manualTicketId",x.toString()),localStorage.setItem("useManualTicketId","true"),de.success(`Manual ticket ID set to ${x}. New tickets will continue from this ID.`),u(!1)},b=()=>{localStorage.removeItem("manualTicketId"),localStorage.removeItem("useManualTicketId"),y(""),de.success("Manual ticket ID cleared. System will use auto-increment."),u(!1)};return c.jsxs(c.Fragment,{children:[t&&c.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm z-20 lg:hidden transition-opacity",onClick:e}),c.jsx("aside",{className:`fixed top-0 left-0 z-30 h-full w-64 transform transition-transform duration-300 ease-in-out lg:translate-x-0 ${t?"translate-x-0":"-translate-x-full"}`,style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.7) 0%, rgba(255, 255, 255, 0.5) 100%)",backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",borderRight:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.1)"},children:c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b",style:{borderColor:"rgba(0, 0, 0, 0.08)",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.6) 100%)"},children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center shadow-lg",style:{background:"linear-gradient(135deg, rgba(14, 165, 233, 0.8) 0%, rgba(2, 132, 199, 0.9) 100%)",boxShadow:"0 4px 15px rgba(14, 165, 233, 0.3)"},children:c.jsx("img",{src:i,alt:"Logo",className:"h-8 w-auto",onError:x=>{x.target.src="/logo.svg"}})}),c.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Ticketing Tool"})]}),c.jsx("button",{onClick:e,className:"lg:hidden text-gray-500 hover:text-gray-700 transition-colors p-1 rounded-lg hover:bg-white/40 backdrop-blur-sm",children:c.jsx(po,{size:24})})]}),c.jsxs("nav",{className:"flex-1 px-4 py-4 space-y-1 overflow-y-auto",children:[UK(n?.role).map(x=>c.jsx(RI,{item:x,hasAccess:x.feature?a(x.feature):!0,onClick:()=>window.innerWidth<1024&&e(),onUpgradeClick:()=>{h(!0),window.innerWidth<1024&&e()}},x.path)),o&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"pt-4 mt-4 border-t",style:{borderColor:"rgba(0, 0, 0, 0.08)"},children:c.jsx("p",{className:"px-4 text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:"Administration"})}),FK.map(x=>c.jsx(RI,{item:x,hasAccess:x.feature?a(x.feature):!0,onClick:()=>window.innerWidth<1024&&e(),onUpgradeClick:()=>{h(!0),window.innerWidth<1024&&e()}},x.path))]})]}),c.jsxs("div",{className:"p-4 border-t",style:{borderColor:"rgba(0, 0, 0, 0.08)",background:"linear-gradient(to top, rgba(255, 255, 255, 0.6) 0%, transparent 100%)"},children:[o&&c.jsxs("button",{onClick:()=>{u(!0),window.innerWidth<1024&&e()},className:"w-full flex items-center px-4 py-3 text-gray-700 rounded-xl transition-all duration-300 mb-2 backdrop-blur-md hover:bg-white/50 hover:text-gray-900 border border-transparent hover:border-white/40 shadow-sm hover:shadow-md group",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Pp,{size:20,className:"mr-3 text-gray-500 group-hover:text-primary-600 transition-colors"}),localStorage.getItem("manualTicketId")&&c.jsx(_i,{size:12,className:"absolute -top-1 -right-1 text-green-500 bg-white rounded-full"})]}),c.jsx("span",{className:"text-sm font-medium",children:"Manual Ticket ID"}),localStorage.getItem("manualTicketId")&&c.jsxs("span",{className:"ml-auto flex items-center gap-1 text-xs font-semibold text-primary-600 bg-primary-50 px-2 py-1 rounded-full",children:[c.jsx(Pp,{size:12}),"#",localStorage.getItem("manualTicketId")]})]}),c.jsxs(h8,{to:"/profile",onClick:()=>window.innerWidth<1024&&e(),className:"flex items-center px-4 py-3 text-gray-700 rounded-xl transition-all duration-300 mb-2 backdrop-blur-md hover:bg-white/50 hover:text-gray-900 border border-transparent hover:border-white/40 shadow-sm hover:shadow-md",children:[c.jsx(Rm,{size:20,className:"mr-3 text-gray-500"}),c.jsx("span",{className:"text-sm font-medium",children:"Profile"})]}),c.jsxs("button",{onClick:r,className:"w-full flex items-center px-4 py-3 text-red-600 rounded-xl transition-all duration-300 backdrop-blur-md hover:bg-red-500/20 hover:text-red-700 border border-transparent hover:border-red-500/30 shadow-sm hover:shadow-md",children:[c.jsx(wK,{size:20,className:"mr-3"}),c.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})]})]})}),o&&c.jsx(Na,{isOpen:l,onClose:()=>u(!1),title:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:c.jsx(Pp,{size:20,className:"text-primary-600"})}),c.jsx("span",{children:"Set Manual Ticket ID"})]}),children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[c.jsx(N8,{size:18,className:"text-blue-600 mt-0.5 flex-shrink-0"}),c.jsx("p",{className:"text-sm text-gray-700",children:"Set a starting ticket ID. Once set, new tickets will continue sequentially from this ID. Leave empty to use auto-increment from the highest existing ticket ID."})]}),c.jsx(st,{label:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Pp,{size:16,className:"text-gray-500"}),c.jsx("span",{children:"Starting Ticket ID"})]}),type:"number",placeholder:"e.g., 1000",value:m,onChange:x=>y(x.target.value),min:"1",icon:c.jsx(Pp,{size:18,className:"text-gray-400"})}),localStorage.getItem("manualTicketId")&&c.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg flex items-start gap-3",children:[c.jsx(_i,{size:20,className:"text-green-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-semibold text-green-900 mb-1",children:"Manual Ticket ID is Active"}),c.jsxs("p",{className:"text-sm text-green-800 flex items-center gap-1",children:[c.jsx(Pp,{size:14}),"Current setting: Ticket ID #",localStorage.getItem("manualTicketId")]}),c.jsxs("p",{className:"text-xs text-green-700 mt-1",children:["New tickets will start from #",parseInt(localStorage.getItem("manualTicketId"))+1]})]})]}),c.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[localStorage.getItem("manualTicketId")&&c.jsxs(Ye,{variant:"outline",onClick:b,className:"flex items-center gap-2",children:[c.jsx(km,{size:16}),"Clear Setting"]}),c.jsxs(Ye,{onClick:w,className:"flex items-center gap-2",children:[c.jsx(TK,{size:16}),"Set Ticket ID"]})]})]})}),c.jsx(Na,{isOpen:f,onClose:()=>h(!1),title:"Upgrade to Pro Required",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-start gap-3 p-4 bg-primary-50 border border-primary-200 rounded-lg",children:[c.jsx(Vc,{size:20,className:"text-primary-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-primary-900 mb-1",children:"This feature requires a Pro upgrade"}),c.jsx("p",{className:"text-sm text-primary-700",children:"Upgrade to Pro to unlock this feature and many more premium capabilities."})]})]}),c.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[c.jsx(Ye,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),c.jsx(Ye,{onClick:()=>{h(!1),s("/upgrade")},children:"Upgrade to Pro"})]})]})})]})},BK=({onMenuClick:t})=>{const{user:e}=Sr();return c.jsxs("header",{className:"h-16 flex items-center justify-between px-4 lg:px-6 sticky top-0 z-10 border-b",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.6) 100%)",backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",borderColor:"rgba(0, 0, 0, 0.08)",boxShadow:"0 4px 20px 0 rgba(0, 0, 0, 0.08)"},children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("button",{onClick:t,className:"lg:hidden text-gray-600 hover:text-gray-900 focus:outline-none transition-colors duration-200 p-2 rounded-lg hover:bg-white/40 backdrop-blur-sm",children:c.jsx(SK,{size:24})}),c.jsxs("div",{className:"relative hidden md:block",children:[c.jsx(oh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 z-10",size:20}),c.jsx("input",{type:"text",placeholder:"Search tickets...",className:"pl-10 pr-4 py-2.5 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500/50 focus:border-primary-500 text-gray-900 placeholder-gray-400 w-64 text-sm transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"}})]})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("button",{className:"relative text-gray-600 hover:text-gray-900 focus:outline-none transition-colors duration-200 p-2 rounded-lg hover:bg-white/40 backdrop-blur-sm",children:[c.jsx(iv,{size:24}),c.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full border-2 border-white shadow-sm"})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs("div",{className:"text-right hidden sm:block",children:[c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e?.name||"User"}),c.jsx("p",{className:"text-xs text-gray-500",children:e?.email||""})]}),c.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-white font-semibold transition-all duration-300 hover:scale-105",style:{background:"linear-gradient(135deg, rgba(14, 165, 233, 0.9) 0%, rgba(2, 132, 199, 0.95) 100%)",boxShadow:"0 4px 15px rgba(14, 165, 233, 0.3)"},children:e?.name?.charAt(0).toUpperCase()||"U"})]})]})]})},Nn=({children:t})=>{const[e,n]=L.useState(!1);return c.jsxs("div",{className:"flex h-screen bg-gray-50",children:[c.jsx(zK,{isOpen:e,onClose:()=>n(!1)}),c.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden lg:ml-64",children:[c.jsx(BK,{onMenuClick:()=>n(!e)}),c.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:t})]})]})},VK=()=>{const[t,e]=L.useState(1),[n,r]=L.useState(null),[i,a]=L.useState(""),[s,o]=L.useState(""),[l,u]=L.useState(!1),{updateUser:f,user:h}=Sr(),m=ni();L.useEffect(()=>{t===2&&!n&&y()},[t]);const y=async()=>{try{u(!0);const x=await e1.getSetup();r(x.qrCode),a(x.manualEntryKey)}catch(x){de.error(x.message||"Failed to load MFA setup"),e(1)}finally{u(!1)}},w=()=>{e(2)},b=async()=>{if(s.length!==6){de.error("Please enter a 6-digit code");return}try{u(!0),await e1.verify(s),f({...h,mfaEnabled:!0}),de.success("MFA enabled successfully!"),m("/profile")}catch(x){de.error(x.message||"Invalid verification code")}finally{u(!1)}};return t===1?c.jsx(Nn,{children:c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsxs(Nt,{children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-100 rounded-full mb-4",children:c.jsx(nl,{className:"text-primary-600",size:32})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Enable Multi-Factor Authentication"}),c.jsx("p",{className:"text-gray-600",children:"Add an extra layer of security to your account"})]}),c.jsxs("div",{className:"space-y-4 mb-6",children:[c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(_i,{className:"text-green-500 mt-1",size:20}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Enhanced Security"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Protect your account with two-factor authentication"})]})]}),c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(_i,{className:"text-green-500 mt-1",size:20}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Easy Setup"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Scan QR code with your authenticator app"})]})]}),c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx(_i,{className:"text-green-500 mt-1",size:20}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Compatible Apps"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Google Authenticator, Microsoft Authenticator, Authy"})]})]})]}),c.jsx(Ye,{onClick:w,className:"w-full",children:"Enable MFA"})]})})}):c.jsx(Nn,{children:c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsxs(Nt,{children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Scan QR Code"}),c.jsx("p",{className:"text-gray-600",children:"Use your authenticator app to scan this code"})]}),c.jsxs("div",{className:"flex flex-col items-center space-y-6 mb-6",children:[l?c.jsx("div",{className:"flex items-center justify-center w-48 h-48 bg-gray-100 rounded-lg",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n?c.jsx("div",{className:"bg-white p-4 rounded-lg border-2 border-gray-200",children:c.jsx("img",{src:n,alt:"QR Code",className:"w-48 h-48"})}):c.jsx("div",{className:"bg-gray-100 p-4 rounded-lg border-2 border-gray-200 w-48 h-48 flex items-center justify-center",children:c.jsx("p",{className:"text-gray-500 text-sm",children:"Loading QR Code..."})}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Or enter this code manually:"}),c.jsx("div",{className:"inline-flex items-center px-4 py-2 bg-gray-100 rounded-lg font-mono text-sm",children:i})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(st,{label:"Verification Code",placeholder:"Enter 6-digit code",value:s,onChange:x=>o(x.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,required:!0}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx(Ye,{variant:"outline",onClick:()=>e(1),className:"flex-1",children:"Back"}),c.jsx(Ye,{onClick:b,className:"flex-1",disabled:s.length!==6||l,children:l?"Verifying...":"Verify & Enable"})]})]})]})})})},HK=()=>{const[t,e]=L.useState(""),[n,r]=L.useState(!1),i=ni(),a=Dl(),{updateUser:s}=Sr(),{logo:o}=E_(),l=a.state?.tempToken,u=a.state?.email;L.useEffect(()=>{l||(de.error("Session expired. Please login again."),i("/login"))},[l,i]);const f=async m=>{if(m.preventDefault(),t.length!==6){de.error("Please enter a 6-digit code");return}try{r(!0);const y=await e1.verifyLogin(l,t);localStorage.setItem("token",y.token),localStorage.setItem("user",JSON.stringify(y.user)),s(y.user),de.success("MFA verification successful!"),i("/dashboard",{replace:!0})}catch(y){de.error(y.message||"Invalid verification code"),e("")}finally{r(!1)}},h=()=>{i("/login",{replace:!0})};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 px-4",children:c.jsxs("div",{className:"w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"mb-6 flex justify-center",children:c.jsx("img",{src:o,alt:"Rezilyens",className:"h-24 w-auto",onError:m=>{m.target.src="/logo.svg"}})}),c.jsx("p",{className:"text-gray-600",children:"Multi-Factor Authentication Required"})]}),c.jsxs(Nt,{children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-100 rounded-full mb-4",children:c.jsx(nl,{className:"text-primary-600",size:32})}),c.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Enter Verification Code"}),c.jsx("p",{className:"text-sm text-gray-600",children:u?`Please enter the 6-digit code from your authenticator app for ${u}`:"Please enter the 6-digit code from your authenticator app"})]}),c.jsxs("form",{onSubmit:f,className:"space-y-4",children:[c.jsx(st,{label:"Verification Code",placeholder:"Enter 6-digit code",value:t,onChange:m=>e(m.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,required:!0,autoFocus:!0,className:"text-center text-2xl tracking-widest font-mono"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(Ye,{type:"submit",className:"w-full",disabled:t.length!==6||n,children:n?"Verifying...":"Verify & Continue"}),c.jsxs(Ye,{type:"button",variant:"outline",onClick:h,className:"w-full",disabled:n,children:[c.jsx(q0,{size:16,className:"mr-2"}),"Back to Login"]})]})]}),c.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Note:"})," Open your authenticator app (Google Authenticator, Microsoft Authenticator, or Authy) and enter the 6-digit code shown."]})})]})]})})},WK="modulepreload",GK=function(t){return"/"+t},kI={},jI=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};var s=u;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=u(n.map(f=>{if(f=GK(f),f in kI)return;kI[f]=!0;const h=f.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":WK,h||(y.as="script"),y.crossOrigin="",y.href=f,l&&y.setAttribute("nonce",l),document.head.appendChild(y),h)return new Promise((w,b)=>{y.addEventListener("load",w),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},ln=({children:t,variant:e="info",className:n=""})=>{const r={success:"badge-success",warning:"badge-warning",danger:"badge-danger",info:"badge-info"};return c.jsx("span",{className:`badge ${r[e]} ${n}`,children:t})},sn=({label:t,error:e,className:n="",required:r=!1,options:i=[],placeholder:a="Select an option",buttonStyle:s=!1,...o})=>c.jsxs("div",{className:s?"":"mb-4",children:[t&&c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[t,r&&c.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),c.jsx("div",{className:s?"relative":"",children:c.jsxs("select",{className:`input ${e?"border-red-500 focus:ring-red-500 focus:border-red-500":""} ${s?"bg-white/30 backdrop-blur-md border-2 border-primary-500/50 text-primary-600 hover:bg-primary-500/20 hover:border-primary-500/70 shadow-md focus:bg-primary-500/20 focus:border-primary-500/70 h-[42px]":""} ${n} cursor-pointer`,style:s?{height:"42px"}:{},...o,children:[!o.value&&a&&c.jsx("option",{value:"",className:"bg-white text-gray-900",disabled:!0,children:a}),i.map(l=>c.jsx("option",{value:l.value,className:"bg-white text-gray-900",children:l.label},l.value))]})}),e&&c.jsx("p",{className:"mt-1.5 text-sm text-red-600",children:e})]});function L8(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=L8(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Pn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=L8(t))&&(r&&(r+=" "),r+=e);return r}var EM,II;function vs(){if(II)return EM;II=1;var t=Array.isArray;return EM=t,EM}var CM,DI;function U8(){if(DI)return CM;DI=1;var t=typeof mb=="object"&&mb&&mb.Object===Object&&mb;return CM=t,CM}var PM,LI;function Ul(){if(LI)return PM;LI=1;var t=U8(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return PM=n,PM}var NM,UI;function Y0(){if(UI)return NM;UI=1;var t=Ul(),e=t.Symbol;return NM=e,NM}var OM,FI;function $K(){if(FI)return OM;FI=1;var t=Y0(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function a(s){var o=n.call(s,i),l=s[i];try{s[i]=void 0;var u=!0}catch{}var f=r.call(s);return u&&(o?s[i]=l:delete s[i]),f}return OM=a,OM}var RM,zI;function qK(){if(zI)return RM;zI=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return RM=n,RM}var kM,BI;function Jc(){if(BI)return kM;BI=1;var t=Y0(),e=$K(),n=qK(),r="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function s(o){return o==null?o===void 0?i:r:a&&a in Object(o)?e(o):n(o)}return kM=s,kM}var jM,VI;function Qc(){if(VI)return jM;VI=1;function t(e){return e!=null&&typeof e=="object"}return jM=t,jM}var IM,HI;function yg(){if(HI)return IM;HI=1;var t=Jc(),e=Qc(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return IM=r,IM}var DM,WI;function qO(){if(WI)return DM;WI=1;var t=vs(),e=yg(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){if(t(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:r.test(a)||!n.test(a)||s!=null&&a in Object(s)}return DM=i,DM}var LM,GI;function yd(){if(GI)return LM;GI=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return LM=t,LM}var UM,$I;function XO(){if($I)return UM;$I=1;var t=Jc(),e=yd(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(o){if(!e(o))return!1;var l=t(o);return l==r||l==i||l==n||l==a}return UM=s,UM}var FM,qI;function XK(){if(qI)return FM;qI=1;var t=Ul(),e=t["__core-js_shared__"];return FM=e,FM}var zM,XI;function YK(){if(XI)return zM;XI=1;var t=XK(),e=(function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!e&&e in r}return zM=n,zM}var BM,YI;function F8(){if(YI)return BM;YI=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return BM=n,BM}var VM,KI;function KK(){if(KI)return VM;KI=1;var t=XO(),e=YK(),n=yd(),r=F8(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,l=s.toString,u=o.hasOwnProperty,f=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(m){if(!n(m)||e(m))return!1;var y=t(m)?f:a;return y.test(r(m))}return VM=h,VM}var HM,ZI;function ZK(){if(ZI)return HM;ZI=1;function t(e,n){return e?.[n]}return HM=t,HM}var WM,JI;function bh(){if(JI)return WM;JI=1;var t=KK(),e=ZK();function n(r,i){var a=e(r,i);return t(a)?a:void 0}return WM=n,WM}var GM,QI;function C_(){if(QI)return GM;QI=1;var t=bh(),e=t(Object,"create");return GM=e,GM}var $M,e3;function JK(){if(e3)return $M;e3=1;var t=C_();function e(){this.__data__=t?t(null):{},this.size=0}return $M=e,$M}var qM,t3;function QK(){if(t3)return qM;t3=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return qM=t,qM}var XM,n3;function eZ(){if(n3)return XM;n3=1;var t=C_(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var s=this.__data__;if(t){var o=s[a];return o===e?void 0:o}return r.call(s,a)?s[a]:void 0}return XM=i,XM}var YM,r3;function tZ(){if(r3)return YM;r3=1;var t=C_(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var a=this.__data__;return t?a[i]!==void 0:n.call(a,i)}return YM=r,YM}var KM,i3;function nZ(){if(i3)return KM;i3=1;var t=C_(),e="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=t&&i===void 0?e:i,this}return KM=n,KM}var ZM,a3;function rZ(){if(a3)return ZM;a3=1;var t=JK(),e=QK(),n=eZ(),r=tZ(),i=nZ();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,ZM=a,ZM}var JM,s3;function iZ(){if(s3)return JM;s3=1;function t(){this.__data__=[],this.size=0}return JM=t,JM}var QM,o3;function YO(){if(o3)return QM;o3=1;function t(e,n){return e===n||e!==e&&n!==n}return QM=t,QM}var eT,l3;function P_(){if(l3)return eT;l3=1;var t=YO();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return eT=e,eT}var tT,c3;function aZ(){if(c3)return tT;c3=1;var t=P_(),e=Array.prototype,n=e.splice;function r(i){var a=this.__data__,s=t(a,i);if(s<0)return!1;var o=a.length-1;return s==o?a.pop():n.call(a,s,1),--this.size,!0}return tT=r,tT}var nT,u3;function sZ(){if(u3)return nT;u3=1;var t=P_();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return nT=e,nT}var rT,d3;function oZ(){if(d3)return rT;d3=1;var t=P_();function e(n){return t(this.__data__,n)>-1}return rT=e,rT}var iT,f3;function lZ(){if(f3)return iT;f3=1;var t=P_();function e(n,r){var i=this.__data__,a=t(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return iT=e,iT}var aT,h3;function N_(){if(h3)return aT;h3=1;var t=iZ(),e=aZ(),n=sZ(),r=oZ(),i=lZ();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,aT=a,aT}var sT,p3;function KO(){if(p3)return sT;p3=1;var t=bh(),e=Ul(),n=t(e,"Map");return sT=n,sT}var oT,m3;function cZ(){if(m3)return oT;m3=1;var t=rZ(),e=N_(),n=KO();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return oT=r,oT}var lT,g3;function uZ(){if(g3)return lT;g3=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return lT=t,lT}var cT,y3;function O_(){if(y3)return cT;y3=1;var t=uZ();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return cT=e,cT}var uT,v3;function dZ(){if(v3)return uT;v3=1;var t=O_();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return uT=e,uT}var dT,x3;function fZ(){if(x3)return dT;x3=1;var t=O_();function e(n){return t(this,n).get(n)}return dT=e,dT}var fT,b3;function hZ(){if(b3)return fT;b3=1;var t=O_();function e(n){return t(this,n).has(n)}return fT=e,fT}var hT,w3;function pZ(){if(w3)return hT;w3=1;var t=O_();function e(n,r){var i=t(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return hT=e,hT}var pT,_3;function ZO(){if(_3)return pT;_3=1;var t=cZ(),e=dZ(),n=fZ(),r=hZ(),i=pZ();function a(s){var o=-1,l=s==null?0:s.length;for(this.clear();++o<l;){var u=s[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,pT=a,pT}var mT,S3;function z8(){if(S3)return mT;S3=1;var t=ZO(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,o=i?i.apply(this,s):s[0],l=a.cache;if(l.has(o))return l.get(o);var u=r.apply(this,s);return a.cache=l.set(o,u)||l,u};return a.cache=new(n.Cache||t),a}return n.Cache=t,mT=n,mT}var gT,M3;function mZ(){if(M3)return gT;M3=1;var t=z8(),e=500;function n(r){var i=t(r,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return gT=n,gT}var yT,T3;function gZ(){if(T3)return yT;T3=1;var t=mZ(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,o,l,u){a.push(l?u.replace(n,"$1"):o||s)}),a});return yT=r,yT}var vT,A3;function JO(){if(A3)return vT;A3=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=n(e[r],r,e);return a}return vT=t,vT}var xT,E3;function yZ(){if(E3)return xT;E3=1;var t=Y0(),e=JO(),n=vs(),r=yg(),i=t?t.prototype:void 0,a=i?i.toString:void 0;function s(o){if(typeof o=="string")return o;if(n(o))return e(o,s)+"";if(r(o))return a?a.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return xT=s,xT}var bT,C3;function B8(){if(C3)return bT;C3=1;var t=yZ();function e(n){return n==null?"":t(n)}return bT=e,bT}var wT,P3;function V8(){if(P3)return wT;P3=1;var t=vs(),e=qO(),n=gZ(),r=B8();function i(a,s){return t(a)?a:e(a,s)?[a]:n(r(a))}return wT=i,wT}var _T,N3;function R_(){if(N3)return _T;N3=1;var t=yg();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return _T=e,_T}var ST,O3;function QO(){if(O3)return ST;O3=1;var t=V8(),e=R_();function n(r,i){i=t(i,r);for(var a=0,s=i.length;r!=null&&a<s;)r=r[e(i[a++])];return a&&a==s?r:void 0}return ST=n,ST}var MT,R3;function H8(){if(R3)return MT;R3=1;var t=QO();function e(n,r,i){var a=n==null?void 0:t(n,r);return a===void 0?i:a}return MT=e,MT}var vZ=H8();const Us=Zn(vZ);var TT,k3;function xZ(){if(k3)return TT;k3=1;function t(e){return e==null}return TT=t,TT}var bZ=xZ();const bn=Zn(bZ);var AT,j3;function wZ(){if(j3)return AT;j3=1;var t=Jc(),e=vs(),n=Qc(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&n(a)&&t(a)==r}return AT=i,AT}var _Z=wZ();const lh=Zn(_Z);var SZ=XO();const un=Zn(SZ);var MZ=yd();const vg=Zn(MZ);var ET={exports:{}},er={};var I3;function TZ(){if(I3)return er;I3=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen"),w;w=Symbol.for("react.module.reference");function b(x){if(typeof x=="object"&&x!==null){var _=x.$$typeof;switch(_){case t:switch(x=x.type,x){case n:case i:case r:case u:case f:return x;default:switch(x=x&&x.$$typeof,x){case o:case s:case l:case m:case h:case a:return x;default:return _}}case e:return _}}}return er.ContextConsumer=s,er.ContextProvider=a,er.Element=t,er.ForwardRef=l,er.Fragment=n,er.Lazy=m,er.Memo=h,er.Portal=e,er.Profiler=i,er.StrictMode=r,er.Suspense=u,er.SuspenseList=f,er.isAsyncMode=function(){return!1},er.isConcurrentMode=function(){return!1},er.isContextConsumer=function(x){return b(x)===s},er.isContextProvider=function(x){return b(x)===a},er.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===t},er.isForwardRef=function(x){return b(x)===l},er.isFragment=function(x){return b(x)===n},er.isLazy=function(x){return b(x)===m},er.isMemo=function(x){return b(x)===h},er.isPortal=function(x){return b(x)===e},er.isProfiler=function(x){return b(x)===i},er.isStrictMode=function(x){return b(x)===r},er.isSuspense=function(x){return b(x)===u},er.isSuspenseList=function(x){return b(x)===f},er.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===i||x===r||x===u||x===f||x===y||typeof x=="object"&&x!==null&&(x.$$typeof===m||x.$$typeof===h||x.$$typeof===a||x.$$typeof===s||x.$$typeof===l||x.$$typeof===w||x.getModuleId!==void 0)},er.typeOf=b,er}var D3;function AZ(){return D3||(D3=1,ET.exports=TZ()),ET.exports}var EZ=AZ(),CT,L3;function W8(){if(L3)return CT;L3=1;var t=Jc(),e=Qc(),n="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==n}return CT=r,CT}var PT,U3;function CZ(){if(U3)return PT;U3=1;var t=W8();function e(n){return t(n)&&n!=+n}return PT=e,PT}var PZ=CZ();const K0=Zn(PZ);var NZ=W8();const OZ=Zn(NZ);var Wa=function(e){return e===0?0:e>0?1:-1},Ff=function(e){return lh(e)&&e.indexOf("%")===e.length-1},pt=function(e){return OZ(e)&&!K0(e)},RZ=function(e){return bn(e)},Fi=function(e){return pt(e)||lh(e)},kZ=0,xg=function(e){var n=++kZ;return"".concat(e||"").concat(n)},Ga=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!pt(e)&&!lh(e))return r;var a;if(Ff(e)){var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return K0(a)&&(a=r),i&&a>n&&(a=n),a},Ku=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},jZ=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Is=function(e,n){return pt(e)&&pt(n)?function(r){return e+r*(n-e)}:function(){return n}};function o1(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Us(r,e))===n})}var IZ=function(e,n){return pt(e)&&pt(n)?e-n:lh(e)&&lh(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Mm(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function tP(t){"@babel/helpers - typeof";return tP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tP(t)}var DZ=["viewBox","children"],LZ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],F3=["points","pathLength"],NT={svg:DZ,polygon:F3,polyline:F3},eR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],l1=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(L.isValidElement(e)&&(r=e.props),!vg(r))return null;var i={};return Object.keys(r).forEach(function(a){eR.includes(a)&&(i[a]=n||function(s){return r[a](r,s)})}),i},UZ=function(e,n,r){return function(i){return e(n,r,i),null}},ch=function(e,n,r){if(!vg(e)||tP(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];eR.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=UZ(s,n,r))}),i},FZ=["children"],zZ=["children"];function z3(t,e){if(t==null)return{};var n=BZ(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function BZ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function nP(t){"@babel/helpers - typeof";return nP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nP(t)}var B3={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Lc=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},V3=null,OT=null,tR=function t(e){if(e===V3&&Array.isArray(OT))return OT;var n=[];return L.Children.forEach(e,function(r){bn(r)||(EZ.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),OT=n,V3=e,n};function Fs(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Lc(i)}):r=[Lc(e)],tR(t).forEach(function(i){var a=Us(i,"type.displayName")||Us(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function js(t,e){var n=Fs(t,e);return n&&n[0]}var H3=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!pt(r)||r<=0||!pt(i)||i<=0)},VZ=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],HZ=function(e){return e&&e.type&&lh(e.type)&&VZ.indexOf(e.type)>=0},WZ=function(e){return e&&nP(e)==="object"&&"clipDot"in e},GZ=function(e,n,r,i){var a,s=(a=NT?.[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!un(e)&&(i&&s.includes(n)||LZ.includes(n))||r&&eR.includes(n)},en=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(L.isValidElement(e)&&(i=e.props),!vg(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;GZ((o=i)===null||o===void 0?void 0:o[s],s,n,r)&&(a[s]=i[s])}),a},rP=function t(e,n){if(e===n)return!0;var r=L.Children.count(e);if(r!==L.Children.count(n))return!1;if(r===0)return!0;if(r===1)return W3(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!W3(a,s))return!1}return!0},W3=function(e,n){if(bn(e)&&bn(n))return!0;if(!bn(e)&&!bn(n)){var r=e.props||{},i=r.children,a=z3(r,FZ),s=n.props||{},o=s.children,l=z3(s,zZ);return i&&o?Mm(a,l)&&rP(i,o):!i&&!o?Mm(a,l):!1}return!1},G3=function(e,n){var r=[],i={};return tR(e).forEach(function(a,s){if(HZ(a))r.push(a);else if(a){var o=Lc(a.type),l=n[o]||{},u=l.handler,f=l.once;if(u&&(!f||!i[o])){var h=u(a,o,s);r.push(h),i[o]=!0}}}),r},$Z=function(e){var n=e&&e.type;return n&&B3[n]?B3[n]:null},qZ=function(e,n){return tR(n).indexOf(e)},XZ=["children","width","height","viewBox","className","style","title","desc"];function iP(){return iP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iP.apply(this,arguments)}function YZ(t,e){if(t==null)return{};var n=KZ(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function KZ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function aP(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,s=t.style,o=t.title,l=t.desc,u=YZ(t,XZ),f=i||{width:n,height:r,x:0,y:0},h=Pn("recharts-surface",a);return xe.createElement("svg",iP({},en(u,!0,"svg"),{className:h,width:n,height:r,style:s,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),xe.createElement("title",null,o),xe.createElement("desc",null,l),e)}var ZZ=["children","className"];function sP(){return sP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sP.apply(this,arguments)}function JZ(t,e){if(t==null)return{};var n=QZ(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function QZ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var qn=xe.forwardRef(function(t,e){var n=t.children,r=t.className,i=JZ(t,ZZ),a=Pn("recharts-layer",r);return xe.createElement("g",sP({className:a},en(i,!0),{ref:e}),n)}),rl=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},RT,$3;function eJ(){if($3)return RT;$3=1;function t(e,n,r){var i=-1,a=e.length;n<0&&(n=-n>a?0:a+n),r=r>a?a:r,r<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var s=Array(a);++i<a;)s[i]=e[i+n];return s}return RT=t,RT}var kT,q3;function tJ(){if(q3)return kT;q3=1;var t=eJ();function e(n,r,i){var a=n.length;return i=i===void 0?a:i,!r&&i>=a?n:t(n,r,i)}return kT=e,kT}var jT,X3;function G8(){if(X3)return jT;X3=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+t+i+a+"]");function l(u){return o.test(u)}return jT=l,jT}var IT,Y3;function nJ(){if(Y3)return IT;Y3=1;function t(e){return e.split("")}return IT=t,IT}var DT,K3;function rJ(){if(K3)return DT;K3=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",s="["+t+"]",o="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",f="[^"+t+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",w=u+"?",b="["+a+"]?",x="(?:"+y+"(?:"+[f,h,m].join("|")+")"+b+w+")*",_=b+w+x,M="(?:"+[f+o+"?",o,h,m,s].join("|")+")",T=RegExp(l+"(?="+l+")|"+M+_,"g");function A(R){return R.match(T)||[]}return DT=A,DT}var LT,Z3;function iJ(){if(Z3)return LT;Z3=1;var t=nJ(),e=G8(),n=rJ();function r(i){return e(i)?n(i):t(i)}return LT=r,LT}var UT,J3;function aJ(){if(J3)return UT;J3=1;var t=tJ(),e=G8(),n=iJ(),r=B8();function i(a){return function(s){s=r(s);var o=e(s)?n(s):void 0,l=o?o[0]:s.charAt(0),u=o?t(o,1).join(""):s.slice(1);return l[a]()+u}}return UT=i,UT}var FT,Q3;function sJ(){if(Q3)return FT;Q3=1;var t=aJ(),e=t("toUpperCase");return FT=e,FT}var oJ=sJ();const k_=Zn(oJ);function Cr(t){return function(){return t}}const $8=Math.cos,c1=Math.sin,il=Math.sqrt,u1=Math.PI,j_=2*u1,oP=Math.PI,lP=2*oP,Cf=1e-6,lJ=lP-Cf;function q8(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function cJ(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return q8;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let uJ=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?q8:cJ(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=r-e,u=i-n,f=s-e,h=o-n,m=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>Cf)if(!(Math.abs(h*l-u*f)>Cf)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let y=r-s,w=i-o,b=l*l+u*u,x=y*y+w*w,_=Math.sqrt(b),M=Math.sqrt(m),T=a*Math.tan((oP-Math.acos((b+m-x)/(2*_*M)))/2),A=T/M,R=T/_;Math.abs(A-1)>Cf&&this._append`L${e+A*f},${n+A*h}`,this._append`A${a},${a},0,0,${+(h*y>f*w)},${this._x1=e+R*l},${this._y1=n+R*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),u=e+o,f=n+l,h=1^s,m=s?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Cf||Math.abs(this._y1-f)>Cf)&&this._append`L${u},${f}`,r&&(m<0&&(m=m%lP+lP),m>lJ?this._append`A${r},${r},0,1,${h},${e-o},${n-l}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:m>Cf&&this._append`A${r},${r},0,${+(m>=oP)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function nR(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new uJ(e)}function rR(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function X8(t){this._context=t}X8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function I_(t){return new X8(t)}function Y8(t){return t[0]}function K8(t){return t[1]}function Z8(t,e){var n=Cr(!0),r=null,i=I_,a=null,s=nR(o);t=typeof t=="function"?t:t===void 0?Y8:Cr(t),e=typeof e=="function"?e:e===void 0?K8:Cr(e);function o(l){var u,f=(l=rR(l)).length,h,m=!1,y;for(r==null&&(a=i(y=s())),u=0;u<=f;++u)!(u<f&&n(h=l[u],u,l))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+t(h,u,l),+e(h,u,l));if(y)return a=null,y+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:Cr(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:Cr(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Cr(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),o):r},o}function vb(t,e,n){var r=null,i=Cr(!0),a=null,s=I_,o=null,l=nR(u);t=typeof t=="function"?t:t===void 0?Y8:Cr(+t),e=typeof e=="function"?e:Cr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?K8:Cr(+n);function u(h){var m,y,w,b=(h=rR(h)).length,x,_=!1,M,T=new Array(b),A=new Array(b);for(a==null&&(o=s(M=l())),m=0;m<=b;++m){if(!(m<b&&i(x=h[m],m,h))===_)if(_=!_)y=m,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),w=m-1;w>=y;--w)o.point(T[w],A[w]);o.lineEnd(),o.areaEnd()}_&&(T[m]=+t(x,m,h),A[m]=+e(x,m,h),o.point(r?+r(x,m,h):T[m],n?+n(x,m,h):A[m]))}if(M)return o=null,M+""||null}function f(){return Z8().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:Cr(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Cr(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Cr(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:Cr(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Cr(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Cr(+h),u):n},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(n)},u.lineX1=function(){return f().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:Cr(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),u):a},u}class J8{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function dJ(t){return new J8(t,!0)}function fJ(t){return new J8(t,!1)}const iR={draw(t,e){const n=il(e/u1);t.moveTo(n,0),t.arc(0,0,n,0,j_)}},hJ={draw(t,e){const n=il(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Q8=il(1/3),pJ=Q8*2,mJ={draw(t,e){const n=il(e/pJ),r=n*Q8;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},gJ={draw(t,e){const n=il(e),r=-n/2;t.rect(r,r,n,n)}},yJ=.8908130915292852,eV=c1(u1/10)/c1(7*u1/10),vJ=c1(j_/10)*eV,xJ=-$8(j_/10)*eV,bJ={draw(t,e){const n=il(e*yJ),r=vJ*n,i=xJ*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=j_*a/5,o=$8(s),l=c1(s);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*i,l*r+o*i)}t.closePath()}},zT=il(3),wJ={draw(t,e){const n=-il(e/(zT*3));t.moveTo(0,n*2),t.lineTo(-zT*n,-n),t.lineTo(zT*n,-n),t.closePath()}},ro=-.5,io=il(3)/2,cP=1/il(12),_J=(cP/2+1)*3,SJ={draw(t,e){const n=il(e/_J),r=n/2,i=n*cP,a=r,s=n*cP+n,o=-a,l=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,l),t.lineTo(ro*r-io*i,io*r+ro*i),t.lineTo(ro*a-io*s,io*a+ro*s),t.lineTo(ro*o-io*l,io*o+ro*l),t.lineTo(ro*r+io*i,ro*i-io*r),t.lineTo(ro*a+io*s,ro*s-io*a),t.lineTo(ro*o+io*l,ro*l-io*o),t.closePath()}};function MJ(t,e){let n=null,r=nR(i);t=typeof t=="function"?t:Cr(t||iR),e=typeof e=="function"?e:Cr(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Cr(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Cr(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function d1(){}function f1(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function tV(t){this._context=t}tV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:f1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:f1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function TJ(t){return new tV(t)}function nV(t){this._context=t}nV.prototype={areaStart:d1,areaEnd:d1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:f1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function AJ(t){return new nV(t)}function rV(t){this._context=t}rV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:f1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function EJ(t){return new rV(t)}function iV(t){this._context=t}iV.prototype={areaStart:d1,areaEnd:d1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function CJ(t){return new iV(t)}function eD(t){return t<0?-1:1}function tD(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(eD(a)+eD(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function nD(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function BT(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function h1(t){this._context=t}h1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:BT(this,this._t0,nD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,BT(this,nD(this,n=tD(this,t,e)),n);break;default:BT(this,this._t0,n=tD(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function aV(t){this._context=new sV(t)}(aV.prototype=Object.create(h1.prototype)).point=function(t,e){h1.prototype.point.call(this,e,t)};function sV(t){this._context=t}sV.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function PJ(t){return new h1(t)}function NJ(t){return new aV(t)}function oV(t){this._context=t}oV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=rD(t),i=rD(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function rD(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function OJ(t){return new oV(t)}function D_(t,e){this._context=t,this._t=e}D_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function RJ(t){return new D_(t,.5)}function kJ(t){return new D_(t,0)}function jJ(t){return new D_(t,1)}function jm(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function uP(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function IJ(t,e){return t[e]}function DJ(t){const e=[];return e.key=t,e}function LJ(){var t=Cr([]),e=uP,n=jm,r=IJ;function i(a){var s=Array.from(t.apply(this,arguments),DJ),o,l=s.length,u=-1,f;for(const h of a)for(o=0,++u;o<l;++o)(s[o][u]=[0,+r(h,s[o].key,u,a)]).data=h;for(o=0,f=rR(e(s));o<l;++o)s[f[o]].index=o;return n(s,f),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Cr(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Cr(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?uP:typeof a=="function"?a:Cr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??jm,i):n},i}function UJ(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}jm(t,e)}}function FJ(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}jm(t,e)}}function zJ(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,l=0,u=0;o<s;++o){for(var f=t[e[o]],h=f[r][1]||0,m=f[r-1][1]||0,y=(h-m)/2,w=0;w<o;++w){var b=t[e[w]],x=b[r][1]||0,_=b[r-1][1]||0;y+=x-_}l+=h,u+=y*h}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,jm(t,e)}}function Lv(t){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lv(t)}var BJ=["type","size","sizeType"];function dP(){return dP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dP.apply(this,arguments)}function iD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iD(Object(n),!0).forEach(function(r){VJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VJ(t,e,n){return e=HJ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HJ(t){var e=WJ(t,"string");return Lv(e)=="symbol"?e:e+""}function WJ(t,e){if(Lv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GJ(t,e){if(t==null)return{};var n=$J(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $J(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var lV={symbolCircle:iR,symbolCross:hJ,symbolDiamond:mJ,symbolSquare:gJ,symbolStar:bJ,symbolTriangle:wJ,symbolWye:SJ},qJ=Math.PI/180,XJ=function(e){var n="symbol".concat(k_(e));return lV[n]||iR},YJ=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*qJ;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},KJ=function(e,n){lV["symbol".concat(k_(e))]=n},aR=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,s=e.sizeType,o=s===void 0?"area":s,l=GJ(e,BJ),u=aD(aD({},l),{},{type:r,size:a,sizeType:o}),f=function(){var x=XJ(r),_=MJ().type(x).size(YJ(a,o,r));return _()},h=u.className,m=u.cx,y=u.cy,w=en(u,!0);return m===+m&&y===+y&&a===+a?xe.createElement("path",dP({},w,{className:Pn("recharts-symbols",h),transform:"translate(".concat(m,", ").concat(y,")"),d:f()})):null};aR.registerSymbol=KJ;function Im(t){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Im(t)}function fP(){return fP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fP.apply(this,arguments)}function sD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sD(Object(n),!0).forEach(function(r){Uv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QJ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uV(r.key),r)}}function eQ(t,e,n){return e&&QJ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tQ(t,e,n){return e=p1(e),nQ(t,cV()?Reflect.construct(e,n||[],p1(t).constructor):e.apply(t,n))}function nQ(t,e){if(e&&(Im(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rQ(t)}function rQ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cV=function(){return!!t})()}function p1(t){return p1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},p1(t)}function iQ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hP(t,e)}function hP(t,e){return hP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hP(t,e)}function Uv(t,e,n){return e=uV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uV(t){var e=aQ(t,"string");return Im(e)=="symbol"?e:e+""}function aQ(t,e){if(Im(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ao=32,sR=(function(t){function e(){return JJ(this,e),tQ(this,e,arguments)}return iQ(e,t),eQ(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=ao/2,s=ao/6,o=ao/3,l=r.inactive?i:r.color;if(r.type==="plainline")return xe.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:ao,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return xe.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(ao,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return xe.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ao/8,"h").concat(ao,"v").concat(ao*3/4,"h").concat(-ao,"z"),className:"recharts-legend-icon"});if(xe.isValidElement(r.legendIcon)){var u=ZJ({},r);return delete u.legendIcon,xe.cloneElement(r.legendIcon,u)}return xe.createElement(aR,{fill:l,cx:a,cy:a,size:ao,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,l=i.formatter,u=i.inactiveColor,f={x:0,y:0,width:ao,height:ao},h={display:o==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(y,w){var b=y.formatter||l,x=Pn(Uv(Uv({"recharts-legend-item":!0},"legend-item-".concat(w),!0),"inactive",y.inactive));if(y.type==="none")return null;var _=un(y.value)?null:y.value;rl(!un(y.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var M=y.inactive?u:y.color;return xe.createElement("li",fP({className:x,style:h,key:"legend-item-".concat(w)},ch(r.props,y,w)),xe.createElement(aP,{width:s,height:s,viewBox:f,style:m},r.renderIcon(y)),xe.createElement("span",{className:"recharts-legend-item-text",style:{color:M}},b?b(_,y,w):_))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return xe.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])})(L.PureComponent);Uv(sR,"displayName","Legend");Uv(sR,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var VT,oD;function sQ(){if(oD)return VT;oD=1;var t=N_();function e(){this.__data__=new t,this.size=0}return VT=e,VT}var HT,lD;function oQ(){if(lD)return HT;lD=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return HT=t,HT}var WT,cD;function lQ(){if(cD)return WT;cD=1;function t(e){return this.__data__.get(e)}return WT=t,WT}var GT,uD;function cQ(){if(uD)return GT;uD=1;function t(e){return this.__data__.has(e)}return GT=t,GT}var $T,dD;function uQ(){if(dD)return $T;dD=1;var t=N_(),e=KO(),n=ZO(),r=200;function i(a,s){var o=this.__data__;if(o instanceof t){var l=o.__data__;if(!e||l.length<r-1)return l.push([a,s]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(a,s),this.size=o.size,this}return $T=i,$T}var qT,fD;function dV(){if(fD)return qT;fD=1;var t=N_(),e=sQ(),n=oQ(),r=lQ(),i=cQ(),a=uQ();function s(o){var l=this.__data__=new t(o);this.size=l.size}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=r,s.prototype.has=i,s.prototype.set=a,qT=s,qT}var XT,hD;function dQ(){if(hD)return XT;hD=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return XT=e,XT}var YT,pD;function fQ(){if(pD)return YT;pD=1;function t(e){return this.__data__.has(e)}return YT=t,YT}var KT,mD;function fV(){if(mD)return KT;mD=1;var t=ZO(),e=dQ(),n=fQ();function r(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new t;++a<s;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,KT=r,KT}var ZT,gD;function hV(){if(gD)return ZT;gD=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return ZT=t,ZT}var JT,yD;function pV(){if(yD)return JT;yD=1;function t(e,n){return e.has(n)}return JT=t,JT}var QT,vD;function mV(){if(vD)return QT;vD=1;var t=fV(),e=hV(),n=pV(),r=1,i=2;function a(s,o,l,u,f,h){var m=l&r,y=s.length,w=o.length;if(y!=w&&!(m&&w>y))return!1;var b=h.get(s),x=h.get(o);if(b&&x)return b==o&&x==s;var _=-1,M=!0,T=l&i?new t:void 0;for(h.set(s,o),h.set(o,s);++_<y;){var A=s[_],R=o[_];if(u)var N=m?u(R,A,_,o,s,h):u(A,R,_,s,o,h);if(N!==void 0){if(N)continue;M=!1;break}if(T){if(!e(o,function(O,k){if(!n(T,k)&&(A===O||f(A,O,l,u,h)))return T.push(k)})){M=!1;break}}else if(!(A===R||f(A,R,l,u,h))){M=!1;break}}return h.delete(s),h.delete(o),M}return QT=a,QT}var eA,xD;function hQ(){if(xD)return eA;xD=1;var t=Ul(),e=t.Uint8Array;return eA=e,eA}var tA,bD;function pQ(){if(bD)return tA;bD=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,a){r[++n]=[a,i]}),r}return tA=t,tA}var nA,wD;function oR(){if(wD)return nA;wD=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return nA=t,nA}var rA,_D;function mQ(){if(_D)return rA;_D=1;var t=Y0(),e=hQ(),n=YO(),r=mV(),i=pQ(),a=oR(),s=1,o=2,l="[object Boolean]",u="[object Date]",f="[object Error]",h="[object Map]",m="[object Number]",y="[object RegExp]",w="[object Set]",b="[object String]",x="[object Symbol]",_="[object ArrayBuffer]",M="[object DataView]",T=t?t.prototype:void 0,A=T?T.valueOf:void 0;function R(N,O,k,C,I,F,V){switch(k){case M:if(N.byteLength!=O.byteLength||N.byteOffset!=O.byteOffset)return!1;N=N.buffer,O=O.buffer;case _:return!(N.byteLength!=O.byteLength||!F(new e(N),new e(O)));case l:case u:case m:return n(+N,+O);case f:return N.name==O.name&&N.message==O.message;case y:case b:return N==O+"";case h:var W=i;case w:var G=C&s;if(W||(W=a),N.size!=O.size&&!G)return!1;var J=V.get(N);if(J)return J==O;C|=o,V.set(N,O);var ee=r(W(N),W(O),C,I,F,V);return V.delete(N),ee;case x:if(A)return A.call(N)==A.call(O)}return!1}return rA=R,rA}var iA,SD;function gV(){if(SD)return iA;SD=1;function t(e,n){for(var r=-1,i=n.length,a=e.length;++r<i;)e[a+r]=n[r];return e}return iA=t,iA}var aA,MD;function gQ(){if(MD)return aA;MD=1;var t=gV(),e=vs();function n(r,i,a){var s=i(r);return e(r)?s:t(s,a(r))}return aA=n,aA}var sA,TD;function yQ(){if(TD)return sA;TD=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=0,s=[];++r<i;){var o=e[r];n(o,r,e)&&(s[a++]=o)}return s}return sA=t,sA}var oA,AD;function vQ(){if(AD)return oA;AD=1;function t(){return[]}return oA=t,oA}var lA,ED;function xQ(){if(ED)return lA;ED=1;var t=yQ(),e=vQ(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),t(i(s),function(o){return r.call(s,o)}))}:e;return lA=a,lA}var cA,CD;function bQ(){if(CD)return cA;CD=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return cA=t,cA}var uA,PD;function wQ(){if(PD)return uA;PD=1;var t=Jc(),e=Qc(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return uA=r,uA}var dA,ND;function lR(){if(ND)return dA;ND=1;var t=wQ(),e=Qc(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=t((function(){return arguments})())?t:function(s){return e(s)&&r.call(s,"callee")&&!i.call(s,"callee")};return dA=a,dA}var sv={exports:{}},fA,OD;function _Q(){if(OD)return fA;OD=1;function t(){return!1}return fA=t,fA}sv.exports;var RD;function yV(){return RD||(RD=1,(function(t,e){var n=Ul(),r=_Q(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;t.exports=u})(sv,sv.exports)),sv.exports}var hA,kD;function cR(){if(kD)return hA;kD=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return hA=n,hA}var pA,jD;function uR(){if(jD)return pA;jD=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return pA=e,pA}var mA,ID;function SQ(){if(ID)return mA;ID=1;var t=Jc(),e=uR(),n=Qc(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",o="[object Error]",l="[object Function]",u="[object Map]",f="[object Number]",h="[object Object]",m="[object RegExp]",y="[object Set]",w="[object String]",b="[object WeakMap]",x="[object ArrayBuffer]",_="[object DataView]",M="[object Float32Array]",T="[object Float64Array]",A="[object Int8Array]",R="[object Int16Array]",N="[object Int32Array]",O="[object Uint8Array]",k="[object Uint8ClampedArray]",C="[object Uint16Array]",I="[object Uint32Array]",F={};F[M]=F[T]=F[A]=F[R]=F[N]=F[O]=F[k]=F[C]=F[I]=!0,F[r]=F[i]=F[x]=F[a]=F[_]=F[s]=F[o]=F[l]=F[u]=F[f]=F[h]=F[m]=F[y]=F[w]=F[b]=!1;function V(W){return n(W)&&e(W.length)&&!!F[t(W)]}return mA=V,mA}var gA,DD;function vV(){if(DD)return gA;DD=1;function t(e){return function(n){return e(n)}}return gA=t,gA}var ov={exports:{}};ov.exports;var LD;function MQ(){return LD||(LD=1,(function(t,e){var n=U8(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a&&n.process,o=(function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}})();t.exports=o})(ov,ov.exports)),ov.exports}var yA,UD;function xV(){if(UD)return yA;UD=1;var t=SQ(),e=vV(),n=MQ(),r=n&&n.isTypedArray,i=r?e(r):t;return yA=i,yA}var vA,FD;function TQ(){if(FD)return vA;FD=1;var t=bQ(),e=lR(),n=vs(),r=yV(),i=cR(),a=xV(),s=Object.prototype,o=s.hasOwnProperty;function l(u,f){var h=n(u),m=!h&&e(u),y=!h&&!m&&r(u),w=!h&&!m&&!y&&a(u),b=h||m||y||w,x=b?t(u.length,String):[],_=x.length;for(var M in u)(f||o.call(u,M))&&!(b&&(M=="length"||y&&(M=="offset"||M=="parent")||w&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||i(M,_)))&&x.push(M);return x}return vA=l,vA}var xA,zD;function AQ(){if(zD)return xA;zD=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return xA=e,xA}var bA,BD;function bV(){if(BD)return bA;BD=1;function t(e,n){return function(r){return e(n(r))}}return bA=t,bA}var wA,VD;function EQ(){if(VD)return wA;VD=1;var t=bV(),e=t(Object.keys,Object);return wA=e,wA}var _A,HD;function CQ(){if(HD)return _A;HD=1;var t=AQ(),e=EQ(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!t(a))return e(a);var s=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&s.push(o);return s}return _A=i,_A}var SA,WD;function Z0(){if(WD)return SA;WD=1;var t=XO(),e=uR();function n(r){return r!=null&&e(r.length)&&!t(r)}return SA=n,SA}var MA,GD;function L_(){if(GD)return MA;GD=1;var t=TQ(),e=CQ(),n=Z0();function r(i){return n(i)?t(i):e(i)}return MA=r,MA}var TA,$D;function PQ(){if($D)return TA;$D=1;var t=gQ(),e=xQ(),n=L_();function r(i){return t(i,n,e)}return TA=r,TA}var AA,qD;function NQ(){if(qD)return AA;qD=1;var t=PQ(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,s,o,l,u,f){var h=o&e,m=t(a),y=m.length,w=t(s),b=w.length;if(y!=b&&!h)return!1;for(var x=y;x--;){var _=m[x];if(!(h?_ in s:r.call(s,_)))return!1}var M=f.get(a),T=f.get(s);if(M&&T)return M==s&&T==a;var A=!0;f.set(a,s),f.set(s,a);for(var R=h;++x<y;){_=m[x];var N=a[_],O=s[_];if(l)var k=h?l(O,N,_,s,a,f):l(N,O,_,a,s,f);if(!(k===void 0?N===O||u(N,O,o,l,f):k)){A=!1;break}R||(R=_=="constructor")}if(A&&!R){var C=a.constructor,I=s.constructor;C!=I&&"constructor"in a&&"constructor"in s&&!(typeof C=="function"&&C instanceof C&&typeof I=="function"&&I instanceof I)&&(A=!1)}return f.delete(a),f.delete(s),A}return AA=i,AA}var EA,XD;function OQ(){if(XD)return EA;XD=1;var t=bh(),e=Ul(),n=t(e,"DataView");return EA=n,EA}var CA,YD;function RQ(){if(YD)return CA;YD=1;var t=bh(),e=Ul(),n=t(e,"Promise");return CA=n,CA}var PA,KD;function wV(){if(KD)return PA;KD=1;var t=bh(),e=Ul(),n=t(e,"Set");return PA=n,PA}var NA,ZD;function kQ(){if(ZD)return NA;ZD=1;var t=bh(),e=Ul(),n=t(e,"WeakMap");return NA=n,NA}var OA,JD;function jQ(){if(JD)return OA;JD=1;var t=OQ(),e=KO(),n=RQ(),r=wV(),i=kQ(),a=Jc(),s=F8(),o="[object Map]",l="[object Object]",u="[object Promise]",f="[object Set]",h="[object WeakMap]",m="[object DataView]",y=s(t),w=s(e),b=s(n),x=s(r),_=s(i),M=a;return(t&&M(new t(new ArrayBuffer(1)))!=m||e&&M(new e)!=o||n&&M(n.resolve())!=u||r&&M(new r)!=f||i&&M(new i)!=h)&&(M=function(T){var A=a(T),R=A==l?T.constructor:void 0,N=R?s(R):"";if(N)switch(N){case y:return m;case w:return o;case b:return u;case x:return f;case _:return h}return A}),OA=M,OA}var RA,QD;function IQ(){if(QD)return RA;QD=1;var t=dV(),e=mV(),n=mQ(),r=NQ(),i=jQ(),a=vs(),s=yV(),o=xV(),l=1,u="[object Arguments]",f="[object Array]",h="[object Object]",m=Object.prototype,y=m.hasOwnProperty;function w(b,x,_,M,T,A){var R=a(b),N=a(x),O=R?f:i(b),k=N?f:i(x);O=O==u?h:O,k=k==u?h:k;var C=O==h,I=k==h,F=O==k;if(F&&s(b)){if(!s(x))return!1;R=!0,C=!1}if(F&&!C)return A||(A=new t),R||o(b)?e(b,x,_,M,T,A):n(b,x,O,_,M,T,A);if(!(_&l)){var V=C&&y.call(b,"__wrapped__"),W=I&&y.call(x,"__wrapped__");if(V||W){var G=V?b.value():b,J=W?x.value():x;return A||(A=new t),T(G,J,_,M,A)}}return F?(A||(A=new t),r(b,x,_,M,T,A)):!1}return RA=w,RA}var kA,eL;function dR(){if(eL)return kA;eL=1;var t=IQ(),e=Qc();function n(r,i,a,s,o){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,a,s,n,o)}return kA=n,kA}var jA,tL;function DQ(){if(tL)return jA;tL=1;var t=dV(),e=dR(),n=1,r=2;function i(a,s,o,l){var u=o.length,f=u,h=!l;if(a==null)return!f;for(a=Object(a);u--;){var m=o[u];if(h&&m[2]?m[1]!==a[m[0]]:!(m[0]in a))return!1}for(;++u<f;){m=o[u];var y=m[0],w=a[y],b=m[1];if(h&&m[2]){if(w===void 0&&!(y in a))return!1}else{var x=new t;if(l)var _=l(w,b,y,a,s,x);if(!(_===void 0?e(b,w,n|r,l,x):_))return!1}}return!0}return jA=i,jA}var IA,nL;function _V(){if(nL)return IA;nL=1;var t=yd();function e(n){return n===n&&!t(n)}return IA=e,IA}var DA,rL;function LQ(){if(rL)return DA;rL=1;var t=_V(),e=L_();function n(r){for(var i=e(r),a=i.length;a--;){var s=i[a],o=r[s];i[a]=[s,o,t(o)]}return i}return DA=n,DA}var LA,iL;function SV(){if(iL)return LA;iL=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return LA=t,LA}var UA,aL;function UQ(){if(aL)return UA;aL=1;var t=DQ(),e=LQ(),n=SV();function r(i){var a=e(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(s){return s===i||t(s,i,a)}}return UA=r,UA}var FA,sL;function FQ(){if(sL)return FA;sL=1;function t(e,n){return e!=null&&n in Object(e)}return FA=t,FA}var zA,oL;function zQ(){if(oL)return zA;oL=1;var t=V8(),e=lR(),n=vs(),r=cR(),i=uR(),a=R_();function s(o,l,u){l=t(l,o);for(var f=-1,h=l.length,m=!1;++f<h;){var y=a(l[f]);if(!(m=o!=null&&u(o,y)))break;o=o[y]}return m||++f!=h?m:(h=o==null?0:o.length,!!h&&i(h)&&r(y,h)&&(n(o)||e(o)))}return zA=s,zA}var BA,lL;function BQ(){if(lL)return BA;lL=1;var t=FQ(),e=zQ();function n(r,i){return r!=null&&e(r,i,t)}return BA=n,BA}var VA,cL;function VQ(){if(cL)return VA;cL=1;var t=dR(),e=H8(),n=BQ(),r=qO(),i=_V(),a=SV(),s=R_(),o=1,l=2;function u(f,h){return r(f)&&i(h)?a(s(f),h):function(m){var y=e(m,f);return y===void 0&&y===h?n(m,f):t(h,y,o|l)}}return VA=u,VA}var HA,uL;function bg(){if(uL)return HA;uL=1;function t(e){return e}return HA=t,HA}var WA,dL;function HQ(){if(dL)return WA;dL=1;function t(e){return function(n){return n?.[e]}}return WA=t,WA}var GA,fL;function WQ(){if(fL)return GA;fL=1;var t=QO();function e(n){return function(r){return t(r,n)}}return GA=e,GA}var $A,hL;function GQ(){if(hL)return $A;hL=1;var t=HQ(),e=WQ(),n=qO(),r=R_();function i(a){return n(a)?t(r(a)):e(a)}return $A=i,$A}var qA,pL;function Fl(){if(pL)return qA;pL=1;var t=UQ(),e=VQ(),n=bg(),r=vs(),i=GQ();function a(s){return typeof s=="function"?s:s==null?n:typeof s=="object"?r(s)?e(s[0],s[1]):t(s):i(s)}return qA=a,qA}var XA,mL;function MV(){if(mL)return XA;mL=1;function t(e,n,r,i){for(var a=e.length,s=r+(i?1:-1);i?s--:++s<a;)if(n(e[s],s,e))return s;return-1}return XA=t,XA}var YA,gL;function $Q(){if(gL)return YA;gL=1;function t(e){return e!==e}return YA=t,YA}var KA,yL;function qQ(){if(yL)return KA;yL=1;function t(e,n,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===n)return i;return-1}return KA=t,KA}var ZA,vL;function XQ(){if(vL)return ZA;vL=1;var t=MV(),e=$Q(),n=qQ();function r(i,a,s){return a===a?n(i,a,s):t(i,e,s)}return ZA=r,ZA}var JA,xL;function YQ(){if(xL)return JA;xL=1;var t=XQ();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return JA=e,JA}var QA,bL;function KQ(){if(bL)return QA;bL=1;function t(e,n,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(n,e[i]))return!0;return!1}return QA=t,QA}var eE,wL;function ZQ(){if(wL)return eE;wL=1;function t(){}return eE=t,eE}var tE,_L;function JQ(){if(_L)return tE;_L=1;var t=wV(),e=ZQ(),n=oR(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(a){return new t(a)}:e;return tE=i,tE}var nE,SL;function QQ(){if(SL)return nE;SL=1;var t=fV(),e=YQ(),n=KQ(),r=pV(),i=JQ(),a=oR(),s=200;function o(l,u,f){var h=-1,m=e,y=l.length,w=!0,b=[],x=b;if(f)w=!1,m=n;else if(y>=s){var _=u?null:i(l);if(_)return a(_);w=!1,m=r,x=new t}else x=u?[]:b;e:for(;++h<y;){var M=l[h],T=u?u(M):M;if(M=f||M!==0?M:0,w&&T===T){for(var A=x.length;A--;)if(x[A]===T)continue e;u&&x.push(T),b.push(M)}else m(x,T,f)||(x!==b&&x.push(T),b.push(M))}return b}return nE=o,nE}var rE,ML;function eee(){if(ML)return rE;ML=1;var t=Fl(),e=QQ();function n(r,i){return r&&r.length?e(r,t(i,2)):[]}return rE=n,rE}var tee=eee();const TL=Zn(tee);function TV(t,e,n){return e===!0?TL(t,n):un(e)?TL(t,e):t}function Dm(t){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dm(t)}var nee=["ref"];function AL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _c(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AL(Object(n),!0).forEach(function(r){U_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ree(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,EV(r.key),r)}}function iee(t,e,n){return e&&EL(t.prototype,e),n&&EL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function aee(t,e,n){return e=m1(e),see(t,AV()?Reflect.construct(e,n||[],m1(t).constructor):e.apply(t,n))}function see(t,e){if(e&&(Dm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oee(t)}function oee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AV=function(){return!!t})()}function m1(t){return m1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},m1(t)}function lee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pP(t,e)}function pP(t,e){return pP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},pP(t,e)}function U_(t,e,n){return e=EV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EV(t){var e=cee(t,"string");return Dm(e)=="symbol"?e:e+""}function cee(t,e){if(Dm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function uee(t,e){if(t==null)return{};var n=dee(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function fee(t){return t.value}function hee(t,e){if(xe.isValidElement(t))return xe.cloneElement(t,e);if(typeof t=="function")return xe.createElement(t,e);e.ref;var n=uee(e,nee);return xe.createElement(sR,n)}var CL=1,id=(function(t){function e(){var n;ree(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=aee(this,e,[].concat(i)),U_(n,"lastBoundingBox",{width:-1,height:-1}),n}return lee(e,t),iee(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>CL||Math.abs(i.height-this.lastBoundingBox.height)>CL)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?_c({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,l=i.margin,u=i.chartWidth,f=i.chartHeight,h,m;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var y=this.getBBoxSnapshot();h={left:((u||0)-y.width)/2}}else h=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var w=this.getBBoxSnapshot();m={top:((f||0)-w.height)/2}}else m=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return _c(_c({},h),m)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,o=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,f=i.payload,h=_c(_c({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return xe.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(y){r.wrapperNode=y}},hee(a,_c(_c({},this.props),{},{payload:TV(f,u,fee)})))}}],[{key:"getWithHeight",value:function(r,i){var a=_c(_c({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&pt(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])})(L.PureComponent);U_(id,"displayName","Legend");U_(id,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var iE,PL;function pee(){if(PL)return iE;PL=1;var t=Y0(),e=lR(),n=vs(),r=t?t.isConcatSpreadable:void 0;function i(a){return n(a)||e(a)||!!(r&&a&&a[r])}return iE=i,iE}var aE,NL;function CV(){if(NL)return aE;NL=1;var t=gV(),e=pee();function n(r,i,a,s,o){var l=-1,u=r.length;for(a||(a=e),o||(o=[]);++l<u;){var f=r[l];i>0&&a(f)?i>1?n(f,i-1,a,s,o):t(o,f):s||(o[o.length]=f)}return o}return aE=n,aE}var sE,OL;function mee(){if(OL)return sE;OL=1;function t(e){return function(n,r,i){for(var a=-1,s=Object(n),o=i(n),l=o.length;l--;){var u=o[e?l:++a];if(r(s[u],u,s)===!1)break}return n}}return sE=t,sE}var oE,RL;function gee(){if(RL)return oE;RL=1;var t=mee(),e=t();return oE=e,oE}var lE,kL;function PV(){if(kL)return lE;kL=1;var t=gee(),e=L_();function n(r,i){return r&&t(r,i,e)}return lE=n,lE}var cE,jL;function yee(){if(jL)return cE;jL=1;var t=Z0();function e(n,r){return function(i,a){if(i==null)return i;if(!t(i))return n(i,a);for(var s=i.length,o=r?s:-1,l=Object(i);(r?o--:++o<s)&&a(l[o],o,l)!==!1;);return i}}return cE=e,cE}var uE,IL;function fR(){if(IL)return uE;IL=1;var t=PV(),e=yee(),n=e(t);return uE=n,uE}var dE,DL;function NV(){if(DL)return dE;DL=1;var t=fR(),e=Z0();function n(r,i){var a=-1,s=e(r)?Array(r.length):[];return t(r,function(o,l,u){s[++a]=i(o,l,u)}),s}return dE=n,dE}var fE,LL;function vee(){if(LL)return fE;LL=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return fE=t,fE}var hE,UL;function xee(){if(UL)return hE;UL=1;var t=yg();function e(n,r){if(n!==r){var i=n!==void 0,a=n===null,s=n===n,o=t(n),l=r!==void 0,u=r===null,f=r===r,h=t(r);if(!u&&!h&&!o&&n>r||o&&l&&f&&!u&&!h||a&&l&&f||!i&&f||!s)return 1;if(!a&&!o&&!h&&n<r||h&&i&&s&&!a&&!o||u&&i&&s||!l&&s||!f)return-1}return 0}return hE=e,hE}var pE,FL;function bee(){if(FL)return pE;FL=1;var t=xee();function e(n,r,i){for(var a=-1,s=n.criteria,o=r.criteria,l=s.length,u=i.length;++a<l;){var f=t(s[a],o[a]);if(f){if(a>=u)return f;var h=i[a];return f*(h=="desc"?-1:1)}}return n.index-r.index}return pE=e,pE}var mE,zL;function wee(){if(zL)return mE;zL=1;var t=JO(),e=QO(),n=Fl(),r=NV(),i=vee(),a=vV(),s=bee(),o=bg(),l=vs();function u(f,h,m){h.length?h=t(h,function(b){return l(b)?function(x){return e(x,b.length===1?b[0]:b)}:b}):h=[o];var y=-1;h=t(h,a(n));var w=r(f,function(b,x,_){var M=t(h,function(T){return T(b)});return{criteria:M,index:++y,value:b}});return i(w,function(b,x){return s(b,x,m)})}return mE=u,mE}var gE,BL;function _ee(){if(BL)return gE;BL=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return gE=t,gE}var yE,VL;function See(){if(VL)return yE;VL=1;var t=_ee(),e=Math.max;function n(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var s=arguments,o=-1,l=e(s.length-i,0),u=Array(l);++o<l;)u[o]=s[i+o];o=-1;for(var f=Array(i+1);++o<i;)f[o]=s[o];return f[i]=a(u),t(r,this,f)}}return yE=n,yE}var vE,HL;function Mee(){if(HL)return vE;HL=1;function t(e){return function(){return e}}return vE=t,vE}var xE,WL;function OV(){if(WL)return xE;WL=1;var t=bh(),e=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return xE=e,xE}var bE,GL;function Tee(){if(GL)return bE;GL=1;var t=Mee(),e=OV(),n=bg(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:n;return bE=r,bE}var wE,$L;function Aee(){if($L)return wE;$L=1;var t=800,e=16,n=Date.now;function r(i){var a=0,s=0;return function(){var o=n(),l=e-(o-s);if(s=o,l>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return wE=r,wE}var _E,qL;function Eee(){if(qL)return _E;qL=1;var t=Tee(),e=Aee(),n=e(t);return _E=n,_E}var SE,XL;function Cee(){if(XL)return SE;XL=1;var t=bg(),e=See(),n=Eee();function r(i,a){return n(e(i,a,t),i+"")}return SE=r,SE}var ME,YL;function F_(){if(YL)return ME;YL=1;var t=YO(),e=Z0(),n=cR(),r=yd();function i(a,s,o){if(!r(o))return!1;var l=typeof s;return(l=="number"?e(o)&&n(s,o.length):l=="string"&&s in o)?t(o[s],a):!1}return ME=i,ME}var TE,KL;function Pee(){if(KL)return TE;KL=1;var t=CV(),e=wee(),n=Cee(),r=F_(),i=n(function(a,s){if(a==null)return[];var o=s.length;return o>1&&r(a,s[0],s[1])?s=[]:o>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),e(a,t(s,1),[])});return TE=i,TE}var Nee=Pee();const hR=Zn(Nee);function Fv(t){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fv(t)}function mP(){return mP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mP.apply(this,arguments)}function Oee(t,e){return Iee(t)||jee(t,e)||kee(t,e)||Ree()}function Ree(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kee(t,e){if(t){if(typeof t=="string")return ZL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZL(t,e)}}function ZL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jee(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Iee(t){if(Array.isArray(t))return t}function JL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JL(Object(n),!0).forEach(function(r){Dee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dee(t,e,n){return e=Lee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lee(t){var e=Uee(t,"string");return Fv(e)=="symbol"?e:e+""}function Uee(t,e){if(Fv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fee(t){return Array.isArray(t)&&Fi(t[0])&&Fi(t[1])?t.join(" ~ "):t}var zee=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,o=s===void 0?{}:s,l=e.labelStyle,u=l===void 0?{}:l,f=e.payload,h=e.formatter,m=e.itemSorter,y=e.wrapperClassName,w=e.labelClassName,b=e.label,x=e.labelFormatter,_=e.accessibilityLayer,M=_===void 0?!1:_,T=function(){if(f&&f.length){var V={padding:0,margin:0},W=(m?hR(f,m):f).map(function(G,J){if(G.type==="none")return null;var ee=AE({display:"block",paddingTop:4,paddingBottom:4,color:G.color||"#000"},o),ae=G.formatter||h||Fee,$=G.value,B=G.name,Y=$,X=B;if(ae&&Y!=null&&X!=null){var ne=ae($,B,G,J,f);if(Array.isArray(ne)){var se=Oee(ne,2);Y=se[0],X=se[1]}else Y=ne}return xe.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(J),style:ee},Fi(X)?xe.createElement("span",{className:"recharts-tooltip-item-name"},X):null,Fi(X)?xe.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,xe.createElement("span",{className:"recharts-tooltip-item-value"},Y),xe.createElement("span",{className:"recharts-tooltip-item-unit"},G.unit||""))});return xe.createElement("ul",{className:"recharts-tooltip-item-list",style:V},W)}return null},A=AE({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),R=AE({margin:0},u),N=!bn(b),O=N?b:"",k=Pn("recharts-default-tooltip",y),C=Pn("recharts-tooltip-label",w);N&&x&&f!==void 0&&f!==null&&(O=x(b,f));var I=M?{role:"status","aria-live":"assertive"}:{};return xe.createElement("div",mP({className:k,style:A},I),xe.createElement("p",{className:C,style:R},xe.isValidElement(O)?O:"".concat(O)),T())};function zv(t){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(t)}function xb(t,e,n){return e=Bee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bee(t){var e=Vee(t,"string");return zv(e)=="symbol"?e:e+""}function Vee(t,e){if(zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cy="recharts-tooltip-wrapper",Hee={visibility:"hidden"};function Wee(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Pn(Cy,xb(xb(xb(xb({},"".concat(Cy,"-right"),pt(n)&&e&&pt(e.x)&&n>=e.x),"".concat(Cy,"-left"),pt(n)&&e&&pt(e.x)&&n<e.x),"".concat(Cy,"-bottom"),pt(r)&&e&&pt(e.y)&&r>=e.y),"".concat(Cy,"-top"),pt(r)&&e&&pt(e.y)&&r<e.y))}function QL(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(a&&pt(a[r]))return a[r];var f=n[r]-o-i,h=n[r]+i;if(e[r])return s[r]?f:h;if(s[r]){var m=f,y=l[r];return m<y?Math.max(h,l[r]):Math.max(f,l[r])}var w=h+o,b=l[r]+u;return w>b?Math.max(f,l[r]):Math.max(h,l[r])}function Gee(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function $ee(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,o=t.useTranslate3d,l=t.viewBox,u,f,h;return s.height>0&&s.width>0&&n?(f=QL({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),h=QL({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=Gee({translateX:f,translateY:h,useTranslate3d:o})):u=Hee,{cssProperties:u,cssClasses:Wee({translateX:f,translateY:h,coordinate:n})}}function Lm(t){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lm(t)}function e4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e4(Object(n),!0).forEach(function(r){yP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kV(r.key),r)}}function Yee(t,e,n){return e&&Xee(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kee(t,e,n){return e=g1(e),Zee(t,RV()?Reflect.construct(e,n||[],g1(t).constructor):e.apply(t,n))}function Zee(t,e){if(e&&(Lm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jee(t)}function Jee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RV=function(){return!!t})()}function g1(t){return g1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},g1(t)}function Qee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gP(t,e)}function gP(t,e){return gP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gP(t,e)}function yP(t,e,n){return e=kV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kV(t){var e=ete(t,"string");return Lm(e)=="symbol"?e:e+""}function ete(t,e){if(Lm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var n4=1,tte=(function(t){function e(){var n;qee(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Kee(this,e,[].concat(i)),yP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),yP(n,"handleKeyDown",function(s){if(s.key==="Escape"){var o,l,u,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(u=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),n}return Qee(e,t),Yee(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>n4||Math.abs(r.height-this.state.lastBoundingBox.height)>n4)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,u=i.children,f=i.coordinate,h=i.hasPayload,m=i.isAnimationActive,y=i.offset,w=i.position,b=i.reverseDirection,x=i.useTranslate3d,_=i.viewBox,M=i.wrapperStyle,T=$ee({allowEscapeViewBox:s,coordinate:f,offsetTopLeft:y,position:w,reverseDirection:b,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:_}),A=T.cssClasses,R=T.cssProperties,N=t4(t4({transition:m&&a?"transform ".concat(o,"ms ").concat(l):void 0},R),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},M);return xe.createElement("div",{tabIndex:-1,className:A,style:N,ref:function(k){r.wrapperNode=k}},u)}}])})(L.PureComponent),nte=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},wh={isSsr:nte()};function Um(t){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Um(t)}function r4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function i4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r4(Object(n),!0).forEach(function(r){pR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ite(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,IV(r.key),r)}}function ate(t,e,n){return e&&ite(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ste(t,e,n){return e=y1(e),ote(t,jV()?Reflect.construct(e,n||[],y1(t).constructor):e.apply(t,n))}function ote(t,e){if(e&&(Um(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lte(t)}function lte(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jV=function(){return!!t})()}function y1(t){return y1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},y1(t)}function cte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vP(t,e)}function vP(t,e){return vP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vP(t,e)}function pR(t,e,n){return e=IV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function IV(t){var e=ute(t,"string");return Um(e)=="symbol"?e:e+""}function ute(t,e){if(Um(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Um(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function dte(t){return t.dataKey}function fte(t,e){return xe.isValidElement(t)?xe.cloneElement(t,e):typeof t=="function"?xe.createElement(t,e):xe.createElement(zee,e)}var ds=(function(t){function e(){return rte(this,e),ste(this,e,arguments)}return cte(e,t),ate(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,u=i.content,f=i.coordinate,h=i.filterNull,m=i.isAnimationActive,y=i.offset,w=i.payload,b=i.payloadUniqBy,x=i.position,_=i.reverseDirection,M=i.useTranslate3d,T=i.viewBox,A=i.wrapperStyle,R=w??[];h&&R.length&&(R=TV(w.filter(function(O){return O.value!=null&&(O.hide!==!0||r.props.includeHidden)}),b,dte));var N=R.length>0;return xe.createElement(tte,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:m,active:a,coordinate:f,hasPayload:N,offset:y,position:x,reverseDirection:_,useTranslate3d:M,viewBox:T,wrapperStyle:A},fte(u,i4(i4({},this.props),{},{payload:R})))}}])})(L.PureComponent);pR(ds,"displayName","Tooltip");pR(ds,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!wh.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var EE,a4;function hte(){if(a4)return EE;a4=1;var t=Ul(),e=function(){return t.Date.now()};return EE=e,EE}var CE,s4;function pte(){if(s4)return CE;s4=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return CE=e,CE}var PE,o4;function mte(){if(o4)return PE;o4=1;var t=pte(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return PE=n,PE}var NE,l4;function DV(){if(l4)return NE;l4=1;var t=mte(),e=yd(),n=yg(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(e(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=e(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=t(u);var h=a.test(u);return h||s.test(u)?o(u.slice(2),h?2:8):i.test(u)?r:+u}return NE=l,NE}var OE,c4;function gte(){if(c4)return OE;c4=1;var t=yd(),e=hte(),n=DV(),r="Expected a function",i=Math.max,a=Math.min;function s(o,l,u){var f,h,m,y,w,b,x=0,_=!1,M=!1,T=!0;if(typeof o!="function")throw new TypeError(r);l=n(l)||0,t(u)&&(_=!!u.leading,M="maxWait"in u,m=M?i(n(u.maxWait)||0,l):m,T="trailing"in u?!!u.trailing:T);function A(W){var G=f,J=h;return f=h=void 0,x=W,y=o.apply(J,G),y}function R(W){return x=W,w=setTimeout(k,l),_?A(W):y}function N(W){var G=W-b,J=W-x,ee=l-G;return M?a(ee,m-J):ee}function O(W){var G=W-b,J=W-x;return b===void 0||G>=l||G<0||M&&J>=m}function k(){var W=e();if(O(W))return C(W);w=setTimeout(k,N(W))}function C(W){return w=void 0,T&&f?A(W):(f=h=void 0,y)}function I(){w!==void 0&&clearTimeout(w),x=0,f=b=h=w=void 0}function F(){return w===void 0?y:C(e())}function V(){var W=e(),G=O(W);if(f=arguments,h=this,b=W,G){if(w===void 0)return R(b);if(M)return clearTimeout(w),w=setTimeout(k,l),A(b)}return w===void 0&&(w=setTimeout(k,l)),y}return V.cancel=I,V.flush=F,V}return OE=s,OE}var RE,u4;function yte(){if(u4)return RE;u4=1;var t=gte(),e=yd(),n="Expected a function";function r(i,a,s){var o=!0,l=!0;if(typeof i!="function")throw new TypeError(n);return e(s)&&(o="leading"in s?!!s.leading:o,l="trailing"in s?!!s.trailing:l),t(i,a,{leading:o,maxWait:a,trailing:l})}return RE=r,RE}var vte=yte();const LV=Zn(vte);function Bv(t){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bv(t)}function d4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d4(Object(n),!0).forEach(function(r){xte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xte(t,e,n){return e=bte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bte(t){var e=wte(t,"string");return Bv(e)=="symbol"?e:e+""}function wte(t,e){if(Bv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _te(t,e){return Ate(t)||Tte(t,e)||Mte(t,e)||Ste()}function Ste(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mte(t,e){if(t){if(typeof t=="string")return f4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f4(t,e)}}function f4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tte(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Ate(t){if(Array.isArray(t))return t}var hv=L.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,s=a===void 0?"100%":a,o=t.height,l=o===void 0?"100%":o,u=t.minWidth,f=u===void 0?0:u,h=t.minHeight,m=t.maxHeight,y=t.children,w=t.debounce,b=w===void 0?0:w,x=t.id,_=t.className,M=t.onResize,T=t.style,A=T===void 0?{}:T,R=L.useRef(null),N=L.useRef();N.current=M,L.useImperativeHandle(e,function(){return Object.defineProperty(R.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),R.current},configurable:!0})});var O=L.useState({containerWidth:i.width,containerHeight:i.height}),k=_te(O,2),C=k[0],I=k[1],F=L.useCallback(function(W,G){I(function(J){var ee=Math.round(W),ae=Math.round(G);return J.containerWidth===ee&&J.containerHeight===ae?J:{containerWidth:ee,containerHeight:ae}})},[]);L.useEffect(function(){var W=function(B){var Y,X=B[0].contentRect,ne=X.width,se=X.height;F(ne,se),(Y=N.current)===null||Y===void 0||Y.call(N,ne,se)};b>0&&(W=LV(W,b,{trailing:!0,leading:!1}));var G=new ResizeObserver(W),J=R.current.getBoundingClientRect(),ee=J.width,ae=J.height;return F(ee,ae),G.observe(R.current),function(){G.disconnect()}},[F,b]);var V=L.useMemo(function(){var W=C.containerWidth,G=C.containerHeight;if(W<0||G<0)return null;rl(Ff(s)||Ff(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),rl(!n||n>0,"The aspect(%s) must be greater than zero.",n);var J=Ff(s)?W:s,ee=Ff(l)?G:l;n&&n>0&&(J?ee=J/n:ee&&(J=ee*n),m&&ee>m&&(ee=m)),rl(J>0||ee>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,J,ee,s,l,f,h,n);var ae=!Array.isArray(y)&&Lc(y.type).endsWith("Chart");return xe.Children.map(y,function($){return xe.isValidElement($)?L.cloneElement($,bb({width:J,height:ee},ae?{style:bb({height:"100%",width:"100%",maxHeight:ee,maxWidth:J},$.props.style)}:{})):$})},[n,y,l,m,h,f,C,s]);return xe.createElement("div",{id:x?"".concat(x):void 0,className:Pn("recharts-responsive-container",_),style:bb(bb({},A),{},{width:s,height:l,minWidth:f,minHeight:h,maxHeight:m}),ref:R},V)}),Fm=function(e){return null};Fm.displayName="Cell";function Vv(t){"@babel/helpers - typeof";return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vv(t)}function h4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h4(Object(n),!0).forEach(function(r){Ete(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ete(t,e,n){return e=Cte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cte(t){var e=Pte(t,"string");return Vv(e)=="symbol"?e:e+""}function Pte(t,e){if(Vv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Np={widthCache:{},cacheCount:0},Nte=2e3,Ote={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},p4="recharts_measurement_span";function Rte(t){var e=xP({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var pv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||wh.isSsr)return{width:0,height:0};var r=Rte(n),i=JSON.stringify({text:e,copyStyle:r});if(Np.widthCache[i])return Np.widthCache[i];try{var a=document.getElementById(p4);a||(a=document.createElement("span"),a.setAttribute("id",p4),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=xP(xP({},Ote),r);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),l={width:o.width,height:o.height};return Np.widthCache[i]=l,++Np.cacheCount>Nte&&(Np.cacheCount=0,Np.widthCache={}),l}catch{return{width:0,height:0}}},kte=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Hv(t){"@babel/helpers - typeof";return Hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hv(t)}function v1(t,e){return Lte(t)||Dte(t,e)||Ite(t,e)||jte()}function jte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ite(t,e){if(t){if(typeof t=="string")return m4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m4(t,e)}}function m4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dte(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Lte(t){if(Array.isArray(t))return t}function Ute(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zte(r.key),r)}}function Fte(t,e,n){return e&&g4(t.prototype,e),n&&g4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zte(t){var e=Bte(t,"string");return Hv(e)=="symbol"?e:e+""}function Bte(t,e){if(Hv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var y4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,v4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Vte=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Hte=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,UV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Wte=Object.keys(UV),lm="NaN";function Gte(t,e){return t*UV[e]}var wb=(function(){function t(e,n){Ute(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!Vte.test(n)&&(this.num=NaN,this.unit=""),Wte.includes(n)&&(this.num=Gte(e,n),this.unit="px")}return Fte(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Hte.exec(n))!==null&&r!==void 0?r:[],a=v1(i,3),s=a[1],o=a[2];return new t(parseFloat(s),o??"")}}])})();function FV(t){if(t.includes(lm))return lm;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=y4.exec(e))!==null&&n!==void 0?n:[],i=v1(r,4),a=i[1],s=i[2],o=i[3],l=wb.parse(a??""),u=wb.parse(o??""),f=s==="*"?l.multiply(u):l.divide(u);if(f.isNaN())return lm;e=e.replace(y4,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,m=(h=v4.exec(e))!==null&&h!==void 0?h:[],y=v1(m,4),w=y[1],b=y[2],x=y[3],_=wb.parse(w??""),M=wb.parse(x??""),T=b==="+"?_.add(M):_.subtract(M);if(T.isNaN())return lm;e=e.replace(v4,T.toString())}return e}var x4=/\(([^()]*)\)/;function $te(t){for(var e=t;e.includes("(");){var n=x4.exec(e),r=v1(n,2),i=r[1];e=e.replace(x4,FV(i))}return e}function qte(t){var e=t.replace(/\s+/g,"");return e=$te(e),e=FV(e),e}function Xte(t){try{return qte(t)}catch{return lm}}function kE(t){var e=Xte(t.slice(5,-1));return e===lm?"":e}var Yte=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Kte=["dx","dy","angle","className","breakAll"];function bP(){return bP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bP.apply(this,arguments)}function b4(t,e){if(t==null)return{};var n=Zte(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Zte(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function w4(t,e){return tne(t)||ene(t,e)||Qte(t,e)||Jte()}function Jte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qte(t,e){if(t){if(typeof t=="string")return _4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _4(t,e)}}function _4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ene(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function tne(t){if(Array.isArray(t))return t}var zV=/[ \f\n\r\t\v\u2028\u2029]+/,BV=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];bn(n)||(r?a=n.toString().split(""):a=n.toString().split(zV));var s=a.map(function(l){return{word:l,width:pv(l,i).width}}),o=r?0:pv("",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},nne=function(e,n,r,i,a){var s=e.maxLines,o=e.children,l=e.style,u=e.breakAll,f=pt(s),h=o,m=function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return J.reduce(function(ee,ae){var $=ae.word,B=ae.width,Y=ee[ee.length-1];if(Y&&(i==null||a||Y.width+B+r<Number(i)))Y.words.push($),Y.width+=B+r;else{var X={words:[$],width:B};ee.push(X)}return ee},[])},y=m(n),w=function(J){return J.reduce(function(ee,ae){return ee.width>ae.width?ee:ae})};if(!f)return y;for(var b="",x=function(J){var ee=h.slice(0,J),ae=BV({breakAll:u,style:l,children:ee+b}).wordsWithComputedWidth,$=m(ae),B=$.length>s||w($).width>Number(i);return[B,$]},_=0,M=h.length-1,T=0,A;_<=M&&T<=h.length-1;){var R=Math.floor((_+M)/2),N=R-1,O=x(N),k=w4(O,2),C=k[0],I=k[1],F=x(R),V=w4(F,1),W=V[0];if(!C&&!W&&(_=R+1),C&&W&&(M=R-1),!C&&W){A=I;break}T++}return A||y},S4=function(e){var n=bn(e)?[]:e.toString().split(zV);return[{words:n}]},rne=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((n||r)&&!wh.isSsr){var l,u,f=BV({breakAll:s,children:i,style:a});if(f){var h=f.wordsWithComputedWidth,m=f.spaceWidth;l=h,u=m}else return S4(i);return nne({breakAll:s,children:i,maxLines:o,style:a},l,u,n,r)}return S4(i)},M4="#808080",uh=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.lineHeight,o=s===void 0?"1em":s,l=e.capHeight,u=l===void 0?"0.71em":l,f=e.scaleToFit,h=f===void 0?!1:f,m=e.textAnchor,y=m===void 0?"start":m,w=e.verticalAnchor,b=w===void 0?"end":w,x=e.fill,_=x===void 0?M4:x,M=b4(e,Yte),T=L.useMemo(function(){return rne({breakAll:M.breakAll,children:M.children,maxLines:M.maxLines,scaleToFit:h,style:M.style,width:M.width})},[M.breakAll,M.children,M.maxLines,h,M.style,M.width]),A=M.dx,R=M.dy,N=M.angle,O=M.className,k=M.breakAll,C=b4(M,Kte);if(!Fi(r)||!Fi(a))return null;var I=r+(pt(A)?A:0),F=a+(pt(R)?R:0),V;switch(b){case"start":V=kE("calc(".concat(u,")"));break;case"middle":V=kE("calc(".concat((T.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:V=kE("calc(".concat(T.length-1," * -").concat(o,")"));break}var W=[];if(h){var G=T[0].width,J=M.width;W.push("scale(".concat((pt(J)?J/G:1)/G,")"))}return N&&W.push("rotate(".concat(N,", ").concat(I,", ").concat(F,")")),W.length&&(C.transform=W.join(" ")),xe.createElement("text",bP({},en(C,!0),{x:I,y:F,className:Pn("recharts-text",O),textAnchor:y,fill:_.includes("url")?M4:_}),T.map(function(ee,ae){var $=ee.words.join(k?"":" ");return xe.createElement("tspan",{x:I,dy:ae===0?V:o,key:"".concat($,"-").concat(ae)},$)}))};function ad(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ine(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function mR(t){let e,n,r;t.length!==2?(e=ad,n=(o,l)=>ad(t(o),l),r=(o,l)=>t(o)-l):(e=t===ad||t===ine?t:ane,n=t,r=t);function i(o,l,u=0,f=o.length){if(u<f){if(e(l,l)!==0)return f;do{const h=u+f>>>1;n(o[h],l)<0?u=h+1:f=h}while(u<f)}return u}function a(o,l,u=0,f=o.length){if(u<f){if(e(l,l)!==0)return f;do{const h=u+f>>>1;n(o[h],l)<=0?u=h+1:f=h}while(u<f)}return u}function s(o,l,u=0,f=o.length){const h=i(o,l,u,f-1);return h>u&&r(o[h-1],l)>-r(o[h],l)?h-1:h}return{left:i,center:s,right:a}}function ane(){return 0}function VV(t){return t===null?NaN:+t}function*sne(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const one=mR(ad),J0=one.right;mR(VV).center;class T4 extends Map{constructor(e,n=une){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(A4(this,e))}has(e){return super.has(A4(this,e))}set(e,n){return super.set(lne(this,e),n)}delete(e){return super.delete(cne(this,e))}}function A4({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function lne({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function cne({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function une(t){return t!==null&&typeof t=="object"?t.valueOf():t}function dne(t=ad){if(t===ad)return HV;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function HV(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const fne=Math.sqrt(50),hne=Math.sqrt(10),pne=Math.sqrt(2);function x1(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=fne?10:a>=hne?5:a>=pne?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?x1(t,e,n*2):[o,l,u]}function wP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?x1(e,t,n):x1(t,e,n);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function _P(t,e,n){return e=+e,t=+t,n=+n,x1(t,e,n)[2]}function SP(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?_P(e,t,n):_P(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function E4(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function C4(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function WV(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?HV:dne(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,f=Math.log(l),h=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*h*(l-h)/l)*(u-l/2<0?-1:1),y=Math.max(n,Math.floor(e-u*h/l+m)),w=Math.min(r,Math.floor(e+(l-u)*h/l+m));WV(t,e,y,w,i)}const a=t[e];let s=n,o=r;for(Py(t,n,e),i(t[r],a)>0&&Py(t,n,r);s<o;){for(Py(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?Py(t,n,o):(++o,Py(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Py(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function mne(t,e,n){if(t=Float64Array.from(sne(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return C4(t);if(e>=1)return E4(t);var r,i=(r-1)*e,a=Math.floor(i),s=E4(WV(t,a).subarray(0,a+1)),o=C4(t.subarray(a+1));return s+(o-s)*(i-a)}}function gne(t,e,n=VV){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function yne(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function yo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function eu(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const MP=Symbol("implicit");function gR(){var t=new T4,e=[],n=[],r=MP;function i(a){let s=t.get(a);if(s===void 0){if(r!==MP)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new T4;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return gR(e,n).unknown(r)},yo.apply(i,arguments),i}function Wv(){var t=gR().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,l=0,u=0,f=.5;delete t.unknown;function h(){var m=e().length,y=i<r,w=y?i:r,b=y?r:i;a=(b-w)/Math.max(1,m-l+u*2),o&&(a=Math.floor(a)),w+=(b-w-a*(m-l))*f,s=a*(1-l),o&&(w=Math.round(w),s=Math.round(s));var x=yne(m).map(function(_){return w+a*_});return n(y?x.reverse():x)}return t.domain=function(m){return arguments.length?(e(m),h()):e()},t.range=function(m){return arguments.length?([r,i]=m,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(m){return[r,i]=m,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(m){return arguments.length?(o=!!m,h()):o},t.padding=function(m){return arguments.length?(l=Math.min(1,u=+m),h()):l},t.paddingInner=function(m){return arguments.length?(l=Math.min(1,m),h()):l},t.paddingOuter=function(m){return arguments.length?(u=+m,h()):u},t.align=function(m){return arguments.length?(f=Math.max(0,Math.min(1,m)),h()):f},t.copy=function(){return Wv(e(),[r,i]).round(o).paddingInner(l).paddingOuter(u).align(f)},yo.apply(h(),arguments)}function GV(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return GV(e())},t}function mv(){return GV(Wv.apply(null,arguments).paddingInner(1))}function yR(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $V(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Q0(){}var Gv=.7,b1=1/Gv,Tm="\\s*([+-]?\\d+)\\s*",$v="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Al="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vne=/^#([0-9a-f]{3,8})$/,xne=new RegExp(`^rgb\\(${Tm},${Tm},${Tm}\\)$`),bne=new RegExp(`^rgb\\(${Al},${Al},${Al}\\)$`),wne=new RegExp(`^rgba\\(${Tm},${Tm},${Tm},${$v}\\)$`),_ne=new RegExp(`^rgba\\(${Al},${Al},${Al},${$v}\\)$`),Sne=new RegExp(`^hsl\\(${$v},${Al},${Al}\\)$`),Mne=new RegExp(`^hsla\\(${$v},${Al},${Al},${$v}\\)$`),P4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yR(Q0,qv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:N4,formatHex:N4,formatHex8:Tne,formatHsl:Ane,formatRgb:O4,toString:O4});function N4(){return this.rgb().formatHex()}function Tne(){return this.rgb().formatHex8()}function Ane(){return qV(this).formatHsl()}function O4(){return this.rgb().formatRgb()}function qv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=vne.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?R4(e):n===3?new ps(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?_b(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?_b(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=xne.exec(t))?new ps(e[1],e[2],e[3],1):(e=bne.exec(t))?new ps(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=wne.exec(t))?_b(e[1],e[2],e[3],e[4]):(e=_ne.exec(t))?_b(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Sne.exec(t))?I4(e[1],e[2]/100,e[3]/100,1):(e=Mne.exec(t))?I4(e[1],e[2]/100,e[3]/100,e[4]):P4.hasOwnProperty(t)?R4(P4[t]):t==="transparent"?new ps(NaN,NaN,NaN,0):null}function R4(t){return new ps(t>>16&255,t>>8&255,t&255,1)}function _b(t,e,n,r){return r<=0&&(t=e=n=NaN),new ps(t,e,n,r)}function Ene(t){return t instanceof Q0||(t=qv(t)),t?(t=t.rgb(),new ps(t.r,t.g,t.b,t.opacity)):new ps}function TP(t,e,n,r){return arguments.length===1?Ene(t):new ps(t,e,n,r??1)}function ps(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}yR(ps,TP,$V(Q0,{brighter(t){return t=t==null?b1:Math.pow(b1,t),new ps(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Gv:Math.pow(Gv,t),new ps(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ps(Jf(this.r),Jf(this.g),Jf(this.b),w1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k4,formatHex:k4,formatHex8:Cne,formatRgb:j4,toString:j4}));function k4(){return`#${zf(this.r)}${zf(this.g)}${zf(this.b)}`}function Cne(){return`#${zf(this.r)}${zf(this.g)}${zf(this.b)}${zf((isNaN(this.opacity)?1:this.opacity)*255)}`}function j4(){const t=w1(this.opacity);return`${t===1?"rgb(":"rgba("}${Jf(this.r)}, ${Jf(this.g)}, ${Jf(this.b)}${t===1?")":`, ${t})`}`}function w1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Jf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function zf(t){return t=Jf(t),(t<16?"0":"")+t.toString(16)}function I4(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Qo(t,e,n,r)}function qV(t){if(t instanceof Qo)return new Qo(t.h,t.s,t.l,t.opacity);if(t instanceof Q0||(t=qv(t)),!t)return new Qo;if(t instanceof Qo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new Qo(s,o,l,t.opacity)}function Pne(t,e,n,r){return arguments.length===1?qV(t):new Qo(t,e,n,r??1)}function Qo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}yR(Qo,Pne,$V(Q0,{brighter(t){return t=t==null?b1:Math.pow(b1,t),new Qo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Gv:Math.pow(Gv,t),new Qo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ps(jE(t>=240?t-240:t+120,i,r),jE(t,i,r),jE(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Qo(D4(this.h),Sb(this.s),Sb(this.l),w1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=w1(this.opacity);return`${t===1?"hsl(":"hsla("}${D4(this.h)}, ${Sb(this.s)*100}%, ${Sb(this.l)*100}%${t===1?")":`, ${t})`}`}}));function D4(t){return t=(t||0)%360,t<0?t+360:t}function Sb(t){return Math.max(0,Math.min(1,t||0))}function jE(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const vR=t=>()=>t;function Nne(t,e){return function(n){return t+n*e}}function One(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Rne(t){return(t=+t)==1?XV:function(e,n){return n-e?One(e,n,t):vR(isNaN(e)?n:e)}}function XV(t,e){var n=e-t;return n?Nne(t,n):vR(isNaN(t)?e:t)}const L4=(function t(e){var n=Rne(e);function r(i,a){var s=n((i=TP(i)).r,(a=TP(a)).r),o=n(i.g,a.g),l=n(i.b,a.b),u=XV(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=t,r})(1);function kne(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function jne(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ine(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=wg(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Dne(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function _1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Lne(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=wg(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var AP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,IE=new RegExp(AP.source,"g");function Une(t){return function(){return t}}function Fne(t){return function(e){return t(e)+""}}function zne(t,e){var n=AP.lastIndex=IE.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(r=AP.exec(t))&&(i=IE.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:_1(r,i)})),n=IE.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Fne(l[0].x):Une(e):(e=l.length,function(u){for(var f=0,h;f<e;++f)o[(h=l[f]).i]=h.x(u);return o.join("")})}function wg(t,e){var n=typeof e,r;return e==null||n==="boolean"?vR(e):(n==="number"?_1:n==="string"?(r=qv(e))?(e=r,L4):zne:e instanceof qv?L4:e instanceof Date?Dne:jne(e)?kne:Array.isArray(e)?Ine:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Lne:_1)(t,e)}function xR(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Bne(t,e){e===void 0&&(e=t,t=wg);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function Vne(t){return function(){return t}}function S1(t){return+t}var U4=[0,1];function $a(t){return t}function EP(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Vne(isNaN(e)?NaN:.5)}function Hne(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Wne(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=EP(i,r),a=n(s,a)):(r=EP(r,i),a=n(a,s)),function(o){return a(r(o))}}function Gne(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=EP(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var l=J0(t,o,1,r)-1;return a[l](i[l](o))}}function ex(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function z_(){var t=U4,e=U4,n=wg,r,i,a,s=$a,o,l,u;function f(){var m=Math.min(t.length,e.length);return s!==$a&&(s=Hne(t[0],t[m-1])),o=m>2?Gne:Wne,l=u=null,h}function h(m){return m==null||isNaN(m=+m)?a:(l||(l=o(t.map(r),e,n)))(r(s(m)))}return h.invert=function(m){return s(i((u||(u=o(e,t.map(r),_1)))(m)))},h.domain=function(m){return arguments.length?(t=Array.from(m,S1),f()):t.slice()},h.range=function(m){return arguments.length?(e=Array.from(m),f()):e.slice()},h.rangeRound=function(m){return e=Array.from(m),n=xR,f()},h.clamp=function(m){return arguments.length?(s=m?!0:$a,f()):s!==$a},h.interpolate=function(m){return arguments.length?(n=m,f()):n},h.unknown=function(m){return arguments.length?(a=m,h):a},function(m,y){return r=m,i=y,f()}}function bR(){return z_()($a,$a)}function $ne(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function M1(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function zm(t){return t=M1(Math.abs(t)),t?t[1]:NaN}function qne(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Xne(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Yne=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xv(t){if(!(e=Yne.exec(t)))throw new Error("invalid format: "+t);var e;return new wR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Xv.prototype=wR.prototype;function wR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}wR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Kne(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var YV;function Zne(t,e){var n=M1(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(YV=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+M1(t,Math.max(0,e+a-1))[0]}function F4(t,e){var n=M1(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const z4={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:$ne,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>F4(t*100,e),r:F4,s:Zne,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function B4(t){return t}var V4=Array.prototype.map,H4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Jne(t){var e=t.grouping===void 0||t.thousands===void 0?B4:qne(V4.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?B4:Xne(V4.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(h){h=Xv(h);var m=h.fill,y=h.align,w=h.sign,b=h.symbol,x=h.zero,_=h.width,M=h.comma,T=h.precision,A=h.trim,R=h.type;R==="n"?(M=!0,R="g"):z4[R]||(T===void 0&&(T=12),A=!0,R="g"),(x||m==="0"&&y==="=")&&(x=!0,m="0",y="=");var N=b==="$"?n:b==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",O=b==="$"?r:/[%p]/.test(R)?s:"",k=z4[R],C=/[defgprs%]/.test(R);T=T===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function I(F){var V=N,W=O,G,J,ee;if(R==="c")W=k(F)+W,F="";else{F=+F;var ae=F<0||1/F<0;if(F=isNaN(F)?l:k(Math.abs(F),T),A&&(F=Kne(F)),ae&&+F==0&&w!=="+"&&(ae=!1),V=(ae?w==="("?w:o:w==="-"||w==="("?"":w)+V,W=(R==="s"?H4[8+YV/3]:"")+W+(ae&&w==="("?")":""),C){for(G=-1,J=F.length;++G<J;)if(ee=F.charCodeAt(G),48>ee||ee>57){W=(ee===46?i+F.slice(G+1):F.slice(G))+W,F=F.slice(0,G);break}}}M&&!x&&(F=e(F,1/0));var $=V.length+F.length+W.length,B=$<_?new Array(_-$+1).join(m):"";switch(M&&x&&(F=e(B+F,B.length?_-W.length:1/0),B=""),y){case"<":F=V+F+W+B;break;case"=":F=V+B+F+W;break;case"^":F=B.slice(0,$=B.length>>1)+V+F+W+B.slice($);break;default:F=B+V+F+W;break}return a(F)}return I.toString=function(){return h+""},I}function f(h,m){var y=u((h=Xv(h),h.type="f",h)),w=Math.max(-8,Math.min(8,Math.floor(zm(m)/3)))*3,b=Math.pow(10,-w),x=H4[8+w/3];return function(_){return y(b*_)+x}}return{format:u,formatPrefix:f}}var Mb,_R,KV;Qne({thousands:",",grouping:[3],currency:["$",""]});function Qne(t){return Mb=Jne(t),_R=Mb.format,KV=Mb.formatPrefix,Mb}function ere(t){return Math.max(0,-zm(Math.abs(t)))}function tre(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zm(e)/3)))*3-zm(Math.abs(t)))}function nre(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,zm(e)-zm(t))+1}function ZV(t,e,n,r){var i=SP(t,e,n),a;switch(r=Xv(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=tre(i,s))&&(r.precision=a),KV(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=nre(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=ere(i))&&(r.precision=a-(r.type==="%")*2);break}}return _R(r)}function vd(t){var e=t.domain;return t.ticks=function(n){var r=e();return wP(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return ZV(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],l,u,f=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);f-- >0;){if(u=_P(s,o,n),u===l)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function T1(){var t=bR();return t.copy=function(){return ex(t,T1())},yo.apply(t,arguments),vd(t)}function JV(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,S1),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return JV(t).unknown(e)},t=arguments.length?Array.from(t,S1):[0,1],vd(n)}function QV(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function W4(t){return Math.log(t)}function G4(t){return Math.exp(t)}function rre(t){return-Math.log(-t)}function ire(t){return-Math.exp(-t)}function are(t){return isFinite(t)?+("1e"+t):t<0?0:t}function sre(t){return t===10?are:t===Math.E?Math.exp:e=>Math.pow(t,e)}function ore(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function $4(t){return(e,n)=>-t(-e,n)}function SR(t){const e=t(W4,G4),n=e.domain;let r=10,i,a;function s(){return i=ore(r),a=sre(r),n()[0]<0?(i=$4(i),a=$4(a),t(rre,ire)):t(W4,G4),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const l=n();let u=l[0],f=l[l.length-1];const h=f<u;h&&([u,f]=[f,u]);let m=i(u),y=i(f),w,b;const x=o==null?10:+o;let _=[];if(!(r%1)&&y-m<x){if(m=Math.floor(m),y=Math.ceil(y),u>0){for(;m<=y;++m)for(w=1;w<r;++w)if(b=m<0?w/a(-m):w*a(m),!(b<u)){if(b>f)break;_.push(b)}}else for(;m<=y;++m)for(w=r-1;w>=1;--w)if(b=m>0?w/a(-m):w*a(m),!(b<u)){if(b>f)break;_.push(b)}_.length*2<x&&(_=wP(u,f,x))}else _=wP(m,y,Math.min(y-m,x)).map(a);return h?_.reverse():_},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Xv(l)).precision==null&&(l.trim=!0),l=_R(l)),o===1/0)return l;const u=Math.max(1,r*o/e.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=u?l(f):""}},e.nice=()=>n(QV(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function eH(){const t=SR(z_()).domain([1,10]);return t.copy=()=>ex(t,eH()).base(t.base()),yo.apply(t,arguments),t}function q4(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function X4(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function MR(t){var e=1,n=t(q4(e),X4(e));return n.constant=function(r){return arguments.length?t(q4(e=+r),X4(e)):e},vd(n)}function tH(){var t=MR(z_());return t.copy=function(){return ex(t,tH()).constant(t.constant())},yo.apply(t,arguments)}function Y4(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function lre(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function cre(t){return t<0?-t*t:t*t}function TR(t){var e=t($a,$a),n=1;function r(){return n===1?t($a,$a):n===.5?t(lre,cre):t(Y4(n),Y4(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},vd(e)}function AR(){var t=TR(z_());return t.copy=function(){return ex(t,AR()).exponent(t.exponent())},yo.apply(t,arguments),t}function ure(){return AR.apply(null,arguments).exponent(.5)}function K4(t){return Math.sign(t)*t*t}function dre(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function nH(){var t=bR(),e=[0,1],n=!1,r;function i(a){var s=dre(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(K4(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,S1)).map(K4)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return nH(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},yo.apply(i,arguments),vd(i)}function rH(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=gne(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[J0(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(ad),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return rH().domain(t).range(e).unknown(r)},yo.apply(a,arguments)}function iH(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[J0(r,l,0,n)]:a}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return iH().domain([t,e]).range(i).unknown(a)},yo.apply(vd(s),arguments)}function aH(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[J0(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return aH().domain(t).range(e).unknown(n)},yo.apply(i,arguments)}const DE=new Date,LE=new Date;function Hi(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let u;do l.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return l},i.filter=a=>Hi(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(DE.setTime(+a),LE.setTime(+s),t(DE),t(LE),Math.floor(n(DE,LE))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const A1=Hi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);A1.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Hi(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):A1);A1.range;const kc=1e3,uo=kc*60,jc=uo*60,Hc=jc*24,ER=Hc*7,Z4=Hc*30,UE=Hc*365,Bf=Hi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*kc)},(t,e)=>(e-t)/kc,t=>t.getUTCSeconds());Bf.range;const CR=Hi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*kc)},(t,e)=>{t.setTime(+t+e*uo)},(t,e)=>(e-t)/uo,t=>t.getMinutes());CR.range;const PR=Hi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*uo)},(t,e)=>(e-t)/uo,t=>t.getUTCMinutes());PR.range;const NR=Hi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*kc-t.getMinutes()*uo)},(t,e)=>{t.setTime(+t+e*jc)},(t,e)=>(e-t)/jc,t=>t.getHours());NR.range;const OR=Hi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*jc)},(t,e)=>(e-t)/jc,t=>t.getUTCHours());OR.range;const tx=Hi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*uo)/Hc,t=>t.getDate()-1);tx.range;const B_=Hi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Hc,t=>t.getUTCDate()-1);B_.range;const sH=Hi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Hc,t=>Math.floor(t/Hc));sH.range;function _h(t){return Hi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*uo)/ER)}const V_=_h(0),E1=_h(1),fre=_h(2),hre=_h(3),Bm=_h(4),pre=_h(5),mre=_h(6);V_.range;E1.range;fre.range;hre.range;Bm.range;pre.range;mre.range;function Sh(t){return Hi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/ER)}const H_=Sh(0),C1=Sh(1),gre=Sh(2),yre=Sh(3),Vm=Sh(4),vre=Sh(5),xre=Sh(6);H_.range;C1.range;gre.range;yre.range;Vm.range;vre.range;xre.range;const RR=Hi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());RR.range;const kR=Hi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());kR.range;const Wc=Hi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Wc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Hi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Wc.range;const Gc=Hi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Gc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Hi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Gc.range;function oH(t,e,n,r,i,a){const s=[[Bf,1,kc],[Bf,5,5*kc],[Bf,15,15*kc],[Bf,30,30*kc],[a,1,uo],[a,5,5*uo],[a,15,15*uo],[a,30,30*uo],[i,1,jc],[i,3,3*jc],[i,6,6*jc],[i,12,12*jc],[r,1,Hc],[r,2,2*Hc],[n,1,ER],[e,1,Z4],[e,3,3*Z4],[t,1,UE]];function o(u,f,h){const m=f<u;m&&([u,f]=[f,u]);const y=h&&typeof h.range=="function"?h:l(u,f,h),w=y?y.range(u,+f+1):[];return m?w.reverse():w}function l(u,f,h){const m=Math.abs(f-u)/h,y=mR(([,,x])=>x).right(s,m);if(y===s.length)return t.every(SP(u/UE,f/UE,h));if(y===0)return A1.every(Math.max(SP(u,f,h),1));const[w,b]=s[m/s[y-1][2]<s[y][2]/m?y-1:y];return w.every(b)}return[o,l]}const[bre,wre]=oH(Gc,kR,H_,sH,OR,PR),[_re,Sre]=oH(Wc,RR,V_,tx,NR,CR);function FE(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function zE(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ny(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Mre(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,u=Oy(i),f=Ry(i),h=Oy(a),m=Ry(a),y=Oy(s),w=Ry(s),b=Oy(o),x=Ry(o),_=Oy(l),M=Ry(l),T={a:ae,A:$,b:B,B:Y,c:null,d:rU,e:rU,f:qre,g:rie,G:aie,H:Wre,I:Gre,j:$re,L:lH,m:Xre,M:Yre,p:X,q:ne,Q:sU,s:oU,S:Kre,u:Zre,U:Jre,V:Qre,w:eie,W:tie,x:null,X:null,y:nie,Y:iie,Z:sie,"%":aU},A={a:se,A:ye,b:Ne,B:Ee,c:null,d:iU,e:iU,f:uie,g:bie,G:_ie,H:oie,I:lie,j:cie,L:uH,m:die,M:fie,p:Oe,q:$e,Q:sU,s:oU,S:hie,u:pie,U:mie,V:gie,w:yie,W:vie,x:null,X:null,y:xie,Y:wie,Z:Sie,"%":aU},R={a:I,A:F,b:V,B:W,c:G,d:tU,e:tU,f:zre,g:eU,G:Q4,H:nU,I:nU,j:Dre,L:Fre,m:Ire,M:Lre,p:C,q:jre,Q:Vre,s:Hre,S:Ure,u:Pre,U:Nre,V:Ore,w:Cre,W:Rre,x:J,X:ee,y:eU,Y:Q4,Z:kre,"%":Bre};T.x=N(n,T),T.X=N(r,T),T.c=N(e,T),A.x=N(n,A),A.X=N(r,A),A.c=N(e,A);function N(Ie,qe){return function(ve){var Z=[],Pe=-1,Me=0,We=Ie.length,ke,ct,ot;for(ve instanceof Date||(ve=new Date(+ve));++Pe<We;)Ie.charCodeAt(Pe)===37&&(Z.push(Ie.slice(Me,Pe)),(ct=J4[ke=Ie.charAt(++Pe)])!=null?ke=Ie.charAt(++Pe):ct=ke==="e"?" ":"0",(ot=qe[ke])&&(ke=ot(ve,ct)),Z.push(ke),Me=Pe+1);return Z.push(Ie.slice(Me,Pe)),Z.join("")}}function O(Ie,qe){return function(ve){var Z=Ny(1900,void 0,1),Pe=k(Z,Ie,ve+="",0),Me,We;if(Pe!=ve.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(qe&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(Me=zE(Ny(Z.y,0,1)),We=Me.getUTCDay(),Me=We>4||We===0?C1.ceil(Me):C1(Me),Me=B_.offset(Me,(Z.V-1)*7),Z.y=Me.getUTCFullYear(),Z.m=Me.getUTCMonth(),Z.d=Me.getUTCDate()+(Z.w+6)%7):(Me=FE(Ny(Z.y,0,1)),We=Me.getDay(),Me=We>4||We===0?E1.ceil(Me):E1(Me),Me=tx.offset(Me,(Z.V-1)*7),Z.y=Me.getFullYear(),Z.m=Me.getMonth(),Z.d=Me.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),We="Z"in Z?zE(Ny(Z.y,0,1)).getUTCDay():FE(Ny(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(We+5)%7:Z.w+Z.U*7-(We+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,zE(Z)):FE(Z)}}function k(Ie,qe,ve,Z){for(var Pe=0,Me=qe.length,We=ve.length,ke,ct;Pe<Me;){if(Z>=We)return-1;if(ke=qe.charCodeAt(Pe++),ke===37){if(ke=qe.charAt(Pe++),ct=R[ke in J4?qe.charAt(Pe++):ke],!ct||(Z=ct(Ie,ve,Z))<0)return-1}else if(ke!=ve.charCodeAt(Z++))return-1}return Z}function C(Ie,qe,ve){var Z=u.exec(qe.slice(ve));return Z?(Ie.p=f.get(Z[0].toLowerCase()),ve+Z[0].length):-1}function I(Ie,qe,ve){var Z=y.exec(qe.slice(ve));return Z?(Ie.w=w.get(Z[0].toLowerCase()),ve+Z[0].length):-1}function F(Ie,qe,ve){var Z=h.exec(qe.slice(ve));return Z?(Ie.w=m.get(Z[0].toLowerCase()),ve+Z[0].length):-1}function V(Ie,qe,ve){var Z=_.exec(qe.slice(ve));return Z?(Ie.m=M.get(Z[0].toLowerCase()),ve+Z[0].length):-1}function W(Ie,qe,ve){var Z=b.exec(qe.slice(ve));return Z?(Ie.m=x.get(Z[0].toLowerCase()),ve+Z[0].length):-1}function G(Ie,qe,ve){return k(Ie,e,qe,ve)}function J(Ie,qe,ve){return k(Ie,n,qe,ve)}function ee(Ie,qe,ve){return k(Ie,r,qe,ve)}function ae(Ie){return s[Ie.getDay()]}function $(Ie){return a[Ie.getDay()]}function B(Ie){return l[Ie.getMonth()]}function Y(Ie){return o[Ie.getMonth()]}function X(Ie){return i[+(Ie.getHours()>=12)]}function ne(Ie){return 1+~~(Ie.getMonth()/3)}function se(Ie){return s[Ie.getUTCDay()]}function ye(Ie){return a[Ie.getUTCDay()]}function Ne(Ie){return l[Ie.getUTCMonth()]}function Ee(Ie){return o[Ie.getUTCMonth()]}function Oe(Ie){return i[+(Ie.getUTCHours()>=12)]}function $e(Ie){return 1+~~(Ie.getUTCMonth()/3)}return{format:function(Ie){var qe=N(Ie+="",T);return qe.toString=function(){return Ie},qe},parse:function(Ie){var qe=O(Ie+="",!1);return qe.toString=function(){return Ie},qe},utcFormat:function(Ie){var qe=N(Ie+="",A);return qe.toString=function(){return Ie},qe},utcParse:function(Ie){var qe=O(Ie+="",!0);return qe.toString=function(){return Ie},qe}}}var J4={"-":"",_:" ",0:"0"},ea=/^\s*\d+/,Tre=/^%/,Are=/[\\^$*+?|[\]().{}]/g;function Yn(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Ere(t){return t.replace(Are,"\\$&")}function Oy(t){return new RegExp("^(?:"+t.map(Ere).join("|")+")","i")}function Ry(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Cre(t,e,n){var r=ea.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Pre(t,e,n){var r=ea.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Nre(t,e,n){var r=ea.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Ore(t,e,n){var r=ea.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Rre(t,e,n){var r=ea.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Q4(t,e,n){var r=ea.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function eU(t,e,n){var r=ea.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function kre(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jre(t,e,n){var r=ea.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Ire(t,e,n){var r=ea.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function tU(t,e,n){var r=ea.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Dre(t,e,n){var r=ea.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function nU(t,e,n){var r=ea.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Lre(t,e,n){var r=ea.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ure(t,e,n){var r=ea.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Fre(t,e,n){var r=ea.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function zre(t,e,n){var r=ea.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Bre(t,e,n){var r=Tre.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Vre(t,e,n){var r=ea.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Hre(t,e,n){var r=ea.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function rU(t,e){return Yn(t.getDate(),e,2)}function Wre(t,e){return Yn(t.getHours(),e,2)}function Gre(t,e){return Yn(t.getHours()%12||12,e,2)}function $re(t,e){return Yn(1+tx.count(Wc(t),t),e,3)}function lH(t,e){return Yn(t.getMilliseconds(),e,3)}function qre(t,e){return lH(t,e)+"000"}function Xre(t,e){return Yn(t.getMonth()+1,e,2)}function Yre(t,e){return Yn(t.getMinutes(),e,2)}function Kre(t,e){return Yn(t.getSeconds(),e,2)}function Zre(t){var e=t.getDay();return e===0?7:e}function Jre(t,e){return Yn(V_.count(Wc(t)-1,t),e,2)}function cH(t){var e=t.getDay();return e>=4||e===0?Bm(t):Bm.ceil(t)}function Qre(t,e){return t=cH(t),Yn(Bm.count(Wc(t),t)+(Wc(t).getDay()===4),e,2)}function eie(t){return t.getDay()}function tie(t,e){return Yn(E1.count(Wc(t)-1,t),e,2)}function nie(t,e){return Yn(t.getFullYear()%100,e,2)}function rie(t,e){return t=cH(t),Yn(t.getFullYear()%100,e,2)}function iie(t,e){return Yn(t.getFullYear()%1e4,e,4)}function aie(t,e){var n=t.getDay();return t=n>=4||n===0?Bm(t):Bm.ceil(t),Yn(t.getFullYear()%1e4,e,4)}function sie(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Yn(e/60|0,"0",2)+Yn(e%60,"0",2)}function iU(t,e){return Yn(t.getUTCDate(),e,2)}function oie(t,e){return Yn(t.getUTCHours(),e,2)}function lie(t,e){return Yn(t.getUTCHours()%12||12,e,2)}function cie(t,e){return Yn(1+B_.count(Gc(t),t),e,3)}function uH(t,e){return Yn(t.getUTCMilliseconds(),e,3)}function uie(t,e){return uH(t,e)+"000"}function die(t,e){return Yn(t.getUTCMonth()+1,e,2)}function fie(t,e){return Yn(t.getUTCMinutes(),e,2)}function hie(t,e){return Yn(t.getUTCSeconds(),e,2)}function pie(t){var e=t.getUTCDay();return e===0?7:e}function mie(t,e){return Yn(H_.count(Gc(t)-1,t),e,2)}function dH(t){var e=t.getUTCDay();return e>=4||e===0?Vm(t):Vm.ceil(t)}function gie(t,e){return t=dH(t),Yn(Vm.count(Gc(t),t)+(Gc(t).getUTCDay()===4),e,2)}function yie(t){return t.getUTCDay()}function vie(t,e){return Yn(C1.count(Gc(t)-1,t),e,2)}function xie(t,e){return Yn(t.getUTCFullYear()%100,e,2)}function bie(t,e){return t=dH(t),Yn(t.getUTCFullYear()%100,e,2)}function wie(t,e){return Yn(t.getUTCFullYear()%1e4,e,4)}function _ie(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Vm(t):Vm.ceil(t),Yn(t.getUTCFullYear()%1e4,e,4)}function Sie(){return"+0000"}function aU(){return"%"}function sU(t){return+t}function oU(t){return Math.floor(+t/1e3)}var Op,fH,hH;Mie({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Mie(t){return Op=Mre(t),fH=Op.format,Op.parse,hH=Op.utcFormat,Op.utcParse,Op}function Tie(t){return new Date(t)}function Aie(t){return t instanceof Date?+t:+new Date(+t)}function jR(t,e,n,r,i,a,s,o,l,u){var f=bR(),h=f.invert,m=f.domain,y=u(".%L"),w=u(":%S"),b=u("%I:%M"),x=u("%I %p"),_=u("%a %d"),M=u("%b %d"),T=u("%B"),A=u("%Y");function R(N){return(l(N)<N?y:o(N)<N?w:s(N)<N?b:a(N)<N?x:r(N)<N?i(N)<N?_:M:n(N)<N?T:A)(N)}return f.invert=function(N){return new Date(h(N))},f.domain=function(N){return arguments.length?m(Array.from(N,Aie)):m().map(Tie)},f.ticks=function(N){var O=m();return t(O[0],O[O.length-1],N??10)},f.tickFormat=function(N,O){return O==null?R:u(O)},f.nice=function(N){var O=m();return(!N||typeof N.range!="function")&&(N=e(O[0],O[O.length-1],N??10)),N?m(QV(O,N)):f},f.copy=function(){return ex(f,jR(t,e,n,r,i,a,s,o,l,u))},f}function Eie(){return yo.apply(jR(_re,Sre,Wc,RR,V_,tx,NR,CR,Bf,fH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Cie(){return yo.apply(jR(bre,wre,Gc,kR,H_,B_,OR,PR,Bf,hH).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function W_(){var t=0,e=1,n,r,i,a,s=$a,o=!1,l;function u(h){return h==null||isNaN(h=+h)?l:s(i===0?.5:(h=(a(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(o=!!h,u):o},u.interpolator=function(h){return arguments.length?(s=h,u):s};function f(h){return function(m){var y,w;return arguments.length?([y,w]=m,s=h(y,w),u):[s(0),s(1)]}}return u.range=f(wg),u.rangeRound=f(xR),u.unknown=function(h){return arguments.length?(l=h,u):l},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),u}}function xd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function pH(){var t=vd(W_()($a));return t.copy=function(){return xd(t,pH())},eu.apply(t,arguments)}function mH(){var t=SR(W_()).domain([1,10]);return t.copy=function(){return xd(t,mH()).base(t.base())},eu.apply(t,arguments)}function gH(){var t=MR(W_());return t.copy=function(){return xd(t,gH()).constant(t.constant())},eu.apply(t,arguments)}function IR(){var t=TR(W_());return t.copy=function(){return xd(t,IR()).exponent(t.exponent())},eu.apply(t,arguments)}function Pie(){return IR.apply(null,arguments).exponent(.5)}function yH(){var t=[],e=$a;function n(r){if(r!=null&&!isNaN(r=+r))return e((J0(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ad),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>mne(t,a/r))},n.copy=function(){return yH(e).domain(t)},eu.apply(n,arguments)}function G_(){var t=0,e=.5,n=1,r=1,i,a,s,o,l,u=$a,f,h=!1,m;function y(b){return isNaN(b=+b)?m:(b=.5+((b=+f(b))-a)*(r*b<r*a?o:l),u(h?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([t,e,n]=b,i=f(t=+t),a=f(e=+e),s=f(n=+n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,y):[t,e,n]},y.clamp=function(b){return arguments.length?(h=!!b,y):h},y.interpolator=function(b){return arguments.length?(u=b,y):u};function w(b){return function(x){var _,M,T;return arguments.length?([_,M,T]=x,u=Bne(b,[_,M,T]),y):[u(0),u(.5),u(1)]}}return y.range=w(wg),y.rangeRound=w(xR),y.unknown=function(b){return arguments.length?(m=b,y):m},function(b){return f=b,i=b(t),a=b(e),s=b(n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,y}}function vH(){var t=vd(G_()($a));return t.copy=function(){return xd(t,vH())},eu.apply(t,arguments)}function xH(){var t=SR(G_()).domain([.1,1,10]);return t.copy=function(){return xd(t,xH()).base(t.base())},eu.apply(t,arguments)}function bH(){var t=MR(G_());return t.copy=function(){return xd(t,bH()).constant(t.constant())},eu.apply(t,arguments)}function DR(){var t=TR(G_());return t.copy=function(){return xd(t,DR()).exponent(t.exponent())},eu.apply(t,arguments)}function Nie(){return DR.apply(null,arguments).exponent(.5)}const lU=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Wv,scaleDiverging:vH,scaleDivergingLog:xH,scaleDivergingPow:DR,scaleDivergingSqrt:Nie,scaleDivergingSymlog:bH,scaleIdentity:JV,scaleImplicit:MP,scaleLinear:T1,scaleLog:eH,scaleOrdinal:gR,scalePoint:mv,scalePow:AR,scaleQuantile:rH,scaleQuantize:iH,scaleRadial:nH,scaleSequential:pH,scaleSequentialLog:mH,scaleSequentialPow:IR,scaleSequentialQuantile:yH,scaleSequentialSqrt:Pie,scaleSequentialSymlog:gH,scaleSqrt:ure,scaleSymlog:tH,scaleThreshold:aH,scaleTime:Eie,scaleUtc:Cie,tickFormat:ZV},Symbol.toStringTag,{value:"Module"}));var BE,cU;function $_(){if(cU)return BE;cU=1;var t=yg();function e(n,r,i){for(var a=-1,s=n.length;++a<s;){var o=n[a],l=r(o);if(l!=null&&(u===void 0?l===l&&!t(l):i(l,u)))var u=l,f=o}return f}return BE=e,BE}var VE,uU;function wH(){if(uU)return VE;uU=1;function t(e,n){return e>n}return VE=t,VE}var HE,dU;function Oie(){if(dU)return HE;dU=1;var t=$_(),e=wH(),n=bg();function r(i){return i&&i.length?t(i,n,e):void 0}return HE=r,HE}var Rie=Oie();const q_=Zn(Rie);var WE,fU;function _H(){if(fU)return WE;fU=1;function t(e,n){return e<n}return WE=t,WE}var GE,hU;function kie(){if(hU)return GE;hU=1;var t=$_(),e=_H(),n=bg();function r(i){return i&&i.length?t(i,n,e):void 0}return GE=r,GE}var jie=kie();const X_=Zn(jie);var $E,pU;function Iie(){if(pU)return $E;pU=1;var t=JO(),e=Fl(),n=NV(),r=vs();function i(a,s){var o=r(a)?t:n;return o(a,e(s,3))}return $E=i,$E}var qE,mU;function Die(){if(mU)return qE;mU=1;var t=CV(),e=Iie();function n(r,i){return t(e(r,i),1)}return qE=n,qE}var Lie=Die();const Uie=Zn(Lie);var XE,gU;function Fie(){if(gU)return XE;gU=1;var t=dR();function e(n,r){return t(n,r)}return XE=e,XE}var zie=Fie();const nx=Zn(zie);var _g=1e9,Bie={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},UR,zr=!0,mo="[DecimalError] ",Qf=mo+"Invalid argument: ",LR=mo+"Exponent out of range: ",Sg=Math.floor,Pf=Math.pow,Vie=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ds,Ki=1e7,jr=7,SH=9007199254740991,P1=Sg(SH/jr),Lt={};Lt.absoluteValue=Lt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Lt.comparedTo=Lt.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Lt.decimalPlaces=Lt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*jr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Lt.dividedBy=Lt.div=function(t){return Uc(this,new this.constructor(t))};Lt.dividedToIntegerBy=Lt.idiv=function(t){var e=this,n=e.constructor;return wr(Uc(e,new n(t),0,1),n.precision)};Lt.equals=Lt.eq=function(t){return!this.cmp(t)};Lt.exponent=function(){return Mi(this)};Lt.greaterThan=Lt.gt=function(t){return this.cmp(t)>0};Lt.greaterThanOrEqualTo=Lt.gte=function(t){return this.cmp(t)>=0};Lt.isInteger=Lt.isint=function(){return this.e>this.d.length-2};Lt.isNegative=Lt.isneg=function(){return this.s<0};Lt.isPositive=Lt.ispos=function(){return this.s>0};Lt.isZero=function(){return this.s===0};Lt.lessThan=Lt.lt=function(t){return this.cmp(t)<0};Lt.lessThanOrEqualTo=Lt.lte=function(t){return this.cmp(t)<1};Lt.logarithm=Lt.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Ds))throw Error(mo+"NaN");if(n.s<1)throw Error(mo+(n.s?"NaN":"-Infinity"));return n.eq(Ds)?new r(0):(zr=!1,e=Uc(Yv(n,a),Yv(t,a),a),zr=!0,wr(e,i))};Lt.minus=Lt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?AH(e,t):MH(e,(t.s=-t.s,t))};Lt.modulo=Lt.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(mo+"NaN");return n.s?(zr=!1,e=Uc(n,t,0,1).times(t),zr=!0,n.minus(e)):wr(new r(n),i)};Lt.naturalExponential=Lt.exp=function(){return TH(this)};Lt.naturalLogarithm=Lt.ln=function(){return Yv(this)};Lt.negated=Lt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Lt.plus=Lt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?MH(e,t):AH(e,(t.s=-t.s,t))};Lt.precision=Lt.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Qf+t);if(e=Mi(i)+1,r=i.d.length-1,n=r*jr+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Lt.squareRoot=Lt.sqrt=function(){var t,e,n,r,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(mo+"NaN")}for(t=Mi(o),zr=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=_l(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Sg((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=s=n+3;;)if(a=r,r=a.plus(Uc(o,a,s+2)).times(.5),_l(a.d).slice(0,s)===(e=_l(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(wr(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return zr=!0,wr(r,n)};Lt.times=Lt.mul=function(t){var e,n,r,i,a,s,o,l,u,f=this,h=f.constructor,m=f.d,y=(t=new h(t)).d;if(!f.s||!t.s)return new h(0);for(t.s*=f.s,n=f.e+t.e,l=m.length,u=y.length,l<u&&(a=m,m=y,y=a,s=l,l=u,u=s),a=[],s=l+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)o=a[i]+y[r]*m[i-r-1]+e,a[i--]=o%Ki|0,e=o/Ki|0;a[i]=(a[i]+e)%Ki|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,zr?wr(t,h.precision):t};Lt.toDecimalPlaces=Lt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(kl(t,0,_g),e===void 0?e=r.rounding:kl(e,0,8),wr(n,t+Mi(n)+1,e))};Lt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=dh(r,!0):(kl(t,0,_g),e===void 0?e=i.rounding:kl(e,0,8),r=wr(new i(r),t+1,e),n=dh(r,!0,t+1)),n};Lt.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?dh(i):(kl(t,0,_g),e===void 0?e=a.rounding:kl(e,0,8),r=wr(new a(i),t+Mi(i)+1,e),n=dh(r.abs(),!1,t+Mi(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Lt.toInteger=Lt.toint=function(){var t=this,e=t.constructor;return wr(new e(t),Mi(t)+1,e.rounding)};Lt.toNumber=function(){return+this};Lt.toPower=Lt.pow=function(t){var e,n,r,i,a,s,o=this,l=o.constructor,u=12,f=+(t=new l(t));if(!t.s)return new l(Ds);if(o=new l(o),!o.s){if(t.s<1)throw Error(mo+"Infinity");return o}if(o.eq(Ds))return o;if(r=l.precision,t.eq(Ds))return wr(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=f<0?-f:f)<=SH){for(i=new l(Ds),e=Math.ceil(r/jr+4),zr=!1;n%2&&(i=i.times(o),vU(i.d,e)),n=Sg(n/2),n!==0;)o=o.times(o),vU(o.d,e);return zr=!0,t.s<0?new l(Ds).div(i):wr(i,r)}}else if(a<0)throw Error(mo+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,zr=!1,i=t.times(Yv(o,r+u)),zr=!0,i=TH(i),i.s=a,i};Lt.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Mi(i),r=dh(i,n<=a.toExpNeg||n>=a.toExpPos)):(kl(t,1,_g),e===void 0?e=a.rounding:kl(e,0,8),i=wr(new a(i),t,e),n=Mi(i),r=dh(i,t<=n||n<=a.toExpNeg,t)),r};Lt.toSignificantDigits=Lt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(kl(t,1,_g),e===void 0?e=r.rounding:kl(e,0,8)),wr(new r(n),t,e)};Lt.toString=Lt.valueOf=Lt.val=Lt.toJSON=Lt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Mi(t),n=t.constructor;return dh(t,e<=n.toExpNeg||e>=n.toExpPos)};function MH(t,e){var n,r,i,a,s,o,l,u,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),zr?wr(e,h):e;if(l=t.d,u=e.d,s=t.e,i=e.e,l=l.slice(),a=s-i,a){for(a<0?(r=l,a=-a,o=u.length):(r=u,i=s,o=l.length),s=Math.ceil(h/jr),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,r=u,u=l,l=r),n=0;a;)n=(l[--a]=l[a]+u[a]+n)/Ki|0,l[a]%=Ki;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,zr?wr(e,h):e}function kl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Qf+t)}function _l(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=jr-r.length,n&&(a+=qu(n)),a+=r;s=t[e],r=s+"",n=jr-r.length,n&&(a+=qu(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Uc=(function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Ki|0,s=a/Ki|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Ki+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,l,u,f,h,m,y,w,b,x,_,M,T,A,R,N,O,k,C=r.constructor,I=r.s==i.s?1:-1,F=r.d,V=i.d;if(!r.s)return new C(r);if(!i.s)throw Error(mo+"Division by zero");for(l=r.e-i.e,O=V.length,R=F.length,y=new C(I),w=y.d=[],u=0;V[u]==(F[u]||0);)++u;if(V[u]>(F[u]||0)&&--l,a==null?M=a=C.precision:s?M=a+(Mi(r)-Mi(i))+1:M=a,M<0)return new C(0);if(M=M/jr+2|0,u=0,O==1)for(f=0,V=V[0],M++;(u<R||f)&&M--;u++)T=f*Ki+(F[u]||0),w[u]=T/V|0,f=T%V|0;else{for(f=Ki/(V[0]+1)|0,f>1&&(V=t(V,f),F=t(F,f),O=V.length,R=F.length),A=O,b=F.slice(0,O),x=b.length;x<O;)b[x++]=0;k=V.slice(),k.unshift(0),N=V[0],V[1]>=Ki/2&&++N;do f=0,o=e(V,b,O,x),o<0?(_=b[0],O!=x&&(_=_*Ki+(b[1]||0)),f=_/N|0,f>1?(f>=Ki&&(f=Ki-1),h=t(V,f),m=h.length,x=b.length,o=e(h,b,m,x),o==1&&(f--,n(h,O<m?k:V,m))):(f==0&&(o=f=1),h=V.slice()),m=h.length,m<x&&h.unshift(0),n(b,h,x),o==-1&&(x=b.length,o=e(V,b,O,x),o<1&&(f++,n(b,O<x?k:V,x))),x=b.length):o===0&&(f++,b=[0]),w[u++]=f,o&&b[0]?b[x++]=F[A]||0:(b=[F[A]],x=1);while((A++<R||b[0]!==void 0)&&M--)}return w[0]||w.shift(),y.e=l,wr(y,s?a+Mi(y)+1:a)}})();function TH(t,e){var n,r,i,a,s,o,l=0,u=0,f=t.constructor,h=f.precision;if(Mi(t)>16)throw Error(LR+Mi(t));if(!t.s)return new f(Ds);for(zr=!1,o=h,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(Pf(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new f(Ds),f.precision=o;;){if(i=wr(i.times(t),o),n=n.times(++l),s=a.plus(Uc(i,n,o)),_l(s.d).slice(0,o)===_l(a.d).slice(0,o)){for(;u--;)a=wr(a.times(a),o);return f.precision=h,e==null?(zr=!0,wr(a,h)):a}a=s}}function Mi(t){for(var e=t.e*jr,n=t.d[0];n>=10;n/=10)e++;return e}function YE(t,e,n){if(e>t.LN10.sd())throw zr=!0,n&&(t.precision=n),Error(mo+"LN10 precision limit exceeded");return wr(new t(t.LN10),e)}function qu(t){for(var e="";t--;)e+="0";return e}function Yv(t,e){var n,r,i,a,s,o,l,u,f,h=1,m=10,y=t,w=y.d,b=y.constructor,x=b.precision;if(y.s<1)throw Error(mo+(y.s?"NaN":"-Infinity"));if(y.eq(Ds))return new b(0);if(e==null?(zr=!1,u=x):u=e,y.eq(10))return e==null&&(zr=!0),YE(b,u);if(u+=m,b.precision=u,n=_l(w),r=n.charAt(0),a=Mi(y),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)y=y.times(t),n=_l(y.d),r=n.charAt(0),h++;a=Mi(y),r>1?(y=new b("0."+n),a++):y=new b(r+"."+n.slice(1))}else return l=YE(b,u+2,x).times(a+""),y=Yv(new b(r+"."+n.slice(1)),u-m).plus(l),b.precision=x,e==null?(zr=!0,wr(y,x)):y;for(o=s=y=Uc(y.minus(Ds),y.plus(Ds),u),f=wr(y.times(y),u),i=3;;){if(s=wr(s.times(f),u),l=o.plus(Uc(s,new b(i),u)),_l(l.d).slice(0,u)===_l(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(YE(b,u+2,x).times(a+""))),o=Uc(o,new b(h),u),b.precision=x,e==null?(zr=!0,wr(o,x)):o;o=l,i+=2}}function yU(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Sg(n/jr),t.d=[],r=(n+1)%jr,n<0&&(r+=jr),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=jr;r<i;)t.d.push(+e.slice(r,r+=jr));e=e.slice(r),r=jr-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),zr&&(t.e>P1||t.e<-P1))throw Error(LR+n)}else t.s=0,t.e=0,t.d=[0];return t}function wr(t,e,n){var r,i,a,s,o,l,u,f,h=t.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=jr,i=e,u=h[f=0];else{if(f=Math.ceil((r+1)/jr),a=h.length,f>=a)return t;for(u=a=h[f],s=1;a>=10;a/=10)s++;r%=jr,i=r-jr+s}if(n!==void 0&&(a=Pf(10,s-i-1),o=u/a%10|0,l=e<0||h[f+1]!==void 0||u%a,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?u/Pf(10,s-i):0:h[f-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return l?(a=Mi(t),h.length=1,e=e-a-1,h[0]=Pf(10,(jr-e%jr)%jr),t.e=Sg(-e/jr)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=f,a=1,f--):(h.length=f+1,a=Pf(10,jr-r),h[f]=i>0?(u/Pf(10,s-i)%Pf(10,i)|0)*a:0),l)for(;;)if(f==0){(h[0]+=a)==Ki&&(h[0]=1,++t.e);break}else{if(h[f]+=a,h[f]!=Ki)break;h[f--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(zr&&(t.e>P1||t.e<-P1))throw Error(LR+Mi(t));return t}function AH(t,e){var n,r,i,a,s,o,l,u,f,h,m=t.constructor,y=m.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new m(t),zr?wr(e,y):e;if(l=t.d,h=e.d,r=e.e,u=t.e,l=l.slice(),s=u-r,s){for(f=s<0,f?(n=l,s=-s,o=h.length):(n=h,r=u,o=l.length),i=Math.max(Math.ceil(y/jr),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(l[i]!=h[i]){f=l[i]<h[i];break}s=0}for(f&&(n=l,l=h,h=n,e.s=-e.s),o=l.length,i=h.length-o;i>0;--i)l[o++]=0;for(i=h.length;i>s;){if(l[--i]<h[i]){for(a=i;a&&l[--a]===0;)l[a]=Ki-1;--l[a],l[i]+=Ki}l[i]-=h[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,zr?wr(e,y):e):new m(0)}function dh(t,e,n){var r,i=Mi(t),a=_l(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+qu(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+qu(-i-1)+a,n&&(r=n-s)>0&&(a+=qu(r))):i>=s?(a+=qu(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+qu(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=qu(r))),t.s<0?"-"+a:a}function vU(t,e){if(t.length>e)return t.length=e,!0}function EH(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Qf+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return yU(s,a.toString())}else if(typeof a!="string")throw Error(Qf+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Vie.test(a))yU(s,a);else throw Error(Qf+a)}if(i.prototype=Lt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=EH,i.config=i.set=Hie,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Hie(t){if(!t||typeof t!="object")throw Error(mo+"Object expected");var e,n,r,i=["precision",1,_g,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Sg(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Qf+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Qf+n+": "+r);return this}var UR=EH(Bie);Ds=new UR(1);const yr=UR;function Wie(t){return Xie(t)||qie(t)||$ie(t)||Gie()}function Gie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $ie(t,e){if(t){if(typeof t=="string")return CP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CP(t,e)}}function qie(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Xie(t){if(Array.isArray(t))return CP(t)}function CP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Yie=function(e){return e},CH={},PH=function(e){return e===CH},xU=function(e){return function n(){return arguments.length===0||arguments.length===1&&PH(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Kie=function t(e,n){return e===1?n:xU(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==CH}).length;return s>=e?n.apply(void 0,i):t(e-s,xU(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var f=i.map(function(h){return PH(h)?l.shift():h});return n.apply(void 0,Wie(f).concat(l))}))})},Y_=function(e){return Kie(e.length,e)},PP=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Zie=Y_(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Jie=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Yie;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,l){return l(o)},a.apply(void 0,arguments))}},NP=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},NH=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n&&a.every(function(o,l){return o===n[l]})||(n=a,r=e.apply(void 0,a)),r}};function Qie(t){var e;return t===0?e=1:e=Math.floor(new yr(t).abs().log(10).toNumber())+1,e}function eae(t,e,n){for(var r=new yr(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var tae=Y_(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),nae=Y_(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),rae=Y_(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const K_={rangeStep:eae,getDigitCount:Qie,interpolateNumber:tae,uninterpolateNumber:nae,uninterpolateTruncation:rae};function OP(t){return sae(t)||aae(t)||OH(t)||iae()}function iae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aae(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function sae(t){if(Array.isArray(t))return RP(t)}function Kv(t,e){return cae(t)||lae(t,e)||OH(t,e)||oae()}function oae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OH(t,e){if(t){if(typeof t=="string")return RP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RP(t,e)}}function RP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lae(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}}function cae(t){if(Array.isArray(t))return t}function RH(t){var e=Kv(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function kH(t,e,n){if(t.lte(0))return new yr(0);var r=K_.getDigitCount(t.toNumber()),i=new yr(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new yr(Math.ceil(a.div(s).toNumber())).add(n).mul(s),l=o.mul(i);return e?l:new yr(Math.ceil(l))}function uae(t,e,n){var r=1,i=new yr(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new yr(10).pow(K_.getDigitCount(t)-1),i=new yr(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new yr(Math.floor(t)))}else t===0?i=new yr(Math.floor((e-1)/2)):n||(i=new yr(Math.floor(t)));var s=Math.floor((e-1)/2),o=Jie(Zie(function(l){return i.add(new yr(l-s).mul(r)).toNumber()}),PP);return o(0,e)}function jH(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new yr(0),tickMin:new yr(0),tickMax:new yr(0)};var a=kH(new yr(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new yr(0):(s=new yr(t).add(e).div(2),s=s.sub(new yr(s).mod(a)));var o=Math.ceil(s.sub(t).div(a).toNumber()),l=Math.ceil(new yr(e).sub(s).div(a).toNumber()),u=o+l+1;return u>n?jH(t,e,n,r,i+1):(u<n&&(l=e>0?l+(n-u):l,o=e>0?o:o+(n-u)),{step:a,tickMin:s.sub(new yr(o).mul(a)),tickMax:s.add(new yr(l).mul(a))})}function dae(t){var e=Kv(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=RH([n,r]),l=Kv(o,2),u=l[0],f=l[1];if(u===-1/0||f===1/0){var h=f===1/0?[u].concat(OP(PP(0,i-1).map(function(){return 1/0}))):[].concat(OP(PP(0,i-1).map(function(){return-1/0})),[f]);return n>r?NP(h):h}if(u===f)return uae(u,i,a);var m=jH(u,f,s,a),y=m.step,w=m.tickMin,b=m.tickMax,x=K_.rangeStep(w,b.add(new yr(.1).mul(y)),y);return n>r?NP(x):x}function fae(t,e){var n=Kv(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=RH([r,i]),o=Kv(s,2),l=o[0],u=o[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var f=Math.max(e,2),h=kH(new yr(u).sub(l).div(f-1),a,0),m=[].concat(OP(K_.rangeStep(new yr(l),new yr(u).sub(new yr(.99).mul(h)),h)),[u]);return r>i?NP(m):m}var hae=NH(dae),pae=NH(fae),mae="Invariant failed";function fh(t,e){throw new Error(mae)}var gae=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Hm(t){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hm(t)}function N1(){return N1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N1.apply(this,arguments)}function yae(t,e){return wae(t)||bae(t,e)||xae(t,e)||vae()}function vae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xae(t,e){if(t){if(typeof t=="string")return bU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bU(t,e)}}function bU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function wae(t){if(Array.isArray(t))return t}function _ae(t,e){if(t==null)return{};var n=Sae(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Sae(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Mae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,LH(r.key),r)}}function Aae(t,e,n){return e&&Tae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Eae(t,e,n){return e=O1(e),Cae(t,IH()?Reflect.construct(e,n||[],O1(t).constructor):e.apply(t,n))}function Cae(t,e){if(e&&(Hm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pae(t)}function Pae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IH=function(){return!!t})()}function O1(t){return O1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},O1(t)}function Nae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kP(t,e)}function kP(t,e){return kP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kP(t,e)}function DH(t,e,n){return e=LH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LH(t){var e=Oae(t,"string");return Hm(e)=="symbol"?e:e+""}function Oae(t,e){if(Hm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rx=(function(t){function e(){return Mae(this,e),Eae(this,e,arguments)}return Nae(e,t),Aae(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,o=r.dataKey,l=r.data,u=r.dataPointFormatter,f=r.xAxis,h=r.yAxis,m=_ae(r,gae),y=en(m,!1);this.props.direction==="x"&&f.type!=="number"&&fh();var w=l.map(function(b){var x=u(b,o),_=x.x,M=x.y,T=x.value,A=x.errorVal;if(!A)return null;var R=[],N,O;if(Array.isArray(A)){var k=yae(A,2);N=k[0],O=k[1]}else N=O=A;if(a==="vertical"){var C=f.scale,I=M+i,F=I+s,V=I-s,W=C(T-N),G=C(T+O);R.push({x1:G,y1:F,x2:G,y2:V}),R.push({x1:W,y1:I,x2:G,y2:I}),R.push({x1:W,y1:F,x2:W,y2:V})}else if(a==="horizontal"){var J=h.scale,ee=_+i,ae=ee-s,$=ee+s,B=J(T-N),Y=J(T+O);R.push({x1:ae,y1:Y,x2:$,y2:Y}),R.push({x1:ee,y1:B,x2:ee,y2:Y}),R.push({x1:ae,y1:B,x2:$,y2:B})}return xe.createElement(qn,N1({className:"recharts-errorBar",key:"bar-".concat(R.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},y),R.map(function(X){return xe.createElement("line",N1({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return xe.createElement(qn,{className:"recharts-errorBars"},w)}}])})(xe.Component);DH(rx,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});DH(rx,"displayName","ErrorBar");function Zv(t){"@babel/helpers - typeof";return Zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zv(t)}function wU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ff(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wU(Object(n),!0).forEach(function(r){Rae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rae(t,e,n){return e=kae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kae(t){var e=jae(t,"string");return Zv(e)=="symbol"?e:e+""}function jae(t,e){if(Zv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var UH=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=js(n,id);if(!s)return null;var o=id.defaultProps,l=o!==void 0?ff(ff({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(r||[]).reduce(function(f,h){var m=h.item,y=h.props,w=y.sectors||y.data||[];return f.concat(w.map(function(b){return{type:s.props.iconType||m.props.legendType,value:b.name,color:b.fill,payload:b}}))},[]):u=(r||[]).map(function(f){var h=f.item,m=h.type.defaultProps,y=m!==void 0?ff(ff({},m),h.props):{},w=y.dataKey,b=y.name,x=y.legendType,_=y.hide;return{inactive:_,dataKey:w,type:l.iconType||x||"square",color:FR(h),value:b||w,payload:y}}),ff(ff(ff({},l),id.getWithHeight(s,i)),{},{payload:u,item:s})};function Jv(t){"@babel/helpers - typeof";return Jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jv(t)}function _U(t){return Uae(t)||Lae(t)||Dae(t)||Iae()}function Iae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dae(t,e){if(t){if(typeof t=="string")return jP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jP(t,e)}}function Lae(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Uae(t){if(Array.isArray(t))return jP(t)}function jP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function SU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SU(Object(n),!0).forEach(function(r){Am(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Am(t,e,n){return e=Fae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fae(t){var e=zae(t,"string");return Jv(e)=="symbol"?e:e+""}function zae(t,e){if(Jv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ui(t,e,n){return bn(t)||bn(e)?n:Fi(e)?Us(t,e,n):un(e)?e(t):n}function gv(t,e,n,r){var i=Uie(t,function(o){return Ui(o,e)});if(n==="number"){var a=i.filter(function(o){return pt(o)||parseFloat(o)});return a.length?[X_(a),q_(a)]:[1/0,-1/0]}var s=r?i.filter(function(o){return!bn(o)}):i;return s.map(function(o){return Fi(o)||o instanceof Date?o:""})}var Bae=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(n=r?.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,u=0;u<o;u++){var f=u>0?i[u-1].coordinate:i[o-1].coordinate,h=i[u].coordinate,m=u>=o-1?i[0].coordinate:i[u+1].coordinate,y=void 0;if(Wa(h-f)!==Wa(m-h)){var w=[];if(Wa(m-h)===Wa(l[1]-l[0])){y=m;var b=h+l[1]-l[0];w[0]=Math.min(b,(b+f)/2),w[1]=Math.max(b,(b+f)/2)}else{y=f;var x=m+l[1]-l[0];w[0]=Math.min(h,(x+h)/2),w[1]=Math.max(h,(x+h)/2)}var _=[Math.min(h,(y+h)/2),Math.max(h,(y+h)/2)];if(e>_[0]&&e<=_[1]||e>=w[0]&&e<=w[1]){s=i[u].index;break}}else{var M=Math.min(f,m),T=Math.max(f,m);if(e>(M+h)/2&&e<=(T+h)/2){s=i[u].index;break}}}else for(var A=0;A<o;A++)if(A===0&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A>0&&A<o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A===o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2){s=r[A].index;break}return s},FR=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Qr(Qr({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,l;switch(i){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:o;break;default:l=o;break}return l},Vae=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),l=0,u=o.length;l<u;l++)for(var f=a[o[l]].stackGroups,h=Object.keys(f),m=0,y=h.length;m<y;m++){var w=f[h[m]],b=w.items,x=w.cateAxisId,_=b.filter(function(O){return Lc(O.type).indexOf("Bar")>=0});if(_&&_.length){var M=_[0].type.defaultProps,T=M!==void 0?Qr(Qr({},M),_[0].props):_[0].props,A=T.barSize,R=T[x];s[R]||(s[R]=[]);var N=bn(A)?n:A;s[R].push({item:_[0],stackList:_.slice(1),barSize:bn(N)?void 0:Ga(N,r,0)})}}return s},Hae=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,l=s.length;if(l<1)return null;var u=Ga(n,i,0,!0),f,h=[];if(s[0].barSize===+s[0].barSize){var m=!1,y=i/l,w=s.reduce(function(A,R){return A+R.barSize||0},0);w+=(l-1)*u,w>=i&&(w-=(l-1)*u,u=0),w>=i&&y>0&&(m=!0,y*=.9,w=l*y);var b=(i-w)/2>>0,x={offset:b-u,size:0};f=s.reduce(function(A,R){var N={item:R.item,position:{offset:x.offset+x.size+u,size:m?y:R.barSize}},O=[].concat(_U(A),[N]);return x=O[O.length-1].position,R.stackList&&R.stackList.length&&R.stackList.forEach(function(k){O.push({item:k,position:x})}),O},h)}else{var _=Ga(r,i,0,!0);i-2*_-(l-1)*u<=0&&(u=0);var M=(i-2*_-(l-1)*u)/l;M>1&&(M>>=0);var T=o===+o?Math.min(M,o):M;f=s.reduce(function(A,R,N){var O=[].concat(_U(A),[{item:R.item,position:{offset:_+(M+u)*N+(M-T)/2,size:T}}]);return R.stackList&&R.stackList.length&&R.stackList.forEach(function(k){O.push({item:k,position:O[O.length-1].position})}),O},h)}return f},Wae=function(e,n,r,i){var a=r.children,s=r.width,o=r.margin,l=s-(o.left||0)-(o.right||0),u=UH({children:a,legendWidth:l});if(u){var f=i||{},h=f.width,m=f.height,y=u.align,w=u.verticalAlign,b=u.layout;if((b==="vertical"||b==="horizontal"&&w==="middle")&&y!=="center"&&pt(e[y]))return Qr(Qr({},e),{},Am({},y,e[y]+(h||0)));if((b==="horizontal"||b==="vertical"&&y==="center")&&w!=="middle"&&pt(e[w]))return Qr(Qr({},e),{},Am({},w,e[w]+(m||0)))}return e},Gae=function(e,n,r){return bn(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},FH=function(e,n,r,i,a){var s=n.props.children,o=Fs(s,rx).filter(function(u){return Gae(i,a,u.props.direction)});if(o&&o.length){var l=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,f){var h=Ui(f,r);if(bn(h))return u;var m=Array.isArray(h)?[X_(h),q_(h)]:[h,h],y=l.reduce(function(w,b){var x=Ui(f,b,0),_=m[0]-Math.abs(Array.isArray(x)?x[0]:x),M=m[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(_,w[0]),Math.max(M,w[1])]},[1/0,-1/0]);return[Math.min(y[0],u[0]),Math.max(y[1],u[1])]},[1/0,-1/0])}return null},$ae=function(e,n,r,i,a){var s=n.map(function(o){return FH(e,o,r,a,i)}).filter(function(o){return!bn(o)});return s&&s.length?s.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},zH=function(e,n,r,i,a){var s=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&FH(e,l,u,i)||gv(e,u,r,a)});if(r==="number")return s.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(l,u){for(var f=0,h=u.length;f<h;f++)o[u[f]]||(o[u[f]]=!0,l.push(u[f]));return l},[])},BH=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},VH=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var a,s,o=e.map(function(l){return l.coordinate===n&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate});return a||o.push(n),s||o.push(r),o},Ic=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&o?.length>=2?Wa(o[0]-o[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(h){var m=a?a.indexOf(h):h;return{coordinate:i(m)+u,value:h,offset:u}});return f.filter(function(h){return!K0(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,m){return{coordinate:i(h)+u,value:h,index:m,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(h){return{coordinate:i(h)+u,value:h,offset:u}}):i.domain().map(function(h,m){return{coordinate:i(h)+u,value:a?a[h]:h,index:m,offset:u}})},KE=new WeakMap,Tb=function(e,n){if(typeof n!="function")return e;KE.has(e)||KE.set(e,new WeakMap);var r=KE.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},HH=function(e,n,r){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:Wv(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:T1(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:mv(),realScaleType:"point"}:a==="category"?{scale:Wv(),realScaleType:"band"}:{scale:T1(),realScaleType:"linear"};if(lh(i)){var l="scale".concat(k_(i));return{scale:(lU[l]||mv)(),realScaleType:lU[l]?l:"point"}}return un(i)?{scale:i}:{scale:mv(),realScaleType:"point"}},MU=1e-4,WH=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-MU,s=Math.max(i[0],i[1])+MU,o=e(n[0]),l=e(n[r-1]);(o<a||o>s||l<a||l>s)&&e.domain([n[0],n[r-1]])}},qae=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Xae=function(e,n){if(!n||n.length!==2||!pt(n[0])||!pt(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!pt(e[0])||e[0]<r)&&(a[0]=r),(!pt(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},Yae=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0,o=0;o<n;++o){var l=K0(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1])}},Kae=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0;s<n;++s){var o=K0(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},Zae={sign:Yae,expand:UJ,none:jm,silhouette:FJ,wiggle:zJ,positive:Kae},Jae=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),a=Zae[r],s=LJ().keys(i).value(function(o,l){return+Ui(o,l,0)}).order(uP).offset(a);return s(e)},Qae=function(e,n,r,i,a,s){if(!e)return null;var o=s?n.reverse():n,l={},u=o.reduce(function(h,m){var y,w=(y=m.type)!==null&&y!==void 0&&y.defaultProps?Qr(Qr({},m.type.defaultProps),m.props):m.props,b=w.stackId,x=w.hide;if(x)return h;var _=w[r],M=h[_]||{hasStack:!1,stackGroups:{}};if(Fi(b)){var T=M.stackGroups[b]||{numericAxisId:r,cateAxisId:i,items:[]};T.items.push(m),M.hasStack=!0,M.stackGroups[b]=T}else M.stackGroups[xg("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[m]};return Qr(Qr({},h),{},Am({},_,M))},l),f={};return Object.keys(u).reduce(function(h,m){var y=u[m];if(y.hasStack){var w={};y.stackGroups=Object.keys(y.stackGroups).reduce(function(b,x){var _=y.stackGroups[x];return Qr(Qr({},b),{},Am({},x,{numericAxisId:r,cateAxisId:i,items:_.items,stackedData:Jae(e,_.items,a)}))},w)}return Qr(Qr({},h),{},Am({},m,y))},f)},GH=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,s=n.originalDomain,o=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var f=hae(u,a,o);return e.domain([X_(f),q_(f)]),{niceTicks:f}}if(a&&i==="number"){var h=e.domain(),m=pae(h,a,o);return{niceTicks:m}}return null};function TU(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!bn(i[e.dataKey])){var o=o1(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=Ui(i,bn(s)?e.dataKey:s);return bn(l)?null:e.scale(l)}var AU=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var l=Ui(s,n.dataKey,n.domain[o]);return bn(l)?null:n.scale(l)-a/2+i},ese=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},tse=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Qr(Qr({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(Fi(a)){var s=n[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},nse=function(e){return e.reduce(function(n,r){return[X_(r.concat([n[0]]).filter(pt)),q_(r.concat([n[1]]).filter(pt))]},[1/0,-1/0])},$H=function(e,n,r){return Object.keys(e).reduce(function(i,a){var s=e[a],o=s.stackedData,l=o.reduce(function(u,f){var h=nse(f.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},EU=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CU=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,IP=function(e,n,r){if(un(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(pt(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(EU.test(e[0])){var a=+EU.exec(e[0])[1];i[0]=n[0]-a}else un(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(pt(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(CU.test(e[1])){var s=+CU.exec(e[1])[1];i[1]=n[1]+s}else un(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},R1=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=hR(n,function(h){return h.coordinate}),s=1/0,o=1,l=a.length;o<l;o++){var u=a[o],f=a[o-1];s=Math.min((u.coordinate||0)-(f.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},PU=function(e,n,r){return!e||!e.length||nx(e,Us(r,"type.defaultProps.domain"))?n:e},qH=function(e,n){var r=e.type.defaultProps?Qr(Qr({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,s=r.unit,o=r.formatter,l=r.tooltipType,u=r.chartType,f=r.hide;return Qr(Qr({},en(e,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:FR(e),value:Ui(n,i),type:l,payload:n,chartType:u,hide:f})};function Qv(t){"@babel/helpers - typeof";return Qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qv(t)}function NU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NU(Object(n),!0).forEach(function(r){XH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XH(t,e,n){return e=rse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rse(t){var e=ise(t,"string");return Qv(e)=="symbol"?e:e+""}function ise(t,e){if(Qv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ase(t,e){return cse(t)||lse(t,e)||ose(t,e)||sse()}function sse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ose(t,e){if(t){if(typeof t=="string")return OU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OU(t,e)}}function OU(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lse(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function cse(t){if(Array.isArray(t))return t}var k1=Math.PI/180,use=function(e){return e*180/Math.PI},Nr=function(e,n,r,i){return{x:e+Math.cos(-k1*i)*r,y:n+Math.sin(-k1*i)*r}},YH=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},dse=function(e,n,r,i,a){var s=e.width,o=e.height,l=e.startAngle,u=e.endAngle,f=Ga(e.cx,s,s/2),h=Ga(e.cy,o,o/2),m=YH(s,o,r),y=Ga(e.innerRadius,m,0),w=Ga(e.outerRadius,m,m*.8),b=Object.keys(n);return b.reduce(function(x,_){var M=n[_],T=M.domain,A=M.reversed,R;if(bn(M.range))i==="angleAxis"?R=[l,u]:i==="radiusAxis"&&(R=[y,w]),A&&(R=[R[1],R[0]]);else{R=M.range;var N=R,O=ase(N,2);l=O[0],u=O[1]}var k=HH(M,a),C=k.realScaleType,I=k.scale;I.domain(T).range(R),WH(I);var F=GH(I,Pc(Pc({},M),{},{realScaleType:C})),V=Pc(Pc(Pc({},M),F),{},{range:R,radius:w,realScaleType:C,scale:I,cx:f,cy:h,innerRadius:y,outerRadius:w,startAngle:l,endAngle:u});return Pc(Pc({},x),{},XH({},_,V))},{})},fse=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},hse=function(e,n){var r=e.x,i=e.y,a=n.cx,s=n.cy,o=fse({x:r,y:i},{x:a,y:s});if(o<=0)return{radius:o};var l=(r-a)/o,u=Math.acos(l);return i>s&&(u=2*Math.PI-u),{radius:o,angle:use(u),angleInRadian:u}},pse=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:n-s*360,endAngle:r-s*360}},mse=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return e+o*360},RU=function(e,n){var r=e.x,i=e.y,a=hse({x:r,y:i},n),s=a.radius,o=a.angle,l=n.innerRadius,u=n.outerRadius;if(s<l||s>u)return!1;if(s===0)return!0;var f=pse(n),h=f.startAngle,m=f.endAngle,y=o,w;if(h<=m){for(;y>m;)y-=360;for(;y<h;)y+=360;w=y>=h&&y<=m}else{for(;y>h;)y-=360;for(;y<m;)y+=360;w=y>=m&&y<=h}return w?Pc(Pc({},n),{},{radius:s,angle:mse(y,n)}):null},KH=function(e){return!L.isValidElement(e)&&!un(e)&&typeof e!="boolean"?e.className:""};function e0(t){"@babel/helpers - typeof";return e0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e0(t)}var gse=["offset"];function yse(t){return wse(t)||bse(t)||xse(t)||vse()}function vse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xse(t,e){if(t){if(typeof t=="string")return DP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DP(t,e)}}function bse(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wse(t){if(Array.isArray(t))return DP(t)}function DP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _se(t,e){if(t==null)return{};var n=Sse(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Sse(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function kU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ji(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kU(Object(n),!0).forEach(function(r){Mse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mse(t,e,n){return e=Tse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tse(t){var e=Ase(t,"string");return e0(e)=="symbol"?e:e+""}function Ase(t,e){if(e0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(e0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t0(){return t0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t0.apply(this,arguments)}var Ese=function(e){var n=e.value,r=e.formatter,i=bn(e.children)?n:e.children;return un(r)?r(i):i},Cse=function(e,n){var r=Wa(n-e),i=Math.min(Math.abs(n-e),360);return r*i},Pse=function(e,n,r){var i=e.position,a=e.viewBox,s=e.offset,o=e.className,l=a,u=l.cx,f=l.cy,h=l.innerRadius,m=l.outerRadius,y=l.startAngle,w=l.endAngle,b=l.clockWise,x=(h+m)/2,_=Cse(y,w),M=_>=0?1:-1,T,A;i==="insideStart"?(T=y+M*s,A=b):i==="insideEnd"?(T=w-M*s,A=!b):i==="end"&&(T=w+M*s,A=b),A=_<=0?A:!A;var R=Nr(u,f,x,T),N=Nr(u,f,x,T+(A?1:-1)*359),O="M".concat(R.x,",").concat(R.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(A?0:1,`,
    `).concat(N.x,",").concat(N.y),k=bn(e.id)?xg("recharts-radial-line-"):e.id;return xe.createElement("text",t0({},r,{dominantBaseline:"central",className:Pn("recharts-radial-bar-label",o)}),xe.createElement("defs",null,xe.createElement("path",{id:k,d:O})),xe.createElement("textPath",{xlinkHref:"#".concat(k)},n))},Nse=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,s=a.cx,o=a.cy,l=a.innerRadius,u=a.outerRadius,f=a.startAngle,h=a.endAngle,m=(f+h)/2;if(i==="outside"){var y=Nr(s,o,u+r,m),w=y.x,b=y.y;return{x:w,y:b,textAnchor:w>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var x=(l+u)/2,_=Nr(s,o,x,m),M=_.x,T=_.y;return{x:M,y:T,textAnchor:"middle",verticalAnchor:"middle"}},Ose=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,s=n,o=s.x,l=s.y,u=s.width,f=s.height,h=f>=0?1:-1,m=h*i,y=h>0?"end":"start",w=h>0?"start":"end",b=u>=0?1:-1,x=b*i,_=b>0?"end":"start",M=b>0?"start":"end";if(a==="top"){var T={x:o+u/2,y:l-h*i,textAnchor:"middle",verticalAnchor:y};return ji(ji({},T),r?{height:Math.max(l-r.y,0),width:u}:{})}if(a==="bottom"){var A={x:o+u/2,y:l+f+m,textAnchor:"middle",verticalAnchor:w};return ji(ji({},A),r?{height:Math.max(r.y+r.height-(l+f),0),width:u}:{})}if(a==="left"){var R={x:o-x,y:l+f/2,textAnchor:_,verticalAnchor:"middle"};return ji(ji({},R),r?{width:Math.max(R.x-r.x,0),height:f}:{})}if(a==="right"){var N={x:o+u+x,y:l+f/2,textAnchor:M,verticalAnchor:"middle"};return ji(ji({},N),r?{width:Math.max(r.x+r.width-N.x,0),height:f}:{})}var O=r?{width:u,height:f}:{};return a==="insideLeft"?ji({x:o+x,y:l+f/2,textAnchor:M,verticalAnchor:"middle"},O):a==="insideRight"?ji({x:o+u-x,y:l+f/2,textAnchor:_,verticalAnchor:"middle"},O):a==="insideTop"?ji({x:o+u/2,y:l+m,textAnchor:"middle",verticalAnchor:w},O):a==="insideBottom"?ji({x:o+u/2,y:l+f-m,textAnchor:"middle",verticalAnchor:y},O):a==="insideTopLeft"?ji({x:o+x,y:l+m,textAnchor:M,verticalAnchor:w},O):a==="insideTopRight"?ji({x:o+u-x,y:l+m,textAnchor:_,verticalAnchor:w},O):a==="insideBottomLeft"?ji({x:o+x,y:l+f-m,textAnchor:M,verticalAnchor:y},O):a==="insideBottomRight"?ji({x:o+u-x,y:l+f-m,textAnchor:_,verticalAnchor:y},O):vg(a)&&(pt(a.x)||Ff(a.x))&&(pt(a.y)||Ff(a.y))?ji({x:o+Ga(a.x,u),y:l+Ga(a.y,f),textAnchor:"end",verticalAnchor:"end"},O):ji({x:o+u/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},O)},Rse=function(e){return"cx"in e&&pt(e.cx)};function Qi(t){var e=t.offset,n=e===void 0?5:e,r=_se(t,gse),i=ji({offset:n},r),a=i.viewBox,s=i.position,o=i.value,l=i.children,u=i.content,f=i.className,h=f===void 0?"":f,m=i.textBreakAll;if(!a||bn(o)&&bn(l)&&!L.isValidElement(u)&&!un(u))return null;if(L.isValidElement(u))return L.cloneElement(u,i);var y;if(un(u)){if(y=L.createElement(u,i),L.isValidElement(y))return y}else y=Ese(i);var w=Rse(a),b=en(i,!0);if(w&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Pse(i,y,b);var x=w?Nse(i):Ose(i);return xe.createElement(uh,t0({className:Pn("recharts-label",h)},b,x,{breakAll:m}),y)}Qi.displayName="Label";var ZH=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,l=e.radius,u=e.innerRadius,f=e.outerRadius,h=e.x,m=e.y,y=e.top,w=e.left,b=e.width,x=e.height,_=e.clockWise,M=e.labelViewBox;if(M)return M;if(pt(b)&&pt(x)){if(pt(h)&&pt(m))return{x:h,y:m,width:b,height:x};if(pt(y)&&pt(w))return{x:y,y:w,width:b,height:x}}return pt(h)&&pt(m)?{x:h,y:m,width:0,height:0}:pt(n)&&pt(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:f||l||o||0,clockWise:_}:e.viewBox?e.viewBox:{}},kse=function(e,n){return e?e===!0?xe.createElement(Qi,{key:"label-implicit",viewBox:n}):Fi(e)?xe.createElement(Qi,{key:"label-implicit",viewBox:n,value:e}):L.isValidElement(e)?e.type===Qi?L.cloneElement(e,{key:"label-implicit",viewBox:n}):xe.createElement(Qi,{key:"label-implicit",content:e,viewBox:n}):un(e)?xe.createElement(Qi,{key:"label-implicit",content:e,viewBox:n}):vg(e)?xe.createElement(Qi,t0({viewBox:n},e,{key:"label-implicit"})):null:null},jse=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=ZH(e),s=Fs(i,Qi).map(function(l,u){return L.cloneElement(l,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return s;var o=kse(e.label,n||a);return[o].concat(yse(s))};Qi.parseViewBox=ZH;Qi.renderCallByParent=jse;var ZE,jU;function Ise(){if(jU)return ZE;jU=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return ZE=t,ZE}var Dse=Ise();const Lse=Zn(Dse);function n0(t){"@babel/helpers - typeof";return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n0(t)}var Use=["valueAccessor"],Fse=["data","dataKey","clockWise","id","textBreakAll"];function zse(t){return Wse(t)||Hse(t)||Vse(t)||Bse()}function Bse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vse(t,e){if(t){if(typeof t=="string")return LP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LP(t,e)}}function Hse(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Wse(t){if(Array.isArray(t))return LP(t)}function LP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function j1(){return j1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j1.apply(this,arguments)}function IU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IU(Object(n),!0).forEach(function(r){Gse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gse(t,e,n){return e=$se(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $se(t){var e=qse(t,"string");return n0(e)=="symbol"?e:e+""}function qse(t,e){if(n0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(n0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LU(t,e){if(t==null)return{};var n=Xse(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Xse(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Yse=function(e){return Array.isArray(e.value)?Lse(e.value):e.value};function Fc(t){var e=t.valueAccessor,n=e===void 0?Yse:e,r=LU(t,Use),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,l=r.textBreakAll,u=LU(r,Fse);return!i||!i.length?null:xe.createElement(qn,{className:"recharts-label-list"},i.map(function(f,h){var m=bn(a)?n(f,h):Ui(f&&f.payload,a),y=bn(o)?{}:{id:"".concat(o,"-").concat(h)};return xe.createElement(Qi,j1({},en(f,!0),u,y,{parentViewBox:f.parentViewBox,value:m,textBreakAll:l,viewBox:Qi.parseViewBox(bn(s)?f:DU(DU({},f),{},{clockWise:s})),key:"label-".concat(h),index:h}))}))}Fc.displayName="LabelList";function Kse(t,e){return t?t===!0?xe.createElement(Fc,{key:"labelList-implicit",data:e}):xe.isValidElement(t)||un(t)?xe.createElement(Fc,{key:"labelList-implicit",data:e,content:t}):vg(t)?xe.createElement(Fc,j1({data:e},t,{key:"labelList-implicit"})):null:null}function Zse(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Fs(r,Fc).map(function(s,o){return L.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var a=Kse(t.label,e);return[a].concat(zse(i))}Fc.renderCallByParent=Zse;function r0(t){"@babel/helpers - typeof";return r0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r0(t)}function UP(){return UP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UP.apply(this,arguments)}function UU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UU(Object(n),!0).forEach(function(r){Jse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jse(t,e,n){return e=Qse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qse(t){var e=eoe(t,"string");return r0(e)=="symbol"?e:e+""}function eoe(t,e){if(r0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(r0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var toe=function(e,n){var r=Wa(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Ab=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,s=e.sign,o=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,f=l*(o?1:-1)+i,h=Math.asin(l/f)/k1,m=u?a:a+s*h,y=Nr(n,r,f,m),w=Nr(n,r,i,m),b=u?a-s*h:a,x=Nr(n,r,f*Math.cos(h*k1),b);return{center:y,circleTangency:w,lineTangency:x,theta:h}},JH=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,l=toe(s,o),u=s+l,f=Nr(n,r,a,s),h=Nr(n,r,a,u),m="M ".concat(f.x,",").concat(f.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var y=Nr(n,r,i,s),w=Nr(n,r,i,u);m+="L ".concat(w.x,",").concat(w.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=u),`,
            `).concat(y.x,",").concat(y.y," Z")}else m+="L ".concat(n,",").concat(r," Z");return m},noe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,f=e.endAngle,h=Wa(f-u),m=Ab({cx:n,cy:r,radius:a,angle:u,sign:h,cornerRadius:s,cornerIsExternal:l}),y=m.circleTangency,w=m.lineTangency,b=m.theta,x=Ab({cx:n,cy:r,radius:a,angle:f,sign:-h,cornerRadius:s,cornerIsExternal:l}),_=x.circleTangency,M=x.lineTangency,T=x.theta,A=l?Math.abs(u-f):Math.abs(u-f)-b-T;if(A<0)return o?"M ".concat(w.x,",").concat(w.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):JH({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:f});var R="M ".concat(w.x,",").concat(w.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(A>180),",").concat(+(h<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(M.x,",").concat(M.y,`
  `);if(i>0){var N=Ab({cx:n,cy:r,radius:i,angle:u,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),O=N.circleTangency,k=N.lineTangency,C=N.theta,I=Ab({cx:n,cy:r,radius:i,angle:f,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),F=I.circleTangency,V=I.lineTangency,W=I.theta,G=l?Math.abs(u-f):Math.abs(u-f)-C-W;if(G<0&&s===0)return"".concat(R,"L").concat(n,",").concat(r,"Z");R+="L".concat(V.x,",").concat(V.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(G>180),",").concat(+(h>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(k.x,",").concat(k.y,"Z")}else R+="L".concat(n,",").concat(r,"Z");return R},roe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},QH=function(e){var n=FU(FU({},roe),e),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,o=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,f=n.startAngle,h=n.endAngle,m=n.className;if(s<a||f===h)return null;var y=Pn("recharts-sector",m),w=s-a,b=Ga(o,w,0,!0),x;return b>0&&Math.abs(f-h)<360?x=noe({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(b,w/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:f,endAngle:h}):x=JH({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:f,endAngle:h}),xe.createElement("path",UP({},en(n,!0),{className:y,d:x,role:"img"}))};function i0(t){"@babel/helpers - typeof";return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i0(t)}function FP(){return FP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FP.apply(this,arguments)}function zU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zU(Object(n),!0).forEach(function(r){ioe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ioe(t,e,n){return e=aoe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aoe(t){var e=soe(t,"string");return i0(e)=="symbol"?e:e+""}function soe(t,e){if(i0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(i0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VU={curveBasisClosed:AJ,curveBasisOpen:EJ,curveBasis:TJ,curveBumpX:dJ,curveBumpY:fJ,curveLinearClosed:CJ,curveLinear:I_,curveMonotoneX:PJ,curveMonotoneY:NJ,curveNatural:OJ,curveStep:RJ,curveStepAfter:jJ,curveStepBefore:kJ},Eb=function(e){return e.x===+e.x&&e.y===+e.y},ky=function(e){return e.x},jy=function(e){return e.y},ooe=function(e,n){if(un(e))return e;var r="curve".concat(k_(e));return(r==="curveMonotone"||r==="curveBump")&&n?VU["".concat(r).concat(n==="vertical"?"Y":"X")]:VU[r]||I_},loe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,s=e.baseLine,o=e.layout,l=e.connectNulls,u=l===void 0?!1:l,f=ooe(r,o),h=u?a.filter(function(b){return Eb(b)}):a,m;if(Array.isArray(s)){var y=u?s.filter(function(b){return Eb(b)}):s,w=h.map(function(b,x){return BU(BU({},b),{},{base:y[x]})});return o==="vertical"?m=vb().y(jy).x1(ky).x0(function(b){return b.base.x}):m=vb().x(ky).y1(jy).y0(function(b){return b.base.y}),m.defined(Eb).curve(f),m(w)}return o==="vertical"&&pt(s)?m=vb().y(jy).x1(ky).x0(s):pt(s)?m=vb().x(ky).y1(jy).y0(s):m=Z8().x(ky).y(jy),m.defined(Eb).curve(f),m(h)},I1=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?loe(e):i;return L.createElement("path",FP({},en(e,!1),l1(e),{className:Pn("recharts-curve",n),d:s,ref:a}))},JE={exports:{}},QE,HU;function coe(){if(HU)return QE;HU=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return QE=t,QE}var e2,WU;function uoe(){if(WU)return e2;WU=1;var t=coe();function e(){}function n(){}return n.resetWarningCache=e,e2=function(){function r(s,o,l,u,f,h){if(h!==t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},e2}var GU;function doe(){return GU||(GU=1,JE.exports=uoe()()),JE.exports}var foe=doe();const tr=Zn(foe);var hoe=Object.getOwnPropertyNames,poe=Object.getOwnPropertySymbols,moe=Object.prototype.hasOwnProperty;function $U(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function Cb(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var a=i.cache,s=a.get(n),o=a.get(r);if(s&&o)return s===r&&o===n;a.set(n,r),a.set(r,n);var l=t(n,r,i);return a.delete(n),a.delete(r),l}}function goe(t){return t?.[Symbol.toStringTag]}function qU(t){return hoe(t).concat(poe(t))}var yoe=Object.hasOwn||(function(t,e){return moe.call(t,e)});function Mh(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var voe="__v",xoe="__o",boe="_owner",XU=Object.getOwnPropertyDescriptor,YU=Object.keys;function woe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function _oe(t,e){return Mh(t.getTime(),e.getTime())}function Soe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Moe(t,e){return t===e}function KU(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.entries(),s,o,l=0;(s=a.next())&&!s.done;){for(var u=e.entries(),f=!1,h=0;(o=u.next())&&!o.done;){if(i[h]){h++;continue}var m=s.value,y=o.value;if(n.equals(m[0],y[0],l,h,t,e,n)&&n.equals(m[1],y[1],m[0],y[0],t,e,n)){f=i[h]=!0;break}h++}if(!f)return!1;l++}return!0}var Toe=Mh;function Aoe(t,e,n){var r=YU(t),i=r.length;if(YU(e).length!==i)return!1;for(;i-- >0;)if(!eW(t,e,n,r[i]))return!1;return!0}function Iy(t,e,n){var r=qU(t),i=r.length;if(qU(e).length!==i)return!1;for(var a,s,o;i-- >0;)if(a=r[i],!eW(t,e,n,a)||(s=XU(t,a),o=XU(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function Eoe(t,e){return Mh(t.valueOf(),e.valueOf())}function Coe(t,e){return t.source===e.source&&t.flags===e.flags}function ZU(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.values(),s,o;(s=a.next())&&!s.done;){for(var l=e.values(),u=!1,f=0;(o=l.next())&&!o.done;){if(!i[f]&&n.equals(s.value,o.value,s.value,o.value,t,e,n)){u=i[f]=!0;break}f++}if(!u)return!1}return!0}function Poe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function Noe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function eW(t,e,n,r){return(r===boe||r===xoe||r===voe)&&(t.$$typeof||e.$$typeof)?!0:yoe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var Ooe="[object Arguments]",Roe="[object Boolean]",koe="[object Date]",joe="[object Error]",Ioe="[object Map]",Doe="[object Number]",Loe="[object Object]",Uoe="[object RegExp]",Foe="[object Set]",zoe="[object String]",Boe="[object URL]",Voe=Array.isArray,JU=typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView:null,QU=Object.assign,Hoe=Object.prototype.toString.call.bind(Object.prototype.toString);function Woe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,s=t.areNumbersEqual,o=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,f=t.areSetsEqual,h=t.areTypedArraysEqual,m=t.areUrlsEqual,y=t.unknownTagComparators;return function(b,x,_){if(b===x)return!0;if(b==null||x==null)return!1;var M=typeof b;if(M!==typeof x)return!1;if(M!=="object")return M==="number"?s(b,x,_):M==="function"?i(b,x,_):!1;var T=b.constructor;if(T!==x.constructor)return!1;if(T===Object)return o(b,x,_);if(Voe(b))return e(b,x,_);if(JU!=null&&JU(b))return h(b,x,_);if(T===Date)return n(b,x,_);if(T===RegExp)return u(b,x,_);if(T===Map)return a(b,x,_);if(T===Set)return f(b,x,_);var A=Hoe(b);if(A===koe)return n(b,x,_);if(A===Uoe)return u(b,x,_);if(A===Ioe)return a(b,x,_);if(A===Foe)return f(b,x,_);if(A===Loe)return typeof b.then!="function"&&typeof x.then!="function"&&o(b,x,_);if(A===Boe)return m(b,x,_);if(A===joe)return r(b,x,_);if(A===Ooe)return o(b,x,_);if(A===Roe||A===Doe||A===zoe)return l(b,x,_);if(y){var R=y[A];if(!R){var N=goe(b);N&&(R=y[N])}if(R)return R(b,x,_)}return!1}}function Goe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Iy:woe,areDatesEqual:_oe,areErrorsEqual:Soe,areFunctionsEqual:Moe,areMapsEqual:r?$U(KU,Iy):KU,areNumbersEqual:Toe,areObjectsEqual:r?Iy:Aoe,arePrimitiveWrappersEqual:Eoe,areRegExpsEqual:Coe,areSetsEqual:r?$U(ZU,Iy):ZU,areTypedArraysEqual:r?Iy:Poe,areUrlsEqual:Noe,unknownTagComparators:void 0};if(n&&(i=QU({},i,n(i))),e){var a=Cb(i.areArraysEqual),s=Cb(i.areMapsEqual),o=Cb(i.areObjectsEqual),l=Cb(i.areSetsEqual);i=QU({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return i}function $oe(t){return function(e,n,r,i,a,s,o){return t(e,n,o)}}function qoe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,a=t.strict;if(r)return function(l,u){var f=r(),h=f.cache,m=h===void 0?e?new WeakMap:void 0:h,y=f.meta;return n(l,u,{cache:m,equals:i,meta:y,strict:a})};if(e)return function(l,u){return n(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,u){return n(l,u,s)}}var Xoe=bd();bd({strict:!0});bd({circular:!0});bd({circular:!0,strict:!0});bd({createInternalComparator:function(){return Mh}});bd({strict:!0,createInternalComparator:function(){return Mh}});bd({circular:!0,createInternalComparator:function(){return Mh}});bd({circular:!0,createInternalComparator:function(){return Mh},strict:!0});function bd(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,a=t.strict,s=a===void 0?!1:a,o=Goe(t),l=Woe(o),u=r?r(l):$oe(l);return qoe({circular:n,comparator:l,createState:i,equals:u,strict:s})}function Yoe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function eF(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):Yoe(i)};requestAnimationFrame(r)}function zP(t){"@babel/helpers - typeof";return zP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zP(t)}function Koe(t){return ele(t)||Qoe(t)||Joe(t)||Zoe()}function Zoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Joe(t,e){if(t){if(typeof t=="string")return tF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tF(t,e)}}function tF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qoe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ele(t){if(Array.isArray(t))return t}function tle(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,o=Koe(s),l=o[0],u=o.slice(1);if(typeof l=="number"){eF(i.bind(null,u),l);return}i(l),eF(i.bind(null,u));return}zP(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function a0(t){"@babel/helpers - typeof";return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a0(t)}function nF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nF(Object(n),!0).forEach(function(r){tW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tW(t,e,n){return e=nle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nle(t){var e=rle(t,"string");return a0(e)==="symbol"?e:String(e)}function rle(t,e){if(a0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(a0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ile=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},ale=function(e){return e},sle=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},yv=function(e,n){return Object.keys(n).reduce(function(r,i){return rF(rF({},r),{},tW({},i,e(i,n[i])))},{})},iF=function(e,n,r){return e.map(function(i){return"".concat(sle(i)," ").concat(n,"ms ").concat(r)}).join(",")};function ole(t,e){return ule(t)||cle(t,e)||nW(t,e)||lle()}function lle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cle(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function ule(t){if(Array.isArray(t))return t}function dle(t){return ple(t)||hle(t)||nW(t)||fle()}function fle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nW(t,e){if(t){if(typeof t=="string")return BP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BP(t,e)}}function hle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ple(t){if(Array.isArray(t))return BP(t)}function BP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var D1=1e-4,rW=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},iW=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},aF=function(e,n){return function(r){var i=rW(e,n);return iW(i,r)}},mle=function(e,n){return function(r){var i=rW(e,n),a=[].concat(dle(i.map(function(s,o){return s*o}).slice(1)),[0]);return iW(a,r)}},sF=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),f=ole(u,4);i=f[0],a=f[1],s=f[2],o=f[3]}}}var h=aF(i,s),m=aF(a,o),y=mle(i,s),w=function(_){return _>1?1:_<0?0:_},b=function(_){for(var M=_>1?1:_,T=M,A=0;A<8;++A){var R=h(T)-M,N=y(T);if(Math.abs(R-M)<D1||N<D1)return m(T);T=w(T-R/N)}return m(T)};return b.isStepper=!1,b},gle=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,s=e.dt,o=s===void 0?17:s,l=function(f,h,m){var y=-(f-h)*r,w=m*a,b=m+(y-w)*o/1e3,x=m*o/1e3+f;return Math.abs(x-h)<D1&&Math.abs(b)<D1?[h,0]:[x,b]};return l.isStepper=!0,l.dt=o,l},yle=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return sF(i);case"spring":return gle();default:if(i.split("(")[0]==="cubic-bezier")return sF(i)}return typeof i=="function"?i:null};function s0(t){"@babel/helpers - typeof";return s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s0(t)}function oF(t){return ble(t)||xle(t)||aW(t)||vle()}function vle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ble(t){if(Array.isArray(t))return HP(t)}function lF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function da(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lF(Object(n),!0).forEach(function(r){VP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VP(t,e,n){return e=wle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wle(t){var e=_le(t,"string");return s0(e)==="symbol"?e:String(e)}function _le(t,e){if(s0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(s0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sle(t,e){return Ale(t)||Tle(t,e)||aW(t,e)||Mle()}function Mle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aW(t,e){if(t){if(typeof t=="string")return HP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HP(t,e)}}function HP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tle(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Ale(t){if(Array.isArray(t))return t}var L1=function(e,n,r){return e+(n-e)*r},WP=function(e){var n=e.from,r=e.to;return n!==r},Ele=function t(e,n,r){var i=yv(function(a,s){if(WP(s)){var o=e(s.from,s.to,s.velocity),l=Sle(o,2),u=l[0],f=l[1];return da(da({},s),{},{from:u,velocity:f})}return s},n);return r<1?yv(function(a,s){return WP(s)?da(da({},s),{},{velocity:L1(s.velocity,i[a].velocity,r),from:L1(s.from,i[a].from,r)}):s},n):t(e,i,r-1)};const Cle=(function(t,e,n,r,i){var a=ile(t,e),s=a.reduce(function(x,_){return da(da({},x),{},VP({},_,[t[_],e[_]]))},{}),o=a.reduce(function(x,_){return da(da({},x),{},VP({},_,{from:t[_],velocity:0,to:e[_]}))},{}),l=-1,u,f,h=function(){return null},m=function(){return yv(function(_,M){return M.from},o)},y=function(){return!Object.values(o).filter(WP).length},w=function(_){u||(u=_);var M=_-u,T=M/n.dt;o=Ele(n,o,T),i(da(da(da({},t),e),m())),u=_,y()||(l=requestAnimationFrame(h))},b=function(_){f||(f=_);var M=(_-f)/r,T=yv(function(R,N){return L1.apply(void 0,oF(N).concat([n(M)]))},s);if(i(da(da(da({},t),e),T)),M<1)l=requestAnimationFrame(h);else{var A=yv(function(R,N){return L1.apply(void 0,oF(N).concat([n(1)]))},s);i(da(da(da({},t),e),A))}};return h=n.isStepper?w:b,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(l)}}});function Wm(t){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wm(t)}var Ple=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Nle(t,e){if(t==null)return{};var n=Ole(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ole(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function t2(t){return Ile(t)||jle(t)||kle(t)||Rle()}function Rle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kle(t,e){if(t){if(typeof t=="string")return GP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GP(t,e)}}function jle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ile(t){if(Array.isArray(t))return GP(t)}function GP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cF(Object(n),!0).forEach(function(r){lv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lv(t,e,n){return e=sW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dle(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lle(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sW(r.key),r)}}function Ule(t,e,n){return e&&Lle(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function sW(t){var e=Fle(t,"string");return Wm(e)==="symbol"?e:String(e)}function Fle(t,e){if(Wm(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zle(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$P(t,e)}function $P(t,e){return $P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$P(t,e)}function Ble(t){var e=Vle();return function(){var r=U1(t),i;if(e){var a=U1(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return qP(this,i)}}function qP(t,e){if(e&&(Wm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XP(t)}function XP(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vle(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function U1(t){return U1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},U1(t)}var jl=(function(t){zle(n,t);var e=Ble(n);function n(r,i){var a;Dle(this,n),a=e.call(this,r,i);var s=a.props,o=s.isActive,l=s.attributeName,u=s.from,f=s.to,h=s.steps,m=s.children,y=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(XP(a)),a.changeStyle=a.changeStyle.bind(XP(a)),!o||y<=0)return a.state={style:{}},typeof m=="function"&&(a.state={style:f}),qP(a);if(h&&h.length)a.state={style:h[0].style};else if(u){if(typeof m=="function")return a.state={style:u},qP(a);a.state={style:l?lv({},l,u):u}}else a.state={style:{}};return a}return Ule(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,l=a.attributeName,u=a.shouldReAnimate,f=a.to,h=a.from,m=this.state.style;if(o){if(!s){var y={style:l?lv({},l,f):f};this.state&&m&&(l&&m[l]!==f||!l&&m!==f)&&this.setState(y);return}if(!(Xoe(i.to,f)&&i.canBegin&&i.isActive)){var w=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var b=w||u?h:i.to;if(this.state&&m){var x={style:l?lv({},l,b):b};(l&&m[l]!==b||!l&&m!==b)&&this.setState(x)}this.runAnimation(Bo(Bo({},this.props),{},{from:b,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,l=i.duration,u=i.easing,f=i.begin,h=i.onAnimationEnd,m=i.onAnimationStart,y=Cle(s,o,yle(u),l,this.changeStyle),w=function(){a.stopJSAnimation=y()};this.manager.start([m,f,w,l,h])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,l=i.onAnimationStart,u=s[0],f=u.style,h=u.duration,m=h===void 0?0:h,y=function(b,x,_){if(_===0)return b;var M=x.duration,T=x.easing,A=T===void 0?"ease":T,R=x.style,N=x.properties,O=x.onAnimationEnd,k=_>0?s[_-1]:x,C=N||Object.keys(R);if(typeof A=="function"||A==="spring")return[].concat(t2(b),[a.runJSAnimation.bind(a,{from:k.style,to:R,duration:M,easing:A}),M]);var I=iF(C,M,A),F=Bo(Bo(Bo({},k.style),R),{},{transition:I});return[].concat(t2(b),[F,M,O]).filter(ale)};return this.manager.start([l].concat(t2(s.reduce(y,[f,Math.max(m,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=tle());var a=i.begin,s=i.duration,o=i.attributeName,l=i.to,u=i.easing,f=i.onAnimationStart,h=i.onAnimationEnd,m=i.steps,y=i.children,w=this.manager;if(this.unSubscribe=w.subscribe(this.handleStyleChange),typeof u=="function"||typeof y=="function"||u==="spring"){this.runJSAnimation(i);return}if(m.length>1){this.runStepAnimation(i);return}var b=o?lv({},o,l):l,x=iF(Object.keys(b),s,u);w.start([f,a,Bo(Bo({},b),{},{transition:x}),s,h])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=Nle(i,Ple),u=L.Children.count(a),f=this.state.style;if(typeof a=="function")return a(f);if(!o||u===0||s<=0)return a;var h=function(y){var w=y.props,b=w.style,x=b===void 0?{}:b,_=w.className,M=L.cloneElement(y,Bo(Bo({},l),{},{style:Bo(Bo({},x),f),className:_}));return M};return u===1?h(L.Children.only(a)):xe.createElement("div",null,L.Children.map(a,function(m){return h(m)}))}}]),n})(L.PureComponent);jl.displayName="Animate";jl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};jl.propTypes={from:tr.oneOfType([tr.object,tr.string]),to:tr.oneOfType([tr.object,tr.string]),attributeName:tr.string,duration:tr.number,begin:tr.number,easing:tr.oneOfType([tr.string,tr.func]),steps:tr.arrayOf(tr.shape({duration:tr.number.isRequired,style:tr.object.isRequired,easing:tr.oneOfType([tr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),tr.func]),properties:tr.arrayOf("string"),onAnimationEnd:tr.func})),children:tr.oneOfType([tr.node,tr.func]),isActive:tr.bool,canBegin:tr.bool,onAnimationEnd:tr.func,shouldReAnimate:tr.bool,onAnimationStart:tr.func,onAnimationReStart:tr.func};function hh(){return hh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hh.apply(null,arguments)}function o0(t){"@babel/helpers - typeof";return o0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o0(t)}function F1(){return F1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F1.apply(this,arguments)}function Hle(t,e){return qle(t)||$le(t,e)||Gle(t,e)||Wle()}function Wle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gle(t,e){if(t){if(typeof t=="string")return uF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uF(t,e)}}function uF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $le(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function qle(t){if(Array.isArray(t))return t}function dF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dF(Object(n),!0).forEach(function(r){Xle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xle(t,e,n){return e=Yle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yle(t){var e=Kle(t,"string");return o0(e)=="symbol"?e:e+""}function Kle(t,e){if(o0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(o0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hF=function(e,n,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,f;if(s>0&&a instanceof Array){for(var h=[0,0,0,0],m=0,y=4;m<y;m++)h[m]=a[m]>s?s:a[m];f="M".concat(e,",").concat(n+o*h[0]),h[0]>0&&(f+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(e+l*h[0],",").concat(n)),f+="L ".concat(e+r-l*h[1],",").concat(n),h[1]>0&&(f+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+o*h[1])),f+="L ".concat(e+r,",").concat(n+i-o*h[2]),h[2]>0&&(f+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(e+r-l*h[2],",").concat(n+i)),f+="L ".concat(e+l*h[3],",").concat(n+i),h[3]>0&&(f+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-o*h[3])),f+="Z"}else if(s>0&&a===+a&&a>0){var w=Math.min(s,a);f="M ".concat(e,",").concat(n+o*w,`
            A `).concat(w,",").concat(w,",0,0,").concat(u,",").concat(e+l*w,",").concat(n,`
            L `).concat(e+r-l*w,",").concat(n,`
            A `).concat(w,",").concat(w,",0,0,").concat(u,",").concat(e+r,",").concat(n+o*w,`
            L `).concat(e+r,",").concat(n+i-o*w,`
            A `).concat(w,",").concat(w,",0,0,").concat(u,",").concat(e+r-l*w,",").concat(n+i,`
            L `).concat(e+l*w,",").concat(n+i,`
            A `).concat(w,",").concat(w,",0,0,").concat(u,",").concat(e,",").concat(n+i-o*w," Z")}else f="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return f},Zle=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,s=n.y,o=n.width,l=n.height;if(Math.abs(o)>0&&Math.abs(l)>0){var u=Math.min(a,a+o),f=Math.max(a,a+o),h=Math.min(s,s+l),m=Math.max(s,s+l);return r>=u&&r<=f&&i>=h&&i<=m}return!1},Jle={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zR=function(e){var n=fF(fF({},Jle),e),r=L.useRef(),i=L.useState(-1),a=Hle(i,2),s=a[0],o=a[1];L.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&o(A)}catch{}},[]);var l=n.x,u=n.y,f=n.width,h=n.height,m=n.radius,y=n.className,w=n.animationEasing,b=n.animationDuration,x=n.animationBegin,_=n.isAnimationActive,M=n.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||h!==+h||f===0||h===0)return null;var T=Pn("recharts-rectangle",y);return M?xe.createElement(jl,{canBegin:s>0,from:{width:f,height:h,x:l,y:u},to:{width:f,height:h,x:l,y:u},duration:b,animationEasing:w,isActive:M},function(A){var R=A.width,N=A.height,O=A.x,k=A.y;return xe.createElement(jl,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:b,isActive:_,easing:w},xe.createElement("path",F1({},en(n,!0),{className:T,d:hF(O,k,R,N,m),ref:r})))}):xe.createElement("path",F1({},en(n,!0),{className:T,d:hF(l,u,f,h,m)}))},Qle=["points","className","baseLinePoints","connectNulls"];function cm(){return cm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cm.apply(this,arguments)}function ece(t,e){if(t==null)return{};var n=tce(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function pF(t){return ace(t)||ice(t)||rce(t)||nce()}function nce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rce(t,e){if(t){if(typeof t=="string")return YP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YP(t,e)}}function ice(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ace(t){if(Array.isArray(t))return YP(t)}function YP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var mF=function(e){return e&&e.x===+e.x&&e.y===+e.y},sce=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){mF(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),mF(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},vv=function(e,n){var r=sce(e);n&&(r=[r.reduce(function(a,s){return[].concat(pF(a),pF(s))},[])]);var i=r.map(function(a){return a.reduce(function(s,o,l){return"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},oce=function(e,n,r){var i=vv(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(vv(n.reverse(),r).slice(1))},lce=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,a=e.connectNulls,s=ece(e,Qle);if(!n||!n.length)return null;var o=Pn("recharts-polygon",r);if(i&&i.length){var l=s.stroke&&s.stroke!=="none",u=oce(n,i,a);return xe.createElement("g",{className:o},xe.createElement("path",cm({},en(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),l?xe.createElement("path",cm({},en(s,!0),{fill:"none",d:vv(n,a)})):null,l?xe.createElement("path",cm({},en(s,!0),{fill:"none",d:vv(i,a)})):null)}var f=vv(n,a);return xe.createElement("path",cm({},en(s,!0),{fill:f.slice(-1)==="Z"?s.fill:"none",className:o,d:f}))};function KP(){return KP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KP.apply(this,arguments)}var Z_=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,s=Pn("recharts-dot",a);return n===+n&&r===+r&&i===+i?L.createElement("circle",KP({},en(e,!1),l1(e),{className:s,cx:n,cy:r,r:i})):null};function l0(t){"@babel/helpers - typeof";return l0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l0(t)}var cce=["x","y","top","left","width","height","className"];function ZP(){return ZP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZP.apply(this,arguments)}function gF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gF(Object(n),!0).forEach(function(r){dce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dce(t,e,n){return e=fce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fce(t){var e=hce(t,"string");return l0(e)=="symbol"?e:e+""}function hce(t,e){if(l0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(l0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pce(t,e){if(t==null)return{};var n=mce(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var gce=function(e,n,r,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},yce=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.top,o=s===void 0?0:s,l=e.left,u=l===void 0?0:l,f=e.width,h=f===void 0?0:f,m=e.height,y=m===void 0?0:m,w=e.className,b=pce(e,cce),x=uce({x:r,y:a,top:o,left:u,width:h,height:y},b);return!pt(r)||!pt(a)||!pt(h)||!pt(y)||!pt(o)||!pt(u)?null:xe.createElement("path",ZP({},en(x,!0),{className:Pn("recharts-cross",w),d:gce(r,a,h,y,o,u)}))},n2,yF;function vce(){if(yF)return n2;yF=1;var t=$_(),e=wH(),n=Fl();function r(i,a){return i&&i.length?t(i,n(a,2),e):void 0}return n2=r,n2}var xce=vce();const bce=Zn(xce);var r2,vF;function wce(){if(vF)return r2;vF=1;var t=$_(),e=Fl(),n=_H();function r(i,a){return i&&i.length?t(i,e(a,2),n):void 0}return r2=r,r2}var _ce=wce();const Sce=Zn(_ce);var Mce=["cx","cy","angle","ticks","axisLine"],Tce=["ticks","tick","angle","tickFormatter","stroke"];function Gm(t){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gm(t)}function xv(){return xv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xv.apply(this,arguments)}function xF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xF(Object(n),!0).forEach(function(r){J_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bF(t,e){if(t==null)return{};var n=Ace(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ace(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ece(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lW(r.key),r)}}function Cce(t,e,n){return e&&wF(t.prototype,e),n&&wF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pce(t,e,n){return e=z1(e),Nce(t,oW()?Reflect.construct(e,n||[],z1(t).constructor):e.apply(t,n))}function Nce(t,e){if(e&&(Gm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oce(t)}function Oce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oW=function(){return!!t})()}function z1(t){return z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},z1(t)}function Rce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JP(t,e)}function JP(t,e){return JP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},JP(t,e)}function J_(t,e,n){return e=lW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lW(t){var e=kce(t,"string");return Gm(e)=="symbol"?e:e+""}function kce(t,e){if(Gm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Q_=(function(t){function e(){return Ece(this,e),Pce(this,e,arguments)}return Rce(e,t),Cce(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,s=a.angle,o=a.cx,l=a.cy;return Nr(o,l,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,l=bce(o,function(f){return f.coordinate||0}),u=Sce(o,function(f){return f.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,l=r.axisLine,u=bF(r,Mce),f=o.reduce(function(w,b){return[Math.min(w[0],b.coordinate),Math.max(w[1],b.coordinate)]},[1/0,-1/0]),h=Nr(i,a,f[0],s),m=Nr(i,a,f[1],s),y=hf(hf(hf({},en(u,!1)),{},{fill:"none"},en(l,!1)),{},{x1:h.x,y1:h.y,x2:m.x,y2:m.y});return xe.createElement("line",xv({className:"recharts-polar-radius-axis-line"},y))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.angle,l=i.tickFormatter,u=i.stroke,f=bF(i,Tce),h=this.getTickTextAnchor(),m=en(f,!1),y=en(s,!1),w=a.map(function(b,x){var _=r.getTickValueCoord(b),M=hf(hf(hf(hf({textAnchor:h,transform:"rotate(".concat(90-o,", ").concat(_.x,", ").concat(_.y,")")},m),{},{stroke:"none",fill:u},y),{},{index:x},_),{},{payload:b});return xe.createElement(qn,xv({className:Pn("recharts-polar-radius-axis-tick",KH(s)),key:"tick-".concat(b.coordinate)},ch(r.props,b,x)),e.renderTickItem(s,M,l?l(b.value,x):b.value))});return xe.createElement(qn,{className:"recharts-polar-radius-axis-ticks"},w)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,s=r.tick;return!i||!i.length?null:xe.createElement(qn,{className:Pn("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),Qi.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return xe.isValidElement(r)?s=xe.cloneElement(r,i):un(r)?s=r(i):s=xe.createElement(uh,xv({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])})(L.PureComponent);J_(Q_,"displayName","PolarRadiusAxis");J_(Q_,"axisType","radiusAxis");J_(Q_,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function $m(t){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$m(t)}function Lf(){return Lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lf.apply(this,arguments)}function _F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_F(Object(n),!0).forEach(function(r){eS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_F(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uW(r.key),r)}}function Ice(t,e,n){return e&&SF(t.prototype,e),n&&SF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dce(t,e,n){return e=B1(e),Lce(t,cW()?Reflect.construct(e,n||[],B1(t).constructor):e.apply(t,n))}function Lce(t,e){if(e&&($m(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uce(t)}function Uce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cW=function(){return!!t})()}function B1(t){return B1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},B1(t)}function Fce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QP(t,e)}function QP(t,e){return QP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},QP(t,e)}function eS(t,e,n){return e=uW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uW(t){var e=zce(t,"string");return $m(e)=="symbol"?e:e+""}function zce(t,e){if($m(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Bce=Math.PI/180,MF=1e-5,tS=(function(t){function e(){return jce(this,e),Dce(this,e,arguments)}return Fce(e,t),Ice(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,s=i.cy,o=i.radius,l=i.orientation,u=i.tickSize,f=u||8,h=Nr(a,s,o,r.coordinate),m=Nr(a,s,o+(l==="inner"?-1:1)*f,r.coordinate);return{x1:h.x,y1:h.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*Bce),s;return a>MF?s=i==="outer"?"start":"end":a<-MF?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.radius,o=r.axisLine,l=r.axisLineType,u=pf(pf({},en(this.props,!1)),{},{fill:"none"},en(o,!1));if(l==="circle")return xe.createElement(Z_,Lf({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:s}));var f=this.props.ticks,h=f.map(function(m){return Nr(i,a,s,m.coordinate)});return xe.createElement(lce,Lf({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.tickLine,l=i.tickFormatter,u=i.stroke,f=en(this.props,!1),h=en(s,!1),m=pf(pf({},f),{},{fill:"none"},en(o,!1)),y=a.map(function(w,b){var x=r.getTickLineCoord(w),_=r.getTickTextAnchor(w),M=pf(pf(pf({textAnchor:_},f),{},{stroke:"none",fill:u},h),{},{index:b,payload:w,x:x.x2,y:x.y2});return xe.createElement(qn,Lf({className:Pn("recharts-polar-angle-axis-tick",KH(s)),key:"tick-".concat(w.coordinate)},ch(r.props,w,b)),o&&xe.createElement("line",Lf({className:"recharts-polar-angle-axis-tick-line"},m,x)),s&&e.renderTickItem(s,M,l?l(w.value,b):w.value))});return xe.createElement(qn,{className:"recharts-polar-angle-axis-ticks"},y)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,s=r.axisLine;return a<=0||!i||!i.length?null:xe.createElement(qn,{className:Pn("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var s;return xe.isValidElement(r)?s=xe.cloneElement(r,i):un(r)?s=r(i):s=xe.createElement(uh,Lf({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])})(L.PureComponent);eS(tS,"displayName","PolarAngleAxis");eS(tS,"axisType","angleAxis");eS(tS,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var i2,TF;function Vce(){if(TF)return i2;TF=1;var t=bV(),e=t(Object.getPrototypeOf,Object);return i2=e,i2}var a2,AF;function Hce(){if(AF)return a2;AF=1;var t=Jc(),e=Vce(),n=Qc(),r="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,o=a.hasOwnProperty,l=s.call(Object);function u(f){if(!n(f)||t(f)!=r)return!1;var h=e(f);if(h===null)return!0;var m=o.call(h,"constructor")&&h.constructor;return typeof m=="function"&&m instanceof m&&s.call(m)==l}return a2=u,a2}var Wce=Hce();const Gce=Zn(Wce);var s2,EF;function $ce(){if(EF)return s2;EF=1;var t=Jc(),e=Qc(),n="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==n}return s2=r,s2}var qce=$ce();const Xce=Zn(qce);function c0(t){"@babel/helpers - typeof";return c0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c0(t)}function V1(){return V1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V1.apply(this,arguments)}function Yce(t,e){return Qce(t)||Jce(t,e)||Zce(t,e)||Kce()}function Kce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zce(t,e){if(t){if(typeof t=="string")return CF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CF(t,e)}}function CF(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Jce(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Qce(t){if(Array.isArray(t))return t}function PF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PF(Object(n),!0).forEach(function(r){eue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eue(t,e,n){return e=tue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tue(t){var e=nue(t,"string");return c0(e)=="symbol"?e:e+""}function nue(t,e){if(c0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(c0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var OF=function(e,n,r,i,a){var s=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-s/2,",").concat(n+a),o+="L ".concat(e+r-s/2-i,",").concat(n+a),o+="L ".concat(e,",").concat(n," Z"),o},rue={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},iue=function(e){var n=NF(NF({},rue),e),r=L.useRef(),i=L.useState(-1),a=Yce(i,2),s=a[0],o=a[1];L.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&o(T)}catch{}},[]);var l=n.x,u=n.y,f=n.upperWidth,h=n.lowerWidth,m=n.height,y=n.className,w=n.animationEasing,b=n.animationDuration,x=n.animationBegin,_=n.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||h!==+h||m!==+m||f===0&&h===0||m===0)return null;var M=Pn("recharts-trapezoid",y);return _?xe.createElement(jl,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:m,x:l,y:u},to:{upperWidth:f,lowerWidth:h,height:m,x:l,y:u},duration:b,animationEasing:w,isActive:_},function(T){var A=T.upperWidth,R=T.lowerWidth,N=T.height,O=T.x,k=T.y;return xe.createElement(jl,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:b,easing:w},xe.createElement("path",V1({},en(n,!0),{className:M,d:OF(O,k,A,R,N),ref:r})))}):xe.createElement("g",null,xe.createElement("path",V1({},en(n,!0),{className:M,d:OF(l,u,f,h,m)})))},aue=["option","shapeType","propTransformer","activeClassName","isActive"];function u0(t){"@babel/helpers - typeof";return u0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u0(t)}function sue(t,e){if(t==null)return{};var n=oue(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function RF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function H1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RF(Object(n),!0).forEach(function(r){lue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lue(t,e,n){return e=cue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cue(t){var e=uue(t,"string");return u0(e)=="symbol"?e:e+""}function uue(t,e){if(u0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(u0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function due(t,e){return H1(H1({},e),t)}function fue(t,e){return t==="symbols"}function kF(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return xe.createElement(zR,n);case"trapezoid":return xe.createElement(iue,n);case"sector":return xe.createElement(QH,n);case"symbols":if(fue(e))return xe.createElement(aR,n);break;default:return null}}function hue(t){return L.isValidElement(t)?t.props:t}function dW(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?due:r,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,o=t.isActive,l=sue(t,aue),u;if(L.isValidElement(e))u=L.cloneElement(e,H1(H1({},l),hue(e)));else if(un(e))u=e(l);else if(Gce(e)&&!Xce(e)){var f=i(e,l);u=xe.createElement(kF,{shapeType:n,elementProps:f})}else{var h=l;u=xe.createElement(kF,{shapeType:n,elementProps:h})}return o?xe.createElement(qn,{className:s},u):u}function nS(t,e){return e!=null&&"trapezoids"in t.props}function rS(t,e){return e!=null&&"sectors"in t.props}function d0(t,e){return e!=null&&"points"in t.props}function pue(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function mue(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function gue(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function yue(t,e){var n;return nS(t,e)?n=pue:rS(t,e)?n=mue:d0(t,e)&&(n=gue),n}function vue(t,e){var n;return nS(t,e)?n="trapezoids":rS(t,e)?n="sectors":d0(t,e)&&(n="points"),n}function xue(t,e){if(nS(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(rS(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return d0(t,e)?e.payload:{}}function bue(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=vue(n,e),a=xue(n,e),s=r.filter(function(l,u){var f=nx(a,l),h=n.props[i].filter(function(w){var b=yue(n,e);return b(w,e)}),m=n.props[i].indexOf(h[h.length-1]),y=u===m;return f&&y}),o=r.indexOf(s[s.length-1]);return o}var Iw;function qm(t){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qm(t)}function um(){return um=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},um.apply(this,arguments)}function jF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Er(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jF(Object(n),!0).forEach(function(r){lo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hW(r.key),r)}}function _ue(t,e,n){return e&&IF(t.prototype,e),n&&IF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sue(t,e,n){return e=W1(e),Mue(t,fW()?Reflect.construct(e,n||[],W1(t).constructor):e.apply(t,n))}function Mue(t,e){if(e&&(qm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tue(t)}function Tue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fW=function(){return!!t})()}function W1(t){return W1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},W1(t)}function Aue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eN(t,e)}function eN(t,e){return eN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},eN(t,e)}function lo(t,e,n){return e=hW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hW(t){var e=Eue(t,"string");return qm(e)=="symbol"?e:e+""}function Eue(t,e){if(qm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zl=(function(t){function e(n){var r;return wue(this,e),r=Sue(this,e,[n]),lo(r,"pieRef",null),lo(r,"sectorRefs",[]),lo(r,"id",xg("recharts-pie-")),lo(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),un(i)&&i()}),lo(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),un(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return Aue(e,t),_ue(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,o=a.labelLine,l=a.dataKey,u=a.valueKey,f=en(this.props,!1),h=en(s,!1),m=en(o,!1),y=s&&s.offsetRadius||20,w=r.map(function(b,x){var _=(b.startAngle+b.endAngle)/2,M=Nr(b.cx,b.cy,b.outerRadius+y,_),T=Er(Er(Er(Er({},f),b),{},{stroke:"none"},h),{},{index:x,textAnchor:e.getTextAnchor(M.x,b.cx)},M),A=Er(Er(Er(Er({},f),b),{},{fill:"none",stroke:b.fill},m),{},{index:x,points:[Nr(b.cx,b.cy,b.outerRadius,_),M]}),R=l;return bn(l)&&bn(u)?R="value":bn(l)&&(R=u),xe.createElement(qn,{key:"label-".concat(b.startAngle,"-").concat(b.endAngle,"-").concat(b.midAngle,"-").concat(x)},o&&e.renderLabelLineItem(o,A,"line"),e.renderLabelItem(s,T,Ui(b,R)))});return xe.createElement(qn,{className:"recharts-pie-labels"},w)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,s=a.activeShape,o=a.blendStroke,l=a.inactiveShape;return r.map(function(u,f){if(u?.startAngle===0&&u?.endAngle===0&&r.length!==1)return null;var h=i.isActiveIndex(f),m=l&&i.hasActiveIndex()?l:null,y=h?s:m,w=Er(Er({},u),{},{stroke:o?u.fill:u.stroke,tabIndex:-1});return xe.createElement(qn,um({ref:function(x){x&&!i.sectorRefs.includes(x)&&i.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},ch(i.props,u,f),{key:"sector-".concat(u?.startAngle,"-").concat(u?.endAngle,"-").concat(u.midAngle,"-").concat(f)}),xe.createElement(dW,um({option:y,isActive:h,shapeType:"sector"},w)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,s=i.isAnimationActive,o=i.animationBegin,l=i.animationDuration,u=i.animationEasing,f=i.animationId,h=this.state,m=h.prevSectors,y=h.prevIsAnimationActive;return xe.createElement(jl,{begin:o,duration:l,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(y),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(w){var b=w.t,x=[],_=a&&a[0],M=_.startAngle;return a.forEach(function(T,A){var R=m&&m[A],N=A>0?Us(T,"paddingAngle",0):0;if(R){var O=Is(R.endAngle-R.startAngle,T.endAngle-T.startAngle),k=Er(Er({},T),{},{startAngle:M+N,endAngle:M+O(b)+N});x.push(k),M=k.endAngle}else{var C=T.endAngle,I=T.startAngle,F=Is(0,C-I),V=F(b),W=Er(Er({},T),{},{startAngle:M+N,endAngle:M+V+N});x.push(W),M=W.endAngle}}),xe.createElement(qn,null,r.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!nx(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,s=i.sectors,o=i.className,l=i.label,u=i.cx,f=i.cy,h=i.innerRadius,m=i.outerRadius,y=i.isAnimationActive,w=this.state.isAnimationFinished;if(a||!s||!s.length||!pt(u)||!pt(f)||!pt(h)||!pt(m))return null;var b=Pn("recharts-pie",o);return xe.createElement(qn,{tabIndex:this.props.rootTabIndex,className:b,ref:function(_){r.pieRef=_}},this.renderSectors(),l&&this.renderLabels(s),Qi.renderCallByParent(this.props,null,!1),(!y||w)&&Fc.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(xe.isValidElement(r))return xe.cloneElement(r,i);if(un(r))return r(i);var s=Pn("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return xe.createElement(I1,um({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,i,a){if(xe.isValidElement(r))return xe.cloneElement(r,i);var s=a;if(un(r)&&(s=r(i),xe.isValidElement(s)))return s;var o=Pn("recharts-pie-label-text",typeof r!="boolean"&&!un(r)?r.className:"");return xe.createElement(uh,um({},i,{alignmentBaseline:"middle",className:o}),s)}}])})(L.PureComponent);Iw=zl;lo(zl,"displayName","Pie");lo(zl,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!wh.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});lo(zl,"parseDeltaAngle",function(t,e){var n=Wa(e-t),r=Math.min(Math.abs(e-t),360);return n*r});lo(zl,"getRealPieData",function(t){var e=t.data,n=t.children,r=en(t,!1),i=Fs(n,Fm);return e&&e.length?e.map(function(a,s){return Er(Er(Er({payload:a},r),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return Er(Er({},r),a.props)}):[]});lo(zl,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,a=e.height,s=YH(i,a),o=r+Ga(t.cx,i,i/2),l=n+Ga(t.cy,a,a/2),u=Ga(t.innerRadius,s,0),f=Ga(t.outerRadius,s,s*.8),h=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:o,cy:l,innerRadius:u,outerRadius:f,maxRadius:h}});lo(zl,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?Er(Er({},e.type.defaultProps),e.props):e.props,i=Iw.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,s=r.startAngle,o=r.endAngle,l=r.paddingAngle,u=r.dataKey,f=r.nameKey,h=r.valueKey,m=r.tooltipType,y=Math.abs(r.minAngle),w=Iw.parseCoordinateOfPie(r,n),b=Iw.parseDeltaAngle(s,o),x=Math.abs(b),_=u;bn(u)&&bn(h)?(rl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_="value"):bn(u)&&(rl(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),_=h);var M=i.filter(function(k){return Ui(k,_,0)!==0}).length,T=(x>=360?M:M-1)*l,A=x-M*y-T,R=i.reduce(function(k,C){var I=Ui(C,_,0);return k+(pt(I)?I:0)},0),N;if(R>0){var O;N=i.map(function(k,C){var I=Ui(k,_,0),F=Ui(k,f,C),V=(pt(I)?I:0)/R,W;C?W=O.endAngle+Wa(b)*l*(I!==0?1:0):W=s;var G=W+Wa(b)*((I!==0?y:0)+V*A),J=(W+G)/2,ee=(w.innerRadius+w.outerRadius)/2,ae=[{name:F,value:I,payload:k,dataKey:_,type:m}],$=Nr(w.cx,w.cy,ee,J);return O=Er(Er(Er({percent:V,cornerRadius:a,name:F,tooltipPayload:ae,midAngle:J,middleRadius:ee,tooltipPosition:$},k),w),{},{value:Ui(k,_),startAngle:W,endAngle:G,payload:k,paddingAngle:Wa(b)*l}),O})}return Er(Er({},w),{},{sectors:N,data:i})});var o2,DF;function Cue(){if(DF)return o2;DF=1;var t=Math.ceil,e=Math.max;function n(r,i,a,s){for(var o=-1,l=e(t((i-r)/(a||1)),0),u=Array(l);l--;)u[s?l:++o]=r,r+=a;return u}return o2=n,o2}var l2,LF;function pW(){if(LF)return l2;LF=1;var t=DV(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*n}return i===i?i:0}return l2=r,l2}var c2,UF;function Pue(){if(UF)return c2;UF=1;var t=Cue(),e=F_(),n=pW();function r(i){return function(a,s,o){return o&&typeof o!="number"&&e(a,s,o)&&(s=o=void 0),a=n(a),s===void 0?(s=a,a=0):s=n(s),o=o===void 0?a<s?1:-1:n(o),t(a,s,o,i)}}return c2=r,c2}var u2,FF;function Nue(){if(FF)return u2;FF=1;var t=Pue(),e=t();return u2=e,u2}var Oue=Nue();const G1=Zn(Oue);function f0(t){"@babel/helpers - typeof";return f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f0(t)}function zF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zF(Object(n),!0).forEach(function(r){mW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mW(t,e,n){return e=Rue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rue(t){var e=kue(t,"string");return f0(e)=="symbol"?e:e+""}function kue(t,e){if(f0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(f0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jue=["Webkit","Moz","O","ms"],Iue=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=jue.reduce(function(a,s){return BF(BF({},a),{},mW({},s+r,n))},{});return i[e]=n,i};function Xm(t){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xm(t)}function $1(){return $1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$1.apply(this,arguments)}function VF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function d2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VF(Object(n),!0).forEach(function(r){ks(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Due(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yW(r.key),r)}}function Lue(t,e,n){return e&&HF(t.prototype,e),n&&HF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Uue(t,e,n){return e=q1(e),Fue(t,gW()?Reflect.construct(e,n||[],q1(t).constructor):e.apply(t,n))}function Fue(t,e){if(e&&(Xm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zue(t)}function zue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gW=function(){return!!t})()}function q1(t){return q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},q1(t)}function Bue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tN(t,e)}function tN(t,e){return tN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},tN(t,e)}function ks(t,e,n){return e=yW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yW(t){var e=Vue(t,"string");return Xm(e)=="symbol"?e:e+""}function Vue(t,e){if(Xm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hue=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=mv().domain(G1(0,l)).range([a,a+s-o]),f=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:f}},WF=function(e){return e.changedTouches&&!!e.changedTouches.length},Ym=(function(t){function e(n){var r;return Due(this,e),r=Uue(this,e,[n]),ks(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),ks(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),ks(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s?.({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),ks(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ks(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ks(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ks(r,"handleSlideDragStart",function(i){var a=WF(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Bue(e,t),Lue(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,o=this.props,l=o.gap,u=o.data,f=u.length-1,h=Math.min(i,a),m=Math.max(i,a),y=e.getIndexInRange(s,h),w=e.getIndexInRange(s,m);return{startIndex:y-y%l,endIndex:w===f?f:w-w%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,l=Ui(a[r],o,r);return un(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,l=this.props,u=l.x,f=l.width,h=l.travellerWidth,m=l.startIndex,y=l.endIndex,w=l.onChange,b=r.pageX-a;b>0?b=Math.min(b,u+f-h-o,u+f-h-s):b<0&&(b=Math.max(b,u-s,u-o));var x=this.getIndex({startX:s+b,endX:o+b});(x.startIndex!==m||x.endIndex!==y)&&w&&w(x),this.setState({startX:s+b,endX:o+b,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=WF(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,l=i.startX,u=this.state[s],f=this.props,h=f.x,m=f.width,y=f.travellerWidth,w=f.onChange,b=f.gap,x=f.data,_={startX:this.state.startX,endX:this.state.endX},M=r.pageX-a;M>0?M=Math.min(M,h+m-y-u):M<0&&(M=Math.max(M,h-u)),_[s]=u+M;var T=this.getIndex(_),A=T.startIndex,R=T.endIndex,N=function(){var k=x.length-1;return s==="startX"&&(o>l?A%b===0:R%b===0)||o<l&&R===k||s==="endX"&&(o>l?R%b===0:A%b===0)||o>l&&R===k};this.setState(ks(ks({},s,u+M),"brushMoveStartX",r.pageX),function(){w&&N()&&w(T)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,o=s.scaleValues,l=s.startX,u=s.endX,f=this.state[i],h=o.indexOf(f);if(h!==-1){var m=h+r;if(!(m===-1||m>=o.length)){var y=o[m];i==="startX"&&y>=u||i==="endX"&&y<=l||this.setState(ks({},i,y),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.fill,u=r.stroke;return xe.createElement("rect",{stroke:u,fill:l,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.data,u=r.children,f=r.padding,h=L.Children.only(u);return h?xe.cloneElement(h,{x:i,y:a,width:s,height:o,margin:f,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,o=this,l=this.props,u=l.y,f=l.travellerWidth,h=l.height,m=l.traveller,y=l.ariaLabel,w=l.data,b=l.startIndex,x=l.endIndex,_=Math.max(r,this.props.x),M=d2(d2({},en(this.props,!1)),{},{x:_,y:u,width:f,height:h}),T=y||"Min value: ".concat((a=w[b])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=w[x])===null||s===void 0?void 0:s.name);return xe.createElement(qn,{tabIndex:0,role:"slider","aria-label":T,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(R){["ArrowLeft","ArrowRight"].includes(R.key)&&(R.preventDefault(),R.stopPropagation(),o.handleTravellerMoveKeyboard(R.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(m,M))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,o=a.height,l=a.stroke,u=a.travellerWidth,f=Math.min(r,i)+u,h=Math.max(Math.abs(i-r)-u,0);return xe.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:f,y:s,width:h,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,o=r.height,l=r.travellerWidth,u=r.stroke,f=this.state,h=f.startX,m=f.endX,y=5,w={pointerEvents:"none",fill:u};return xe.createElement(qn,{className:"recharts-brush-texts"},xe.createElement(uh,$1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,m)-y,y:s+o/2},w),this.getTextOfTick(i)),xe.createElement(uh,$1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,m)+l+y,y:s+o/2},w),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,o=r.x,l=r.y,u=r.width,f=r.height,h=r.alwaysShowText,m=this.state,y=m.startX,w=m.endX,b=m.isTextActive,x=m.isSlideMoving,_=m.isTravellerMoving,M=m.isTravellerFocused;if(!i||!i.length||!pt(o)||!pt(l)||!pt(u)||!pt(f)||u<=0||f<=0)return null;var T=Pn("recharts-brush",a),A=xe.Children.count(s)===1,R=Iue("userSelect","none");return xe.createElement(qn,{className:T,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:R},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(y,w),this.renderTravellerLayer(y,"startX"),this.renderTravellerLayer(w,"endX"),(b||x||_||M||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,o=r.height,l=r.stroke,u=Math.floor(a+o/2)-1;return xe.createElement(xe.Fragment,null,xe.createElement("rect",{x:i,y:a,width:s,height:o,fill:l,stroke:"none"}),xe.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),xe.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return xe.isValidElement(r)?a=xe.cloneElement(r,i):un(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,o=r.x,l=r.travellerWidth,u=r.updateId,f=r.startIndex,h=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return d2({prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:s},a&&a.length?Hue({data:a,width:s,x:o,travellerWidth:l,startIndex:f,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+s-l]);var m=i.scale.domain().map(function(y){return i.scale(y)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,o=a-1;o-s>1;){var l=Math.floor((s+o)/2);r[l]>i?o=l:s=l}return i>=r[o]?o:s}}])})(L.PureComponent);ks(Ym,"displayName","Brush");ks(Ym,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var f2,GF;function Wue(){if(GF)return f2;GF=1;var t=fR();function e(n,r){var i;return t(n,function(a,s,o){return i=r(a,s,o),!i}),!!i}return f2=e,f2}var h2,$F;function Gue(){if($F)return h2;$F=1;var t=hV(),e=Fl(),n=Wue(),r=vs(),i=F_();function a(s,o,l){var u=r(s)?t:n;return l&&i(s,o,l)&&(o=void 0),u(s,e(o,3))}return h2=a,h2}var $ue=Gue();const que=Zn($ue);var El=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},p2,qF;function Xue(){if(qF)return p2;qF=1;var t=OV();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return p2=e,p2}var m2,XF;function Yue(){if(XF)return m2;XF=1;var t=Xue(),e=PV(),n=Fl();function r(i,a){var s={};return a=n(a,3),e(i,function(o,l,u){t(s,l,a(o,l,u))}),s}return m2=r,m2}var Kue=Yue();const Zue=Zn(Kue);var g2,YF;function Jue(){if(YF)return g2;YF=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!n(e[r],r,e))return!1;return!0}return g2=t,g2}var y2,KF;function Que(){if(KF)return y2;KF=1;var t=fR();function e(n,r){var i=!0;return t(n,function(a,s,o){return i=!!r(a,s,o),i}),i}return y2=e,y2}var v2,ZF;function ede(){if(ZF)return v2;ZF=1;var t=Jue(),e=Que(),n=Fl(),r=vs(),i=F_();function a(s,o,l){var u=r(s)?t:e;return l&&i(s,o,l)&&(o=void 0),u(s,n(o,3))}return v2=a,v2}var tde=ede();const vW=Zn(tde);var nde=["x","y"];function h0(t){"@babel/helpers - typeof";return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h0(t)}function nN(){return nN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nN.apply(this,arguments)}function JF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JF(Object(n),!0).forEach(function(r){rde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rde(t,e,n){return e=ide(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ide(t){var e=ade(t,"string");return h0(e)=="symbol"?e:e+""}function ade(t,e){if(h0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(h0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sde(t,e){if(t==null)return{};var n=ode(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ode(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function lde(t,e){var n=t.x,r=t.y,i=sde(t,nde),a="".concat(n),s=parseInt(a,10),o="".concat(r),l=parseInt(o,10),u="".concat(e.height||i.height),f=parseInt(u,10),h="".concat(e.width||i.width),m=parseInt(h,10);return Dy(Dy(Dy(Dy(Dy({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:f,width:m,name:e.name,radius:e.radius})}function QF(t){return xe.createElement(dW,nN({shapeType:"rectangle",propTransformer:lde,activeClassName:"recharts-active-bar"},t))}var cde=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=pt(r)||RZ(r);return a?e(r,i):(a||fh(),n)}},ude=["value","background"],xW;function Km(t){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Km(t)}function dde(t,e){if(t==null)return{};var n=fde(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function X1(){return X1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X1.apply(this,arguments)}function e5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e5(Object(n),!0).forEach(function(r){Qu(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wW(r.key),r)}}function pde(t,e,n){return e&&t5(t.prototype,e),n&&t5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mde(t,e,n){return e=Y1(e),gde(t,bW()?Reflect.construct(e,n||[],Y1(t).constructor):e.apply(t,n))}function gde(t,e){if(e&&(Km(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yde(t)}function yde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bW=function(){return!!t})()}function Y1(t){return Y1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Y1(t)}function vde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rN(t,e)}function rN(t,e){return rN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},rN(t,e)}function Qu(t,e,n){return e=wW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wW(t){var e=xde(t,"string");return Km(e)=="symbol"?e:e+""}function xde(t,e){if(Km(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wd=(function(t){function e(){var n;hde(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=mde(this,e,[].concat(i)),Qu(n,"state",{isAnimationFinished:!1}),Qu(n,"id",xg("recharts-bar-")),Qu(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),Qu(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return vde(e,t),pde(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.dataKey,l=a.activeIndex,u=a.activeBar,f=en(this.props,!1);return r&&r.map(function(h,m){var y=m===l,w=y?u:s,b=xi(xi(xi({},f),h),{},{isActive:y,option:w,index:m,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return xe.createElement(qn,X1({className:"recharts-bar-rectangle"},ch(i.props,h,m),{key:"rectangle-".concat(h?.x,"-").concat(h?.y,"-").concat(h?.value,"-").concat(m)}),xe.createElement(QF,b))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,f=i.animationEasing,h=i.animationId,m=this.state.prevData;return xe.createElement(jl,{begin:l,duration:u,isActive:o,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var w=y.t,b=a.map(function(x,_){var M=m&&m[_];if(M){var T=Is(M.x,x.x),A=Is(M.y,x.y),R=Is(M.width,x.width),N=Is(M.height,x.height);return xi(xi({},x),{},{x:T(w),y:A(w),width:R(w),height:N(w)})}if(s==="horizontal"){var O=Is(0,x.height),k=O(w);return xi(xi({},x),{},{y:x.y+x.height-k,height:k})}var C=Is(0,x.width),I=C(w);return xi(xi({},x),{},{width:I})});return xe.createElement(qn,null,r.renderRectanglesStatically(b))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!nx(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,l=en(this.props.background,!1);return a.map(function(u,f){u.value;var h=u.background,m=dde(u,ude);if(!h)return null;var y=xi(xi(xi(xi(xi({},m),{},{fill:"#eee"},h),l),ch(r.props,u,f)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:f,className:"recharts-bar-background-rectangle"});return xe.createElement(QF,X1({key:"background-bar-".concat(f),option:r.props.background,isActive:f===o},y))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,l=a.yAxis,u=a.layout,f=a.children,h=Fs(f,rx);if(!h)return null;var m=u==="vertical"?s[0].height/2:s[0].width/2,y=function(x,_){var M=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:M,errorVal:Ui(x,_)}},w={clipPath:r?"url(#clipPath-".concat(i,")"):null};return xe.createElement(qn,w,h.map(function(b){return xe.cloneElement(b,{key:"error-bar-".concat(i,"-").concat(b.props.dataKey),data:s,xAxis:o,yAxis:l,layout:u,offset:m,dataPointFormatter:y})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,o=r.xAxis,l=r.yAxis,u=r.left,f=r.top,h=r.width,m=r.height,y=r.isAnimationActive,w=r.background,b=r.id;if(i||!a||!a.length)return null;var x=this.state.isAnimationFinished,_=Pn("recharts-bar",s),M=o&&o.allowDataOverflow,T=l&&l.allowDataOverflow,A=M||T,R=bn(b)?this.id:b;return xe.createElement(qn,{className:_},M||T?xe.createElement("defs",null,xe.createElement("clipPath",{id:"clipPath-".concat(R)},xe.createElement("rect",{x:M?u:u-h/2,y:T?f:f-m/2,width:M?h:h*2,height:T?m:m*2}))):null,xe.createElement(qn,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(R,")"):null},w?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,R),(!y||x)&&Fc.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])})(L.PureComponent);xW=wd;Qu(wd,"displayName","Bar");Qu(wd,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!wh.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Qu(wd,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,f=t.dataStartIndex,h=t.displayedData,m=t.offset,y=qae(r,n);if(!y)return null;var w=e.layout,b=n.type.defaultProps,x=b!==void 0?xi(xi({},b),n.props):n.props,_=x.dataKey,M=x.children,T=x.minPointSize,A=w==="horizontal"?s:a,R=u?A.scale.domain():null,N=ese({numericAxis:A}),O=Fs(M,Fm),k=h.map(function(C,I){var F,V,W,G,J,ee;u?F=Xae(u[f+I],R):(F=Ui(C,_),Array.isArray(F)||(F=[N,F]));var ae=cde(T,xW.defaultProps.minPointSize)(F[1],I);if(w==="horizontal"){var $,B=[s.scale(F[0]),s.scale(F[1])],Y=B[0],X=B[1];V=AU({axis:a,ticks:o,bandSize:i,offset:y.offset,entry:C,index:I}),W=($=X??Y)!==null&&$!==void 0?$:void 0,G=y.size;var ne=Y-X;if(J=Number.isNaN(ne)?0:ne,ee={x:V,y:s.y,width:G,height:s.height},Math.abs(ae)>0&&Math.abs(J)<Math.abs(ae)){var se=Wa(J||ae)*(Math.abs(ae)-Math.abs(J));W-=se,J+=se}}else{var ye=[a.scale(F[0]),a.scale(F[1])],Ne=ye[0],Ee=ye[1];if(V=Ne,W=AU({axis:s,ticks:l,bandSize:i,offset:y.offset,entry:C,index:I}),G=Ee-Ne,J=y.size,ee={x:a.x,y:W,width:a.width,height:J},Math.abs(ae)>0&&Math.abs(G)<Math.abs(ae)){var Oe=Wa(G||ae)*(Math.abs(ae)-Math.abs(G));G+=Oe}}return xi(xi(xi({},C),{},{x:V,y:W,width:G,height:J,value:u?F:F[1],payload:C,background:ee},O&&O[I]&&O[I].props),{},{tooltipPayload:[qH(n,C)],tooltipPosition:{x:V+G/2,y:W+J/2}})});return xi({data:k,layout:w},m)});function p0(t){"@babel/helpers - typeof";return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p0(t)}function bde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_W(r.key),r)}}function wde(t,e,n){return e&&n5(t.prototype,e),n&&n5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function r5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r5(Object(n),!0).forEach(function(r){iS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iS(t,e,n){return e=_W(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _W(t){var e=_de(t,"string");return p0(e)=="symbol"?e:e+""}function _de(t,e){if(p0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(p0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SW=function(e,n,r,i,a){var s=e.width,o=e.height,l=e.layout,u=e.children,f=Object.keys(n),h={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},m=!!js(u,wd);return f.reduce(function(y,w){var b=n[w],x=b.orientation,_=b.domain,M=b.padding,T=M===void 0?{}:M,A=b.mirror,R=b.reversed,N="".concat(x).concat(A?"Mirror":""),O,k,C,I,F;if(b.type==="number"&&(b.padding==="gap"||b.padding==="no-gap")){var V=_[1]-_[0],W=1/0,G=b.categoricalDomain.sort(IZ);if(G.forEach(function(ye,Ne){Ne>0&&(W=Math.min((ye||0)-(G[Ne-1]||0),W))}),Number.isFinite(W)){var J=W/V,ee=b.layout==="vertical"?r.height:r.width;if(b.padding==="gap"&&(O=J*ee/2),b.padding==="no-gap"){var ae=Ga(e.barCategoryGap,J*ee),$=J*ee/2;O=$-ae-($-ae)/ee*ae}}}i==="xAxis"?k=[r.left+(T.left||0)+(O||0),r.left+r.width-(T.right||0)-(O||0)]:i==="yAxis"?k=l==="horizontal"?[r.top+r.height-(T.bottom||0),r.top+(T.top||0)]:[r.top+(T.top||0)+(O||0),r.top+r.height-(T.bottom||0)-(O||0)]:k=b.range,R&&(k=[k[1],k[0]]);var B=HH(b,a,m),Y=B.scale,X=B.realScaleType;Y.domain(_).range(k),WH(Y);var ne=GH(Y,Yo(Yo({},b),{},{realScaleType:X}));i==="xAxis"?(F=x==="top"&&!A||x==="bottom"&&A,C=r.left,I=h[N]-F*b.height):i==="yAxis"&&(F=x==="left"&&!A||x==="right"&&A,C=h[N]-F*b.width,I=r.top);var se=Yo(Yo(Yo({},b),ne),{},{realScaleType:X,x:C,y:I,scale:Y,width:i==="xAxis"?r.width:b.width,height:i==="yAxis"?r.height:b.height});return se.bandSize=R1(se,ne),!b.hide&&i==="xAxis"?h[N]+=(F?-1:1)*se.height:b.hide||(h[N]+=(F?-1:1)*se.width),Yo(Yo({},y),{},iS({},w,se))},{})},MW=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},Sde=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return MW({x:n,y:r},{x:i,y:a})},TW=(function(){function t(e){bde(this,t),this.scale=e}return wde(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])})();iS(TW,"EPS",1e-4);var BR=function(e){var n=Object.keys(e).reduce(function(r,i){return Yo(Yo({},r),{},iS({},i,TW.create(e[i])))},{});return Yo(Yo({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return Zue(i,function(l,u){return n[u].apply(l,{bandAware:s,position:o})})},isInRange:function(i){return vW(i,function(a,s){return n[s].isInRange(a)})}})};function Mde(t){return(t%180+180)%180}var Tde=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Mde(i),s=a*Math.PI/180,o=Math.atan(r/n),l=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},x2,i5;function Ade(){if(i5)return x2;i5=1;var t=Fl(),e=Z0(),n=L_();function r(i){return function(a,s,o){var l=Object(a);if(!e(a)){var u=t(s,3);a=n(a),s=function(h){return u(l[h],h,l)}}var f=i(a,s,o);return f>-1?l[u?a[f]:f]:void 0}}return x2=r,x2}var b2,a5;function Ede(){if(a5)return b2;a5=1;var t=pW();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return b2=e,b2}var w2,s5;function Cde(){if(s5)return w2;s5=1;var t=MV(),e=Fl(),n=Ede(),r=Math.max;function i(a,s,o){var l=a==null?0:a.length;if(!l)return-1;var u=o==null?0:n(o);return u<0&&(u=r(l+u,0)),t(a,e(s,3),u)}return w2=i,w2}var _2,o5;function Pde(){if(o5)return _2;o5=1;var t=Ade(),e=Cde(),n=t(e);return _2=n,_2}var Nde=Pde();const Ode=Zn(Nde);var Rde=z8();const kde=Zn(Rde);var jde=kde(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),VR=L.createContext(void 0),HR=L.createContext(void 0),AW=L.createContext(void 0),EW=L.createContext({}),CW=L.createContext(void 0),PW=L.createContext(0),NW=L.createContext(0),l5=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=e.clipPathId,o=e.children,l=e.width,u=e.height,f=jde(a);return xe.createElement(VR.Provider,{value:r},xe.createElement(HR.Provider,{value:i},xe.createElement(EW.Provider,{value:a},xe.createElement(AW.Provider,{value:f},xe.createElement(CW.Provider,{value:s},xe.createElement(PW.Provider,{value:u},xe.createElement(NW.Provider,{value:l},o)))))))},Ide=function(){return L.useContext(CW)},OW=function(e){var n=L.useContext(VR);n==null&&fh();var r=n[e];return r==null&&fh(),r},Dde=function(){var e=L.useContext(VR);return Ku(e)},Lde=function(){var e=L.useContext(HR),n=Ode(e,function(r){return vW(r.domain,Number.isFinite)});return n||Ku(e)},RW=function(e){var n=L.useContext(HR);n==null&&fh();var r=n[e];return r==null&&fh(),r},Ude=function(){var e=L.useContext(AW);return e},Fde=function(){return L.useContext(EW)},WR=function(){return L.useContext(NW)},GR=function(){return L.useContext(PW)};function Zm(t){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zm(t)}function zde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jW(r.key),r)}}function Vde(t,e,n){return e&&Bde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hde(t,e,n){return e=K1(e),Wde(t,kW()?Reflect.construct(e,n||[],K1(t).constructor):e.apply(t,n))}function Wde(t,e){if(e&&(Zm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gde(t)}function Gde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kW=function(){return!!t})()}function K1(t){return K1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},K1(t)}function $de(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iN(t,e)}function iN(t,e){return iN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},iN(t,e)}function c5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function u5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c5(Object(n),!0).forEach(function(r){$R(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $R(t,e,n){return e=jW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jW(t){var e=qde(t,"string");return Zm(e)=="symbol"?e:e+""}function qde(t,e){if(Zm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Xde(t,e){return Jde(t)||Zde(t,e)||Kde(t,e)||Yde()}function Yde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kde(t,e){if(t){if(typeof t=="string")return d5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d5(t,e)}}function d5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Jde(t){if(Array.isArray(t))return t}function aN(){return aN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aN.apply(this,arguments)}var Qde=function(e,n){var r;return xe.isValidElement(e)?r=xe.cloneElement(e,n):un(e)?r=e(n):r=xe.createElement("line",aN({},n,{className:"recharts-reference-line-line"})),r},efe=function(e,n,r,i,a,s,o,l,u){var f=a.x,h=a.y,m=a.width,y=a.height;if(r){var w=u.y,b=e.y.apply(w,{position:s});if(El(u,"discard")&&!e.y.isInRange(b))return null;var x=[{x:f+m,y:b},{x:f,y:b}];return l==="left"?x.reverse():x}if(n){var _=u.x,M=e.x.apply(_,{position:s});if(El(u,"discard")&&!e.x.isInRange(M))return null;var T=[{x:M,y:h+y},{x:M,y:h}];return o==="top"?T.reverse():T}if(i){var A=u.segment,R=A.map(function(N){return e.apply(N,{position:s})});return El(u,"discard")&&que(R,function(N){return!e.isInRange(N)})?null:R}return null};function tfe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,o=t.className,l=t.alwaysShow,u=Ide(),f=OW(i),h=RW(a),m=Ude();if(!u||!m)return null;rl(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var y=BR({x:f.scale,y:h.scale}),w=Fi(e),b=Fi(n),x=r&&r.length===2,_=efe(y,w,b,x,m,t.position,f.orientation,h.orientation,t);if(!_)return null;var M=Xde(_,2),T=M[0],A=T.x,R=T.y,N=M[1],O=N.x,k=N.y,C=El(t,"hidden")?"url(#".concat(u,")"):void 0,I=u5(u5({clipPath:C},en(t,!0)),{},{x1:A,y1:R,x2:O,y2:k});return xe.createElement(qn,{className:Pn("recharts-reference-line",o)},Qde(s,I),Qi.renderCallByParent(t,Sde({x1:A,y1:R,x2:O,y2:k})))}var qR=(function(t){function e(){return zde(this,e),Hde(this,e,arguments)}return $de(e,t),Vde(e,[{key:"render",value:function(){return xe.createElement(tfe,this.props)}}])})(xe.Component);$R(qR,"displayName","ReferenceLine");$R(qR,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function sN(){return sN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sN.apply(this,arguments)}function Jm(t){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jm(t)}function f5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function h5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f5(Object(n),!0).forEach(function(r){aS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rfe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,DW(r.key),r)}}function ife(t,e,n){return e&&rfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function afe(t,e,n){return e=Z1(e),sfe(t,IW()?Reflect.construct(e,n||[],Z1(t).constructor):e.apply(t,n))}function sfe(t,e){if(e&&(Jm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ofe(t)}function ofe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IW=function(){return!!t})()}function Z1(t){return Z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Z1(t)}function lfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oN(t,e)}function oN(t,e){return oN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},oN(t,e)}function aS(t,e,n){return e=DW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DW(t){var e=cfe(t,"string");return Jm(e)=="symbol"?e:e+""}function cfe(t,e){if(Jm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ufe=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,s=BR({x:i.scale,y:a.scale}),o=s.apply({x:n,y:r},{bandAware:!0});return El(e,"discard")&&!s.isInRange(o)?null:o},sS=(function(t){function e(){return nfe(this,e),afe(this,e,arguments)}return lfe(e,t),ife(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,o=r.alwaysShow,l=r.clipPathId,u=Fi(i),f=Fi(a);if(rl(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var h=ufe(this.props);if(!h)return null;var m=h.x,y=h.y,w=this.props,b=w.shape,x=w.className,_=El(this.props,"hidden")?"url(#".concat(l,")"):void 0,M=h5(h5({clipPath:_},en(this.props,!0)),{},{cx:m,cy:y});return xe.createElement(qn,{className:Pn("recharts-reference-dot",x)},e.renderDot(b,M),Qi.renderCallByParent(this.props,{x:m-s,y:y-s,width:2*s,height:2*s}))}}])})(xe.Component);aS(sS,"displayName","ReferenceDot");aS(sS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});aS(sS,"renderDot",function(t,e){var n;return xe.isValidElement(t)?n=xe.cloneElement(t,e):un(t)?n=t(e):n=xe.createElement(Z_,sN({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function lN(){return lN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lN.apply(this,arguments)}function Qm(t){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qm(t)}function p5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function m5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p5(Object(n),!0).forEach(function(r){oS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ffe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,UW(r.key),r)}}function hfe(t,e,n){return e&&ffe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function pfe(t,e,n){return e=J1(e),mfe(t,LW()?Reflect.construct(e,n||[],J1(t).constructor):e.apply(t,n))}function mfe(t,e){if(e&&(Qm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gfe(t)}function gfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LW=function(){return!!t})()}function J1(t){return J1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},J1(t)}function yfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cN(t,e)}function cN(t,e){return cN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cN(t,e)}function oS(t,e,n){return e=UW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UW(t){var e=vfe(t,"string");return Qm(e)=="symbol"?e:e+""}function vfe(t,e){if(Qm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xfe=function(e,n,r,i,a){var s=a.x1,o=a.x2,l=a.y1,u=a.y2,f=a.xAxis,h=a.yAxis;if(!f||!h)return null;var m=BR({x:f.scale,y:h.scale}),y={x:e?m.x.apply(s,{position:"start"}):m.x.rangeMin,y:r?m.y.apply(l,{position:"start"}):m.y.rangeMin},w={x:n?m.x.apply(o,{position:"end"}):m.x.rangeMax,y:i?m.y.apply(u,{position:"end"}):m.y.rangeMax};return El(a,"discard")&&(!m.isInRange(y)||!m.isInRange(w))?null:MW(y,w)},lS=(function(t){function e(){return dfe(this,e),pfe(this,e,arguments)}return yfe(e,t),hfe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,o=r.y2,l=r.className,u=r.alwaysShow,f=r.clipPathId;rl(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Fi(i),m=Fi(a),y=Fi(s),w=Fi(o),b=this.props.shape;if(!h&&!m&&!y&&!w&&!b)return null;var x=xfe(h,m,y,w,this.props);if(!x&&!b)return null;var _=El(this.props,"hidden")?"url(#".concat(f,")"):void 0;return xe.createElement(qn,{className:Pn("recharts-reference-area",l)},e.renderRect(b,m5(m5({clipPath:_},en(this.props,!0)),x)),Qi.renderCallByParent(this.props,x))}}])})(xe.Component);oS(lS,"displayName","ReferenceArea");oS(lS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});oS(lS,"renderRect",function(t,e){var n;return xe.isValidElement(t)?n=xe.cloneElement(t,e):un(t)?n=t(e):n=xe.createElement(zR,lN({},e,{className:"recharts-reference-area-rect"})),n});function FW(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function bfe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Tde(r,n)}function wfe(t,e,n){var r=n==="width",i=t.x,a=t.y,s=t.width,o=t.height;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function Q1(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function _fe(t,e){return FW(t,e+1)}function Sfe(t,e,n,r,i){for(var a=(r||[]).slice(),s=e.start,o=e.end,l=0,u=1,f=s,h=function(){var w=r?.[l];if(w===void 0)return{v:FW(r,u)};var b=l,x,_=function(){return x===void 0&&(x=n(w,b)),x},M=w.coordinate,T=l===0||Q1(t,M,_,f,o);T||(l=0,f=s,u+=1),T&&(f=M+t*(_()/2+i),l+=u)},m;u<=a.length;)if(m=h(),m)return m.v;return[]}function m0(t){"@babel/helpers - typeof";return m0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m0(t)}function g5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ta(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g5(Object(n),!0).forEach(function(r){Mfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mfe(t,e,n){return e=Tfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tfe(t){var e=Afe(t,"string");return m0(e)=="symbol"?e:e+""}function Afe(t,e){if(m0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(m0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Efe(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,o=e.start,l=e.end,u=function(m){var y=a[m],w,b=function(){return w===void 0&&(w=n(y,m)),w};if(m===s-1){var x=t*(y.coordinate+t*b()/2-l);a[m]=y=Ta(Ta({},y),{},{tickCoord:x>0?y.coordinate-x*t:y.coordinate})}else a[m]=y=Ta(Ta({},y),{},{tickCoord:y.coordinate});var _=Q1(t,y.tickCoord,b,o,l);_&&(l=y.tickCoord-t*(b()/2+i),a[m]=Ta(Ta({},y),{},{isShow:!0}))},f=s-1;f>=0;f--)u(f);return a}function Cfe(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,l=e.start,u=e.end;if(a){var f=r[o-1],h=n(f,o-1),m=t*(f.coordinate+t*h/2-u);s[o-1]=f=Ta(Ta({},f),{},{tickCoord:m>0?f.coordinate-m*t:f.coordinate});var y=Q1(t,f.tickCoord,function(){return h},l,u);y&&(u=f.tickCoord-t*(h/2+i),s[o-1]=Ta(Ta({},f),{},{isShow:!0}))}for(var w=a?o-1:o,b=function(M){var T=s[M],A,R=function(){return A===void 0&&(A=n(T,M)),A};if(M===0){var N=t*(T.coordinate-t*R()/2-l);s[M]=T=Ta(Ta({},T),{},{tickCoord:N<0?T.coordinate-N*t:T.coordinate})}else s[M]=T=Ta(Ta({},T),{},{tickCoord:T.coordinate});var O=Q1(t,T.tickCoord,R,l,u);O&&(l=T.tickCoord+t*(R()/2+i),s[M]=Ta(Ta({},T),{},{isShow:!0}))},x=0;x<w;x++)b(x);return s}function XR(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,o=t.orientation,l=t.interval,u=t.tickFormatter,f=t.unit,h=t.angle;if(!i||!i.length||!r)return[];if(pt(l)||wh.isSsr)return _fe(i,typeof l=="number"&&pt(l)?l:0);var m=[],y=o==="top"||o==="bottom"?"width":"height",w=f&&y==="width"?pv(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},b=function(T,A){var R=un(u)?u(T.value,A):T.value;return y==="width"?bfe(pv(R,{fontSize:e,letterSpacing:n}),w,h):pv(R,{fontSize:e,letterSpacing:n})[y]},x=i.length>=2?Wa(i[1].coordinate-i[0].coordinate):1,_=wfe(a,x,y);return l==="equidistantPreserveStart"?Sfe(x,_,b,i,s):(l==="preserveStart"||l==="preserveStartEnd"?m=Cfe(x,_,b,i,s,l==="preserveStartEnd"):m=Efe(x,_,b,i,s),m.filter(function(M){return M.isShow}))}var Pfe=["viewBox"],Nfe=["viewBox"],Ofe=["ticks"];function eg(t){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(t)}function dm(){return dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dm.apply(this,arguments)}function y5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ki(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y5(Object(n),!0).forEach(function(r){YR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function S2(t,e){if(t==null)return{};var n=Rfe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Rfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function kfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BW(r.key),r)}}function jfe(t,e,n){return e&&v5(t.prototype,e),n&&v5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ife(t,e,n){return e=e_(e),Dfe(t,zW()?Reflect.construct(e,n||[],e_(t).constructor):e.apply(t,n))}function Dfe(t,e){if(e&&(eg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lfe(t)}function Lfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zW=function(){return!!t})()}function e_(t){return e_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e_(t)}function Ufe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uN(t,e)}function uN(t,e){return uN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},uN(t,e)}function YR(t,e,n){return e=BW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BW(t){var e=Ffe(t,"string");return eg(e)=="symbol"?e:e+""}function Ffe(t,e){if(eg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(eg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Mg=(function(t){function e(n){var r;return kfe(this,e),r=Ife(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Ufe(e,t),jfe(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=S2(r,Pfe),o=this.props,l=o.viewBox,u=S2(o,Nfe);return!Mm(a,l)||!Mm(s,u)||!Mm(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,u=i.orientation,f=i.tickSize,h=i.mirror,m=i.tickMargin,y,w,b,x,_,M,T=h?-1:1,A=r.tickSize||f,R=pt(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":y=w=r.coordinate,x=s+ +!h*l,b=x-T*A,M=b-T*m,_=R;break;case"left":b=x=r.coordinate,w=a+ +!h*o,y=w-T*A,_=y-T*m,M=R;break;case"right":b=x=r.coordinate,w=a+ +h*o,y=w+T*A,_=y+T*m,M=R;break;default:y=w=r.coordinate,x=s+ +h*l,b=x+T*A,M=b+T*m,_=R;break}return{line:{x1:y,y1:b,x2:w,y2:x},tick:{x:_,y:M}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.orientation,u=r.mirror,f=r.axisLine,h=ki(ki(ki({},en(this.props,!1)),en(f,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var m=+(l==="top"&&!u||l==="bottom"&&u);h=ki(ki({},h),{},{x1:i,y1:a+m*o,x2:i+s,y2:a+m*o})}else{var y=+(l==="left"&&!u||l==="right"&&u);h=ki(ki({},h),{},{x1:i+y*s,y1:a,x2:i+y*s,y2:a+o})}return xe.createElement("line",dm({},h,{className:Pn("recharts-cartesian-axis-line",Us(f,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,o=this.props,l=o.tickLine,u=o.stroke,f=o.tick,h=o.tickFormatter,m=o.unit,y=XR(ki(ki({},this.props),{},{ticks:r}),i,a),w=this.getTickTextAnchor(),b=this.getTickVerticalAnchor(),x=en(this.props,!1),_=en(f,!1),M=ki(ki({},x),{},{fill:"none"},en(l,!1)),T=y.map(function(A,R){var N=s.getTickLineCoord(A),O=N.line,k=N.tick,C=ki(ki(ki(ki({textAnchor:w,verticalAnchor:b},x),{},{stroke:"none",fill:u},_),k),{},{index:R,payload:A,visibleTicksCount:y.length,tickFormatter:h});return xe.createElement(qn,dm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},ch(s.props,A,R)),l&&xe.createElement("line",dm({},M,O,{className:Pn("recharts-cartesian-axis-tick-line",Us(l,"className"))})),f&&e.renderTickItem(f,C,"".concat(un(h)?h(A.value,R):A.value).concat(m||"")))});return xe.createElement("g",{className:"recharts-cartesian-axis-ticks"},T)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,l=i.ticksGenerator,u=i.className,f=i.hide;if(f)return null;var h=this.props,m=h.ticks,y=S2(h,Ofe),w=m;return un(l)&&(w=m&&m.length>0?l(this.props):l(y)),s<=0||o<=0||!w||!w.length?null:xe.createElement(qn,{className:Pn("recharts-cartesian-axis",u),ref:function(x){r.layerReference=x}},a&&this.renderAxisLine(),this.renderTicks(w,this.state.fontSize,this.state.letterSpacing),Qi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s,o=Pn(i.className,"recharts-cartesian-axis-tick-value");return xe.isValidElement(r)?s=xe.cloneElement(r,ki(ki({},i),{},{className:o})):un(r)?s=r(ki(ki({},i),{},{className:o})):s=xe.createElement(uh,dm({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])})(L.Component);YR(Mg,"displayName","CartesianAxis");YR(Mg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var zfe=["x1","y1","x2","y2","key"],Bfe=["offset"];function ph(t){"@babel/helpers - typeof";return ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ph(t)}function x5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Aa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x5(Object(n),!0).forEach(function(r){Vfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vfe(t,e,n){return e=Hfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hfe(t){var e=Wfe(t,"string");return ph(e)=="symbol"?e:e+""}function Wfe(t,e){if(ph(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ph(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vf(){return Vf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vf.apply(this,arguments)}function b5(t,e){if(t==null)return{};var n=Gfe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Gfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var $fe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,l=e.ry;return xe.createElement("rect",{x:i,y:a,ry:l,width:s,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function VW(t,e){var n;if(xe.isValidElement(t))n=xe.cloneElement(t,e);else if(un(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,s=e.y2,o=e.key,l=b5(e,zfe),u=en(l,!1);u.offset;var f=b5(u,Bfe);n=xe.createElement("line",Vf({},f,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return n}function qfe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var u=Aa(Aa({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(l),index:l});return VW(i,u)});return xe.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function Xfe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var u=Aa(Aa({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(l),index:l});return VW(i,u)});return xe.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Yfe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,s=t.height,o=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var f=o.map(function(m){return Math.round(m+i-i)}).sort(function(m,y){return m-y});i!==f[0]&&f.unshift(0);var h=f.map(function(m,y){var w=!f[y+1],b=w?i+s-m:f[y+1]-m;if(b<=0)return null;var x=y%e.length;return xe.createElement("rect",{key:"react-".concat(y),y:m,x:r,height:b,width:a,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return xe.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function Kfe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var f=u.map(function(m){return Math.round(m+a-a)}).sort(function(m,y){return m-y});a!==f[0]&&f.unshift(0);var h=f.map(function(m,y){var w=!f[y+1],b=w?a+o-m:f[y+1]-m;if(b<=0)return null;var x=y%r.length;return xe.createElement("rect",{key:"react-".concat(y),x:m,y:s,width:b,height:l,stroke:"none",fill:r[x],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return xe.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var Zfe=function(e,n){var r=e.xAxis,i=e.width,a=e.height,s=e.offset;return VH(XR(Aa(Aa(Aa({},Mg.defaultProps),r),{},{ticks:Ic(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,n)},Jfe=function(e,n){var r=e.yAxis,i=e.width,a=e.height,s=e.offset;return VH(XR(Aa(Aa(Aa({},Mg.defaultProps),r),{},{ticks:Ic(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,n)},Rp={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function t_(t){var e,n,r,i,a,s,o=WR(),l=GR(),u=Fde(),f=Aa(Aa({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Rp.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Rp.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Rp.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Rp.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Rp.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:Rp.verticalFill,x:pt(t.x)?t.x:u.left,y:pt(t.y)?t.y:u.top,width:pt(t.width)?t.width:u.width,height:pt(t.height)?t.height:u.height}),h=f.x,m=f.y,y=f.width,w=f.height,b=f.syncWithTicks,x=f.horizontalValues,_=f.verticalValues,M=Dde(),T=Lde();if(!pt(y)||y<=0||!pt(w)||w<=0||!pt(h)||h!==+h||!pt(m)||m!==+m)return null;var A=f.verticalCoordinatesGenerator||Zfe,R=f.horizontalCoordinatesGenerator||Jfe,N=f.horizontalPoints,O=f.verticalPoints;if((!N||!N.length)&&un(R)){var k=x&&x.length,C=R({yAxis:T?Aa(Aa({},T),{},{ticks:k?x:T.ticks}):void 0,width:o,height:l,offset:u},k?!0:b);rl(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ph(C),"]")),Array.isArray(C)&&(N=C)}if((!O||!O.length)&&un(A)){var I=_&&_.length,F=A({xAxis:M?Aa(Aa({},M),{},{ticks:I?_:M.ticks}):void 0,width:o,height:l,offset:u},I?!0:b);rl(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ph(F),"]")),Array.isArray(F)&&(O=F)}return xe.createElement("g",{className:"recharts-cartesian-grid"},xe.createElement($fe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),xe.createElement(qfe,Vf({},f,{offset:u,horizontalPoints:N,xAxis:M,yAxis:T})),xe.createElement(Xfe,Vf({},f,{offset:u,verticalPoints:O,xAxis:M,yAxis:T})),xe.createElement(Yfe,Vf({},f,{horizontalPoints:N})),xe.createElement(Kfe,Vf({},f,{verticalPoints:O})))}t_.displayName="CartesianGrid";var Qfe=["type","layout","connectNulls","ref"],ehe=["key"];function tg(t){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tg(t)}function w5(t,e){if(t==null)return{};var n=the(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function the(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function bv(){return bv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bv.apply(this,arguments)}function _5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_5(Object(n),!0).forEach(function(r){Ko(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kp(t){return ahe(t)||ihe(t)||rhe(t)||nhe()}function nhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rhe(t,e){if(t){if(typeof t=="string")return dN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dN(t,e)}}function ihe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ahe(t){if(Array.isArray(t))return dN(t)}function dN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function she(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WW(r.key),r)}}function ohe(t,e,n){return e&&S5(t.prototype,e),n&&S5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lhe(t,e,n){return e=n_(e),che(t,HW()?Reflect.construct(e,n||[],n_(t).constructor):e.apply(t,n))}function che(t,e){if(e&&(tg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uhe(t)}function uhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HW=function(){return!!t})()}function n_(t){return n_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},n_(t)}function dhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fN(t,e)}function fN(t,e){return fN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},fN(t,e)}function Ko(t,e,n){return e=WW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WW(t){var e=fhe(t,"string");return tg(e)=="symbol"?e:e+""}function fhe(t,e){if(tg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ed=(function(t){function e(){var n;she(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=lhe(this,e,[].concat(i)),Ko(n,"state",{isAnimationFinished:!0,totalLength:0}),Ko(n,"generateSimpleStrokeDasharray",function(s,o){return"".concat(o,"px ").concat(s-o,"px")}),Ko(n,"getStrokeDasharray",function(s,o,l){var u=l.reduce(function(_,M){return _+M});if(!u)return n.generateSimpleStrokeDasharray(o,s);for(var f=Math.floor(s/u),h=s%u,m=o-s,y=[],w=0,b=0;w<l.length;b+=l[w],++w)if(b+l[w]>h){y=[].concat(kp(l.slice(0,w)),[h-b]);break}var x=y.length%2===0?[0,m]:[m];return[].concat(kp(e.repeat(l,f)),kp(y),x).map(function(_){return"".concat(_,"px")}).join(", ")}),Ko(n,"id",xg("recharts-line-")),Ko(n,"pathRef",function(s){n.mainCurve=s}),Ko(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Ko(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return dhe(e,t),ohe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,o=a.xAxis,l=a.yAxis,u=a.layout,f=a.children,h=Fs(f,rx);if(!h)return null;var m=function(b,x){return{x:b.x,y:b.y,value:b.value,errorVal:Ui(b.payload,x)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return xe.createElement(qn,y,h.map(function(w){return xe.cloneElement(w,{key:"bar-".concat(w.props.dataKey),data:s,xAxis:o,yAxis:l,layout:u,dataPointFormatter:m})}))}},{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.dot,u=o.points,f=o.dataKey,h=en(this.props,!1),m=en(l,!0),y=u.map(function(b,x){var _=Rs(Rs(Rs({key:"dot-".concat(x),r:3},h),m),{},{index:x,cx:b.x,cy:b.y,value:b.value,dataKey:f,payload:b.payload,points:u});return e.renderDotItem(l,_)}),w={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return xe.createElement(qn,bv({className:"recharts-line-dots",key:"dots"},w),y)}},{key:"renderCurveStatically",value:function(r,i,a,s){var o=this.props,l=o.type,u=o.layout,f=o.connectNulls;o.ref;var h=w5(o,Qfe),m=Rs(Rs(Rs({},en(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},s),{},{type:l,layout:u,connectNulls:f});return xe.createElement(I1,bv({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,l=s.strokeDasharray,u=s.isAnimationActive,f=s.animationBegin,h=s.animationDuration,m=s.animationEasing,y=s.animationId,w=s.animateNewValues,b=s.width,x=s.height,_=this.state,M=_.prevPoints,T=_.totalLength;return xe.createElement(jl,{begin:f,duration:h,isActive:u,easing:m,from:{t:0},to:{t:1},key:"line-".concat(y),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var R=A.t;if(M){var N=M.length/o.length,O=o.map(function(V,W){var G=Math.floor(W*N);if(M[G]){var J=M[G],ee=Is(J.x,V.x),ae=Is(J.y,V.y);return Rs(Rs({},V),{},{x:ee(R),y:ae(R)})}if(w){var $=Is(b*2,V.x),B=Is(x/2,V.y);return Rs(Rs({},V),{},{x:$(R),y:B(R)})}return Rs(Rs({},V),{},{x:V.x,y:V.y})});return a.renderCurveStatically(O,r,i)}var k=Is(0,T),C=k(R),I;if(l){var F="".concat(l).split(/[,\s]+/gim).map(function(V){return parseFloat(V)});I=a.getStrokeDasharray(C,T,F)}else I=a.generateSimpleStrokeDasharray(T,C);return a.renderCurveStatically(o,r,i,{strokeDasharray:I})})}},{key:"renderCurve",value:function(r,i){var a=this.props,s=a.points,o=a.isAnimationActive,l=this.state,u=l.prevPoints,f=l.totalLength;return o&&s&&s.length&&(!u&&f>0||!nx(u,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,l=i.className,u=i.xAxis,f=i.yAxis,h=i.top,m=i.left,y=i.width,w=i.height,b=i.isAnimationActive,x=i.id;if(a||!o||!o.length)return null;var _=this.state.isAnimationFinished,M=o.length===1,T=Pn("recharts-line",l),A=u&&u.allowDataOverflow,R=f&&f.allowDataOverflow,N=A||R,O=bn(x)?this.id:x,k=(r=en(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},C=k.r,I=C===void 0?3:C,F=k.strokeWidth,V=F===void 0?2:F,W=WZ(s)?s:{},G=W.clipDot,J=G===void 0?!0:G,ee=I*2+V;return xe.createElement(qn,{className:T},A||R?xe.createElement("defs",null,xe.createElement("clipPath",{id:"clipPath-".concat(O)},xe.createElement("rect",{x:A?m:m-y/2,y:R?h:h-w/2,width:A?y:y*2,height:R?w:w*2})),!J&&xe.createElement("clipPath",{id:"clipPath-dots-".concat(O)},xe.createElement("rect",{x:m-ee/2,y:h-ee/2,width:y+ee,height:w+ee}))):null,!M&&this.renderCurve(N,O),this.renderErrorBar(N,O),(M||s)&&this.renderDots(N,J,O),(!b||_)&&Fc.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(kp(r),[0]):r,s=[],o=0;o<i;++o)s=[].concat(kp(s),kp(a));return s}},{key:"renderDotItem",value:function(r,i){var a;if(xe.isValidElement(r))a=xe.cloneElement(r,i);else if(un(r))a=r(i);else{var s=i.key,o=w5(i,ehe),l=Pn("recharts-line-dot",typeof r!="boolean"?r.className:"");a=xe.createElement(Z_,bv({key:s},o,{className:l}))}return a}}])})(L.PureComponent);Ko(ed,"displayName","Line");Ko(ed,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!wh.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ko(ed,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,s=t.dataKey,o=t.bandSize,l=t.displayedData,u=t.offset,f=e.layout,h=l.map(function(m,y){var w=Ui(m,s);return f==="horizontal"?{x:TU({axis:n,ticks:i,bandSize:o,entry:m,index:y}),y:bn(w)?null:r.scale(w),value:w,payload:m}:{x:bn(w)?null:n.scale(w),y:TU({axis:r,ticks:a,bandSize:o,entry:m,index:y}),value:w,payload:m}});return Rs({points:h,layout:f},u)});function ng(t){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(t)}function hhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function phe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qW(r.key),r)}}function mhe(t,e,n){return e&&phe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ghe(t,e,n){return e=r_(e),yhe(t,GW()?Reflect.construct(e,n||[],r_(t).constructor):e.apply(t,n))}function yhe(t,e){if(e&&(ng(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vhe(t)}function vhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GW=function(){return!!t})()}function r_(t){return r_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},r_(t)}function xhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hN(t,e)}function hN(t,e){return hN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hN(t,e)}function $W(t,e,n){return e=qW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qW(t){var e=bhe(t,"string");return ng(e)=="symbol"?e:e+""}function bhe(t,e){if(ng(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ng(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function pN(){return pN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pN.apply(this,arguments)}function whe(t){var e=t.xAxisId,n=WR(),r=GR(),i=OW(e);return i==null?null:L.createElement(Mg,pN({},i,{className:Pn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return Ic(s,!0)}}))}var mh=(function(t){function e(){return hhe(this,e),ghe(this,e,arguments)}return xhe(e,t),mhe(e,[{key:"render",value:function(){return L.createElement(whe,this.props)}}])})(L.Component);$W(mh,"displayName","XAxis");$W(mh,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function rg(t){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rg(t)}function _he(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function She(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,KW(r.key),r)}}function Mhe(t,e,n){return e&&She(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function The(t,e,n){return e=i_(e),Ahe(t,XW()?Reflect.construct(e,n||[],i_(t).constructor):e.apply(t,n))}function Ahe(t,e){if(e&&(rg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ehe(t)}function Ehe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XW=function(){return!!t})()}function i_(t){return i_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},i_(t)}function Che(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mN(t,e)}function mN(t,e){return mN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mN(t,e)}function YW(t,e,n){return e=KW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KW(t){var e=Phe(t,"string");return rg(e)=="symbol"?e:e+""}function Phe(t,e){if(rg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function gN(){return gN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gN.apply(this,arguments)}var Nhe=function(e){var n=e.yAxisId,r=WR(),i=GR(),a=RW(n);return a==null?null:L.createElement(Mg,gN({},a,{className:Pn("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return Ic(o,!0)}}))},gh=(function(t){function e(){return _he(this,e),The(this,e,arguments)}return Che(e,t),Mhe(e,[{key:"render",value:function(){return L.createElement(Nhe,this.props)}}])})(L.Component);YW(gh,"displayName","YAxis");YW(gh,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function M5(t){return jhe(t)||khe(t)||Rhe(t)||Ohe()}function Ohe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rhe(t,e){if(t){if(typeof t=="string")return yN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yN(t,e)}}function khe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jhe(t){if(Array.isArray(t))return yN(t)}function yN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var vN=function(e,n,r,i,a){var s=Fs(e,qR),o=Fs(e,sS),l=[].concat(M5(s),M5(o)),u=Fs(e,lS),f="".concat(i,"Id"),h=i[0],m=n;if(l.length&&(m=l.reduce(function(b,x){if(x.props[f]===r&&El(x.props,"extendDomain")&&pt(x.props[h])){var _=x.props[h];return[Math.min(b[0],_),Math.max(b[1],_)]}return b},m)),u.length){var y="".concat(h,"1"),w="".concat(h,"2");m=u.reduce(function(b,x){if(x.props[f]===r&&El(x.props,"extendDomain")&&pt(x.props[y])&&pt(x.props[w])){var _=x.props[y],M=x.props[w];return[Math.min(b[0],_,M),Math.max(b[1],_,M)]}return b},m)}return a&&a.length&&(m=a.reduce(function(b,x){return pt(x)?[Math.min(b[0],x),Math.max(b[1],x)]:b},m)),m},M2={exports:{}},T5;function Ihe(){return T5||(T5=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,f){this.fn=l,this.context=u,this.once=f||!1}function a(l,u,f,h,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var y=new i(f,h||l,m),w=n?n+u:u;return l._events[w]?l._events[w].fn?l._events[w]=[l._events[w],y]:l._events[w].push(y):(l._events[w]=y,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,h;if(this._eventsCount===0)return u;for(h in f=this._events)e.call(f,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=n?n+u:u,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,y=h.length,w=new Array(y);m<y;m++)w[m]=h[m].fn;return w},o.prototype.listenerCount=function(u){var f=n?n+u:u,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,f,h,m,y,w){var b=n?n+u:u;if(!this._events[b])return!1;var x=this._events[b],_=arguments.length,M,T;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),_){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,h),!0;case 4:return x.fn.call(x.context,f,h,m),!0;case 5:return x.fn.call(x.context,f,h,m,y),!0;case 6:return x.fn.call(x.context,f,h,m,y,w),!0}for(T=1,M=new Array(_-1);T<_;T++)M[T-1]=arguments[T];x.fn.apply(x.context,M)}else{var A=x.length,R;for(T=0;T<A;T++)switch(x[T].once&&this.removeListener(u,x[T].fn,void 0,!0),_){case 1:x[T].fn.call(x[T].context);break;case 2:x[T].fn.call(x[T].context,f);break;case 3:x[T].fn.call(x[T].context,f,h);break;case 4:x[T].fn.call(x[T].context,f,h,m);break;default:if(!M)for(R=1,M=new Array(_-1);R<_;R++)M[R-1]=arguments[R];x[T].fn.apply(x[T].context,M)}}return!0},o.prototype.on=function(u,f,h){return a(this,u,f,h,!1)},o.prototype.once=function(u,f,h){return a(this,u,f,h,!0)},o.prototype.removeListener=function(u,f,h,m){var y=n?n+u:u;if(!this._events[y])return this;if(!f)return s(this,y),this;var w=this._events[y];if(w.fn)w.fn===f&&(!m||w.once)&&(!h||w.context===h)&&s(this,y);else{for(var b=0,x=[],_=w.length;b<_;b++)(w[b].fn!==f||m&&!w[b].once||h&&w[b].context!==h)&&x.push(w[b]);x.length?this._events[y]=x.length===1?x[0]:x:s(this,y)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(M2)),M2.exports}var Dhe=Ihe();const Lhe=Zn(Dhe);var T2=new Lhe,A2="recharts.syncMouseEvents";function g0(t){"@babel/helpers - typeof";return g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g0(t)}function Uhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fhe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ZW(r.key),r)}}function zhe(t,e,n){return e&&Fhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function E2(t,e,n){return e=ZW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZW(t){var e=Bhe(t,"string");return g0(e)=="symbol"?e:e+""}function Bhe(t,e){if(g0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(g0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vhe=(function(){function t(){Uhe(this,t),E2(this,"activeIndex",0),E2(this,"coordinateList",[]),E2(this,"layout","horizontal")}return zhe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,s=n.container,o=s===void 0?null:s,l=n.layout,u=l===void 0?null:l,f=n.offset,h=f===void 0?null:f,m=n.mouseHandlerCallback,y=m===void 0?null:m;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=y??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=a+l+u,m=s+this.offset.top+o/2+f;this.mouseHandlerCallback({pageX:h,pageY:m})}}}])})();function Hhe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t?.[0],i=t?.[1];if(r&&i&&pt(r)&&pt(i))return!0}return!1}function Whe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function JW(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,s=Nr(e,n,r,i),o=Nr(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function Ghe(t,e,n){var r,i,a,s;if(t==="horizontal")r=e.x,a=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,l=e.cy,u=e.innerRadius,f=e.outerRadius,h=e.angle,m=Nr(o,l,u,h),y=Nr(o,l,f,h);r=m.x,i=m.y,a=y.x,s=y.y}else return JW(e);return[{x:r,y:i},{x:a,y:s}]}function y0(t){"@babel/helpers - typeof";return y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y0(t)}function A5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A5(Object(n),!0).forEach(function(r){$he(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $he(t,e,n){return e=qhe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qhe(t){var e=Xhe(t,"string");return y0(e)=="symbol"?e:e+""}function Xhe(t,e){if(y0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(y0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yhe(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,o=t.activePayload,l=t.offset,u=t.activeTooltipIndex,f=t.tooltipAxisBandSize,h=t.layout,m=t.chartName,y=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!y||!a||!s||m!=="ScatterChart"&&i!=="axis")return null;var w,b=I1;if(m==="ScatterChart")w=s,b=yce;else if(m==="BarChart")w=Whe(h,s,l,f),b=zR;else if(h==="radial"){var x=JW(s),_=x.cx,M=x.cy,T=x.radius,A=x.startAngle,R=x.endAngle;w={cx:_,cy:M,startAngle:A,endAngle:R,innerRadius:T,outerRadius:T},b=QH}else w={points:Ghe(h,s,l)},b=I1;var N=Pb(Pb(Pb(Pb({stroke:"#ccc",pointerEvents:"none"},l),w),en(y,!1)),{},{payload:o,payloadIndex:u,className:Pn("recharts-tooltip-cursor",y.className)});return L.isValidElement(y)?L.cloneElement(y,N):L.createElement(b,N)}var Khe=["item"],Zhe=["children","className","width","height","style","compact","title","desc"];function ig(t){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(t)}function fm(){return fm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fm.apply(this,arguments)}function E5(t,e){return epe(t)||Qhe(t,e)||eG(t,e)||Jhe()}function Jhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qhe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function epe(t){if(Array.isArray(t))return t}function C5(t,e){if(t==null)return{};var n=tpe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function npe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rpe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tG(r.key),r)}}function ipe(t,e,n){return e&&rpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ape(t,e,n){return e=a_(e),spe(t,QW()?Reflect.construct(e,n||[],a_(t).constructor):e.apply(t,n))}function spe(t,e){if(e&&(ig(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ope(t)}function ope(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QW=function(){return!!t})()}function a_(t){return a_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},a_(t)}function lpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xN(t,e)}function xN(t,e){return xN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xN(t,e)}function ag(t){return dpe(t)||upe(t)||eG(t)||cpe()}function cpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eG(t,e){if(t){if(typeof t=="string")return bN(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bN(t,e)}}function upe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dpe(t){if(Array.isArray(t))return bN(t)}function bN(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function P5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P5(Object(n),!0).forEach(function(r){an(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function an(t,e,n){return e=tG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tG(t){var e=fpe(t,"string");return ig(e)=="symbol"?e:e+""}function fpe(t,e){if(ig(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ig(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hpe={xAxis:["bottom","top"],yAxis:["left","right"]},ppe={width:"100%",height:"100%"},nG={x:0,y:0};function Nb(t){return t}var mpe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},gpe=function(e,n,r,i){var a=n.find(function(f){return f&&f.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=i.radius;return Xe(Xe(Xe({},i),Nr(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,u=i.angle;return Xe(Xe(Xe({},i),Nr(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return nG},cS=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,s=(r??[]).reduce(function(o,l){var u=l.props.data;return u&&u.length?[].concat(ag(o),ag(u)):o},[]);return s.length>0?s:e&&e.length&&pt(i)&&pt(a)?e.slice(i,a+1):[]};function rG(t){return t==="number"?[0,"auto"]:void 0}var wN=function(e,n,r,i){var a=e.graphicalItems,s=e.tooltipAxis,o=cS(n,e);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(l,u){var f,h=(f=u.props.data)!==null&&f!==void 0?f:n;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var m;if(s.dataKey&&!s.allowDuplicatedCategory){var y=h===void 0?o:h;m=o1(y,s.dataKey,i)}else m=h&&h[r]||o[r];return m?[].concat(ag(l),[qH(u,m)]):l},[])},N5=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},s=mpe(a,r),o=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,f=Bae(s,o,u,l);if(f>=0&&u){var h=u[f]&&u[f].value,m=wN(e,n,f,h),y=gpe(r,o,f,a);return{activeTooltipIndex:f,activeLabel:h,activePayload:m,activeCoordinate:y}}return null},ype=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,f=e.layout,h=e.children,m=e.stackOffset,y=BH(f,a);return r.reduce(function(w,b){var x,_=b.type.defaultProps!==void 0?Xe(Xe({},b.type.defaultProps),b.props):b.props,M=_.type,T=_.dataKey,A=_.allowDataOverflow,R=_.allowDuplicatedCategory,N=_.scale,O=_.ticks,k=_.includeHidden,C=_[s];if(w[C])return w;var I=cS(e.data,{graphicalItems:i.filter(function(ne){var se,ye=s in ne.props?ne.props[s]:(se=ne.type.defaultProps)===null||se===void 0?void 0:se[s];return ye===C}),dataStartIndex:l,dataEndIndex:u}),F=I.length,V,W,G;Hhe(_.domain,A,M)&&(V=IP(_.domain,null,A),y&&(M==="number"||N!=="auto")&&(G=gv(I,T,"category")));var J=rG(M);if(!V||V.length===0){var ee,ae=(ee=_.domain)!==null&&ee!==void 0?ee:J;if(T){if(V=gv(I,T,M),M==="category"&&y){var $=jZ(V);R&&$?(W=V,V=G1(0,F)):R||(V=PU(ae,V,b).reduce(function(ne,se){return ne.indexOf(se)>=0?ne:[].concat(ag(ne),[se])},[]))}else if(M==="category")R?V=V.filter(function(ne){return ne!==""&&!bn(ne)}):V=PU(ae,V,b).reduce(function(ne,se){return ne.indexOf(se)>=0||se===""||bn(se)?ne:[].concat(ag(ne),[se])},[]);else if(M==="number"){var B=$ae(I,i.filter(function(ne){var se,ye,Ne=s in ne.props?ne.props[s]:(se=ne.type.defaultProps)===null||se===void 0?void 0:se[s],Ee="hide"in ne.props?ne.props.hide:(ye=ne.type.defaultProps)===null||ye===void 0?void 0:ye.hide;return Ne===C&&(k||!Ee)}),T,a,f);B&&(V=B)}y&&(M==="number"||N!=="auto")&&(G=gv(I,T,"category"))}else y?V=G1(0,F):o&&o[C]&&o[C].hasStack&&M==="number"?V=m==="expand"?[0,1]:$H(o[C].stackGroups,l,u):V=zH(I,i.filter(function(ne){var se=s in ne.props?ne.props[s]:ne.type.defaultProps[s],ye="hide"in ne.props?ne.props.hide:ne.type.defaultProps.hide;return se===C&&(k||!ye)}),M,f,!0);if(M==="number")V=vN(h,V,C,a,O),ae&&(V=IP(ae,V,A));else if(M==="category"&&ae){var Y=ae,X=V.every(function(ne){return Y.indexOf(ne)>=0});X&&(V=Y)}}return Xe(Xe({},w),{},an({},C,Xe(Xe({},_),{},{axisType:a,domain:V,categoricalDomain:G,duplicateDomain:W,originalDomain:(x=_.domain)!==null&&x!==void 0?x:J,isCategorical:y,layout:f})))},{})},vpe=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,f=e.layout,h=e.children,m=cS(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),y=m.length,w=BH(f,a),b=-1;return r.reduce(function(x,_){var M=_.type.defaultProps!==void 0?Xe(Xe({},_.type.defaultProps),_.props):_.props,T=M[s],A=rG("number");if(!x[T]){b++;var R;return w?R=G1(0,y):o&&o[T]&&o[T].hasStack?(R=$H(o[T].stackGroups,l,u),R=vN(h,R,T,a)):(R=IP(A,zH(m,r.filter(function(N){var O,k,C=s in N.props?N.props[s]:(O=N.type.defaultProps)===null||O===void 0?void 0:O[s],I="hide"in N.props?N.props.hide:(k=N.type.defaultProps)===null||k===void 0?void 0:k.hide;return C===T&&!I}),"number",f),i.defaultProps.allowDataOverflow),R=vN(h,R,T,a)),Xe(Xe({},x),{},an({},T,Xe(Xe({axisType:a},i.defaultProps),{},{hide:!0,orientation:Us(hpe,"".concat(a,".").concat(b%2),null),domain:R,originalDomain:A,isCategorical:w,layout:f})))}return x},{})},xpe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,s=n.graphicalItems,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,f=e.children,h="".concat(i,"Id"),m=Fs(f,a),y={};return m&&m.length?y=ype(e,{axes:m,graphicalItems:s,axisType:i,axisIdKey:h,stackGroups:o,dataStartIndex:l,dataEndIndex:u}):s&&s.length&&(y=vpe(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:h,stackGroups:o,dataStartIndex:l,dataEndIndex:u})),y},bpe=function(e){var n=Ku(e),r=Ic(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:hR(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:R1(n,r)}},O5=function(e){var n=e.children,r=e.defaultShowTooltip,i=js(n,Ym),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},wpe=function(e){return!e||!e.length?!1:e.some(function(n){var r=Lc(n&&n.type);return r&&r.indexOf("Bar")>=0})},R5=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},_pe=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,l=o===void 0?{}:o,u=r.width,f=r.height,h=r.children,m=r.margin||{},y=js(h,Ym),w=js(h,id),b=Object.keys(l).reduce(function(R,N){var O=l[N],k=O.orientation;return!O.mirror&&!O.hide?Xe(Xe({},R),{},an({},k,R[k]+O.width)):R},{left:m.left||0,right:m.right||0}),x=Object.keys(s).reduce(function(R,N){var O=s[N],k=O.orientation;return!O.mirror&&!O.hide?Xe(Xe({},R),{},an({},k,Us(R,"".concat(k))+O.height)):R},{top:m.top||0,bottom:m.bottom||0}),_=Xe(Xe({},x),b),M=_.bottom;y&&(_.bottom+=y.props.height||Ym.defaultProps.height),w&&n&&(_=Wae(_,i,r,n));var T=u-_.left-_.right,A=f-_.top-_.bottom;return Xe(Xe({brushBottom:M},_),{},{width:Math.max(T,0),height:Math.max(A,0)})},Spe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},KR=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,l=e.axisComponents,u=e.legendContent,f=e.formatAxisMap,h=e.defaultProps,m=function(_,M){var T=M.graphicalItems,A=M.stackGroups,R=M.offset,N=M.updateId,O=M.dataStartIndex,k=M.dataEndIndex,C=_.barSize,I=_.layout,F=_.barGap,V=_.barCategoryGap,W=_.maxBarSize,G=R5(I),J=G.numericAxisName,ee=G.cateAxisName,ae=wpe(T),$=[];return T.forEach(function(B,Y){var X=cS(_.data,{graphicalItems:[B],dataStartIndex:O,dataEndIndex:k}),ne=B.type.defaultProps!==void 0?Xe(Xe({},B.type.defaultProps),B.props):B.props,se=ne.dataKey,ye=ne.maxBarSize,Ne=ne["".concat(J,"Id")],Ee=ne["".concat(ee,"Id")],Oe={},$e=l.reduce(function(Ae,Je){var Qe=M["".concat(Je.axisType,"Map")],Ze=ne["".concat(Je.axisType,"Id")];Qe&&Qe[Ze]||Je.axisType==="zAxis"||fh();var At=Qe[Ze];return Xe(Xe({},Ae),{},an(an({},Je.axisType,At),"".concat(Je.axisType,"Ticks"),Ic(At)))},Oe),Ie=$e[ee],qe=$e["".concat(ee,"Ticks")],ve=A&&A[Ne]&&A[Ne].hasStack&&tse(B,A[Ne].stackGroups),Z=Lc(B.type).indexOf("Bar")>=0,Pe=R1(Ie,qe),Me=[],We=ae&&Vae({barSize:C,stackGroups:A,totalSize:Spe($e,ee)});if(Z){var ke,ct,ot=bn(ye)?W:ye,ie=(ke=(ct=R1(Ie,qe,!0))!==null&&ct!==void 0?ct:ot)!==null&&ke!==void 0?ke:0;Me=Hae({barGap:F,barCategoryGap:V,bandSize:ie!==Pe?ie:Pe,sizeList:We[Ee],maxBarSize:ot}),ie!==Pe&&(Me=Me.map(function(Ae){return Xe(Xe({},Ae),{},{position:Xe(Xe({},Ae.position),{},{offset:Ae.position.offset-ie/2})})}))}var te=B&&B.type&&B.type.getComposedData;te&&$.push({props:Xe(Xe({},te(Xe(Xe({},$e),{},{displayedData:X,props:_,dataKey:se,item:B,bandSize:Pe,barPosition:Me,offset:R,stackedData:ve,layout:I,dataStartIndex:O,dataEndIndex:k}))),{},an(an(an({key:B.key||"item-".concat(Y)},J,$e[J]),ee,$e[ee]),"animationId",N)),childIndex:qZ(B,_.children),item:B})}),$},y=function(_,M){var T=_.props,A=_.dataStartIndex,R=_.dataEndIndex,N=_.updateId;if(!H3({props:T}))return null;var O=T.children,k=T.layout,C=T.stackOffset,I=T.data,F=T.reverseStackOrder,V=R5(k),W=V.numericAxisName,G=V.cateAxisName,J=Fs(O,r),ee=Qae(I,J,"".concat(W,"Id"),"".concat(G,"Id"),C,F),ae=l.reduce(function(ne,se){var ye="".concat(se.axisType,"Map");return Xe(Xe({},ne),{},an({},ye,xpe(T,Xe(Xe({},se),{},{graphicalItems:J,stackGroups:se.axisType===W&&ee,dataStartIndex:A,dataEndIndex:R}))))},{}),$=_pe(Xe(Xe({},ae),{},{props:T,graphicalItems:J}),M?.legendBBox);Object.keys(ae).forEach(function(ne){ae[ne]=f(T,ae[ne],$,ne.replace("Map",""),n)});var B=ae["".concat(G,"Map")],Y=bpe(B),X=m(T,Xe(Xe({},ae),{},{dataStartIndex:A,dataEndIndex:R,updateId:N,graphicalItems:J,stackGroups:ee,offset:$}));return Xe(Xe({formattedGraphicalItems:X,graphicalItems:J,offset:$,stackGroups:ee},Y),ae)},w=(function(x){function _(M){var T,A,R;return npe(this,_),R=ape(this,_,[M]),an(R,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),an(R,"accessibilityManager",new Vhe),an(R,"handleLegendBBoxUpdate",function(N){if(N){var O=R.state,k=O.dataStartIndex,C=O.dataEndIndex,I=O.updateId;R.setState(Xe({legendBBox:N},y({props:R.props,dataStartIndex:k,dataEndIndex:C,updateId:I},Xe(Xe({},R.state),{},{legendBBox:N}))))}}),an(R,"handleReceiveSyncEvent",function(N,O,k){if(R.props.syncId===N){if(k===R.eventEmitterSymbol&&typeof R.props.syncMethod!="function")return;R.applySyncEvent(O)}}),an(R,"handleBrushChange",function(N){var O=N.startIndex,k=N.endIndex;if(O!==R.state.dataStartIndex||k!==R.state.dataEndIndex){var C=R.state.updateId;R.setState(function(){return Xe({dataStartIndex:O,dataEndIndex:k},y({props:R.props,dataStartIndex:O,dataEndIndex:k,updateId:C},R.state))}),R.triggerSyncEvent({dataStartIndex:O,dataEndIndex:k})}}),an(R,"handleMouseEnter",function(N){var O=R.getMouseInfo(N);if(O){var k=Xe(Xe({},O),{},{isTooltipActive:!0});R.setState(k),R.triggerSyncEvent(k);var C=R.props.onMouseEnter;un(C)&&C(k,N)}}),an(R,"triggeredAfterMouseMove",function(N){var O=R.getMouseInfo(N),k=O?Xe(Xe({},O),{},{isTooltipActive:!0}):{isTooltipActive:!1};R.setState(k),R.triggerSyncEvent(k);var C=R.props.onMouseMove;un(C)&&C(k,N)}),an(R,"handleItemMouseEnter",function(N){R.setState(function(){return{isTooltipActive:!0,activeItem:N,activePayload:N.tooltipPayload,activeCoordinate:N.tooltipPosition||{x:N.cx,y:N.cy}}})}),an(R,"handleItemMouseLeave",function(){R.setState(function(){return{isTooltipActive:!1}})}),an(R,"handleMouseMove",function(N){N.persist(),R.throttleTriggeredAfterMouseMove(N)}),an(R,"handleMouseLeave",function(N){R.throttleTriggeredAfterMouseMove.cancel();var O={isTooltipActive:!1};R.setState(O),R.triggerSyncEvent(O);var k=R.props.onMouseLeave;un(k)&&k(O,N)}),an(R,"handleOuterEvent",function(N){var O=$Z(N),k=Us(R.props,"".concat(O));if(O&&un(k)){var C,I;/.*touch.*/i.test(O)?I=R.getMouseInfo(N.changedTouches[0]):I=R.getMouseInfo(N),k((C=I)!==null&&C!==void 0?C:{},N)}}),an(R,"handleClick",function(N){var O=R.getMouseInfo(N);if(O){var k=Xe(Xe({},O),{},{isTooltipActive:!0});R.setState(k),R.triggerSyncEvent(k);var C=R.props.onClick;un(C)&&C(k,N)}}),an(R,"handleMouseDown",function(N){var O=R.props.onMouseDown;if(un(O)){var k=R.getMouseInfo(N);O(k,N)}}),an(R,"handleMouseUp",function(N){var O=R.props.onMouseUp;if(un(O)){var k=R.getMouseInfo(N);O(k,N)}}),an(R,"handleTouchMove",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&R.throttleTriggeredAfterMouseMove(N.changedTouches[0])}),an(R,"handleTouchStart",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&R.handleMouseDown(N.changedTouches[0])}),an(R,"handleTouchEnd",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&R.handleMouseUp(N.changedTouches[0])}),an(R,"handleDoubleClick",function(N){var O=R.props.onDoubleClick;if(un(O)){var k=R.getMouseInfo(N);O(k,N)}}),an(R,"handleContextMenu",function(N){var O=R.props.onContextMenu;if(un(O)){var k=R.getMouseInfo(N);O(k,N)}}),an(R,"triggerSyncEvent",function(N){R.props.syncId!==void 0&&T2.emit(A2,R.props.syncId,N,R.eventEmitterSymbol)}),an(R,"applySyncEvent",function(N){var O=R.props,k=O.layout,C=O.syncMethod,I=R.state.updateId,F=N.dataStartIndex,V=N.dataEndIndex;if(N.dataStartIndex!==void 0||N.dataEndIndex!==void 0)R.setState(Xe({dataStartIndex:F,dataEndIndex:V},y({props:R.props,dataStartIndex:F,dataEndIndex:V,updateId:I},R.state)));else if(N.activeTooltipIndex!==void 0){var W=N.chartX,G=N.chartY,J=N.activeTooltipIndex,ee=R.state,ae=ee.offset,$=ee.tooltipTicks;if(!ae)return;if(typeof C=="function")J=C($,N);else if(C==="value"){J=-1;for(var B=0;B<$.length;B++)if($[B].value===N.activeLabel){J=B;break}}var Y=Xe(Xe({},ae),{},{x:ae.left,y:ae.top}),X=Math.min(W,Y.x+Y.width),ne=Math.min(G,Y.y+Y.height),se=$[J]&&$[J].value,ye=wN(R.state,R.props.data,J),Ne=$[J]?{x:k==="horizontal"?$[J].coordinate:X,y:k==="horizontal"?ne:$[J].coordinate}:nG;R.setState(Xe(Xe({},N),{},{activeLabel:se,activeCoordinate:Ne,activePayload:ye,activeTooltipIndex:J}))}else R.setState(N)}),an(R,"renderCursor",function(N){var O,k=R.state,C=k.isTooltipActive,I=k.activeCoordinate,F=k.activePayload,V=k.offset,W=k.activeTooltipIndex,G=k.tooltipAxisBandSize,J=R.getTooltipEventType(),ee=(O=N.props.active)!==null&&O!==void 0?O:C,ae=R.props.layout,$=N.key||"_recharts-cursor";return xe.createElement(Yhe,{key:$,activeCoordinate:I,activePayload:F,activeTooltipIndex:W,chartName:n,element:N,isActive:ee,layout:ae,offset:V,tooltipAxisBandSize:G,tooltipEventType:J})}),an(R,"renderPolarAxis",function(N,O,k){var C=Us(N,"type.axisType"),I=Us(R.state,"".concat(C,"Map")),F=N.type.defaultProps,V=F!==void 0?Xe(Xe({},F),N.props):N.props,W=I&&I[V["".concat(C,"Id")]];return L.cloneElement(N,Xe(Xe({},W),{},{className:Pn(C,W.className),key:N.key||"".concat(O,"-").concat(k),ticks:Ic(W,!0)}))}),an(R,"renderPolarGrid",function(N){var O=N.props,k=O.radialLines,C=O.polarAngles,I=O.polarRadius,F=R.state,V=F.radiusAxisMap,W=F.angleAxisMap,G=Ku(V),J=Ku(W),ee=J.cx,ae=J.cy,$=J.innerRadius,B=J.outerRadius;return L.cloneElement(N,{polarAngles:Array.isArray(C)?C:Ic(J,!0).map(function(Y){return Y.coordinate}),polarRadius:Array.isArray(I)?I:Ic(G,!0).map(function(Y){return Y.coordinate}),cx:ee,cy:ae,innerRadius:$,outerRadius:B,key:N.key||"polar-grid",radialLines:k})}),an(R,"renderLegend",function(){var N=R.state.formattedGraphicalItems,O=R.props,k=O.children,C=O.width,I=O.height,F=R.props.margin||{},V=C-(F.left||0)-(F.right||0),W=UH({children:k,formattedGraphicalItems:N,legendWidth:V,legendContent:u});if(!W)return null;var G=W.item,J=C5(W,Khe);return L.cloneElement(G,Xe(Xe({},J),{},{chartWidth:C,chartHeight:I,margin:F,onBBoxUpdate:R.handleLegendBBoxUpdate}))}),an(R,"renderTooltip",function(){var N,O=R.props,k=O.children,C=O.accessibilityLayer,I=js(k,ds);if(!I)return null;var F=R.state,V=F.isTooltipActive,W=F.activeCoordinate,G=F.activePayload,J=F.activeLabel,ee=F.offset,ae=(N=I.props.active)!==null&&N!==void 0?N:V;return L.cloneElement(I,{viewBox:Xe(Xe({},ee),{},{x:ee.left,y:ee.top}),active:ae,label:J,payload:ae?G:[],coordinate:W,accessibilityLayer:C})}),an(R,"renderBrush",function(N){var O=R.props,k=O.margin,C=O.data,I=R.state,F=I.offset,V=I.dataStartIndex,W=I.dataEndIndex,G=I.updateId;return L.cloneElement(N,{key:N.key||"_recharts-brush",onChange:Tb(R.handleBrushChange,N.props.onChange),data:C,x:pt(N.props.x)?N.props.x:F.left,y:pt(N.props.y)?N.props.y:F.top+F.height+F.brushBottom-(k.bottom||0),width:pt(N.props.width)?N.props.width:F.width,startIndex:V,endIndex:W,updateId:"brush-".concat(G)})}),an(R,"renderReferenceElement",function(N,O,k){if(!N)return null;var C=R,I=C.clipPathId,F=R.state,V=F.xAxisMap,W=F.yAxisMap,G=F.offset,J=N.type.defaultProps||{},ee=N.props,ae=ee.xAxisId,$=ae===void 0?J.xAxisId:ae,B=ee.yAxisId,Y=B===void 0?J.yAxisId:B;return L.cloneElement(N,{key:N.key||"".concat(O,"-").concat(k),xAxis:V[$],yAxis:W[Y],viewBox:{x:G.left,y:G.top,width:G.width,height:G.height},clipPathId:I})}),an(R,"renderActivePoints",function(N){var O=N.item,k=N.activePoint,C=N.basePoint,I=N.childIndex,F=N.isRange,V=[],W=O.props.key,G=O.item.type.defaultProps!==void 0?Xe(Xe({},O.item.type.defaultProps),O.item.props):O.item.props,J=G.activeDot,ee=G.dataKey,ae=Xe(Xe({index:I,dataKey:ee,cx:k.x,cy:k.y,r:4,fill:FR(O.item),strokeWidth:2,stroke:"#fff",payload:k.payload,value:k.value},en(J,!1)),l1(J));return V.push(_.renderActiveDot(J,ae,"".concat(W,"-activePoint-").concat(I))),C?V.push(_.renderActiveDot(J,Xe(Xe({},ae),{},{cx:C.x,cy:C.y}),"".concat(W,"-basePoint-").concat(I))):F&&V.push(null),V}),an(R,"renderGraphicChild",function(N,O,k){var C=R.filterFormatItem(N,O,k);if(!C)return null;var I=R.getTooltipEventType(),F=R.state,V=F.isTooltipActive,W=F.tooltipAxis,G=F.activeTooltipIndex,J=F.activeLabel,ee=R.props.children,ae=js(ee,ds),$=C.props,B=$.points,Y=$.isRange,X=$.baseLine,ne=C.item.type.defaultProps!==void 0?Xe(Xe({},C.item.type.defaultProps),C.item.props):C.item.props,se=ne.activeDot,ye=ne.hide,Ne=ne.activeBar,Ee=ne.activeShape,Oe=!!(!ye&&V&&ae&&(se||Ne||Ee)),$e={};I!=="axis"&&ae&&ae.props.trigger==="click"?$e={onClick:Tb(R.handleItemMouseEnter,N.props.onClick)}:I!=="axis"&&($e={onMouseLeave:Tb(R.handleItemMouseLeave,N.props.onMouseLeave),onMouseEnter:Tb(R.handleItemMouseEnter,N.props.onMouseEnter)});var Ie=L.cloneElement(N,Xe(Xe({},C.props),$e));function qe(Je){return typeof W.dataKey=="function"?W.dataKey(Je.payload):null}if(Oe)if(G>=0){var ve,Z;if(W.dataKey&&!W.allowDuplicatedCategory){var Pe=typeof W.dataKey=="function"?qe:"payload.".concat(W.dataKey.toString());ve=o1(B,Pe,J),Z=Y&&X&&o1(X,Pe,J)}else ve=B?.[G],Z=Y&&X&&X[G];if(Ee||Ne){var Me=N.props.activeIndex!==void 0?N.props.activeIndex:G;return[L.cloneElement(N,Xe(Xe(Xe({},C.props),$e),{},{activeIndex:Me})),null,null]}if(!bn(ve))return[Ie].concat(ag(R.renderActivePoints({item:C,activePoint:ve,basePoint:Z,childIndex:G,isRange:Y})))}else{var We,ke=(We=R.getItemByXY(R.state.activeCoordinate))!==null&&We!==void 0?We:{graphicalItem:Ie},ct=ke.graphicalItem,ot=ct.item,ie=ot===void 0?N:ot,te=ct.childIndex,Ae=Xe(Xe(Xe({},C.props),$e),{},{activeIndex:te});return[L.cloneElement(ie,Ae),null,null]}return Y?[Ie,null,null]:[Ie,null]}),an(R,"renderCustomized",function(N,O,k){return L.cloneElement(N,Xe(Xe({key:"recharts-customized-".concat(k)},R.props),R.state))}),an(R,"renderMap",{CartesianGrid:{handler:Nb,once:!0},ReferenceArea:{handler:R.renderReferenceElement},ReferenceLine:{handler:Nb},ReferenceDot:{handler:R.renderReferenceElement},XAxis:{handler:Nb},YAxis:{handler:Nb},Brush:{handler:R.renderBrush,once:!0},Bar:{handler:R.renderGraphicChild},Line:{handler:R.renderGraphicChild},Area:{handler:R.renderGraphicChild},Radar:{handler:R.renderGraphicChild},RadialBar:{handler:R.renderGraphicChild},Scatter:{handler:R.renderGraphicChild},Pie:{handler:R.renderGraphicChild},Funnel:{handler:R.renderGraphicChild},Tooltip:{handler:R.renderCursor,once:!0},PolarGrid:{handler:R.renderPolarGrid,once:!0},PolarAngleAxis:{handler:R.renderPolarAxis},PolarRadiusAxis:{handler:R.renderPolarAxis},Customized:{handler:R.renderCustomized}}),R.clipPathId="".concat((T=M.id)!==null&&T!==void 0?T:xg("recharts"),"-clip"),R.throttleTriggeredAfterMouseMove=LV(R.triggeredAfterMouseMove,(A=M.throttleDelay)!==null&&A!==void 0?A:1e3/60),R.state={},R}return lpe(_,x),ipe(_,[{key:"componentDidMount",value:function(){var T,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(T=this.props.margin.left)!==null&&T!==void 0?T:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var T=this.props,A=T.children,R=T.data,N=T.height,O=T.layout,k=js(A,ds);if(k){var C=k.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var I=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,F=wN(this.state,R,C,I),V=this.state.tooltipTicks[C].coordinate,W=(this.state.offset.top+N)/2,G=O==="horizontal",J=G?{x:V,y:W}:{y:V,x:W},ee=this.state.formattedGraphicalItems.find(function($){var B=$.item;return B.type.name==="Scatter"});ee&&(J=Xe(Xe({},J),ee.props.points[C].tooltipPosition),F=ee.props.points[C].tooltipPayload);var ae={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:I,activePayload:F,activeCoordinate:J};this.setState(ae),this.renderCursor(k),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(T,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==T.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==T.margin){var R,N;this.accessibilityManager.setDetails({offset:{left:(R=this.props.margin.left)!==null&&R!==void 0?R:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0}})}return null}},{key:"componentDidUpdate",value:function(T){rP([js(T.children,ds)],[js(this.props.children,ds)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var T=js(this.props.children,ds);if(T&&typeof T.props.shared=="boolean"){var A=T.props.shared?"axis":"item";return o.indexOf(A)>=0?A:a}return a}},{key:"getMouseInfo",value:function(T){if(!this.container)return null;var A=this.container,R=A.getBoundingClientRect(),N=kte(R),O={chartX:Math.round(T.pageX-N.left),chartY:Math.round(T.pageY-N.top)},k=R.width/A.offsetWidth||1,C=this.inRange(O.chartX,O.chartY,k);if(!C)return null;var I=this.state,F=I.xAxisMap,V=I.yAxisMap,W=this.getTooltipEventType(),G=N5(this.state,this.props.data,this.props.layout,C);if(W!=="axis"&&F&&V){var J=Ku(F).scale,ee=Ku(V).scale,ae=J&&J.invert?J.invert(O.chartX):null,$=ee&&ee.invert?ee.invert(O.chartY):null;return Xe(Xe({},O),{},{xValue:ae,yValue:$},G)}return G?Xe(Xe({},O),G):null}},{key:"inRange",value:function(T,A){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,N=this.props.layout,O=T/R,k=A/R;if(N==="horizontal"||N==="vertical"){var C=this.state.offset,I=O>=C.left&&O<=C.left+C.width&&k>=C.top&&k<=C.top+C.height;return I?{x:O,y:k}:null}var F=this.state,V=F.angleAxisMap,W=F.radiusAxisMap;if(V&&W){var G=Ku(V);return RU({x:O,y:k},G)}return null}},{key:"parseEventsOfWrapper",value:function(){var T=this.props.children,A=this.getTooltipEventType(),R=js(T,ds),N={};R&&A==="axis"&&(R.props.trigger==="click"?N={onClick:this.handleClick}:N={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var O=l1(this.props,this.handleOuterEvent);return Xe(Xe({},O),N)}},{key:"addListener",value:function(){T2.on(A2,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){T2.removeListener(A2,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(T,A,R){for(var N=this.state.formattedGraphicalItems,O=0,k=N.length;O<k;O++){var C=N[O];if(C.item===T||C.props.key===T.key||A===Lc(C.item.type)&&R===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var T=this.clipPathId,A=this.state.offset,R=A.left,N=A.top,O=A.height,k=A.width;return xe.createElement("defs",null,xe.createElement("clipPath",{id:T},xe.createElement("rect",{x:R,y:N,height:O,width:k})))}},{key:"getXScales",value:function(){var T=this.state.xAxisMap;return T?Object.entries(T).reduce(function(A,R){var N=E5(R,2),O=N[0],k=N[1];return Xe(Xe({},A),{},an({},O,k.scale))},{}):null}},{key:"getYScales",value:function(){var T=this.state.yAxisMap;return T?Object.entries(T).reduce(function(A,R){var N=E5(R,2),O=N[0],k=N[1];return Xe(Xe({},A),{},an({},O,k.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(T){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[T])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(T){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[T])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(T){var A=this.state,R=A.formattedGraphicalItems,N=A.activeItem;if(R&&R.length)for(var O=0,k=R.length;O<k;O++){var C=R[O],I=C.props,F=C.item,V=F.type.defaultProps!==void 0?Xe(Xe({},F.type.defaultProps),F.props):F.props,W=Lc(F.type);if(W==="Bar"){var G=(I.data||[]).find(function($){return Zle(T,$)});if(G)return{graphicalItem:C,payload:G}}else if(W==="RadialBar"){var J=(I.data||[]).find(function($){return RU(T,$)});if(J)return{graphicalItem:C,payload:J}}else if(nS(C,N)||rS(C,N)||d0(C,N)){var ee=bue({graphicalItem:C,activeTooltipItem:N,itemData:V.data}),ae=V.activeIndex===void 0?ee:V.activeIndex;return{graphicalItem:Xe(Xe({},C),{},{childIndex:ae}),payload:d0(C,N)?V.data[ee]:C.props.data[ee]}}}return null}},{key:"render",value:function(){var T=this;if(!H3(this))return null;var A=this.props,R=A.children,N=A.className,O=A.width,k=A.height,C=A.style,I=A.compact,F=A.title,V=A.desc,W=C5(A,Zhe),G=en(W,!1);if(I)return xe.createElement(l5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},xe.createElement(aP,fm({},G,{width:O,height:k,title:F,desc:V}),this.renderClipPath(),G3(R,this.renderMap)));if(this.props.accessibilityLayer){var J,ee;G.tabIndex=(J=this.props.tabIndex)!==null&&J!==void 0?J:0,G.role=(ee=this.props.role)!==null&&ee!==void 0?ee:"application",G.onKeyDown=function($){T.accessibilityManager.keyboardEvent($)},G.onFocus=function(){T.accessibilityManager.focus()}}var ae=this.parseEventsOfWrapper();return xe.createElement(l5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},xe.createElement("div",fm({className:Pn("recharts-wrapper",N),style:Xe({position:"relative",cursor:"default",width:O,height:k},C)},ae,{ref:function(B){T.container=B}}),xe.createElement(aP,fm({},G,{width:O,height:k,title:F,desc:V,style:ppe}),this.renderClipPath(),G3(R,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(L.Component);an(w,"displayName",n),an(w,"defaultProps",Xe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),an(w,"getDerivedStateFromProps",function(x,_){var M=x.dataKey,T=x.data,A=x.children,R=x.width,N=x.height,O=x.layout,k=x.stackOffset,C=x.margin,I=_.dataStartIndex,F=_.dataEndIndex;if(_.updateId===void 0){var V=O5(x);return Xe(Xe(Xe({},V),{},{updateId:0},y(Xe(Xe({props:x},V),{},{updateId:0}),_)),{},{prevDataKey:M,prevData:T,prevWidth:R,prevHeight:N,prevLayout:O,prevStackOffset:k,prevMargin:C,prevChildren:A})}if(M!==_.prevDataKey||T!==_.prevData||R!==_.prevWidth||N!==_.prevHeight||O!==_.prevLayout||k!==_.prevStackOffset||!Mm(C,_.prevMargin)){var W=O5(x),G={chartX:_.chartX,chartY:_.chartY,isTooltipActive:_.isTooltipActive},J=Xe(Xe({},N5(_,T,O)),{},{updateId:_.updateId+1}),ee=Xe(Xe(Xe({},W),G),J);return Xe(Xe(Xe({},ee),y(Xe({props:x},ee),_)),{},{prevDataKey:M,prevData:T,prevWidth:R,prevHeight:N,prevLayout:O,prevStackOffset:k,prevMargin:C,prevChildren:A})}if(!rP(A,_.prevChildren)){var ae,$,B,Y,X=js(A,Ym),ne=X&&(ae=($=X.props)===null||$===void 0?void 0:$.startIndex)!==null&&ae!==void 0?ae:I,se=X&&(B=(Y=X.props)===null||Y===void 0?void 0:Y.endIndex)!==null&&B!==void 0?B:F,ye=ne!==I||se!==F,Ne=!bn(T),Ee=Ne&&!ye?_.updateId:_.updateId+1;return Xe(Xe({updateId:Ee},y(Xe(Xe({props:x},_),{},{updateId:Ee,dataStartIndex:ne,dataEndIndex:se}),_)),{},{prevChildren:A,dataStartIndex:ne,dataEndIndex:se})}return null}),an(w,"renderActiveDot",function(x,_,M){var T;return L.isValidElement(x)?T=L.cloneElement(x,_):un(x)?T=x(_):T=xe.createElement(Z_,_),xe.createElement(qn,{className:"recharts-active-dot",key:M},T)});var b=L.forwardRef(function(_,M){return xe.createElement(w,fm({},_,{ref:M}))});return b.displayName=w.displayName,b},Mpe=KR({chartName:"LineChart",GraphicalChild:ed,axisComponents:[{axisType:"xAxis",AxisComp:mh},{axisType:"yAxis",AxisComp:gh}],formatAxisMap:SW}),iG=KR({chartName:"BarChart",GraphicalChild:wd,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:mh},{axisType:"yAxis",AxisComp:gh}],formatAxisMap:SW}),aG=KR({chartName:"PieChart",GraphicalChild:zl,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:tS},{axisType:"radiusAxis",AxisComp:Q_}],formatAxisMap:dse,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function s_(t){"@babel/helpers - typeof";return s_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s_(t)}function $c(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function hr(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function rr(t){hr(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||s_(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Tpe(t,e){hr(2,arguments);var n=rr(t).getTime(),r=$c(e);return new Date(n+r)}var Ape={};function Th(){return Ape}function Epe(t,e){var n,r,i,a,s,o,l,u;hr(1,arguments);var f=Th(),h=$c((n=(r=(i=(a=e?.weekStartsOn)!==null&&a!==void 0?a:e==null||(s=e.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&i!==void 0?i:f.weekStartsOn)!==null&&r!==void 0?r:(l=f.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=rr(t),y=m.getDay(),w=(y<h?7:0)+y-h;return m.setDate(m.getDate()-w),m.setHours(0,0,0,0),m}function _N(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function C2(t){hr(1,arguments);var e=rr(t);return e.setHours(0,0,0,0),e}function Dw(t,e){hr(2,arguments);var n=rr(t),r=rr(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function Cpe(t){return hr(1,arguments),t instanceof Date||s_(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Ppe(t){if(hr(1,arguments),!Cpe(t)&&typeof t!="number")return!1;var e=rr(t);return!isNaN(Number(e))}function Npe(t,e){hr(2,arguments);var n=rr(t),r=rr(e),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return i*12+a}function Ope(t,e){return hr(2,arguments),rr(t).getTime()-rr(e).getTime()}var Rpe={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},kpe="trunc";function jpe(t){return Rpe[kpe]}function Lw(t){hr(1,arguments);var e=rr(t);return e.setHours(23,59,59,999),e}function sG(t){hr(1,arguments);var e=rr(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Ipe(t){hr(1,arguments);var e=rr(t);return Lw(e).getTime()===sG(e).getTime()}function Dpe(t,e){hr(2,arguments);var n=rr(t),r=rr(e),i=Dw(n,r),a=Math.abs(Npe(n,r)),s;if(a<1)s=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);var o=Dw(n,r)===-i;Ipe(rr(t))&&a===1&&Dw(t,r)===1&&(o=!1),s=i*(a-Number(o))}return s===0?0:s}function Lpe(t,e,n){hr(2,arguments);var r=Ope(t,e)/1e3;return jpe()(r)}function Upe(t){hr(1,arguments);var e=rr(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Fpe(t,e){var n,r,i,a,s,o,l,u;hr(1,arguments);var f=Th(),h=$c((n=(r=(i=(a=e?.weekStartsOn)!==null&&a!==void 0?a:e==null||(s=e.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&i!==void 0?i:f.weekStartsOn)!==null&&r!==void 0?r:(l=f.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=rr(t),y=m.getDay(),w=(y<h?-7:0)+6-(y-h);return m.setDate(m.getDate()+w),m.setHours(23,59,59,999),m}function zpe(t,e){hr(2,arguments);var n=$c(e);return Tpe(t,-n)}var Bpe=864e5;function Vpe(t){hr(1,arguments);var e=rr(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/Bpe)+1}function o_(t){hr(1,arguments);var e=1,n=rr(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function oG(t){hr(1,arguments);var e=rr(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=o_(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var s=o_(a);return e.getTime()>=i.getTime()?n+1:e.getTime()>=s.getTime()?n:n-1}function Hpe(t){hr(1,arguments);var e=oG(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=o_(n);return r}var Wpe=6048e5;function Gpe(t){hr(1,arguments);var e=rr(t),n=o_(e).getTime()-Hpe(e).getTime();return Math.round(n/Wpe)+1}function l_(t,e){var n,r,i,a,s,o,l,u;hr(1,arguments);var f=Th(),h=$c((n=(r=(i=(a=e?.weekStartsOn)!==null&&a!==void 0?a:e==null||(s=e.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&i!==void 0?i:f.weekStartsOn)!==null&&r!==void 0?r:(l=f.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=rr(t),y=m.getUTCDay(),w=(y<h?7:0)+y-h;return m.setUTCDate(m.getUTCDate()-w),m.setUTCHours(0,0,0,0),m}function lG(t,e){var n,r,i,a,s,o,l,u;hr(1,arguments);var f=rr(t),h=f.getUTCFullYear(),m=Th(),y=$c((n=(r=(i=(a=e?.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(s=e.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:m.firstWeekContainsDate)!==null&&r!==void 0?r:(l=m.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var w=new Date(0);w.setUTCFullYear(h+1,0,y),w.setUTCHours(0,0,0,0);var b=l_(w,e),x=new Date(0);x.setUTCFullYear(h,0,y),x.setUTCHours(0,0,0,0);var _=l_(x,e);return f.getTime()>=b.getTime()?h+1:f.getTime()>=_.getTime()?h:h-1}function $pe(t,e){var n,r,i,a,s,o,l,u;hr(1,arguments);var f=Th(),h=$c((n=(r=(i=(a=e?.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(s=e.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:f.firstWeekContainsDate)!==null&&r!==void 0?r:(l=f.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),m=lG(t,e),y=new Date(0);y.setUTCFullYear(m,0,h),y.setUTCHours(0,0,0,0);var w=l_(y,e);return w}var qpe=6048e5;function Xpe(t,e){hr(1,arguments);var n=rr(t),r=l_(n,e).getTime()-$pe(n,e).getTime();return Math.round(r/qpe)+1}function cr(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var Du={y:function(e,n){var r=e.getUTCFullYear(),i=r>0?r:1-r;return cr(n==="yy"?i%100:i,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):cr(r+1,2)},d:function(e,n){return cr(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return cr(e.getUTCHours()%12||12,n.length)},H:function(e,n){return cr(e.getUTCHours(),n.length)},m:function(e,n){return cr(e.getUTCMinutes(),n.length)},s:function(e,n){return cr(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,i=e.getUTCMilliseconds(),a=Math.floor(i*Math.pow(10,r-3));return cr(a,n.length)}},jp={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ype={G:function(e,n,r){var i=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var i=e.getUTCFullYear(),a=i>0?i:1-i;return r.ordinalNumber(a,{unit:"year"})}return Du.y(e,n)},Y:function(e,n,r,i){var a=lG(e,i),s=a>0?a:1-a;if(n==="YY"){var o=s%100;return cr(o,2)}return n==="Yo"?r.ordinalNumber(s,{unit:"year"}):cr(s,n.length)},R:function(e,n){var r=oG(e);return cr(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return cr(r,n.length)},Q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return cr(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return cr(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,r){var i=e.getUTCMonth();switch(n){case"M":case"MM":return Du.M(e,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,r){var i=e.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return cr(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,r,i){var a=Xpe(e,i);return n==="wo"?r.ordinalNumber(a,{unit:"week"}):cr(a,n.length)},I:function(e,n,r){var i=Gpe(e);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):cr(i,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):Du.d(e,n)},D:function(e,n,r){var i=Vpe(e);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):cr(i,n.length)},E:function(e,n,r){var i=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,r,i){var a=e.getUTCDay(),s=(a-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(s);case"ee":return cr(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,n,r,i){var a=e.getUTCDay(),s=(a-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(s);case"cc":return cr(s,n.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,n,r){var i=e.getUTCDay(),a=i===0?7:i;switch(n){case"i":return String(a);case"ii":return cr(a,n.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,r){var i=e.getUTCHours(),a=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,n,r){var i=e.getUTCHours(),a;switch(i===12?a=jp.noon:i===0?a=jp.midnight:a=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,n,r){var i=e.getUTCHours(),a;switch(i>=17?a=jp.evening:i>=12?a=jp.afternoon:i>=4?a=jp.morning:a=jp.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return Du.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Du.H(e,n)},K:function(e,n,r){var i=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):cr(i,n.length)},k:function(e,n,r){var i=e.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):cr(i,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Du.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Du.s(e,n)},S:function(e,n){return Du.S(e,n)},X:function(e,n,r,i){var a=i._originalDate||e,s=a.getTimezoneOffset();if(s===0)return"Z";switch(n){case"X":return j5(s);case"XXXX":case"XX":return Nf(s);case"XXXXX":case"XXX":default:return Nf(s,":")}},x:function(e,n,r,i){var a=i._originalDate||e,s=a.getTimezoneOffset();switch(n){case"x":return j5(s);case"xxxx":case"xx":return Nf(s);case"xxxxx":case"xxx":default:return Nf(s,":")}},O:function(e,n,r,i){var a=i._originalDate||e,s=a.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+k5(s,":");case"OOOO":default:return"GMT"+Nf(s,":")}},z:function(e,n,r,i){var a=i._originalDate||e,s=a.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+k5(s,":");case"zzzz":default:return"GMT"+Nf(s,":")}},t:function(e,n,r,i){var a=i._originalDate||e,s=Math.floor(a.getTime()/1e3);return cr(s,n.length)},T:function(e,n,r,i){var a=i._originalDate||e,s=a.getTime();return cr(s,n.length)}};function k5(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),a=r%60;if(a===0)return n+String(i);var s=e;return n+String(i)+s+cr(a,2)}function j5(t,e){if(t%60===0){var n=t>0?"-":"+";return n+cr(Math.abs(t)/60,2)}return Nf(t,e)}function Nf(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),a=cr(Math.floor(i/60),2),s=cr(i%60,2);return r+a+n+s}var I5=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},cG=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Kpe=function(e,n){var r=e.match(/(P+)(p+)?/)||[],i=r[1],a=r[2];if(!a)return I5(e,n);var s;switch(i){case"P":s=n.dateTime({width:"short"});break;case"PP":s=n.dateTime({width:"medium"});break;case"PPP":s=n.dateTime({width:"long"});break;case"PPPP":default:s=n.dateTime({width:"full"});break}return s.replace("{{date}}",I5(i,n)).replace("{{time}}",cG(a,n))},Zpe={p:cG,P:Kpe},Jpe=["D","DD"],Qpe=["YY","YYYY"];function eme(t){return Jpe.indexOf(t)!==-1}function tme(t){return Qpe.indexOf(t)!==-1}function D5(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var nme={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},rme=function(e,n,r){var i,a=nme[e];return typeof a=="string"?i=a:n===1?i=a.one:i=a.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function P2(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var ime={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ame={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},sme={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ome={date:P2({formats:ime,defaultWidth:"full"}),time:P2({formats:ame,defaultWidth:"full"}),dateTime:P2({formats:sme,defaultWidth:"full"})},lme={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},cme=function(e,n,r,i){return lme[e]};function Ly(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var a=t.defaultFormattingWidth||t.defaultWidth,s=n!=null&&n.width?String(n.width):a;i=t.formattingValues[s]||t.formattingValues[a]}else{var o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[o]}var u=t.argumentCallback?t.argumentCallback(e):e;return i[u]}}var ume={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dme={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fme={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},hme={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},pme={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},mme={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gme=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},yme={ordinalNumber:gme,era:Ly({values:ume,defaultWidth:"wide"}),quarter:Ly({values:dme,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Ly({values:fme,defaultWidth:"wide"}),day:Ly({values:hme,defaultWidth:"wide"}),dayPeriod:Ly({values:pme,defaultWidth:"wide",formattingValues:mme,defaultFormattingWidth:"wide"})};function Uy(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;var s=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?xme(o,function(h){return h.test(s)}):vme(o,function(h){return h.test(s)}),u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;var f=e.slice(s.length);return{value:u,rest:f}}}function vme(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function xme(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function bme(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],a=e.match(t.parsePattern);if(!a)return null;var s=t.valueCallback?t.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;var o=e.slice(i.length);return{value:s,rest:o}}}var wme=/^(\d+)(th|st|nd|rd)?/i,_me=/\d+/i,Sme={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Mme={any:[/^b/i,/^(a|c)/i]},Tme={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ame={any:[/1/i,/2/i,/3/i,/4/i]},Eme={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Cme={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Pme={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Nme={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ome={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Rme={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},kme={ordinalNumber:bme({matchPattern:wme,parsePattern:_me,valueCallback:function(e){return parseInt(e,10)}}),era:Uy({matchPatterns:Sme,defaultMatchWidth:"wide",parsePatterns:Mme,defaultParseWidth:"any"}),quarter:Uy({matchPatterns:Tme,defaultMatchWidth:"wide",parsePatterns:Ame,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Uy({matchPatterns:Eme,defaultMatchWidth:"wide",parsePatterns:Cme,defaultParseWidth:"any"}),day:Uy({matchPatterns:Pme,defaultMatchWidth:"wide",parsePatterns:Nme,defaultParseWidth:"any"}),dayPeriod:Uy({matchPatterns:Ome,defaultMatchWidth:"any",parsePatterns:Rme,defaultParseWidth:"any"})},uG={code:"en-US",formatDistance:rme,formatLong:ome,formatRelative:cme,localize:yme,match:kme,options:{weekStartsOn:0,firstWeekContainsDate:1}},jme=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ime=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Dme=/^'([^]*?)'?$/,Lme=/''/g,Ume=/[a-zA-Z]/;function mn(t,e,n){var r,i,a,s,o,l,u,f,h,m,y,w,b,x;hr(2,arguments);var _=String(e),M=Th(),T=(r=(i=void 0)!==null&&i!==void 0?i:M.locale)!==null&&r!==void 0?r:uG,A=$c((a=(s=(o=(l=void 0)!==null&&l!==void 0?l:void 0)!==null&&o!==void 0?o:M.firstWeekContainsDate)!==null&&s!==void 0?s:(u=M.locale)===null||u===void 0||(f=u.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var R=$c((h=(m=(y=(w=void 0)!==null&&w!==void 0?w:void 0)!==null&&y!==void 0?y:M.weekStartsOn)!==null&&m!==void 0?m:(b=M.locale)===null||b===void 0||(x=b.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&h!==void 0?h:0);if(!(R>=0&&R<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!T.localize)throw new RangeError("locale must contain localize property");if(!T.formatLong)throw new RangeError("locale must contain formatLong property");var N=rr(t);if(!Ppe(N))throw new RangeError("Invalid time value");var O=_N(N),k=zpe(N,O),C={firstWeekContainsDate:A,weekStartsOn:R,locale:T,_originalDate:N},I=_.match(Ime).map(function(F){var V=F[0];if(V==="p"||V==="P"){var W=Zpe[V];return W(F,T.formatLong)}return F}).join("").match(jme).map(function(F){if(F==="''")return"'";var V=F[0];if(V==="'")return Fme(F);var W=Ype[V];if(W)return tme(F)&&D5(F,e,String(t)),eme(F)&&D5(F,e,String(t)),W(k,F,T.localize,C);if(V.match(Ume))throw new RangeError("Format string contains an unescaped latin alphabet character `"+V+"`");return F}).join("");return I}function Fme(t){var e=t.match(Dme);return e?e[1].replace(Lme,"'"):t}function dG(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function zme(t){return dG({},t)}var L5=1440,Bme=2520,N2=43200,Vme=86400;function Hme(t,e,n){var r,i;hr(2,arguments);var a=Th(),s=(r=(i=void 0)!==null&&i!==void 0?i:a.locale)!==null&&r!==void 0?r:uG;if(!s.formatDistance)throw new RangeError("locale must contain formatDistance property");var o=Dw(t,e);if(isNaN(o))throw new RangeError("Invalid time value");var l=dG(zme(n),{addSuffix:!1,comparison:o}),u,f;o>0?(u=rr(e),f=rr(t)):(u=rr(t),f=rr(e));var h=Lpe(f,u),m=(_N(f)-_N(u))/1e3,y=Math.round((h-m)/60),w;if(y<2)return y===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",y,l);if(y<45)return s.formatDistance("xMinutes",y,l);if(y<90)return s.formatDistance("aboutXHours",1,l);if(y<L5){var b=Math.round(y/60);return s.formatDistance("aboutXHours",b,l)}else{if(y<Bme)return s.formatDistance("xDays",1,l);if(y<N2){var x=Math.round(y/L5);return s.formatDistance("xDays",x,l)}else if(y<Vme)return w=Math.round(y/N2),s.formatDistance("aboutXMonths",w,l)}if(w=Dpe(f,u),w<12){var _=Math.round(y/N2);return s.formatDistance("xMonths",_,l)}else{var M=w%12,T=Math.floor(w/12);return M<3?s.formatDistance("aboutXYears",T,l):M<9?s.formatDistance("overXYears",T,l):s.formatDistance("almostXYears",T+1,l)}}function Wme(t,e){return hr(1,arguments),Hme(t,Date.now(),e)}const Gme=()=>{const{user:t}=Sr(),e=ni(),n=t?.role==="admin",r=t?.role==="technician",i=t?.role==="department-head",a=r,s=B=>({"Total Tickets":null,Open:"open","Approval Pending":"approval-pending",Approved:"approved",Rejected:"rejected","In Progress":"in-progress",Resolved:"resolved",Closed:"closed",Overdue:null,"Pending Tickets":"open","Closed Tickets":"closed"})[B]||null,o=B=>{const Y=s(B);Y?e(`/tickets?status=${Y}`):(B==="Total Tickets"||B==="Overdue")&&e("/tickets")},[l,u]=L.useState({totalTickets:0,pendingTickets:0,closedTickets:0,overdueTickets:0}),[f,h]=L.useState([]),[m,y]=L.useState([]),[w,b]=L.useState([]),[x,_]=L.useState([]),[M,T]=L.useState(!0),[A,R]=L.useState(null),[N,O]=L.useState([]),[k,C]=L.useState(null),[I,F]=L.useState([]),[V,W]=L.useState([]);L.useEffect(()=>{n&&G(),(n||i)&&J(),ee()},[A,k,t,n,i,a]);const G=async()=>{try{const{organizationsAPI:B}=await jI(async()=>{const{organizationsAPI:X}=await Promise.resolve().then(()=>CI);return{organizationsAPI:X}},void 0),Y=await B.getAll();O(Y)}catch(B){console.error("Failed to load organizations",B)}},J=async()=>{try{const{departmentsAPI:B}=await jI(async()=>{const{departmentsAPI:X}=await Promise.resolve().then(()=>CI);return{departmentsAPI:X}},void 0),Y=await B.getAll();F(Y)}catch(B){console.error("Failed to load departments",B)}},ee=async()=>{try{T(!0);const B=await Di.getDashboardStats(A);if(i)try{const Y=await Di.getAll({status:"approval-pending"});console.log("Department Head - Approval pending tickets loaded:",Y?.length||0,Y),W(Y||[])}catch(Y){console.error("Failed to load approval pending tickets",Y),W([])}if(i){u({totalTickets:B.totalTickets||0,openTickets:B.openTickets||0,approvalPendingTickets:B.approvalPendingTickets||0,approvedTickets:B.approvedTickets||0,rejectedTickets:B.rejectedTickets||0,inProgressTickets:B["in-progress"]||0,resolvedTickets:B.resolvedTickets||0,closedTickets:B.closedTickets||0,pendingTickets:B.pendingTickets||0,overdueTickets:B.overdueTickets||0}),h(B.recentTickets||[]),y(B.myOpenTickets||[]),b(B.statusDistribution||[]);const Y=(B.priorityDistribution||[]).reduce((ne,se)=>ne+se.value,0),X=(B.priorityDistribution||[]).map(ne=>({...ne,percentage:Y>0?Math.round(ne.value/Y*100):0}));_(X)}else if(a){const Y=B.myOpenTickets||[],X=await Di.getAll(),ne={totalTickets:X.length||0,openTickets:X.filter(Oe=>Oe.status==="open").length||0,pendingTickets:X.filter(Oe=>Oe.status==="open"||Oe.status==="in-progress").length||0,closedTickets:X.filter(Oe=>Oe.status==="closed"||Oe.status==="resolved").length||0,overdueTickets:X.filter(Oe=>{if(!Oe.dueDate)return!1;const $e=new Date(Oe.dueDate),Ie=new Date;return(Oe.status==="open"||Oe.status==="in-progress")&&$e<Ie}).length||0};u(ne),y(Y),h(B.recentTickets||[]);const se={};X.forEach(Oe=>{se[Oe.status]=(se[Oe.status]||0)+1}),b(Object.entries(se).map(([Oe,$e])=>({name:Oe,value:$e})));const ye={};X.forEach(Oe=>{ye[Oe.priority]=(ye[Oe.priority]||0)+1});const Ne=Object.values(ye).reduce((Oe,$e)=>Oe+$e,0),Ee=Object.entries(ye).map(([Oe,$e])=>({name:Oe,value:$e,percentage:Ne>0?Math.round($e/Ne*100):0}));_(Ee)}else if(!n&&!a){const Y=B.myOpenTickets||[],X=await Di.getAll(),ne={totalTickets:B.totalTickets||0,pendingTickets:B.pendingTickets||0,closedTickets:B.closedTickets||0,overdueTickets:B.overdueTickets||0};u(ne),y(Y),h([]);const se={};X.forEach(Oe=>{se[Oe.status]=(se[Oe.status]||0)+1}),b(Object.entries(se).map(([Oe,$e])=>({name:Oe,value:$e})));const ye={};X.forEach(Oe=>{ye[Oe.priority]=(ye[Oe.priority]||0)+1});const Ne=Object.values(ye).reduce((Oe,$e)=>Oe+$e,0),Ee=Object.entries(ye).map(([Oe,$e])=>({name:Oe,value:$e,percentage:Ne>0?Math.round($e/Ne*100):0}));_(Ee)}else{u({totalTickets:B.totalTickets||0,openTickets:B.openTickets||0,approvalPendingTickets:B.approvalPendingTickets||0,approvedTickets:B.approvedTickets||0,rejectedTickets:B.rejectedTickets||0,inProgressTickets:B["in-progress"]||0,resolvedTickets:B.resolvedTickets||0,closedTickets:B.closedTickets||0,pendingTickets:B.pendingTickets||0,overdueTickets:B.overdueTickets||0}),h(B.recentTickets||[]);let Y=B.myOpenTickets||[];if(Y.length===0&&B.recentTickets&&B.recentTickets.length>0){const se=B.recentTickets.filter(ye=>ye.status==="open"||ye.status==="in-progress");se.length>0&&(Y=se)}y(Y),b(B.statusDistribution||[]);const X=(B.priorityDistribution||[]).reduce((se,ye)=>se+ye.value,0),ne=(B.priorityDistribution||[]).map(se=>({...se,percentage:X>0?Math.round(se.value/X*100):0}));_(ne)}}catch(B){console.error("Dashboard data error:",B),de.error("Failed to load dashboard data. Showing default view."),u({totalTickets:0,pendingTickets:0,closedTickets:0,overdueTickets:0}),h([]),y([]),b([]),_([])}finally{T(!1)}},ae=n||i||a?[{label:"Total Tickets",value:l.totalTickets.toLocaleString(),icon:fv,color:"text-primary-600",bgGradient:"from-primary-50 to-primary-100/50",iconBg:"bg-gradient-to-br from-primary-500 to-primary-600",borderColor:"border-primary-200",shadow:"shadow-primary-200/50"},{label:"Open",value:(l.openTickets||0).toLocaleString(),icon:fv,color:"text-blue-600",bgGradient:"from-blue-50 to-blue-100/50",iconBg:"bg-gradient-to-br from-blue-500 to-blue-600",borderColor:"border-blue-200",shadow:"shadow-blue-200/50"},{label:"Approval Pending",value:(l.approvalPendingTickets||0).toLocaleString(),icon:Ml,color:"text-orange-600",bgGradient:"from-orange-50 to-orange-100/50",iconBg:"bg-gradient-to-br from-orange-500 to-orange-600",borderColor:"border-orange-200",shadow:"shadow-orange-200/50"},{label:"Approved",value:(l.approvedTickets||0).toLocaleString(),icon:_i,color:"text-green-600",bgGradient:"from-green-50 to-green-100/50",iconBg:"bg-gradient-to-br from-green-500 to-green-600",borderColor:"border-green-200",shadow:"shadow-green-200/50"},{label:"Rejected",value:(l.rejectedTickets||0).toLocaleString(),icon:Iv,color:"text-red-600",bgGradient:"from-red-50 to-red-100/50",iconBg:"bg-gradient-to-br from-red-500 to-red-600",borderColor:"border-red-200",shadow:"shadow-red-200/50"},{label:"In Progress",value:(l.inProgressTickets||0).toLocaleString(),icon:Ml,color:"text-yellow-600",bgGradient:"from-yellow-50 to-yellow-100/50",iconBg:"bg-gradient-to-br from-yellow-500 to-yellow-600",borderColor:"border-yellow-200",shadow:"shadow-yellow-200/50"},{label:"Resolved",value:(l.resolvedTickets||0).toLocaleString(),icon:_i,color:"text-emerald-600",bgGradient:"from-emerald-50 to-emerald-100/50",iconBg:"bg-gradient-to-br from-emerald-500 to-emerald-600",borderColor:"border-emerald-200",shadow:"shadow-emerald-200/50"},{label:"Closed",value:(l.closedTickets||0).toLocaleString(),icon:_i,color:"text-gray-600",bgGradient:"from-gray-50 to-gray-100/50",iconBg:"bg-gradient-to-br from-gray-500 to-gray-600",borderColor:"border-gray-200",shadow:"shadow-gray-200/50"},{label:"Overdue",value:(l.overdueTickets||0).toLocaleString(),icon:eP,color:"text-red-600",bgGradient:"from-red-50 to-red-100/50",iconBg:"bg-gradient-to-br from-red-500 to-red-600",borderColor:"border-red-200",shadow:"shadow-red-200/50"}]:[{label:"Total Tickets",value:l.totalTickets.toLocaleString(),icon:fv,color:"text-primary-600",bgGradient:"from-primary-50 to-primary-100/50",iconBg:"bg-gradient-to-br from-primary-500 to-primary-600",borderColor:"border-primary-200",shadow:"shadow-primary-200/50"},{label:"Pending Tickets",value:l.pendingTickets.toLocaleString(),icon:Ml,color:"text-orange-600",bgGradient:"from-orange-50 to-orange-100/50",iconBg:"bg-gradient-to-br from-orange-500 to-orange-600",borderColor:"border-orange-200",shadow:"shadow-orange-200/50"},{label:"Closed Tickets",value:l.closedTickets.toLocaleString(),icon:_i,color:"text-green-600",bgGradient:"from-green-50 to-green-100/50",iconBg:"bg-gradient-to-br from-green-500 to-green-600",borderColor:"border-green-200",shadow:"shadow-green-200/50"},{label:"Overdue Tickets",value:l.overdueTickets.toLocaleString(),icon:eP,color:"text-red-600",bgGradient:"from-red-50 to-red-100/50",iconBg:"bg-gradient-to-br from-red-500 to-red-600",borderColor:"border-red-200",shadow:"shadow-red-200/50"}],$={open:"#3b82f6","in-progress":"#f59e0b",resolved:"#10b981",closed:"#6b7280",urgent:"#ef4444",high:"#f97316",medium:"#f59e0b",low:"#10b981"};return c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[M&&c.jsx("div",{className:"flex items-center justify-center min-h-[40vh]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),c.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}),!M&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 animate-slide-down",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Dashboard"}),c.jsx("p",{className:"text-sm text-gray-600",children:"System overview and statistics"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-end",children:[n&&N.length>0&&c.jsx("div",{className:"w-full sm:w-64",children:c.jsx(sn,{label:"Filter by Organization",value:A||"",onChange:B=>R(B.target.value||null),options:[{value:"",label:"All Organizations"},...N.map(B=>({value:B._id||B.id,label:B.name}))],className:"mb-0",buttonStyle:!0})}),c.jsxs(Ye,{transparent:!0,variant:"outline",onClick:ee,className:`flex items-center gap-2 mb-4 sm:mb-0 ${n&&N.length>0?"w-full sm:w-64":""}`,disabled:M,style:{height:"42px"},children:[c.jsx(Df,{size:16,className:M?"animate-spin":""}),"Refresh"]}),(n||i)&&I.length>0&&c.jsx("div",{className:"w-full sm:w-64",children:c.jsx(sn,{label:"Filter by Department",value:k||"",onChange:B=>C(B.target.value||null),options:[{value:"",label:"All Departments"},...I.map(B=>({value:B._id||B.id,label:B.name}))],className:"mb-0",buttonStyle:!0})})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:ae.map((B,Y)=>{const X=B.icon,se=s(B.label)!==null||B.label==="Total Tickets";return c.jsx(Nt,{className:`p-6 border-l-4 ${B.borderColor} bg-gradient-to-br ${B.bgGradient} animate-scale-in transition-all duration-300 ${se?"cursor-pointer hover:shadow-xl hover:scale-105 hover:-translate-y-1":""}`,style:{animationDelay:`${Y*.1}s`},onClick:()=>se&&o(B.label),children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wider mb-2",children:B.label}),c.jsx("p",{className:`text-3xl font-bold ${B.color} drop-shadow-sm`,children:B.value}),se&&c.jsx("p",{className:"text-xs text-gray-500 mt-2 opacity-70",children:"Click to view"})]}),c.jsx("div",{className:`${B.iconBg} p-4 rounded-xl shadow-lg ${B.shadow}`,children:c.jsx(X,{className:"text-white",size:28})})]})},B.label)})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsx(Nt,{title:"Tickets by Status",children:c.jsx(hv,{width:"100%",height:300,children:c.jsxs(iG,{data:w.length>0?w:[{name:"No Data",value:0}],children:[c.jsx(t_,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),c.jsx(mh,{dataKey:"name",stroke:"#6b7280",tick:{fill:"#6b7280"}}),c.jsx(gh,{stroke:"#6b7280",tick:{fill:"#6b7280"}}),c.jsx(ds,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"0.5rem",color:"#111827"}}),c.jsx(wd,{dataKey:"value",name:"Tickets",radius:[8,8,0,0],children:w.map((B,Y)=>c.jsx(Fm,{fill:$[B.name]||"#3b82f6"},`cell-${Y}`))})]})})}),c.jsx(Nt,{title:"Tickets by Priority",children:c.jsx(hv,{width:"100%",height:300,children:x.length>0?c.jsxs(aG,{children:[c.jsx(zl,{data:x,cx:"50%",cy:"50%",labelLine:!1,label:({name:B,percentage:Y})=>`${B} ${Y}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:x.map((B,Y)=>c.jsx(Fm,{fill:$[B.name]||"#3b82f6"},`cell-${Y}`))}),c.jsx(ds,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"0.5rem",color:"#111827"},formatter:(B,Y,X)=>[`${B} (${X.payload.percentage}%)`,Y]})]}):c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsx("p",{className:"text-gray-500",children:"No priority data available"})})})})]}),i&&c.jsx(Nt,{title:"Pending Approval",className:"animate-slide-down",children:c.jsx("div",{className:"overflow-x-auto",children:M?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),c.jsx("p",{className:"text-gray-600",children:"Loading pending tickets..."})]}):V.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(_i,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),c.jsx("p",{className:"text-gray-600",children:"No tickets pending approval"}),c.jsx("p",{className:"text-sm text-gray-500 mt-2",children:'Tickets will appear here when they are moved to "Approval Pending" status and match your department.'})]}):c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Ticket"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Priority"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Creator"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.slice(0,10).map(B=>c.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-primary-50/50 hover:to-transparent transition-all duration-300",children:[c.jsxs("td",{className:"px-6 py-4",children:[c.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["#",B.ticketId]}),c.jsx("div",{className:"text-sm text-gray-500",children:B.title})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(ln,{variant:B.priority==="urgent"||B.priority==="high"?"danger":B.priority==="medium"?"warning":"info",children:B.priority})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:B.creator?.name||"Unknown"}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:[c.jsx("div",{className:"font-medium",children:mn(new Date(B.createdAt),"MMM dd, yyyy")}),c.jsx("div",{className:"text-xs text-gray-500",children:mn(new Date(B.createdAt),"HH:mm")})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:c.jsxs("div",{className:"flex items-center justify-end gap-2",children:[c.jsx(Ye,{transparent:!0,variant:"outline",onClick:Y=>{Y.preventDefault(),Y.stopPropagation(),e(`/tickets/${B.ticketId}`)},className:"text-xs",type:"button",children:"View"}),c.jsxs(Ye,{transparent:!0,onClick:async Y=>{Y.preventDefault(),Y.stopPropagation();try{await Di.approveTicket(B.ticketId),de.success("Ticket approved successfully!"),ee()}catch(X){console.error("Approve error:",X),de.error(X.message||"Failed to approve ticket")}},className:"text-xs bg-green-500 hover:bg-green-600 text-white border-0",type:"button",children:[c.jsx(gK,{size:14,className:"mr-1"}),"Approve"]}),c.jsxs(Ye,{transparent:!0,onClick:async Y=>{Y.preventDefault(),Y.stopPropagation();const X=window.prompt("Please provide a reason for rejection:");if(X!==null){if(!X.trim()){de.error("Rejection reason is required");return}try{await Di.rejectTicket(B.ticketId,X),de.success("Ticket rejected"),ee()}catch(ne){console.error("Reject error:",ne),de.error(ne.message||"Failed to reject ticket")}}},className:"text-xs bg-red-500 hover:bg-red-600 text-white border-0",type:"button",children:[c.jsx(NK,{size:14,className:"mr-1"}),"Reject"]})]})})]},B._id))})]})})}),!n&&!i&&c.jsx(Nt,{title:"My Tickets",children:c.jsx("div",{className:"space-y-3",children:M?c.jsx("div",{className:"text-center text-gray-500 py-8",children:"Loading..."}):m.length===0?c.jsx("div",{className:"text-center text-gray-500 py-8",children:"No tickets found"}):m.map(B=>c.jsx("div",{className:"p-4 border border-gray-200 rounded-xl hover:border-primary-300 hover:shadow-lg cursor-pointer transition-all duration-300 bg-white/80 backdrop-blur-sm hover:-translate-y-0.5",onClick:()=>e(`/tickets/${B.ticketId}`),children:c.jsx("div",{className:"flex items-start justify-between mb-2",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",B.ticketId]}),c.jsx(ln,{variant:B.priority==="urgent"||B.priority==="high"?"danger":B.priority==="medium"?"warning":"info",children:B.priority}),c.jsx(ln,{variant:B.status==="resolved"?"success":B.status==="in-progress"?"info":"warning",children:B.status})]}),c.jsx("p",{className:"text-sm text-gray-900 font-medium mb-1",children:B.title}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",mn(new Date(B.createdAt),"MMM dd, yyyy HH:mm"),B.dueDate&&c.jsxs(c.Fragment,{children:["  Due: ",mn(new Date(B.dueDate),"MMM dd, yyyy HH:mm")]})]})]})})},B._id))})}),(n||i||a)&&c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsx(Nt,{title:a?"My Assigned Tickets":"My Open Tickets",children:c.jsx("div",{className:"space-y-3",children:M?c.jsx("div",{className:"text-center text-gray-500 py-8",children:"Loading..."}):m.length===0?c.jsx("div",{className:"text-center text-gray-500 py-8",children:"No open tickets"}):m.map(B=>c.jsx("div",{className:"p-4 border border-gray-200 rounded-xl hover:border-primary-300 hover:shadow-lg cursor-pointer transition-all duration-300 bg-white/80 backdrop-blur-sm hover:-translate-y-0.5",onClick:()=>e(`/tickets/${B.ticketId}`),children:c.jsx("div",{className:"flex items-start justify-between mb-2",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",B.ticketId]}),c.jsx(ln,{variant:B.priority==="urgent"||B.priority==="high"?"danger":B.priority==="medium"?"warning":"info",children:B.priority})]}),c.jsx("p",{className:"text-sm text-gray-900 font-medium mb-1",children:B.title}),c.jsxs("p",{className:"text-xs text-gray-500",children:[B.organization?.name||"No Organization","  ",mn(new Date(B.createdAt),"dd/MM/yyyy")]})]})})},B._id))})}),c.jsx(Nt,{title:"Recent Activity",children:c.jsx("div",{className:"space-y-3",children:M?c.jsx("div",{className:"text-center text-gray-500 py-8",children:"Loading..."}):f.length===0?c.jsx("div",{className:"text-center text-gray-500 py-8",children:"No recent activity"}):f.map(B=>c.jsx("div",{className:"p-4 border border-gray-200 rounded-xl hover:border-primary-300 hover:shadow-lg cursor-pointer transition-all duration-300 bg-white/80 backdrop-blur-sm hover:-translate-y-0.5",onClick:()=>e(`/tickets/${B.ticketId}`),children:c.jsx("div",{className:"flex items-start justify-between mb-2",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",B.ticketId]}),c.jsx(ln,{variant:B.priority==="urgent"||B.priority==="high"?"danger":B.priority==="medium"?"warning":"info",children:B.priority})]}),c.jsx("p",{className:"text-sm text-gray-900 font-medium mb-1",children:B.title}),c.jsxs("p",{className:"text-xs text-gray-500",children:[B.organization?.name||"No Organization","  ",mn(new Date(B.createdAt),"dd/MM/yyyy")]})]})})},B._id))})})]}),n&&c.jsx(Nt,{title:"Recent Tickets",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Ticket"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Priority"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Assignee"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Due"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Approved By"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Approved Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M?c.jsx("tr",{children:c.jsx("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):f.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:8,className:"px-6 py-8 text-center text-gray-500",children:c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("p",{className:"text-sm font-medium",children:"No recent tickets"}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Tickets will appear here as they are created."})]})})}):f.map((B,Y)=>{const X=B.dueDate&&new Date(B.dueDate)<new Date&&(B.status==="open"||B.status==="in-progress");return c.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-primary-50/50 hover:to-transparent cursor-pointer transition-all duration-300 border-l-4 border-transparent hover:border-primary-500 hover:shadow-sm",style:{animationDelay:`${Y*.05}s`},onClick:()=>e(`/tickets/${B.ticketId}`),children:[c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[c.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["#",B.ticketId]}),c.jsx("div",{className:"text-sm text-gray-500",children:B.title})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(ln,{variant:B.priority==="urgent"||B.priority==="high"?"danger":B.priority==="medium"?"warning":"info",children:B.priority})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(ln,{variant:B.status==="resolved"?"success":B.status==="in-progress"?"info":B.status==="approved"?"success":B.status==="rejected"?"danger":B.status==="approval-pending"?"warning":B.status==="open"?"info":B.status==="closed"?"secondary":"warning",children:B.status==="approval-pending"?"Approval Pending":B.status==="in-progress"?"In Progress":B.status==="open"?"Open":B.status==="closed"?"Closed":B.status==="resolved"?"Resolved":B.status==="approved"?"Approved":B.status==="rejected"?"Rejected":B.status})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:B.assignee?.name||c.jsx("span",{className:"text-gray-400",children:"Unassigned"})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:[c.jsx("div",{className:"font-medium",children:mn(new Date(B.createdAt),"MMM dd, yyyy")}),c.jsx("div",{className:"text-xs text-gray-500",children:mn(new Date(B.createdAt),"HH:mm")})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:B.dueDate?c.jsxs("div",{children:[c.jsxs("div",{className:X?"text-red-600 font-medium":"text-gray-700",children:[mn(new Date(B.dueDate),"MMM dd, yyyy"),X&&c.jsx("span",{className:"ml-1 text-red-600",children:""})]}),c.jsx("div",{className:`text-xs ${X?"text-red-500":"text-gray-500"}`,children:mn(new Date(B.dueDate),"HH:mm")})]}):c.jsx("span",{className:"text-gray-400",children:""})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:B.approvedBy?c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-green-600",children:B.approvedBy?.name||"Unknown"}),B.approvedAt&&c.jsx("div",{className:"text-xs text-gray-500",children:mn(new Date(B.approvedAt),"MMM dd, yyyy HH:mm")})]}):c.jsx("span",{className:"text-gray-400",children:""})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:B.status==="approved"?c.jsx(ln,{variant:"success",children:"Approved"}):B.status==="rejected"?c.jsx(ln,{variant:"danger",children:"Rejected"}):B.status==="approval-pending"?c.jsx(ln,{variant:"warning",children:"Pending"}):c.jsx("span",{className:"text-gray-400",children:""})})]},B._id)})})]})})})]})]})})},$me=()=>{const{user:t}=Sr(),[e]=yY(),[n,r]=L.useState([]),[i,a]=L.useState(!0),[s,o]=L.useState(""),[l,u]=L.useState(e.get("status")||"all"),[f,h]=L.useState("all"),[m,y]=L.useState("all"),[w,b]=L.useState([]),x=ni(),_=t?.role==="admin"||t?.role==="technician";L.useEffect(()=>{const k=e.get("status");k&&u(k)},[e]),L.useEffect(()=>{_&&M()},[_]),L.useEffect(()=>{T()},[]);const M=async()=>{try{const k=await Rc.getAll();b(k||[])}catch(k){console.error("Failed to load departments",k)}},T=async()=>{try{a(!0);const k={};l&&l!=="all"&&(k.status=l),f&&f!=="all"&&(k.priority=f),m&&m!=="all"&&(k.department=m),s&&s.trim()&&(k.search=s.trim()),console.log("Loading tickets with filters:",k);const C=await Di.getAll(k);console.log("Tickets received:",C?.length||0,C);const I=Array.isArray(C)?C:[];r(I);const F=I.filter(V=>V.status==="approved");F.length>0?console.log("Approved tickets found:",F.length,F):(l==="all"||!l)&&console.log("No approved tickets found in results")}catch(k){console.error("Error loading tickets:",k),n.length===0&&de.error(k.message||"Failed to load tickets"),r([])}finally{a(!1)}},A=n,R=k=>k==="urgent"||k==="high"?"danger":k==="medium"?"warning":"info",N=k=>k==="resolved"?"success":k==="in-progress"?"info":k==="approved"?"success":k==="rejected"?"danger":k==="approval-pending"?"warning":k==="open"?"info":k==="closed"?"secondary":"warning",O=k=>({open:"Open","approval-pending":"Approval Pending",approved:"Approved",rejected:"Rejected","in-progress":"In Progress",resolved:"Resolved",closed:"Closed"})[k]||k;return c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[i&&c.jsx("div",{className:"flex items-center justify-center min-h-[40vh]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),c.jsx("p",{className:"text-gray-600",children:"Loading tickets..."})]})}),!i&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 animate-slide-down",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Tickets"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Manage and track all support tickets"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Ye,{transparent:!0,variant:"outline",onClick:T,className:"flex items-center gap-2",disabled:i,children:[c.jsx(Df,{size:16,className:i?"animate-spin":""}),"Refresh"]}),c.jsxs(Ye,{transparent:!0,onClick:()=>x("/tickets/new"),className:"animate-scale-in",children:[c.jsx(gs,{size:20,className:"mr-2"}),"New Ticket"]})]})]}),c.jsx(Nt,{className:"animate-slide-down",style:{animationDelay:"0.1s"},children:c.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 ${_?"lg:grid-cols-5":"lg:grid-cols-4"} gap-4 items-end`,children:[c.jsxs("div",{className:"relative md:col-span-2 lg:col-span-1",children:[c.jsx(oh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 z-10",size:20}),c.jsx(st,{placeholder:"Search tickets...",value:s,onChange:k=>o(k.target.value),className:"pl-10 w-full"})]}),c.jsx("div",{className:"w-full",children:c.jsx(sn,{label:"Status",value:l,onChange:k=>u(k.target.value),options:[{value:"all",label:"All Statuses"},{value:"open",label:"Open"},{value:"approval-pending",label:"Approval Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"in-progress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}]})}),c.jsx("div",{className:"w-full",children:c.jsx(sn,{label:"Priority",value:f,onChange:k=>h(k.target.value),options:[{value:"all",label:"All Priorities"},{value:"urgent",label:"Urgent"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}]})}),_&&w.length>0&&c.jsx("div",{className:"w-full",children:c.jsx(sn,{label:"Department",value:m,onChange:k=>y(k.target.value),options:[{value:"all",label:"All Departments"},...w.map(k=>({value:k._id||k.id,label:k.name}))]})}),c.jsx("div",{className:"w-full",children:c.jsxs(Ye,{variant:"outline",transparent:!0,className:"w-full",children:[c.jsx(E8,{size:20,className:"mr-2"}),"More Filters"]})})]})}),c.jsx(Nt,{className:"animate-slide-down",style:{animationDelay:"0.2s"},children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"ID"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider min-w-[200px]",children:"Title"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Category"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Priority"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Assignee"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Created"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Due"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Approved By"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Approved Status"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider whitespace-nowrap",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:11,className:"px-6 py-12 text-center text-gray-500",children:c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsx("p",{className:"text-sm font-medium",children:"No tickets found matching your criteria."}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Try adjusting your filters or create a new ticket."})]})})}):A.map((k,C)=>{const I=k.dueDate&&new Date(k.dueDate)<new Date&&(k.status==="open"||k.status==="in-progress");return c.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-primary-50/50 hover:to-transparent cursor-pointer transition-all duration-300 border-l-4 border-transparent hover:border-primary-500 hover:shadow-sm",style:{animationDelay:`${C*.05}s`},onClick:F=>{const V=F.target;V.tagName==="BUTTON"||V.closest("button")||V.closest("a")||V.closest(".badge")||x(`/tickets/${k.ticketId}`)},children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-middle",children:c.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["#",k.ticketId]})}),c.jsx("td",{className:"px-6 py-4 align-middle",children:c.jsx("div",{className:"text-sm font-medium text-gray-900 max-w-xs truncate",title:k.title,children:k.title})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-middle",children:c.jsx("span",{className:"inline-block text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded-md",children:k.category})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center align-middle",children:c.jsx("div",{className:"flex justify-center",children:c.jsx(ln,{variant:R(k.priority),children:k.priority})})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center align-middle",children:c.jsx("div",{className:"flex justify-center",children:c.jsx(ln,{variant:N(k.status),children:O(k.status)})})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 align-middle",children:c.jsx("div",{className:"max-w-[140px] truncate",title:k.assignee?.name||"Unassigned",children:k.assignee?.name||c.jsx("span",{className:"text-gray-400",children:"Unassigned"})})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 align-middle",children:[c.jsx("div",{className:"font-medium",children:mn(new Date(k.createdAt),"MMM dd, yyyy")}),c.jsx("div",{className:"text-xs text-gray-500",children:mn(new Date(k.createdAt),"HH:mm")})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 align-middle",children:k.dueDate?c.jsxs("div",{children:[c.jsxs("div",{className:I?"text-red-600 font-medium":"text-gray-700",children:[mn(new Date(k.dueDate),"MMM dd, yyyy"),I&&c.jsx("span",{className:"ml-1 text-red-600",children:""})]}),c.jsx("div",{className:`text-xs ${I?"text-red-500":"text-gray-500"}`,children:mn(new Date(k.dueDate),"HH:mm")})]}):c.jsx("span",{className:"text-gray-400",children:""})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 align-middle",children:k.approvedBy?c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-green-600 max-w-[150px] truncate",title:k.approvedBy?.name||"Unknown",children:k.approvedBy?.name||"Unknown"}),k.approvedAt&&c.jsx("div",{className:"text-xs text-gray-500",children:mn(new Date(k.approvedAt),"MMM dd, yyyy HH:mm")})]}):c.jsx("span",{className:"text-gray-400",children:""})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 align-middle",children:k.status==="approved"?c.jsx(ln,{variant:"success",children:"Approved"}):k.status==="rejected"?c.jsx(ln,{variant:"danger",children:"Rejected"}):k.status==="approval-pending"?c.jsx(ln,{variant:"warning",children:"Pending"}):c.jsx("span",{className:"text-gray-400",children:""})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium align-middle",children:c.jsx("button",{type:"button",onClick:F=>{F.preventDefault(),F.stopPropagation(),x(`/tickets/${k.ticketId}`)},className:"text-primary-600 hover:text-primary-700 transition-colors font-semibold px-2 py-1 rounded hover:bg-primary-50 relative z-10",children:"View"})})]},k._id)})})]})})})]})]})})},qme=()=>{const{user:t}=Sr(),e=ni(),[n,r]=L.useState([]),[i,a]=L.useState(!1),[s,o]=L.useState({search:"",status:"all",priority:"all",category:"all",organization:"all",dateFrom:"",dateTo:"",assignee:"all"}),[l,u]=L.useState([]),[f,h]=L.useState(!1);L.useEffect(()=>{t?.role==="admin"&&m(),y()},[]),L.useEffect(()=>{const A=setTimeout(()=>{y()},500);return()=>clearTimeout(A)},[s]);const m=async()=>{try{const A=await ha.getAll();u(A)}catch(A){console.error("Failed to load organizations:",A)}},y=async()=>{try{a(!0);const A={status:s.status!=="all"?s.status:void 0,priority:s.priority!=="all"?s.priority:void 0,search:s.search||void 0,organization:s.organization!=="all"?s.organization:void 0};let N=await Di.getAll(A)||[];if(s.category!=="all"&&(N=N.filter(O=>O.category===s.category)),s.dateFrom){const O=new Date(s.dateFrom);N=N.filter(k=>new Date(k.createdAt)>=O)}if(s.dateTo){const O=new Date(s.dateTo);O.setHours(23,59,59),N=N.filter(k=>new Date(k.createdAt)<=O)}s.assignee!=="all"&&(s.assignee==="unassigned"?N=N.filter(O=>!O.assignee):N=N.filter(O=>O.assignee?._id===s.assignee)),r(N)}catch(A){console.error("Error loading tickets:",A),de.error("Failed to load tickets"),r([])}finally{a(!1)}},w=(A,R)=>{o(N=>({...N,[A]:R}))},b=()=>{o({search:"",status:"all",priority:"all",category:"all",organization:"all",dateFrom:"",dateTo:"",assignee:"all"})},x=A=>A==="urgent"||A==="high"?"danger":A==="medium"?"warning":"info",_=A=>A==="resolved"?"success":A==="in-progress"?"info":A==="approved"?"success":A==="rejected"?"danger":A==="approval-pending"?"warning":A==="open"?"info":A==="closed"?"secondary":"warning",M=A=>({open:"Open","approval-pending":"Approval Pending",approved:"Approved",rejected:"Rejected","in-progress":"In Progress",resolved:"Resolved",closed:"Closed"})[A]||A,T=Object.values(s).some(A=>A!=="all"&&A!=="");return c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Ticket Search"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Search and filter tickets with advanced options"})]})}),c.jsx(Nt,{className:"animate-slide-down",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(oh,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 z-10",size:20}),c.jsx(st,{placeholder:"Search by ticket ID, title, or description...",value:s.search,onChange:A=>w("search",A.target.value),className:"pl-12 pr-12"}),s.search&&c.jsx("button",{onClick:()=>w("search",""),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c.jsx(po,{size:18})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(sn,{label:"Status",value:s.status,onChange:A=>w("status",A.target.value),options:[{value:"all",label:"All Statuses"},{value:"open",label:"Open"},{value:"approval-pending",label:"Approval Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"in-progress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}]}),c.jsx(sn,{label:"Priority",value:s.priority,onChange:A=>w("priority",A.target.value),options:[{value:"all",label:"All Priorities"},{value:"urgent",label:"Urgent"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}]}),t?.role==="admin"&&c.jsx(sn,{label:"Organization",value:s.organization,onChange:A=>w("organization",A.target.value),options:[{value:"all",label:"All Organizations"},...l.map(A=>({value:A._id,label:A.name}))]})]}),c.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[c.jsxs(Ye,{variant:"outline",transparent:!0,onClick:()=>h(!f),className:"flex items-center gap-2",children:[c.jsx(E8,{size:18}),f?"Hide":"Show"," Advanced Filters"]}),T&&c.jsxs(Ye,{variant:"outline",transparent:!0,onClick:b,className:"text-red-600 hover:text-red-700",children:[c.jsx(po,{size:18,className:"mr-2"}),"Clear All"]})]}),f&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[c.jsx(n1,{size:16,className:"inline mr-1"}),"Date From"]}),c.jsx(st,{type:"date",value:s.dateFrom,onChange:A=>w("dateFrom",A.target.value)})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[c.jsx(n1,{size:16,className:"inline mr-1"}),"Date To"]}),c.jsx(st,{type:"date",value:s.dateTo,onChange:A=>w("dateTo",A.target.value)})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[c.jsx(s1,{size:16,className:"inline mr-1"}),"Category"]}),c.jsx(sn,{value:s.category,onChange:A=>w("category",A.target.value),options:[{value:"all",label:"All Categories"},{value:"IT Support",label:"IT Support"},{value:"Hardware",label:"Hardware"},{value:"Software",label:"Software"},{value:"Network",label:"Network"},{value:"General",label:"General"}]})]})]})]})}),c.jsxs(Nt,{className:"animate-slide-down",style:{animationDelay:"0.1s"},children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Search Results (",n.length,")"]})}),i?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),c.jsx("p",{className:"text-gray-600",children:"Searching tickets..."})]}):n.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(oh,{className:"mx-auto text-gray-400 mb-4",size:48}),c.jsx("p",{className:"text-gray-600 font-medium",children:"No tickets found"}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Try adjusting your search criteria"})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"ID"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Title"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Category"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Priority"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Assignee"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(A=>c.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-primary-50/50 hover:to-transparent cursor-pointer transition-all duration-300",onClick:()=>e(`/tickets/${A.ticketId}`),children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["#",A.ticketId]})}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.title})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:"text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded-md",children:A.category})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(ln,{variant:x(A.priority),children:A.priority})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(ln,{variant:_(A.status),children:M(A.status)})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.assignee?.name||c.jsx("span",{className:"text-gray-400",children:"Unassigned"})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:[c.jsx("div",{className:"font-medium",children:mn(new Date(A.createdAt),"MMM dd, yyyy")}),c.jsx("div",{className:"text-xs text-gray-500",children:mn(new Date(A.createdAt),"HH:mm")})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:c.jsx("button",{onClick:R=>{R.stopPropagation(),e(`/tickets/${A.ticketId}`)},className:"text-primary-600 hover:text-primary-700 transition-colors font-semibold",children:"View"})})]},A._id))})]})})]})]})})},uS=L.forwardRef(({label:t,error:e,className:n="",required:r=!1,rows:i=4,...a},s)=>c.jsxs("div",{className:"mb-4",children:[t&&c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[t,r&&c.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),c.jsx("textarea",{ref:s,rows:i,className:`input ${e?"border-red-500 focus:ring-red-500 focus:border-red-500":""} ${n} resize-none`,...a}),e&&c.jsx("p",{className:"mt-1.5 text-sm text-red-600",children:e})]})),Xme=async(t,e)=>(console.log("Sending ticket created email...",{to:e,subject:`Ticket Created: #${t.id} - ${t.title}`,body:Zme(t)}),{success:!0}),Yme=async(t,e,n)=>(console.log("Sending ticket updated email...",{to:e,subject:`Ticket Updated: #${t.id} - ${t.title}`,body:Jme(t,n)}),{success:!0}),Kme=async(t,e,n)=>(console.log("Sending ticket comment email...",{to:e,subject:`New Comment on Ticket #${t.id}`,body:Qme(t,n)}),{success:!0}),Zme=t=>`
    <!DOCTYPE html>
    <html>
    <head>
      <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .header { background: #0ea5e9; color: white; padding: 20px; text-align: center; }
        .content { background: #f9fafb; padding: 20px; }
        .ticket-info { background: white; padding: 15px; margin: 15px 0; border-left: 4px solid #0ea5e9; }
        .ticket-id { font-size: 24px; font-weight: bold; color: #0ea5e9; }
        .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }
        .button { display: inline-block; padding: 10px 20px; background: #0ea5e9; color: white; text-decoration: none; border-radius: 5px; margin: 10px 0; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <h1>Ticket Created Successfully</h1>
        </div>
        <div class="content">
          <p>Your support ticket has been created successfully. Here are the details:</p>
          
          <div class="ticket-info">
            <div class="ticket-id">Ticket #${t.id}</div>
            <h2>${t.title}</h2>
            <p><strong>Category:</strong> ${t.category}</p>
            <p><strong>Priority:</strong> <span style="text-transform: capitalize;">${t.priority}</span></p>
            <p><strong>Status:</strong> <span style="text-transform: capitalize;">${t.status}</span></p>
            <p><strong>Created:</strong> ${new Date(t.created).toLocaleString()}</p>
            ${t.assignee?`<p><strong>Assigned to:</strong> ${t.assignee}</p>`:""}
          </div>

          <div class="ticket-info">
            <h3>Description:</h3>
            <p>${t.description}</p>
          </div>

          <p style="text-align: center;">
            <a href="${window.location.origin}/tickets/${t.id}" class="button">View Ticket</a>
          </p>

          <p>You will receive email notifications when there are updates to this ticket.</p>
        </div>
        <div class="footer">
          <p>This is an automated email from the Ticketing System.</p>
        </div>
      </div>
    </body>
    </html>
  `,Jme=(t,e)=>{const n=Object.entries(e).map(([r,i])=>`<li><strong>${r}:</strong> ${i}</li>`).join("");return`
    <!DOCTYPE html>
    <html>
    <head>
      <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .header { background: #0ea5e9; color: white; padding: 20px; text-align: center; }
        .content { background: #f9fafb; padding: 20px; }
        .ticket-info { background: white; padding: 15px; margin: 15px 0; border-left: 4px solid #0ea5e9; }
        .ticket-id { font-size: 24px; font-weight: bold; color: #0ea5e9; }
        .changes { background: #fff3cd; padding: 15px; margin: 15px 0; border-left: 4px solid #ffc107; }
        .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }
        .button { display: inline-block; padding: 10px 20px; background: #0ea5e9; color: white; text-decoration: none; border-radius: 5px; margin: 10px 0; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <h1>Ticket Updated</h1>
        </div>
        <div class="content">
          <p>Your ticket has been updated. Here are the changes:</p>
          
          <div class="ticket-info">
            <div class="ticket-id">Ticket #${t.id}</div>
            <h2>${t.title}</h2>
          </div>

          <div class="changes">
            <h3>Changes Made:</h3>
            <ul>
              ${n}
            </ul>
          </div>

          <p style="text-align: center;">
            <a href="${window.location.origin}/tickets/${t.id}" class="button">View Ticket</a>
          </p>
        </div>
        <div class="footer">
          <p>This is an automated email from the Ticketing System.</p>
        </div>
      </div>
    </body>
    </html>
  `},Qme=(t,e)=>`
    <!DOCTYPE html>
    <html>
    <head>
      <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .header { background: #0ea5e9; color: white; padding: 20px; text-align: center; }
        .content { background: #f9fafb; padding: 20px; }
        .ticket-info { background: white; padding: 15px; margin: 15px 0; border-left: 4px solid #0ea5e9; }
        .comment { background: white; padding: 15px; margin: 15px 0; border-left: 4px solid #10b981; }
        .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }
        .button { display: inline-block; padding: 10px 20px; background: #0ea5e9; color: white; text-decoration: none; border-radius: 5px; margin: 10px 0; }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <h1>New Comment on Ticket</h1>
        </div>
        <div class="content">
          <div class="ticket-info">
            <div class="ticket-id">Ticket #${t.id}</div>
            <h2>${t.title}</h2>
          </div>

          <div class="comment">
            <p><strong>${e.author}</strong> added a comment:</p>
            <p>${e.content}</p>
            <p style="color: #666; font-size: 12px;">${new Date(e.created).toLocaleString()}</p>
          </div>

          <p style="text-align: center;">
            <a href="${window.location.origin}/tickets/${t.id}" class="button">View Ticket</a>
          </p>
        </div>
        <div class="footer">
          <p>This is an automated email from the Ticketing System.</p>
        </div>
      </div>
    </body>
    </html>
  `,ege=()=>{const{user:t}=Sr(),e=t?.role==="admin",[n,r]=L.useState({title:"",description:"",category:"",priority:"",assignee:""}),[i,a]=L.useState([]),[s,o]=L.useState([]),[l,u]=L.useState(!1),[f,h]=L.useState([]),m=ni();L.useEffect(()=>{y(),w()},[]);const y=async()=>{try{const T=await sm.getAll();a(T)}catch(T){console.error("Failed to load categories:",T),a([{_id:"it-support",name:"IT Support"},{_id:"hardware",name:"Hardware"},{_id:"software",name:"Software"},{_id:"network",name:"Network"},{_id:"email",name:"Email"},{_id:"other",name:"Other"}])}},w=async()=>{try{const A=(await Jo.getAll()).filter(R=>(R.role==="technician"||R.role==="admin")&&R.status==="active");o(A)}catch(T){console.error("Failed to load assignees:",T),o([])}},b=T=>{const R=Array.from(T.target.files).filter(N=>N.size>10*1024*1024?(de.error(`${N.name} is too large. Maximum size is 10MB.`),!1):!0).slice(0,10-f.length);h([...f,...R])},x=T=>{h(f.filter((A,R)=>R!==T))},_=async T=>{if(T.preventDefault(),T.stopPropagation(),!n.title||!n.description||!n.category||!n.priority){de.error("Please fill in all required fields");return}u(!0);try{const A=new FormData;if(A.append("title",n.title.trim()),A.append("description",n.description.trim()),A.append("category",n.category),A.append("priority",n.priority),n.assignee&&A.append("assignee",n.assignee),e){const N=localStorage.getItem("useManualTicketId")==="true",O=localStorage.getItem("manualTicketId");if(N&&O){const C=parseInt(localStorage.getItem("lastUsedTicketId")||O)+1;A.append("ticketId",C.toString()),localStorage.setItem("lastUsedTicketId",C.toString())}}f.forEach(N=>{A.append("attachments",N)});const R=await Di.createWithFiles(A);if(t?.email)try{await Xme(R,t.email),de.success(`Ticket #${R.ticketId} created successfully! Email notification sent.`)}catch(N){console.error("Email error:",N),de.success(`Ticket #${R.ticketId} created successfully!`)}else de.success(`Ticket #${R.ticketId} created successfully!`);setTimeout(()=>{m(`/tickets/${R.ticketId}`)},500)}catch(A){console.error("Ticket creation error:",A);const R=A.message||"Failed to create ticket. Please try again.";de.error(R),u(!1)}},M=T=>{r({...n,[T.target.name]:T.target.value})};return c.jsx(Nn,{children:c.jsxs("div",{className:"max-w-3xl mx-auto",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h1",{className:"text-4xl font-cyber font-bold neon-text uppercase tracking-wider mb-2",children:"Create New Ticket"}),c.jsx("p",{className:"text-cyber-neon-cyan/70 font-mono uppercase tracking-widest text-sm",children:"Fill in the details below to create a new support ticket"})]}),c.jsx(Nt,{children:c.jsxs("form",{onSubmit:_,className:"space-y-6",noValidate:!0,children:[c.jsx(st,{name:"title",label:"Title",placeholder:"Brief description of the issue",value:n.title,onChange:M,required:!0}),c.jsx(uS,{name:"description",label:"Description",placeholder:"Provide detailed information about the issue...",value:n.description,onChange:M,rows:8,required:!0}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(sn,{name:"category",label:"Category *",value:n.category,onChange:M,options:[{value:"",label:"Select an option"},...i.map(T=>({value:T.name,label:T.name}))],required:!0}),c.jsx(sn,{name:"priority",label:"Priority",value:n.priority,onChange:M,options:[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}],required:!0})]}),c.jsx(sn,{name:"assignee",label:"Assignee (Optional)",value:n.assignee,onChange:M,options:[{value:"",label:"Unassigned"},...s.map(T=>({value:T._id||T.id,label:T.name}))]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-cyber font-semibold text-cyber-neon-cyan mb-2 uppercase tracking-wider",children:"Attachments (Optional)"}),c.jsxs("div",{className:"border-2 border-cyber-neon-cyan/30 rounded-lg p-4 bg-cyber-darker/30",children:[c.jsxs("label",{className:"flex items-center justify-center w-full h-32 border-2 border-dashed border-cyber-neon-cyan/50 rounded-lg cursor-pointer hover:border-cyber-neon-cyan transition-all duration-300",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx(Tl,{size:24,className:"text-cyber-neon-cyan mb-2"}),c.jsx("span",{className:"text-sm text-cyber-neon-cyan/80 font-mono",children:"Click to upload or drag and drop"}),c.jsx("span",{className:"text-xs text-cyber-neon-cyan/60 font-mono mt-1",children:"PDF, Word, Excel, Images (Max 10MB per file, up to 10 files)"})]}),c.jsx("input",{type:"file",multiple:!0,onChange:b,className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif,.txt,.csv"})]}),f.length>0&&c.jsx("div",{className:"mt-4 space-y-2",children:f.map((T,A)=>c.jsxs("div",{className:"flex items-center justify-between p-2 bg-cyber-darker/50 border border-cyber-neon-cyan/20 rounded",children:[c.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[c.jsx(vK,{size:16,className:"text-cyber-neon-cyan flex-shrink-0"}),c.jsx("span",{className:"text-sm text-cyber-neon-cyan/90 font-mono truncate",children:T.name}),c.jsxs("span",{className:"text-xs text-cyber-neon-cyan/60 font-mono",children:["(",(T.size/1024).toFixed(1)," KB)"]})]}),c.jsx("button",{type:"button",onClick:()=>x(A),className:"ml-2 text-cyber-neon-cyan/70 hover:text-cyber-neon-cyan transition-colors",children:c.jsx(po,{size:18})})]},A))})]})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx(Ye,{type:"button",variant:"outline",onClick:()=>m("/tickets"),className:"flex-1",children:"Cancel"}),c.jsx(Ye,{type:"submit",disabled:l,className:"flex-1",children:l?"Creating...":"Create Ticket"})]})]})})]})})},tge=()=>{const{id:t}=zX(),e=ni(),{user:n}=Sr(),[r,i]=L.useState(null),[a,s]=L.useState(!0),[o,l]=L.useState(""),[u,f]=L.useState(!1),[h,m]=L.useState(!1),[y,w]=L.useState(""),[b,x]=L.useState([]),[_,M]=L.useState(!1),[T,A]=L.useState([]),[R,N]=L.useState(-1),[O,k]=L.useState(0),[C,I]=L.useState([]),[F,V]=L.useState(!1),W=L.useRef(null),G=L.useRef(null),J=ve=>({open:"Open","approval-pending":"Approval Pending",approved:"Approved",rejected:"Rejected","in-progress":"In Progress",resolved:"Resolved",closed:"Closed"})[ve]||ve;L.useEffect(()=>{$(),ee(),(n?.role==="admin"||n?.role==="technician")&&ae()},[t,n]);const ee=async()=>{try{const ve=await Jo.getMentions();x(ve)}catch(ve){console.error("Failed to load users for mentions:",ve)}},ae=async()=>{try{V(!0);const ve=await Jo.getAll();if(console.log("All users loaded for assignees:",ve?.length||0,ve),!ve||ve.length===0){console.warn("No users returned from API. User may not have access or no users exist."),I([]);return}const Z=(ve||[]).filter(Pe=>{const Me=Pe.role==="admin"||Pe.role==="technician",We=Pe.status==="active"||Pe.is_active===!0||Pe.isActive===!0,ke=Me&&We;return!ke&&Me&&console.log("User filtered out (inactive):",Pe.name,Pe.email,"status:",Pe.status,"is_active:",Pe.is_active,"isActive:",Pe.isActive),ke});console.log("Assignable users found:",Z.length,Z.map(Pe=>({name:Pe.name,role:Pe.role,status:Pe.status}))),I(Z),Z.length===0&&console.warn("No assignable users found. Check user roles and status.")}catch(ve){console.error("Failed to load assignees:",ve),ve.message&&ve.message.includes("403")?(console.log("User does not have permission to view users list. This is expected for some roles."),I([])):ve.message&&ve.message.includes("Access denied")?(console.log("Access denied to users endpoint. User may not have required permissions."),I([])):(console.error("Unexpected error loading assignees:",ve),(!ve.message||!ve.message.includes("403")&&!ve.message.includes("Access denied"))&&de.error("Failed to load assignees. Please check your permissions or contact admin."),I([]))}finally{V(!1)}},$=async()=>{try{s(!0);const ve=await Di.getById(t);i(ve)}catch{de.error("Failed to load ticket"),e("/tickets")}finally{s(!1)}},B=ve=>{const Z=ve.target.value;l(Z);const Pe=ve.target.selectionStart,Me=Z.substring(0,Pe),We=Me.lastIndexOf("@");if(We!==-1){const ke=Me.substring(We+1);if(!ke.includes(" ")&&!ke.includes(`
`)){const ct=ke.toLowerCase(),ot=b.filter(ie=>ie.name.toLowerCase().includes(ct)||ie.email.toLowerCase().includes(ct));A(ot),N(We),M(!0),k(0);return}}M(!1),N(-1)},Y=ve=>{if(R===-1)return;const Z=o.substring(0,R),Pe=o.substring(R),Me=Pe.substring(1).split(/[\s\n]/)[0],We=Pe.substring(Me.length+1),ke=`${Z}@${ve.name}${We}`;l(ke),M(!1),N(-1),setTimeout(()=>{if(W.current){const ct=Z.length+ve.name.length+1;W.current.focus(),W.current.setSelectionRange(ct,ct)}},0)},X=ve=>{if(_&&T.length>0)if(ve.key==="ArrowDown"){if(ve.preventDefault(),k(Z=>Z<T.length-1?Z+1:Z),G.current){const Z=G.current.children[O+1];Z&&Z.scrollIntoView({block:"nearest"})}}else if(ve.key==="ArrowUp"){if(ve.preventDefault(),k(Z=>Z>0?Z-1:0),G.current){const Z=G.current.children[O-1];Z&&Z.scrollIntoView({block:"nearest"})}}else ve.key==="Enter"||ve.key==="Tab"?(ve.preventDefault(),Y(T[O])):ve.key==="Escape"&&M(!1)},ne=(ve,Z=[])=>{if(!Z||Z.length===0)return c.jsx("span",{children:ve});const Pe=[];let Me=0;const We=new Map(Z.map(ot=>[ot.name.toLowerCase(),ot])),ke=/@(\w+)/g;let ct;for(;(ct=ke.exec(ve))!==null;){ct.index>Me&&Pe.push(c.jsx("span",{children:ve.substring(Me,ct.index)},`text-${Me}`));const ot=ct[1],ie=We.get(ot.toLowerCase());ie?Pe.push(c.jsxs("span",{className:"bg-cyber-neon-cyan/20 text-cyber-neon-cyan px-1 rounded font-semibold",children:["@",ie.name]},`mention-${ct.index}`)):Pe.push(c.jsxs("span",{children:["@",ot]},`mention-${ct.index}`)),Me=ct.index+ct[0].length}return Me<ve.length&&Pe.push(c.jsx("span",{children:ve.substring(Me)},`text-${Me}`)),c.jsx(c.Fragment,{children:Pe})},se=async ve=>{if(ve.preventDefault(),!!o.trim()){f(!0);try{const Z=await Di.addComment(t,{content:o,attachments:[]});i(Z),l(""),M(!1);try{const Pe=r?.creator?.email;if(Pe){const Me=Z.comments[Z.comments.length-1];await Kme(r,Pe,Me),de.success("Comment added successfully! Email notification sent.")}else de.success("Comment added successfully!")}catch{de.success("Comment added successfully!")}}catch(Z){de.error(Z.message||"Failed to add comment. Please try again.")}finally{f(!1)}}},ye=async ve=>{const Z=ve.target.value,Pe=r.status;try{const Me=await Di.update(t,{status:Z});i(Me);try{const We={Status:`${Pe}  ${Z}`},ke=r?.creator?.email;ke?(await Yme(Me,ke,We),de.success(`Ticket status updated to ${Z}. Email notification sent.`)):de.success(`Ticket status updated to ${Z}`)}catch{de.success(`Ticket status updated to ${Z}`)}}catch(Me){de.error(Me.message||"Failed to update ticket status"),ve.target.value=Pe}},Ne=async ve=>{const Z=ve.target.value||null;try{const Pe=await Di.update(t,{assignee:Z});i(Pe),de.success(Z?"Ticket assigned successfully":"Ticket unassigned")}catch(Pe){de.error(Pe.message||"Failed to update assignee")}},Ee=n?.role==="admin"||n?.role==="technician";if(a||!r)return c.jsx(Nn,{children:c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})});const Oe=ve=>ve==="urgent"||ve==="high"?"danger":ve==="medium"?"warning":"info",$e=ve=>ve==="resolved"?"success":ve==="in-progress"?"info":ve==="approved"?"success":ve==="rejected"?"danger":"warning",Ie=async()=>{try{const ve=await Di.approveTicket(t);i(ve),de.success("Ticket approved successfully!")}catch(ve){de.error(ve.message||"Failed to approve ticket")}},qe=async()=>{const ve=window.prompt("Please provide a reason for rejection:");if(ve===null||!ve.trim()){ve!==null&&de.error("Rejection reason is required");return}try{const Z=await Di.rejectTicket(t,ve);i(Z),de.success("Ticket rejected")}catch(Z){de.error(Z.message||"Failed to reject ticket")}};return c.jsx(Nn,{children:c.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs(Ye,{variant:"outline",onClick:()=>e("/tickets"),children:[c.jsx(q0,{size:16,className:"mr-2"}),"Back"]}),c.jsxs("div",{children:[c.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Ticket #",r.ticketId]}),c.jsx("p",{className:"text-gray-600 mt-1",children:r.title})]})]})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsx(Nt,{children:c.jsx("div",{className:"flex items-start justify-between mb-4",children:c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Description"}),c.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:r.description})]})})}),c.jsx(Nt,{title:"Comments",children:c.jsxs("div",{className:"space-y-6",children:[r.comments&&r.comments.map(ve=>c.jsx("div",{className:"border-b border-gray-200 pb-6 last:border-0 last:pb-0",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:"w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center text-white font-medium flex-shrink-0",children:ve.author?.name?.charAt(0)||"U"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx("span",{className:"font-medium text-gray-900",children:ve.author?.name||"Unknown"}),c.jsx("span",{className:"text-sm text-gray-500",children:mn(new Date(ve.createdAt),"MMM dd, yyyy HH:mm")})]}),c.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:ne(ve.content,ve.mentions)}),ve.mentions&&ve.mentions.length>0&&c.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:ve.mentions.map((Z,Pe)=>c.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-cyber-neon-cyan/10 text-cyber-neon-cyan border border-cyber-neon-cyan/30",children:["@",Z.name||Z.email]},Pe))}),ve.attachments&&ve.attachments.length>0&&c.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:ve.attachments.map((Z,Pe)=>c.jsxs("button",{className:"flex items-center space-x-2 text-sm text-primary-600 hover:text-primary-700",children:[c.jsx(R8,{size:16}),c.jsx("span",{children:Z.filename})]},Pe))})]})]})},ve._id)),c.jsxs("form",{onSubmit:se,className:"pt-4 border-t border-gray-200",children:[c.jsxs("div",{className:"relative",children:[c.jsx(uS,{ref:W,label:"Add a comment",placeholder:"Type your comment here... Use @ to mention users",value:o,onChange:B,onKeyDown:X,rows:4,required:!0}),_&&T.length>0&&c.jsx("div",{ref:G,className:"absolute z-10 mt-1 w-full bg-cyber-darker border-2 border-cyber-neon-cyan/50 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:T.map((ve,Z)=>c.jsxs("button",{type:"button",onClick:()=>Y(ve),className:`w-full text-left px-4 py-2 hover:bg-cyber-neon-cyan/20 transition-colors ${Z===O?"bg-cyber-neon-cyan/30":""}`,children:[c.jsx("div",{className:"font-medium text-cyber-neon-cyan",children:ve.name}),c.jsx("div",{className:"text-xs text-cyber-neon-cyan/70",children:ve.email})]},ve._id||ve.id))})]}),c.jsxs("div",{className:"flex items-center justify-between mt-4",children:[c.jsx("div",{className:"flex items-center space-x-2 text-sm text-cyber-neon-cyan/70",children:c.jsx("span",{children:"Tip: Type @ to mention users"})}),c.jsx(Ye,{type:"submit",disabled:u||!o.trim(),children:u?"Posting...":"Post Comment"})]})]})]})})]}),c.jsx("div",{className:"space-y-6",children:c.jsx(Nt,{title:"Details",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Status"}),n?.role==="admin"||n?.role==="technician"?c.jsxs("select",{value:r.status,onChange:ye,className:"input w-full",children:[c.jsx("option",{value:"open",children:"Open"}),c.jsx("option",{value:"approval-pending",children:"Approval Pending"}),c.jsx("option",{value:"approved",children:"Approved"}),c.jsx("option",{value:"rejected",children:"Rejected"}),c.jsx("option",{value:"in-progress",children:"In Progress"}),c.jsx("option",{value:"resolved",children:"Resolved"}),c.jsx("option",{value:"closed",children:"Closed"})]}):c.jsx(ln,{variant:$e(r.status),children:J(r.status)}),n?.role==="department-head"&&r.status==="approval-pending"&&c.jsxs("div",{className:"mt-3 flex gap-2",children:[c.jsx(Ye,{transparent:!0,onClick:Ie,className:"flex-1 bg-green-500 hover:bg-green-600 text-white",children:"Approve"}),c.jsx(Ye,{transparent:!0,onClick:qe,className:"flex-1 bg-red-500 hover:bg-red-600 text-white",children:"Reject"})]}),r.approvedBy&&c.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[r.status==="approved"?"Approved":r.status==="rejected"?"Rejected":""," by ",r.approvedBy?.name||"Unknown",r.approvedAt&&` on ${mn(new Date(r.approvedAt),"MMM dd, yyyy HH:mm")}`]}),r.rejectionReason&&c.jsxs("div",{className:"mt-2 text-xs text-red-600",children:["Reason: ",r.rejectionReason]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Priority"}),c.jsx(ln,{variant:Oe(r.priority),children:r.priority})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Category"}),c.jsx("p",{className:"text-gray-900",children:r.category})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Assignee"}),Ee?c.jsxs("div",{className:"space-y-2",children:[c.jsxs("select",{value:r.assignee?._id||r.assignee||"",onChange:Ne,className:"input w-full",disabled:F,children:[c.jsx("option",{value:"",children:"Unassigned"}),C.map(ve=>c.jsxs("option",{value:ve._id||ve.id,children:[ve.name," ",ve.role?`(${ve.role})`:""]},ve._id||ve.id))]}),c.jsx("p",{className:"text-xs text-gray-500",children:C.length===0?"No assignable users found. Please ensure there are active technicians in the system.":`Admins/Technicians can assign tickets. Current: ${r.assignee?.name||"Unassigned"}`})]}):c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Rm,{size:16,className:"text-gray-400"}),c.jsx("p",{className:"text-gray-900",children:r.assignee?.name||"Unassigned"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Due Date"}),n?.role==="admin"||n?.role==="technician"?c.jsxs(c.Fragment,{children:[c.jsxs("button",{type:"button",onClick:()=>{w(r.dueDate?new Date(r.dueDate).toISOString().slice(0,10):""),m(!0)},className:"w-full flex items-center justify-between px-4 py-2 bg-cyber-darker/50 border-2 border-cyber-neon-cyan/30 rounded-lg text-cyber-neon-cyan hover:border-cyber-neon-cyan transition-all duration-300",children:[c.jsxs("span",{className:"flex items-center space-x-2",children:[c.jsx(n1,{size:16}),c.jsx("span",{children:r.dueDate?mn(new Date(r.dueDate),"MMM dd, yyyy"):"Select Due Date"})]}),c.jsx(n1,{size:16,className:"opacity-50"})]}),c.jsx(Na,{isOpen:h,onClose:()=>m(!1),title:"Select Due Date",size:"sm",footer:c.jsxs("div",{className:"flex space-x-3",children:[c.jsx(Ye,{variant:"outline",onClick:()=>{w(""),m(!1)},children:"Clear"}),c.jsx(Ye,{onClick:async()=>{const ve=y?new Date(y+"T00:00:00").toISOString():null;try{const Z=await Di.update(r.ticketId,{dueDate:ve});i(Z),m(!1),de.success("Due date updated")}catch(Z){console.error("Due date update error:",Z),de.error(Z.message||"Failed to update due date")}},children:"Set Date"})]}),children:c.jsx("div",{className:"py-4",children:c.jsx("input",{type:"date",value:y,onChange:ve=>w(ve.target.value),className:"input w-full text-center text-lg",min:new Date().toISOString().slice(0,10)})})})]}):c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Ml,{size:16,className:"text-gray-400"}),c.jsx("p",{className:"text-gray-900",children:r.dueDate?mn(new Date(r.dueDate),"MMM dd, yyyy"):"Not set"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Created"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Ml,{size:16,className:"text-gray-400"}),c.jsx("p",{className:"text-gray-900",children:mn(new Date(r.createdAt),"MMM dd, yyyy HH:mm")})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Last Updated"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Ml,{size:16,className:"text-gray-400"}),c.jsx("p",{className:"text-gray-900",children:mn(new Date(r.updatedAt),"MMM dd, yyyy HH:mm")})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-500 block mb-2",children:"Created By"}),c.jsx("p",{className:"text-gray-900",children:r.creator?.name||"Unknown"})]})]})})})]})]})})},nge=()=>{const{user:t,updateUser:e}=Sr(),n=ni(),[r,i]=L.useState({name:t?.name||"",email:t?.email||"",phone:"",department:""}),[a,s]=L.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[o,l]=L.useState(!1),u=async m=>{m.preventDefault(),l(!0),setTimeout(()=>{e({...t,...r}),de.success("Profile updated successfully!"),l(!1)},1e3)},f=async m=>{if(m.preventDefault(),a.newPassword!==a.confirmPassword){de.error("New passwords do not match");return}if(a.newPassword.length<8){de.error("Password must be at least 8 characters");return}l(!0),setTimeout(()=>{s({currentPassword:"",newPassword:"",confirmPassword:""}),de.success("Password changed successfully!"),l(!1)},1e3)},h=m=>{i({...r,[m.target.name]:m.target.value})};return c.jsx(Nn,{children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile Settings"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account settings and preferences"})]}),c.jsx(Nt,{title:"Profile Information",children:c.jsxs("form",{onSubmit:u,className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center space-x-6 mb-6",children:[c.jsx("div",{className:"w-24 h-24 bg-primary-600 rounded-full flex items-center justify-center text-white text-3xl font-bold",children:t?.name?.charAt(0).toUpperCase()||"U"}),c.jsxs("div",{children:[c.jsx(Ye,{variant:"outline",type:"button",children:"Change Photo"}),c.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"JPG, PNG or GIF. Max size 2MB"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(st,{name:"name",label:"Full Name",value:r.name,onChange:h,required:!0,icon:c.jsx(Rm,{size:20})}),c.jsx(st,{name:"email",type:"email",label:"Email",value:r.email,onChange:h,required:!0,icon:c.jsx(wl,{size:20})}),c.jsx(st,{name:"phone",type:"tel",label:"Phone Number",value:r.phone,onChange:h,icon:c.jsx(AK,{size:20})}),c.jsx(st,{name:"department",label:"Department",value:r.department,onChange:h})]}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx(Ye,{type:"submit",disabled:o,children:o?"Saving...":"Save Changes"})})]})}),c.jsx(Nt,{title:"Security",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(nl,{className:"text-primary-600",size:24}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Multi-Factor Authentication"}),c.jsx("p",{className:"text-sm text-gray-600",children:t?.mfaEnabled?"MFA is enabled":"Add an extra layer of security to your account"})]})]}),t?.mfaEnabled?c.jsx(ln,{variant:"success",children:"Enabled"}):c.jsx(Ye,{variant:"outline",onClick:()=>n("/mfa-setup"),children:"Enable MFA"})]}),c.jsxs("form",{onSubmit:f,className:"space-y-4 pt-4 border-t border-gray-200",children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Change Password"}),c.jsx(st,{type:"password",label:"Current Password",value:a.currentPassword,onChange:m=>s({...a,currentPassword:m.target.value}),required:!0,icon:c.jsx(dv,{size:20})}),c.jsx(st,{type:"password",label:"New Password",value:a.newPassword,onChange:m=>s({...a,newPassword:m.target.value}),required:!0,icon:c.jsx(dv,{size:20})}),c.jsx(st,{type:"password",label:"Confirm New Password",value:a.confirmPassword,onChange:m=>s({...a,confirmPassword:m.target.value}),required:!0,icon:c.jsx(dv,{size:20})}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx(Ye,{type:"submit",disabled:o,children:o?"Changing...":"Change Password"})})]})]})})]})})},rge=()=>{const{user:t}=Sr(),{enabled:e,setEnabled:n}=T8(),[r,i]=L.useState({email:!0,push:!1,ticketUpdates:!0,comments:!0}),[a,s]=L.useState({language:"en",timezone:"UTC",theme:"light"}),[o,l]=L.useState(!1),u=m=>{i({...r,[m]:!r[m]})},f=(m,y)=>{s({...a,[m]:y})},h=async()=>{l(!0),setTimeout(()=>{de.success("Settings saved successfully!"),l(!1)},1e3)};return c.jsx(Nn,{children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account settings and preferences"})]}),c.jsx(Nt,{title:"Notification Preferences",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(iv,{className:"text-primary-600",size:20}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Email Notifications"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications via email"})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:r.email,onChange:()=>u("email"),className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(iv,{className:"text-primary-600",size:20}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Push Notifications"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Receive browser push notifications"})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:r.push,onChange:()=>u("push"),className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(iv,{className:"text-primary-600",size:20}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Ticket Updates"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Get notified when tickets are updated"})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:r.ticketUpdates,onChange:()=>u("ticketUpdates"),className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]}),c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(iv,{className:"text-primary-600",size:20}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"New Comments"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Get notified when new comments are added"})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:r.comments,onChange:()=>u("comments"),className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]})}),c.jsx(Nt,{title:"General Preferences",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx(sn,{label:"Language",value:a.language,onChange:m=>f("language",m.target.value),options:[{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"}]}),c.jsx(sn,{label:"Timezone",value:a.timezone,onChange:m=>f("timezone",m.target.value),options:[{value:"UTC",label:"UTC"},{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"Europe/London",label:"London (GMT)"},{value:"Europe/Paris",label:"Paris (CET)"},{value:"Asia/Tokyo",label:"Tokyo (JST)"}]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsxs("button",{onClick:()=>f("theme","light"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg border-2 transition-colors ${a.theme==="light"?"border-primary-600 bg-primary-50 text-primary-600":"border-gray-200 hover:border-gray-300"}`,children:[c.jsx(D8,{size:20}),c.jsx("span",{children:"Light"})]}),c.jsxs("button",{onClick:()=>f("theme","dark"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg border-2 transition-colors ${a.theme==="dark"?"border-primary-600 bg-primary-50 text-primary-600":"border-gray-200 hover:border-gray-300"}`,children:[c.jsx(O8,{size:20}),c.jsx("span",{children:"Dark"})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[e?c.jsx(CK,{className:"text-primary-600",size:20}):c.jsx(PK,{className:"text-gray-400",size:20}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Button Sounds"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Enable or disable sound effects for button clicks"})]})]}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:e,onChange:m=>{n(m.target.checked),de.success(`Button sounds ${m.target.checked?"enabled":"disabled"}`)},className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]})}),c.jsx(Nt,{title:"Account Information",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),c.jsx("p",{className:"text-gray-900",children:t?.email||"N/A"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),c.jsx(ln,{variant:t?.role==="admin"?"danger":(t?.role==="technician","info"),children:t?.role||"user"})]})]})}),c.jsx("div",{className:"flex justify-end",children:c.jsx(Ye,{onClick:h,disabled:o,children:o?"Saving...":"Save Settings"})})]})})},ige=()=>{const[t,e]=L.useState([]),[n,r]=L.useState([]),[i,a]=L.useState([]),[s,o]=L.useState(!0),[l,u]=L.useState(!1),[f,h]=L.useState(null),[m,y]=L.useState(""),[w,b]=L.useState({name:"",email:"",password:"",role:"",status:"active",organization:"",department:""});L.useEffect(()=>{x(),_(),M()},[]),L.useEffect(()=>{w.organization?M(w.organization):a([])},[w.organization]);const x=async()=>{try{o(!0);const I=await Jo.getAll();e(I)}catch(I){de.error("Failed to load users"),console.error(I)}finally{o(!1)}},_=async()=>{try{const I=await ha.getAll();r(I)}catch(I){console.error("Failed to load organizations",I)}},M=async(I=null)=>{try{const F=await Rc.getAll(),V=I?F.filter(W=>(W.organization?._id||W.organization)===I):F;a(V)}catch(F){console.error("Failed to load departments",F)}},T=t.filter(I=>I.name.toLowerCase().includes(m.toLowerCase())||I.email.toLowerCase().includes(m.toLowerCase())),A=(I=null)=>{I?(h(I),b({name:I.name,email:I.email,password:"",role:I.role,status:I.status,organization:I.organization?._id||I.organization||"",department:I.department?._id||I.department||""}),(I.organization?._id||I.organization)&&M(I.organization?._id||I.organization)):(h(null),b({name:"",email:"",password:"",role:"",status:"active",organization:"",department:""})),u(!0)},R=()=>{u(!1),h(null),b({name:"",email:"",password:"",role:"",status:"active",organization:"",department:""}),a([])},N=async I=>{I.preventDefault();try{const F={...w};if(f&&!F.password&&delete F.password,f)await Jo.update(f._id||f.id,F),de.success("User updated successfully!");else{if(!F.password){de.error("Password is required for new users");return}if(!F.organization){de.error("Organization is required for new users");return}await Jo.create(F),de.success("User created successfully!")}R(),x()}catch(F){de.error(F.message||"Failed to save user")}},O=async I=>{if(window.confirm("Are you sure you want to delete this user?"))try{await Jo.delete(I),de.success("User deleted successfully!"),x()}catch(F){de.error(F.message||"Failed to delete user")}},k=()=>{const I=["Name","Email","Password","Role","Status","Organization","Department"],F=t.map(ee=>[ee.name,ee.email,"",ee.role,ee.status,ee.organization?.name||"N/A",ee.department?.name||"N/A"]),V=[I.join(","),...F.map(ee=>ee.map(ae=>`"${ae}"`).join(","))].join(`
`),W=new Blob([V],{type:"text/csv;charset=utf-8;"}),G=document.createElement("a"),J=URL.createObjectURL(W);G.setAttribute("href",J),G.setAttribute("download",`users-export-${mn(new Date,"yyyy-MM-dd")}.csv`),G.style.visibility="hidden",document.body.appendChild(G),G.click(),document.body.removeChild(G),de.success("Users exported successfully!")},C=async I=>{const F=I.target.files[0];if(F)try{const W=(await F.text()).split(`
`).filter(Ne=>Ne.trim());if(W.length<2){de.error("CSV file must contain at least a header row and one data row");return}const G=W[0].split(",").map(Ne=>Ne.replace(/"/g,"").trim()),J=G.indexOf("Name"),ee=G.indexOf("Email"),ae=G.indexOf("Password"),$=G.indexOf("Role"),B=G.indexOf("Status"),Y=G.indexOf("Organization"),X=G.indexOf("Department");if(J===-1||ee===-1){de.error("CSV must contain Name and Email columns");return}const ne=[];for(let Ne=1;Ne<W.length;Ne++){const Ee=W[Ne].split(",").map(ve=>ve.replace(/"/g,"").trim()),Oe=Ee[J],$e=Ee[ee];if(!Oe||!$e)continue;let Ie="";if(Y!==-1&&Ee[Y]){const ve=n.find(Z=>Z.name===Ee[Y]);if(ve)Ie=ve._id||ve.id;else{de.error(`Organization "${Ee[Y]}" not found for user ${$e}`);continue}}let qe="";if(X!==-1&&Ee[X]&&Ie){const ve=i.find(Z=>Z.name===Ee[X]&&(Z.organization?._id||Z.organization)===Ie);ve&&(qe=ve._id||ve.id)}ne.push({name:Oe,email:$e,password:ae!==-1&&Ee[ae]?Ee[ae]:"TempPassword123!",role:$!==-1&&Ee[$]?Ee[$]:"user",status:B!==-1&&Ee[B]?Ee[B]:"active",organization:Ie||n[0]?._id||n[0]?.id,department:qe||""})}if(ne.length===0){de.error("No valid users found in CSV");return}let se=0,ye=0;for(const Ne of ne)try{await Jo.create(Ne),se++}catch(Ee){ye++,console.error(`Failed to import user ${Ne.email}:`,Ee)}de.success(`Imported ${se} users${ye>0?`, ${ye} failed`:""}`),x(),I.target.value=""}catch(V){de.error("Failed to import users: "+V.message),console.error(V)}};return c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"User Management"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Manage system users and their permissions"})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs(Ye,{transparent:!0,variant:"outline",onClick:k,children:[c.jsx(sh,{size:20,className:"mr-2"}),"Export CSV"]}),c.jsxs("label",{className:"btn btn-outline cursor-pointer",children:[c.jsx(Tl,{size:20,className:"mr-2"}),"Import CSV",c.jsx("input",{type:"file",accept:".csv",onChange:C,className:"hidden"})]}),c.jsxs(Ye,{onClick:()=>A(),transparent:!0,children:[c.jsx(gs,{size:20,className:"mr-2"}),"Add User"]})]})]}),c.jsxs(Nt,{className:"p-6",children:[c.jsx("div",{className:"mb-4",children:c.jsxs("div",{className:"relative",children:[c.jsx(oh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),c.jsx(st,{placeholder:"Search users...",value:m,onChange:I=>y(I.target.value),className:"pl-10"})]})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50/80 backdrop-blur-sm",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organization"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s?c.jsx("tr",{children:c.jsx("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):T.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500",children:"No users found"})}):T.map(I=>c.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-primary-50/50 hover:to-transparent transition-all duration-300 border-l-4 border-transparent hover:border-primary-500",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-primary-100/80 backdrop-blur-sm text-primary-700 border border-primary-200",children:I.name})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:I.email}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:I.organization?.name||"N/A"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:I.department?.name||"N/A"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(ln,{variant:I.role==="admin"?"danger":I.role==="technician"?"info":I.role==="department-head"?"warning":"info",children:I.role})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(ln,{variant:I.status==="active"?"success":"warning",children:I.status})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:mn(new Date(I.createdAt),"MMM dd, yyyy")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:c.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[c.jsx("button",{onClick:()=>A(I),className:"text-primary-600 hover:text-primary-700 transition-colors p-2 rounded-lg hover:bg-primary-50/50 backdrop-blur-sm",children:c.jsx(Ll,{size:18})}),c.jsx("button",{onClick:()=>O(I._id||I.id),className:"text-red-600 hover:text-red-700 transition-colors p-2 rounded-lg hover:bg-red-50/50 backdrop-blur-sm",children:c.jsx(go,{size:18})})]})})]},I._id||I.id))})]})})]}),c.jsx(Na,{isOpen:l,onClose:R,title:f?"Edit User":"Add New User",footer:c.jsxs(c.Fragment,{children:[c.jsx(Ye,{variant:"outline",transparent:!0,onClick:R,children:"Cancel"}),c.jsx(Ye,{transparent:!0,onClick:N,children:"Save"})]}),children:c.jsxs("form",{onSubmit:N,className:"space-y-4",children:[c.jsx(st,{label:"Name",value:w.name,onChange:I=>b({...w,name:I.target.value}),required:!0}),c.jsx(st,{type:"email",label:"Email",value:w.email,onChange:I=>b({...w,email:I.target.value}),required:!0}),c.jsx(st,{type:"password",label:f?"Password (Leave empty to keep current)":"Password *",value:w.password,onChange:I=>b({...w,password:I.target.value}),required:!f,placeholder:f?"Enter new password or leave empty":"Enter password"}),c.jsx(sn,{label:"Organization *",value:w.organization,onChange:I=>b({...w,organization:I.target.value,department:""}),options:n.map(I=>({value:I._id||I.id,label:I.name})),required:!0}),c.jsx(sn,{label:"Department (Optional)",value:w.department,onChange:I=>b({...w,department:I.target.value}),options:[{value:"",label:"No Department"},...i.map(I=>({value:I._id||I.id,label:I.name}))],disabled:!w.organization}),c.jsx(sn,{label:"Role",value:w.role,onChange:I=>b({...w,role:I.target.value}),options:[{value:"user",label:"User"},{value:"technician",label:"Technician"},{value:"admin",label:"Admin"},{value:"department-head",label:"Department Head"}],required:!0}),c.jsx(sn,{label:"Status",value:w.status,onChange:I=>b({...w,status:I.target.value}),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],required:!0})]})})]})})},age=[{id:1,name:"Admin",description:"Full system access",permissions:["all"],userCount:2},{id:2,name:"Technician",description:"Can manage tickets and respond to users",permissions:["tickets:read","tickets:write","comments:write"],userCount:5},{id:3,name:"User",description:"Can create and view own tickets",permissions:["tickets:read","tickets:create"],userCount:50}],sge=[{id:"tickets:read",label:"View Tickets"},{id:"tickets:create",label:"Create Tickets"},{id:"tickets:write",label:"Edit Tickets"},{id:"tickets:delete",label:"Delete Tickets"},{id:"comments:write",label:"Add Comments"},{id:"users:read",label:"View Users"},{id:"users:write",label:"Manage Users"},{id:"admin:access",label:"Admin Access"}],oge=()=>{const{hasAccess:t}=X0(),e=ni(),[n,r]=L.useState(age),[i,a]=L.useState(!1),[s,o]=L.useState(null),[l,u]=L.useState({name:"",description:"",permissions:[]}),f=(b=null)=>{if(!b&&!t("CUSTOM_ROLES")){de.error("Custom Roles feature requires a Pro upgrade"),e("/upgrade");return}b?(o(b),u({name:b.name,description:b.description,permissions:b.permissions})):(o(null),u({name:"",description:"",permissions:[]})),a(!0)},h=()=>{a(!1),o(null),u({name:"",description:"",permissions:[]})},m=b=>{if(b==="all")u({...l,permissions:["all"]});else{const x=l.permissions.includes(b)?l.permissions.filter(_=>_!==b&&_!=="all"):[...l.permissions.filter(_=>_!=="all"),b];u({...l,permissions:x})}},y=b=>{if(b.preventDefault(),s)r(n.map(x=>x.id===s.id?{...x,...l}:x)),de.success("Role updated successfully!");else{const x={...l,id:n.length+1,userCount:0};r([...n,x]),de.success("Role created successfully!")}h()},w=b=>{window.confirm("Are you sure you want to delete this role?")&&(r(n.filter(x=>x.id!==b)),de.success("Role deleted successfully!"))};return c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Role Management"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Define roles and their permissions"})]}),c.jsxs(Ye,{onClick:()=>f(),children:[c.jsx(gs,{size:20,className:"mr-2"}),"Add Role"]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(b=>c.jsxs(Nt,{children:[c.jsx("div",{className:"flex items-start justify-between mb-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:c.jsx(nl,{className:"text-primary-600",size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:b.name}),c.jsxs("p",{className:"text-sm text-gray-500",children:[b.userCount," users"]})]})]})}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:b.description}),c.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[b.permissions.slice(0,3).map(x=>c.jsx(ln,{variant:"info",className:"text-xs",children:x==="all"?"All Permissions":x},x)),b.permissions.length>3&&c.jsxs(ln,{variant:"info",className:"text-xs",children:["+",b.permissions.length-3," more"]})]}),c.jsxs("div",{className:"flex space-x-2 pt-4 border-t border-gray-200",children:[c.jsxs(Ye,{variant:"outline",size:"sm",onClick:()=>f(b),className:"flex-1",children:[c.jsx(Ll,{size:16,className:"mr-1"}),"Edit"]}),c.jsxs(Ye,{variant:"danger",size:"sm",onClick:()=>w(b.id),className:"flex-1",children:[c.jsx(go,{size:16,className:"mr-1"}),"Delete"]})]})]},b.id))}),c.jsx(Na,{isOpen:i,onClose:h,title:s?"Edit Role":"Add New Role",size:"lg",footer:c.jsxs(c.Fragment,{children:[c.jsx(Ye,{variant:"outline",onClick:h,children:"Cancel"}),c.jsx(Ye,{onClick:y,children:"Save"})]}),children:c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsx(st,{label:"Role Name",value:l.name,onChange:b=>u({...l,name:b.target.value}),required:!0}),c.jsx(uS,{label:"Description",value:l.description,onChange:b=>u({...l,description:b.target.value}),rows:3}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Permissions"}),c.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto border border-gray-200 rounded-lg p-4",children:[sge.map(b=>c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:l.permissions.includes(b.id)||l.permissions.includes("all"),onChange:()=>m(b.id),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),c.jsx("span",{className:"text-sm text-gray-700",children:b.label})]},b.id)),c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer pt-2 border-t border-gray-200",children:[c.jsx("input",{type:"checkbox",checked:l.permissions.includes("all"),onChange:()=>m("all"),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),c.jsx("span",{className:"text-sm font-medium text-gray-900",children:"All Permissions"})]})]})]})]})})]})})},lge=()=>{const{user:t}=Sr(),[e,n]=L.useState({host:"",port:"587",encryption:"tls",username:"",password:"",fromEmail:"",fromName:"Ticketing Tool",useOAuth2:!1,oauth2:{clientId:"",clientSecret:"",refreshToken:""}}),[r,i]=L.useState({host:"",port:"993",encryption:"ssl",username:"",password:"",folder:"INBOX",useOAuth2:!1,oauth2:{clientId:"",clientSecret:"",refreshToken:""}}),[a,s]=L.useState(t?.email||""),[o,l]=L.useState(!1),[u,f]=L.useState(!1),[h,m]=L.useState(!1);L.useEffect(()=>{y()},[]);const y=async()=>{try{const M=await nr.getEmailSettings();if(M.smtp){let T="none";(M.smtp.secure||M.smtp.port===587||M.smtp.port===465)&&(T=M.smtp.port===465?"ssl":"tls"),M.smtp.host&&(M.smtp.host.includes("office365.com")||M.smtp.host.includes("outlook.com"))&&T==="none"&&(T="tls"),n({host:M.smtp.host||"",port:M.smtp.port?.toString()||"587",encryption:T,username:M.smtp.auth?.user||"",password:M.smtp.auth?.pass||"",fromEmail:M.smtp.fromEmail||M.smtp.auth?.user||"",fromName:M.smtp.fromName||"Ticketing Tool",useOAuth2:M.smtp.auth?.oauth2?.enabled||!1,oauth2:{clientId:M.smtp.auth?.oauth2?.clientId||"",clientSecret:M.smtp.auth?.oauth2?.clientSecret||"",refreshToken:M.smtp.auth?.oauth2?.refreshToken||""}})}if(M.imap){const T=M.imap.secure?"ssl":"none";i({host:M.imap.host||"",port:M.imap.port?.toString()||"993",encryption:T,username:M.imap.auth?.user||"",password:M.imap.auth?.pass||"",folder:M.imap.folder||"INBOX",useOAuth2:M.imap.auth?.oauth2?.enabled||!1,oauth2:{clientId:M.imap.auth?.oauth2?.clientId||"",clientSecret:M.imap.auth?.oauth2?.clientSecret||"",refreshToken:M.imap.auth?.oauth2?.refreshToken||""}})}}catch(M){console.error("Failed to load email settings:",M)}},w=async M=>{M.preventDefault(),l(!0);try{const T={host:e.host,port:e.port,encryption:e.encryption,username:e.username,password:e.password,fromEmail:e.fromEmail,fromName:e.fromName,useOAuth2:e.useOAuth2,oauth2:e.useOAuth2?{clientId:e.oauth2.clientId,clientSecret:e.oauth2.clientSecret,refreshToken:e.oauth2.refreshToken}:void 0,auth:e.useOAuth2?{user:e.username,oauth2:{clientId:e.oauth2.clientId,clientSecret:e.oauth2.clientSecret,refreshToken:e.oauth2.refreshToken,enabled:!0}}:{user:e.username,pass:e.password}};await nr.updateEmailSettings({smtp:T}),de.success("SMTP settings saved successfully!")}catch(T){console.error("SMTP save error:",T),de.error(T.message||"Failed to save SMTP settings")}finally{l(!1)}},b=async M=>{M.preventDefault(),l(!0);try{const T={host:r.host,port:r.port,encryption:r.encryption,username:r.username,password:r.password,folder:r.folder,useOAuth2:r.useOAuth2,oauth2:r.useOAuth2?{clientId:r.oauth2.clientId,clientSecret:r.oauth2.clientSecret,refreshToken:r.oauth2.refreshToken}:void 0,auth:r.useOAuth2?{user:r.username,oauth2:{clientId:r.oauth2.clientId,clientSecret:r.oauth2.clientSecret,refreshToken:r.oauth2.refreshToken,enabled:!0}}:{user:r.username,pass:r.password}};await nr.updateEmailSettings({imap:T}),de.success("IMAP settings saved successfully!")}catch(T){console.error("IMAP save error:",T),de.error(T.message||"Failed to save IMAP settings")}finally{l(!1)}},x=async()=>{if(!a){de.error("Please enter an email address to send test email");return}if(!e.host||!e.username||!e.password){de.error("Please fill in all required SMTP fields before testing");return}if(e.host&&(e.host.includes("office365.com")||e.host.includes("outlook.com"))){if(e.encryption!=="tls"){de.error("Office365 requires TLS encryption. Please change Encryption to TLS.",{duration:6e3});return}if(e.port!=="587"){de.error("Office365 requires port 587 with TLS. Please change Port to 587.",{duration:6e3});return}}f(!0);try{const T=e.encryption==="ssl"&&e.port==="465",A={host:e.host,port:e.port,secure:T,auth:{user:e.username,pass:e.password},fromEmail:e.fromEmail,fromName:e.fromName},R=await nr.testSMTP(a,A);de.success(R.message||"Test email sent successfully! Please check your inbox.")}catch(T){const A=T.message||"Failed to send test email. Please check your SMTP settings.";if(A.includes("535")||A.includes("Authentication unsuccessful")||A.includes("EAUTH")){const R=A.split(`
`).join(" | ");de.error("Office365 Authentication Failed! Please verify: 1) App Password is 16 characters (no spaces), 2) SMTP AUTH enabled for your mailbox, 3) Try creating a new App Password",{duration:12e3}),console.error("Detailed error:",R),console.log("Office365 Troubleshooting:"),console.log("1. App Password should be exactly 16 characters"),console.log("2. No spaces before or after the password"),console.log('3. SMTP AUTH must be enabled: Set-CASMailbox -Identity "your-email" -SmtpClientAuthenticationDisabled $false'),console.log("4. Try creating a new App Password from Microsoft Account Security")}else de.error(A,{duration:6e3})}finally{f(!1)}},_=async()=>{if(!r.host||!r.username||!r.password){de.error("Please fill in all required IMAP fields before testing");return}m(!0);try{const M={host:r.host,port:r.port,secure:r.encryption==="ssl"||r.encryption==="tls",auth:{user:r.username,pass:r.password},folder:r.folder||"INBOX"},T=await nr.testIMAP(M);de.success(T.message||"IMAP connection successful!")}catch(M){de.error(M.message||"Failed to connect to IMAP server. Please check your IMAP settings.")}finally{m(!1)}};return c.jsx(Nn,{children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Email Settings"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Configure SMTP and IMAP settings for email notifications and ticket creation"})]}),c.jsx(Nt,{title:"SMTP Settings (Outgoing Email)",children:c.jsxs("form",{onSubmit:w,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(st,{label:"SMTP Host *",value:e.host,onChange:M=>n({...e,host:M.target.value}),required:!0,icon:c.jsx(OI,{size:20}),placeholder:"smtp.office365.com"}),c.jsx(st,{label:"SMTP Port *",type:"number",value:e.port,onChange:M=>n({...e,port:M.target.value}),required:!0,placeholder:"587"})]}),c.jsx(sn,{label:"Encryption *",value:e.encryption,onChange:M=>n({...e,encryption:M.target.value}),options:[{value:"none",label:"None"},{value:"tls",label:"TLS (Required for Office365)"},{value:"ssl",label:"SSL"}],required:!0}),e.host&&(e.host.includes("office365.com")||e.host.includes("outlook.com"))&&e.encryption==="none"&&c.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-xs text-red-800",children:[c.jsx("p",{className:"font-medium",children:" Office365 requires TLS encryption!"}),c.jsx("p",{children:'Please change Encryption to "TLS" for Office365 to work properly.'})]}),c.jsx(sn,{label:"Authentication Method",value:e.useOAuth2?"oauth2":"password",onChange:M=>n({...e,useOAuth2:M.target.value==="oauth2"}),options:[{value:"password",label:"App Password"},{value:"oauth2",label:"OAuth2"}]}),e.useOAuth2?c.jsxs("div",{className:"space-y-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[c.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-3",children:"OAuth2 Configuration"}),c.jsx(st,{label:"Email Address *",value:e.username,onChange:M=>n({...e,username:M.target.value}),required:!0,icon:c.jsx(wl,{size:20}),placeholder:"shared-email@example.com"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(st,{label:"Client ID *",value:e.oauth2.clientId,onChange:M=>n({...e,oauth2:{...e.oauth2,clientId:M.target.value}}),required:!0,placeholder:"Your OAuth2 Client ID"}),c.jsx(st,{type:"password",label:"Client Secret *",value:e.oauth2.clientSecret,onChange:M=>n({...e,oauth2:{...e.oauth2,clientSecret:M.target.value}}),required:!0,placeholder:"Your OAuth2 Client Secret"})]}),c.jsx(st,{label:"Refresh Token *",type:"password",value:e.oauth2.refreshToken,onChange:M=>n({...e,oauth2:{...e.oauth2,refreshToken:M.target.value}}),required:!0,placeholder:"OAuth2 Refresh Token"}),c.jsx("p",{className:"text-xs text-blue-700",children:"OAuth2 allows secure authentication for shared email accounts without storing passwords. Generate credentials from your email provider's developer console (Microsoft Azure AD, Google Cloud Console, etc.)."})]}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(st,{label:"Username *",value:e.username,onChange:M=>n({...e,username:M.target.value}),required:!0,icon:c.jsx(wl,{size:20}),placeholder:"your-email@example.com"}),c.jsx(st,{type:"password",label:"Password *",value:e.password,onChange:M=>n({...e,password:M.target.value}),required:!e.useOAuth2,disabled:e.useOAuth2,icon:c.jsx(Vc,{size:20})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(st,{type:"email",label:"From Email *",value:e.fromEmail,onChange:M=>n({...e,fromEmail:M.target.value}),required:!0,placeholder:"noreply@example.com"}),c.jsx(st,{label:"From Name *",value:e.fromName,onChange:M=>n({...e,fromName:M.target.value}),required:!0,placeholder:"Ticketing Tool"})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Send Test Email"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(st,{type:"email",placeholder:"Enter email address to receive test email",value:a,onChange:M=>s(M.target.value),className:"flex-1"}),c.jsxs(Ye,{type:"button",variant:"outline",onClick:x,disabled:u||!a,children:[c.jsx(WO,{size:16,className:"mr-2"}),u?"Sending...":"Send Test Email"]})]}),c.jsx("p",{className:"text-xs text-gray-600 mt-2",children:'Enter your email address and click "Send Test Email" to verify your SMTP configuration.'}),e.host&&(e.host.includes("office365.com")||e.host.includes("outlook.com"))&&c.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-800",children:[c.jsx("p",{className:"font-medium mb-1",children:" Office365 Authentication Requirements:"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[c.jsxs("li",{children:["Use an ",c.jsx("strong",{children:"App Password"})," (not your regular password) if MFA is enabled"]}),c.jsx("li",{children:"Copy the App Password exactly (no spaces before/after)"}),c.jsx("li",{children:"Make sure SMTP AUTH is enabled in your Office365 admin center"}),c.jsx("li",{children:"Port 587 with TLS is required for Office365"})]}),c.jsxs("p",{className:"mt-2",children:["Create App Password: ",c.jsx("a",{href:"https://account.microsoft.com/security",target:"_blank",rel:"noopener noreferrer",className:"underline font-medium",children:"Microsoft Account Security"}),"  App passwords"]})]})]}),c.jsx("div",{className:"flex space-x-3 pt-4",children:c.jsx(Ye,{type:"submit",disabled:o,children:o?"Saving...":"Save SMTP Settings"})})]})}),c.jsx(Nt,{title:"IMAP Settings (Incoming Email)",children:c.jsxs("form",{onSubmit:b,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(st,{label:"IMAP Host *",value:r.host,onChange:M=>i({...r,host:M.target.value}),required:!0,icon:c.jsx(OI,{size:20}),placeholder:"imap.office365.com"}),c.jsx(st,{label:"IMAP Port *",type:"number",value:r.port,onChange:M=>i({...r,port:M.target.value}),required:!0,placeholder:"993"})]}),c.jsx(sn,{label:"Encryption *",value:r.encryption,onChange:M=>i({...r,encryption:M.target.value}),options:[{value:"none",label:"None"},{value:"ssl",label:"SSL"},{value:"tls",label:"TLS"}],required:!0}),c.jsx(sn,{label:"Authentication Method",value:r.useOAuth2?"oauth2":"password",onChange:M=>i({...r,useOAuth2:M.target.value==="oauth2"}),options:[{value:"password",label:"App Password"},{value:"oauth2",label:"OAuth2"}]}),r.useOAuth2?c.jsxs("div",{className:"space-y-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[c.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-3",children:"OAuth2 Configuration"}),c.jsx(st,{label:"Email Address *",value:r.username,onChange:M=>i({...r,username:M.target.value}),required:!0,icon:c.jsx(wl,{size:20}),placeholder:"shared-email@example.com"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(st,{label:"Client ID *",value:r.oauth2.clientId,onChange:M=>i({...r,oauth2:{...r.oauth2,clientId:M.target.value}}),required:!0,placeholder:"Your OAuth2 Client ID"}),c.jsx(st,{type:"password",label:"Client Secret *",value:r.oauth2.clientSecret,onChange:M=>i({...r,oauth2:{...r.oauth2,clientSecret:M.target.value}}),required:!0,placeholder:"Your OAuth2 Client Secret"})]}),c.jsx(st,{label:"Refresh Token *",type:"password",value:r.oauth2.refreshToken,onChange:M=>i({...r,oauth2:{...r.oauth2,refreshToken:M.target.value}}),required:!0,placeholder:"OAuth2 Refresh Token"}),c.jsx("p",{className:"text-xs text-blue-700",children:"OAuth2 allows secure authentication for shared email accounts without storing passwords. Generate credentials from your email provider's developer console."})]}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(st,{label:"Username *",value:r.username,onChange:M=>i({...r,username:M.target.value}),required:!0,icon:c.jsx(wl,{size:20}),placeholder:"your-email@example.com"}),c.jsx(st,{type:"password",label:"Password *",value:r.password,onChange:M=>i({...r,password:M.target.value}),required:!0,icon:c.jsx(Vc,{size:20})})]}),c.jsx(st,{label:"Folder",value:r.folder,onChange:M=>i({...r,folder:M.target.value}),placeholder:"INBOX"}),c.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-lg",children:[c.jsx("p",{className:"font-medium mb-2",children:"IMAP Configuration Notes:"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[c.jsx("li",{children:"Emails sent to the configured address will automatically create tickets"}),c.jsx("li",{children:"Email subject becomes ticket title"}),c.jsx("li",{children:"Email body becomes ticket description"}),c.jsx("li",{children:"Replies to ticket emails will be added as comments"})]})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx(Ye,{type:"button",variant:"outline",onClick:_,disabled:h,children:h?"Testing...":"Test Connection"}),c.jsx(Ye,{type:"submit",disabled:o,children:o?"Saving...":"Save IMAP Settings"})]})]})})]})})},cge=()=>{const[t,e]=L.useState([]),[n,r]=L.useState(!0),[i,a]=L.useState(!1),[s,o]=L.useState(!1),[l,u]=L.useState(null),[f,h]=L.useState(""),[m,y]=L.useState({name:"",type:"ticket-created",subject:"",htmlBody:"",textBody:"",isActive:!0}),w=[{value:"ticket-created",label:"Ticket Created (Auto Reply)"},{value:"ticket-updated",label:"Ticket Status Updated"},{value:"ticket-assigned",label:"Ticket Assigned"},{value:"ticket-resolved",label:"Ticket Resolved"},{value:"custom",label:"Custom Template"}];L.useEffect(()=>{b()},[]);const b=async()=>{try{r(!0);const C=await om.getAll();e(C)}catch(C){de.error("Failed to load email templates"),console.error(C)}finally{r(!1)}},x=(C=null)=>{C?(u(C),y({name:C.name||"",type:C.type||"ticket-created",subject:C.subject||"",htmlBody:C.htmlBody||"",textBody:C.textBody||"",isActive:C.isActive!==void 0?C.isActive:!0})):(u(null),y({name:"",type:"ticket-created",subject:"",htmlBody:A("ticket-created"),textBody:"",isActive:!0})),a(!0)},_=()=>{a(!1),u(null),y({name:"",type:"ticket-created",subject:"",htmlBody:"",textBody:"",isActive:!0})},M=C=>{y({...m,type:C,htmlBody:A(C),subject:T(C)})},T=C=>({"ticket-created":"Ticket #{{ticketId}} Created - {{ticketTitle}}","ticket-updated":"Ticket #{{ticketId}} Updated - {{ticketTitle}}","ticket-assigned":"Ticket #{{ticketId}} Assigned to You - {{ticketTitle}}","ticket-resolved":"Ticket #{{ticketId}} Resolved - {{ticketTitle}}",custom:"Custom Email Template"})[C]||"",A=C=>C==="ticket-created"?`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; background-color: #f5f5f5; padding: 20px; }
    .email-container { max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .header-banner { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; padding: 30px 20px; text-align: center; }
    .header-banner h1 { font-size: 28px; font-weight: 600; margin: 0; }
    .content { padding: 30px 20px; background: #ffffff; }
    .greeting { font-size: 16px; color: #1f2937; margin-bottom: 15px; }
    .ticket-details { background: #f9fafb; padding: 20px; margin: 25px 0; border-radius: 6px; border: 1px solid #e5e7eb; }
    .detail-row { margin-bottom: 12px; font-size: 14px; }
    .detail-label { font-weight: 600; color: #374151; display: inline-block; min-width: 120px; }
    .footer-note { text-align: center; padding: 20px; background: #f9fafb; border-top: 1px solid #e5e7eb; font-size: 12px; color: #9ca3af; }
  </style>
</head>
<body>
  <div class="email-container">
    <div class="header-banner">
      <h1>Ticket Created Successfully</h1>
    </div>
    <div class="content">
      <p class="greeting">Dear Customer,</p>
      <p>Thank you for contacting us. We have received your request and created a support ticket for you.</p>
      <div class="ticket-details">
        <h3>Ticket Details:</h3>
        <div class="detail-row">
          <span class="detail-label">Ticket ID:</span>
          <span>#{{ticketId}}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Title:</span>
          <span>{{ticketTitle}}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Category:</span>
          <span>{{ticketCategory}}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Priority:</span>
          <span>{{ticketPriority}}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Status:</span>
          <span>{{ticketStatus}}</span>
        </div>
      </div>
      <p>Our support team will review your ticket and respond as soon as possible.</p>
      <p><strong>Best regards,</strong><br>Support Team</p>
    </div>
    <div class="footer-note">
      <p>This is an automated message.</p>
    </div>
  </div>
</body>
</html>`:C==="ticket-updated"?`<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; background-color: #f5f5f5; padding: 20px; }
    .email-container { max-width: 600px; margin: 0 auto; background-color: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .header-banner { background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 30px 20px; text-align: center; }
    .header-banner h1 { font-size: 28px; font-weight: 600; margin: 0; }
    .content { padding: 30px 20px; background: #ffffff; }
    .ticket-details { background: #f9fafb; padding: 20px; margin: 25px 0; border-radius: 6px; border: 1px solid #e5e7eb; }
  </style>
</head>
<body>
  <div class="email-container">
    <div class="header-banner">
      <h1>Ticket Updated</h1>
    </div>
    <div class="content">
      <p>Dear Customer,</p>
      <p>Your ticket #{{ticketId}} has been updated.</p>
      <div class="ticket-details">
        <h3>Current Status:</h3>
        <p><strong>Ticket ID:</strong> #{{ticketId}}</p>
        <p><strong>Title:</strong> {{ticketTitle}}</p>
        <p><strong>Status:</strong> {{ticketStatus}}</p>
        <p><strong>Priority:</strong> {{ticketPriority}}</p>
      </div>
      <p><strong>Best regards,</strong><br>Support Team</p>
    </div>
  </div>
</body>
</html>`:"",R=async C=>{C.preventDefault();try{l?(await om.update(l._id,m),de.success("Email template updated successfully!")):(await om.create(m),de.success("Email template created successfully!")),_(),b()}catch(I){de.error(I.message||"Failed to save email template")}},N=async C=>{if(window.confirm("Are you sure you want to delete this email template?"))try{await om.delete(C),de.success("Email template deleted successfully!"),b()}catch(I){de.error(I.message||"Failed to delete email template")}},O=async()=>{let C=m.htmlBody;const I={ticketId:"1006",ticketTitle:"Sample Ticket Title",ticketCategory:"Hardware",ticketPriority:"medium",ticketStatus:"open",customerName:"John Doe",assigneeName:"Support Technician"};Object.keys(I).forEach(F=>{const V=new RegExp(`\\{\\{${F}\\}\\}`,"g");C=C.replace(V,I[F])}),h(C),o(!0)},k=C=>({"ticket-created":"info","ticket-updated":"success","ticket-assigned":"warning","ticket-resolved":"success",custom:"info"})[C]||"info";return c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Email Templates"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Manage auto-reply email templates for ticket creation and updates"})]}),c.jsxs(Ye,{transparent:!0,onClick:()=>x(),children:[c.jsx(gs,{size:20,className:"mr-2"}),"Create Template"]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n?c.jsxs("div",{className:"col-span-full text-center py-12",children:[c.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),c.jsx("p",{className:"text-gray-600",children:"Loading templates..."})]}):t.length===0?c.jsxs("div",{className:"col-span-full text-center py-12",children:[c.jsx(wl,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),c.jsx("p",{className:"text-gray-600 mb-2",children:"No email templates found"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Create your first template to get started"})]}):t.map(C=>c.jsx(Nt,{className:"p-6 hover:shadow-lg transition-all",children:c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:C.name}),c.jsx(ln,{variant:k(C.type),children:w.find(I=>I.value===C.type)?.label||C.type})]}),c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:C.subject}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx(ln,{variant:C.isActive?"success":"warning",children:C.isActive?"Active":"Inactive"})})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>x(C),className:"text-primary-600 hover:text-primary-700 transition-colors p-1",title:"Edit",children:c.jsx(Ll,{size:18})}),c.jsx("button",{onClick:()=>N(C._id),className:"text-red-600 hover:text-red-700 transition-colors p-1",title:"Delete",children:c.jsx(go,{size:18})})]})]})},C._id))}),c.jsx(Na,{isOpen:i,onClose:_,title:l?"Edit Email Template":"Create Email Template",size:"xl",children:c.jsxs("form",{onSubmit:R,className:"space-y-4",children:[c.jsx(st,{label:"Template Name",placeholder:"e.g., Ticket Created Auto Reply",value:m.name,onChange:C=>y({...m,name:C.target.value}),required:!0}),c.jsx(sn,{label:"Template Type",value:m.type,onChange:C=>M(C.target.value),options:w,required:!0}),c.jsx(st,{label:"Email Subject",placeholder:"e.g., Ticket #{{ticketId}} Created - {{ticketTitle}}",value:m.subject,onChange:C=>y({...m,subject:C.target.value}),required:!0}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["HTML Body (Use ","{{variableName}}"," for dynamic content)"]}),c.jsx("textarea",{value:m.htmlBody,onChange:C=>y({...m,htmlBody:C.target.value}),className:"w-full h-96 p-4 border border-gray-300 rounded-lg font-mono text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Enter HTML template...",required:!0}),c.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Available variables: ","{{ticketId}}",", ","{{ticketTitle}}",", ","{{ticketCategory}}",", ","{{ticketPriority}}",", ","{{ticketStatus}}",", ","{{customerName}}",", ","{{assigneeName}}"]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"isActive",checked:m.isActive,onChange:C=>y({...m,isActive:C.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),c.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsxs(Ye,{type:"button",variant:"outline",transparent:!0,onClick:O,className:"flex-1",children:[c.jsx(Om,{size:20,className:"mr-2"}),"Preview"]}),c.jsx(Ye,{type:"button",variant:"outline",transparent:!0,onClick:_,className:"flex-1",children:"Cancel"}),c.jsxs(Ye,{type:"submit",transparent:!0,className:"flex-1",children:[c.jsx(HO,{size:20,className:"mr-2"}),l?"Update":"Create"]})]})]})}),c.jsx(Na,{isOpen:s,onClose:()=>o(!1),title:"Email Template Preview",size:"xl",children:c.jsx("div",{className:"border rounded-lg overflow-hidden",children:c.jsx("iframe",{srcDoc:f,className:"w-full h-[600px] border-0",title:"Email Preview"})})})]})})},uge=()=>{const{ssoSettings:t,updateSSOSettings:e}=S8(),{hasAccess:n}=X0(),r=ni();if(!n("SSO_INTEGRATION"))return c.jsx(Nn,{children:c.jsxs(Nt,{className:"p-8 text-center",children:[c.jsx(Vc,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"SSO Integration Requires Pro"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Upgrade to Pro to enable Single Sign-On (SSO) integration with Azure AD, Google Workspace, and SAML."}),c.jsx(Ye,{onClick:()=>r("/upgrade"),children:"Upgrade to Pro"})]})});const[i,a]=L.useState(t.azureEnabled),[s,o]=L.useState(t.googleEnabled),[l,u]=L.useState({tenantId:"",clientId:"",clientSecret:"",redirectUri:window.location.origin+"/sso/azure/callback"}),[f,h]=L.useState({clientId:"",clientSecret:"",redirectUri:window.location.origin+"/sso/google/callback"}),[m,y]=L.useState(!1);L.useEffect(()=>{w()},[]);const w=async()=>{try{const A=await nr.getSSOConfig(),R=A.find(O=>O.provider==="azure"),N=A.find(O=>O.provider==="google");R&&R.config&&(u({...l,...R.config}),a(R.enabled)),N&&N.config&&(h({...f,...N.config}),o(N.enabled))}catch(A){console.error("Failed to load SSO configs:",A)}},b=async A=>{try{a(A),await e({azureEnabled:A}),await nr.updateSSOConfig({provider:"azure",enabled:A,config:l}),de.success(`Azure AD ${A?"enabled":"disabled"}`)}catch{de.error("Failed to update Azure AD settings")}},x=async A=>{try{o(A),await e({googleEnabled:A}),await nr.updateSSOConfig({provider:"google",enabled:A,config:f}),de.success(`Google Workspace ${A?"enabled":"disabled"}`)}catch{de.error("Failed to update Google Workspace settings")}},_=async A=>{A.preventDefault(),y(!0);try{await nr.updateSSOConfig({provider:"azure",enabled:i,config:l}),de.success("Azure AD configuration saved successfully!")}catch(R){de.error(R.message||"Failed to save Azure AD configuration")}finally{y(!1)}},M=async A=>{A.preventDefault(),y(!0);try{await nr.updateSSOConfig({provider:"google",enabled:s,config:f}),de.success("Google Workspace configuration saved successfully!")}catch(R){de.error(R.message||"Failed to save Google Workspace configuration")}finally{y(!1)}},T=A=>{de.loading(`Testing ${A} connection...`),setTimeout(()=>{de.dismiss(),de.success(`${A} connection successful!`)},2e3)};return c.jsx(Nn,{children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"SSO Configuration"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Configure and manage Single Sign-On authentication methods"})]}),c.jsxs(Nt,{children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-12 h-12 bg-[#0078D4] rounded-lg flex items-center justify-center",children:c.jsx("svg",{className:"w-7 h-7",viewBox:"0 0 23 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{d:"M11.5 0L0 4.5V11.5C0 17.3 4.2 22.5 11.5 23C18.8 22.5 23 17.3 23 11.5V4.5L11.5 0Z",fill:"white"})})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Microsoft Azure AD"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Configure Azure Entra ID single sign-on"})]})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(ln,{variant:i?"success":"warning",children:i?"Enabled":"Disabled"}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:i,onChange:A=>b(A.target.checked),className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]}),i&&c.jsxs("form",{onSubmit:_,className:"space-y-4",children:[c.jsx(st,{label:"Tenant ID",value:l.tenantId,onChange:A=>u({...l,tenantId:A.target.value}),placeholder:"your-tenant-id",required:!0}),c.jsx(st,{label:"Client ID (Application ID)",value:l.clientId,onChange:A=>u({...l,clientId:A.target.value}),placeholder:"your-application-id",required:!0}),c.jsx(st,{type:"password",label:"Client Secret",value:l.clientSecret,onChange:A=>u({...l,clientSecret:A.target.value}),placeholder:"your-client-secret",required:!0}),c.jsx(st,{label:"Redirect URI",value:l.redirectUri,onChange:A=>u({...l,redirectUri:A.target.value}),required:!0}),c.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-lg",children:[c.jsx("p",{className:"font-medium mb-2",children:"Azure AD Setup Instructions:"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[c.jsx("li",{children:"Register your application in Azure Portal"}),c.jsxs("li",{children:["Configure redirect URI: ",l.redirectUri]}),c.jsx("li",{children:"Grant necessary API permissions (User.Read, openid, profile)"}),c.jsx("li",{children:"Configure app roles for user mapping"}),c.jsx("li",{children:"Copy Tenant ID, Client ID, and create a Client Secret"})]})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx(Ye,{type:"button",variant:"outline",onClick:()=>T("Azure AD"),children:"Test Connection"}),c.jsx(Ye,{type:"submit",disabled:m,children:m?"Saving...":"Save Azure AD Settings"})]})]})]}),c.jsxs(Nt,{children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-12 h-12 bg-white border-2 border-gray-200 rounded-lg flex items-center justify-center",children:c.jsxs("svg",{className:"w-7 h-7",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Google Workspace"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Configure Google Workspace single sign-on"})]})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(ln,{variant:s?"success":"warning",children:s?"Enabled":"Disabled"}),c.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:s,onChange:A=>x(A.target.checked),className:"sr-only peer"}),c.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})]}),s&&c.jsxs("form",{onSubmit:M,className:"space-y-4",children:[c.jsx(st,{label:"Client ID",value:f.clientId,onChange:A=>h({...f,clientId:A.target.value}),placeholder:"your-google-client-id",required:!0}),c.jsx(st,{type:"password",label:"Client Secret",value:f.clientSecret,onChange:A=>h({...f,clientSecret:A.target.value}),placeholder:"your-google-client-secret",required:!0}),c.jsx(st,{label:"Redirect URI",value:f.redirectUri,onChange:A=>h({...f,redirectUri:A.target.value}),required:!0}),c.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-lg",children:[c.jsx("p",{className:"font-medium mb-2",children:"Google Workspace Setup Instructions:"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[c.jsx("li",{children:"Go to Google Cloud Console and create a new project"}),c.jsx("li",{children:"Enable Google+ API and Google Workspace API"}),c.jsx("li",{children:"Create OAuth 2.0 credentials (Web application)"}),c.jsxs("li",{children:["Configure authorized redirect URI: ",f.redirectUri]}),c.jsx("li",{children:"Copy Client ID and Client Secret"}),c.jsx("li",{children:"Configure OAuth consent screen with your organization details"})]})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx(Ye,{type:"button",variant:"outline",onClick:()=>T("Google Workspace"),children:"Test Connection"}),c.jsx(Ye,{type:"submit",disabled:m,children:m?"Saving...":"Save Google Workspace Settings"})]})]})]}),c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Security Note:"})," SSO authentication methods use industry-standard OAuth 2.0 and OpenID Connect protocols. All authentication flows are secured with CSRF tokens and follow cybersecurity best practices."]})})]})})},dge=()=>{const[t,e]=L.useState(null),[n,r]=L.useState("/logo.svg"),[i,a]=L.useState(""),[s,o]=L.useState(!0),[l,u]=L.useState(""),[f,h]=L.useState(!1),{updateLogo:m,updateShowOnLogin:y,updateLoginTitle:w,reloadLogo:b}=E_();L.useEffect(()=>{x()},[]);const x=async()=>{try{const k=await nr.getLogo();k.logo?r(k.logo):r("/logo.svg"),k.showOnLogin!==void 0&&o(k.showOnLogin),k.loginTitle!==void 0&&u(k.loginTitle||"")}catch(k){console.error("Failed to load logo:",k),r("/logo.svg")}},_=k=>{const C=k.target.files[0];if(C){if(!C.type.startsWith("image/")){de.error("Please select an image file");return}if(C.size>2*1024*1024){de.error("Image size should be less than 2MB");return}e(C);const I=new FileReader;I.onloadend=()=>{r(I.result)},I.readAsDataURL(C)}},M=k=>{a(k.target.value)},T=()=>{if(!i){de.error("Please enter a valid URL");return}r(i),de.success("Logo loaded from URL")},A=async()=>{h(!0);try{await nr.updateLogo(n,t?.name||"logo",s,l||null),m(n),y(s),w(l||null),await b(),de.success("Logo settings saved successfully!"),e(null)}catch(k){de.error(k.message||"Failed to save logo")}finally{h(!1)}},R=async()=>{if(window.confirm("Are you sure you want to remove the logo from the login page? This will hide it but keep the logo file.")){o(!1);try{await nr.updateLogo(n,t?.name||"logo",!1),y(!1),await b(),de.success("Logo removed from login page")}catch{de.error("Failed to update logo settings"),o(!0)}}},N=async()=>{o(!0);try{await nr.updateLogo(n,t?.name||"logo",!0),y(!0),await b(),de.success("Logo will now be shown on login page")}catch{de.error("Failed to update logo settings"),o(!1)}},O=async()=>{try{r("/logo.svg"),e(null),a(""),de.success("Logo reset to default")}catch{de.error("Failed to reset logo")}};return c.jsx(Nn,{children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Logo Management"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Upload and manage your organization's logo"})]}),c.jsxs(Nt,{title:"Current Logo",children:[c.jsx("div",{className:"flex items-center justify-center p-8 bg-gradient-to-br from-gray-50 to-gray-100/50 rounded-xl mb-6 border border-gray-200",children:c.jsx("img",{src:n,alt:"Logo Preview",className:"max-h-32 max-w-full object-contain",onError:()=>{r("/logo.svg"),de.error("Failed to load logo, using default")}})}),c.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-primary-50/50 to-primary-100/30 rounded-xl border border-primary-200/50 backdrop-blur-sm",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[s?c.jsx(Om,{className:"text-primary-600",size:20}):c.jsx(i1,{className:"text-gray-400",size:20}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Show Logo on Login Page"}),c.jsx("p",{className:"text-xs text-gray-600",children:s?"Logo is currently visible on the login page":"Logo is hidden on the login page"})]})]}),c.jsx("div",{className:"flex items-center space-x-2",children:s?c.jsxs(Ye,{variant:"outline",transparent:!0,onClick:R,className:"flex items-center gap-2",children:[c.jsx(i1,{size:16}),"Remove from Login"]}):c.jsxs(Ye,{transparent:!0,onClick:N,className:"flex items-center gap-2",children:[c.jsx(Om,{size:16}),"Show on Login"]})})]}),c.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-primary-50/50 to-primary-100/30 rounded-xl border border-primary-200/50 backdrop-blur-sm",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Login Page Welcome Title (Optional)"}),c.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Enter a custom welcome title to display on the login page. Leave empty to hide the title."}),c.jsx(st,{type:"text",placeholder:"e.g., Welcome to Rezilyens",value:l,onChange:k=>u(k.target.value),className:"w-full"}),c.jsx("p",{className:"text-xs text-gray-500 mt-2",children:l?`Title will show as: "${l}"`:"No title will be displayed on login page"})]})]}),c.jsx(Nt,{title:"Upload Logo",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Upload Logo File"}),c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs("label",{className:"flex-1 cursor-pointer",children:[c.jsx("input",{type:"file",accept:"image/*",onChange:_,className:"hidden"}),c.jsx("div",{className:"flex items-center justify-center px-6 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-primary-500 transition-all duration-300 bg-white/50 backdrop-blur-sm hover:bg-white/80",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Tl,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),c.jsx("span",{className:"text-sm text-gray-600",children:t?t.name:"Click to upload or drag and drop"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, SVG up to 2MB"})]})})]})})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Or Enter Logo URL"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(st,{type:"url",placeholder:"https://example.com/logo.png",value:i,onChange:M,className:"flex-1"}),c.jsxs(Ye,{type:"button",variant:"outline",transparent:!0,onClick:T,children:[c.jsx(P8,{size:20,className:"mr-2"}),"Load"]})]})]}),c.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[c.jsxs(Ye,{variant:"outline",transparent:!0,onClick:O,className:"flex-1",children:[c.jsx(po,{size:20,className:"mr-2"}),"Reset to Default"]}),c.jsxs(Ye,{transparent:!0,onClick:A,disabled:f,className:"flex-1",children:[c.jsx(HO,{size:20,className:"mr-2"}),f?"Saving...":"Save Logo"]})]}),c.jsx("div",{className:"bg-blue-50/80 backdrop-blur-sm border border-blue-200 rounded-xl p-4",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Note:"})," The logo will be displayed in the sidebar and optionally on the login page. Recommended size: 200x60px or similar aspect ratio. Supported formats: PNG, JPG, SVG."]})})]})})]})})},fge=()=>{const[t,e]=L.useState([]),[n,r]=L.useState(!0),[i,a]=L.useState(!1),[s,o]=L.useState(null),[l,u]=L.useState({name:"",domain:"",description:"",status:"active"});L.useEffect(()=>{f()},[]);const f=async()=>{try{r(!0);const b=await ha.getAll();e(b)}catch(b){de.error("Failed to load organizations"),console.error(b)}finally{r(!1)}},h=(b=null)=>{try{b?(o(b),u({name:b.name||"",domain:b.domain||"",description:b.description||"",status:b.status||"active"})):(o(null),u({name:"",domain:"",description:"",status:"active"})),a(!0)}catch(x){console.error("Error opening modal:",x),de.error("Failed to open edit form")}},m=()=>{a(!1),o(null),u({name:"",domain:"",description:"",status:"active"})},y=async b=>{b.preventDefault();try{if(s){const x=s._id||s.id;if(!x){de.error("Invalid organization ID"),console.error("Editing org:",s);return}console.log("Updating organization:",x,l),await ha.update(x,l),de.success("Organization updated successfully!")}else await ha.create(l),de.success("Organization created successfully!");m(),f()}catch(x){console.error("Error saving organization:",x),de.error(x.message||"Failed to save organization")}},w=async b=>{if(!b){de.error("Invalid organization ID"),console.error("No organization ID provided");return}if(window.confirm("Are you sure you want to delete this organization? This action cannot be undone."))try{console.log("Deleting organization:",b),await ha.delete(b),de.success("Organization deleted successfully!"),f()}catch(x){console.error("Delete error:",x),de.error(x.message||"Failed to delete organization")}};return c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-4xl font-cyber font-bold neon-text uppercase tracking-wider mb-2",children:"Organizations"}),c.jsx("p",{className:"text-cyber-neon-cyan/70 font-mono uppercase tracking-widest text-sm",children:"Manage Multi-Tenant Organizations"})]}),c.jsxs(Ye,{onClick:()=>h(),className:"btn-primary",children:[c.jsx(gs,{size:20,className:"mr-2"}),"Add Organization"]})]}),c.jsx(Nt,{className:"p-6",children:c.jsx("div",{className:"overflow-x-auto",children:n?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"inline-block animate-spin text-cyber-neon-cyan text-4xl mb-4",children:""}),c.jsx("p",{className:"text-cyber-neon-cyan/70 font-mono",children:"Loading organizations..."})]}):t.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(t1,{className:"mx-auto text-cyber-neon-cyan/50 mb-4",size:48}),c.jsx("p",{className:"text-cyber-neon-cyan/70 font-mono",children:"No organizations found"})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(b=>c.jsxs("div",{className:"card p-6 border-2 border-cyber-neon-cyan/30 hover:border-cyber-neon-cyan/50 transition-all duration-300 cyber-3d relative",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"bg-cyber-neon-cyan/20 p-3 rounded-lg border-2 border-cyber-neon-cyan/30",children:c.jsx(t1,{className:"text-cyber-neon-cyan",size:24})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-cyber font-bold text-cyber-neon-cyan neon-text",children:b.name}),b.domain&&c.jsx("p",{className:"text-sm text-cyber-neon-cyan/70 font-mono",children:b.domain})]})]}),c.jsx(ln,{variant:b.status==="active"?"success":"warning",children:b.status})]}),b.description&&c.jsx("p",{className:"text-sm text-cyber-neon-cyan/80 font-mono mb-4 line-clamp-2",children:b.description}),b.stats&&c.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 pt-4 border-t-2 border-cyber-neon-cyan/20",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-xs font-cyber text-cyber-neon-cyan/70 uppercase tracking-widest",children:"Users"}),c.jsx("p",{className:"text-lg font-cyber font-bold text-cyber-neon-cyan",children:b.stats.users||0})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-xs font-cyber text-cyber-neon-cyan/70 uppercase tracking-widest",children:"Tickets"}),c.jsx("p",{className:"text-lg font-cyber font-bold text-cyber-neon-cyan",children:b.stats.tickets||0})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-xs font-cyber text-cyber-neon-cyan/70 uppercase tracking-widest",children:"Open"}),c.jsx("p",{className:"text-lg font-cyber font-bold text-cyber-neon-yellow",children:b.stats.openTickets||0})]})]}),c.jsxs("div",{className:"flex items-center justify-between pt-4 border-t-2 border-cyber-neon-cyan/20",children:[c.jsx("p",{className:"text-xs text-cyber-neon-cyan/50 font-mono",children:mn(new Date(b.createdAt),"MMM dd, yyyy")}),c.jsxs("div",{className:"flex items-center space-x-2 relative z-10",children:[c.jsx("button",{type:"button",onClick:x=>{x.preventDefault(),x.stopPropagation(),b&&h(b)},className:"p-2 text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-lg transition-colors cursor-pointer",title:"Edit Organization",children:c.jsx(Ll,{size:18})}),c.jsx("button",{type:"button",onClick:x=>{x.preventDefault(),x.stopPropagation();const _=b._id||b.id;_&&w(_)},className:"p-2 text-red-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors cursor-pointer",title:"Delete Organization",children:c.jsx(go,{size:18})})]})]})]},b._id||b.id))})})}),c.jsx(Na,{isOpen:i,onClose:m,title:s?"Edit Organization":"Add New Organization",children:c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsx(st,{label:"Organization Name *",value:l.name,onChange:b=>u({...l,name:b.target.value}),required:!0}),c.jsx(st,{label:"Domain (optional)",value:l.domain,onChange:b=>u({...l,domain:b.target.value}),placeholder:"example.com"}),c.jsx(st,{label:"Description",value:l.description,onChange:b=>u({...l,description:b.target.value}),placeholder:"Organization description"}),c.jsx(sn,{label:"Status",value:l.status,onChange:b=>u({...l,status:b.target.value}),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],required:!0}),c.jsxs("div",{className:"flex space-x-3 pt-4 border-t border-gray-200",children:[c.jsx(Ye,{type:"button",variant:"outline",transparent:!0,onClick:m,className:"flex-1",children:"Cancel"}),c.jsxs(Ye,{type:"submit",transparent:!0,className:"flex-1",children:[s?"Update":"Create"," Organization"]})]})]})})]})})},hge=()=>{const[t,e]=L.useState([]),[n,r]=L.useState([]),[i,a]=L.useState(!0),[s,o]=L.useState(!1),[l,u]=L.useState(null),[f,h]=L.useState({name:"",description:"",color:"#00ffff",organization:"",status:"active"});L.useEffect(()=>{m(),y()},[]);const m=async()=>{try{a(!0);const M=await sm.getAllAdmin();e(M)}catch(M){de.error("Failed to load categories"),console.error(M)}finally{a(!1)}},y=async()=>{try{const M=await ha.getAll();r(M)}catch(M){console.error("Failed to load organizations",M)}},w=(M=null)=>{console.log("handleOpenModal called with:",M),M?(console.log("Setting editing category:",M),u(M),h({name:M.name,description:M.description||"",color:M.color||"#00ffff",organization:M.organization?._id||M.organization||"",status:M.status})):(u(null),h({name:"",description:"",color:"#00ffff",organization:"",status:"active"})),console.log("Opening modal, isModalOpen will be set to true"),o(!0)},b=()=>{o(!1),u(null),h({name:"",description:"",color:"#00ffff",organization:"",status:"active"})},x=async M=>{M.preventDefault();try{const T={...f};if(T.organization||delete T.organization,l){const A=l._id||l.id;if(!A){de.error("Invalid category ID"),console.error("No category ID found:",l);return}console.log("Updating category:",A,T),await sm.update(A,T),de.success("Category updated successfully!")}else await sm.create(T),de.success("Category created successfully!");b(),m()}catch(T){console.error("Error saving category:",T),de.error(T.message||"Failed to save category")}},_=async M=>{if(console.log("handleDelete called with ID:",M),!M){console.error("No category ID provided"),de.error("Invalid category ID");return}if(window.confirm("Are you sure you want to delete this category?"))try{console.log("Calling API to delete category:",M),await sm.delete(M),console.log("Category deleted successfully"),de.success("Category deleted successfully!"),m()}catch(T){console.error("Error deleting category:",T),de.error(T.message||"Failed to delete category")}};return c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-4xl font-cyber font-bold neon-text uppercase tracking-wider mb-2",children:"Categories"}),c.jsx("p",{className:"text-cyber-neon-cyan/70 font-mono uppercase tracking-widest text-sm",children:"Manage Ticket Categories"})]}),c.jsxs(Ye,{onClick:()=>w(),className:"btn-primary",children:[c.jsx(gs,{size:20,className:"mr-2"}),"Add Category"]})]}),c.jsx(Nt,{className:"p-6",children:c.jsx("div",{className:"overflow-x-auto",children:i?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"inline-block animate-spin text-cyber-neon-cyan text-4xl mb-4",children:""}),c.jsx("p",{className:"text-cyber-neon-cyan/70 font-mono",children:"Loading categories..."})]}):t.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(s1,{className:"mx-auto text-cyber-neon-cyan/50 mb-4",size:48}),c.jsx("p",{className:"text-cyber-neon-cyan/70 font-mono",children:"No categories found"})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(M=>c.jsxs("div",{className:"card p-6 border-2 border-cyber-neon-cyan/30 hover:border-cyber-neon-cyan/50 transition-all duration-300 cyber-3d",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-3 rounded-lg border-2",style:{backgroundColor:`${M.color}20`,borderColor:`${M.color}50`},children:c.jsx(s1,{size:24,style:{color:M.color}})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-cyber font-bold text-cyber-neon-cyan neon-text",children:M.name}),M.organization&&c.jsx("p",{className:"text-sm text-cyber-neon-cyan/70 font-mono",children:M.organization.name||"Organization"}),!M.organization&&c.jsx("p",{className:"text-sm text-cyber-neon-cyan/70 font-mono",children:"Global"})]})]}),c.jsx(ln,{variant:M.status==="active"?"success":"warning",children:M.status})]}),M.description&&c.jsx("p",{className:"text-sm text-cyber-neon-cyan/80 font-mono mb-4 line-clamp-2",children:M.description}),c.jsxs("div",{className:"flex items-center justify-between pt-4 border-t-2 border-cyber-neon-cyan/20",children:[c.jsx("p",{className:"text-xs text-cyber-neon-cyan/50 font-mono",children:mn(new Date(M.createdAt),"MMM dd, yyyy")}),c.jsxs("div",{className:"flex items-center space-x-2",style:{position:"relative",zIndex:1e3,pointerEvents:"auto"},onClick:T=>{T.stopPropagation()},children:[c.jsx("button",{type:"button",onClick:T=>{T.preventDefault(),T.stopPropagation(),console.log("Edit button clicked for category:",M),w(M)},className:"text-cyber-neon-cyan hover:text-cyber-neon-cyan transition-colors p-2 rounded hover:bg-cyber-neon-cyan/10 cursor-pointer",title:"Edit Category",style:{pointerEvents:"auto",position:"relative",zIndex:1001},children:c.jsx(Ll,{size:18})}),c.jsx("button",{type:"button",onClick:T=>{T.preventDefault(),T.stopPropagation(),console.log("Delete button clicked for category:",M);const A=M._id||M.id;console.log("Category ID:",A),A?_(A):(console.error("Invalid category ID:",M),de.error("Invalid category ID"))},className:"text-red-400 hover:text-red-300 transition-colors p-2 rounded hover:bg-red-400/10 cursor-pointer",title:"Delete Category",style:{pointerEvents:"auto",position:"relative",zIndex:1001},children:c.jsx(go,{size:18})})]})]})]},M._id||M.id))})})}),c.jsx(Na,{isOpen:s,onClose:b,title:l?"Edit Category":"Add New Category",footer:c.jsxs(c.Fragment,{children:[c.jsx(Ye,{variant:"outline",onClick:b,children:"Cancel"}),c.jsx(Ye,{onClick:x,children:"Save"})]}),children:c.jsxs("form",{onSubmit:x,className:"space-y-4",children:[c.jsx(st,{label:"Category Name *",value:f.name,onChange:M=>h({...f,name:M.target.value}),required:!0,placeholder:"e.g., IT Support"}),c.jsx(st,{label:"Description",value:f.description,onChange:M=>h({...f,description:M.target.value}),placeholder:"Category description"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-cyber font-bold text-cyber-neon-cyan uppercase tracking-widest mb-2",children:"Color"}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("input",{type:"color",value:f.color,onChange:M=>h({...f,color:M.target.value}),className:"w-16 h-10 rounded border-2 border-cyber-neon-cyan/50 bg-cyber-darker cursor-pointer"}),c.jsx(st,{value:f.color,onChange:M=>h({...f,color:M.target.value}),placeholder:"#00ffff",className:"flex-1"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-cyber font-bold text-cyber-neon-cyan uppercase tracking-widest mb-2",children:"Organization (Leave empty for global)"}),c.jsxs("select",{value:f.organization,onChange:M=>h({...f,organization:M.target.value}),className:"w-full px-4 py-3 bg-cyber-darker/50 border-2 border-cyber-neon-cyan/30 rounded-lg text-cyber-neon-cyan focus:outline-none focus:border-cyber-neon-cyan focus:ring-2 focus:ring-cyber-neon-cyan/50 font-mono",children:[c.jsx("option",{value:"",children:"Global (All Organizations)"}),n.map(M=>c.jsx("option",{value:M._id||M.id,children:M.name},M._id||M.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-cyber font-bold text-cyber-neon-cyan uppercase tracking-widest mb-2",children:"Status"}),c.jsxs("select",{value:f.status,onChange:M=>h({...f,status:M.target.value}),className:"w-full px-4 py-3 bg-cyber-darker/50 border-2 border-cyber-neon-cyan/30 rounded-lg text-cyber-neon-cyan focus:outline-none focus:border-cyber-neon-cyan focus:ring-2 focus:ring-cyber-neon-cyan/50 font-mono",children:[c.jsx("option",{value:"active",children:"Active"}),c.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})})]})})},pge=()=>{const[t,e]=L.useState([]),[n,r]=L.useState([]),[i,a]=L.useState(""),[s,o]=L.useState(!0),[l,u]=L.useState(!1),[f,h]=L.useState(null),[m,y]=L.useState({name:"",organization:"",priority:"",responseTimeHours:"",responseTimeMinutes:"",resolutionTimeHours:"",resolutionTimeMinutes:"",description:"",isActive:!0});L.useEffect(()=>{w()},[]),L.useEffect(()=>{b()},[i]);const w=async()=>{try{const C=await ha.getAll();r(C)}catch(C){console.error("Failed to load organizations",C)}},b=async()=>{try{o(!0);const C=await nr.getSLAPolicies(i||null);e(C)}catch(C){de.error("Failed to load SLA policies"),console.error(C)}finally{o(!1)}},x=C=>{if(!C&&C!==0)return{hours:"",minutes:""};const I=Math.floor(C),F=Math.round((C-I)*60);return{hours:I.toString(),minutes:F.toString()}},_=(C,I)=>{const F=parseFloat(C)||0,V=parseFloat(I)||0;return F+V/60},M=(C=null)=>{if(C){h(C);const I=x(C.responseTime),F=x(C.resolutionTime);y({name:C.name||"",organization:C.organization?._id||C.organization||"",priority:C.priority||"",responseTimeHours:I.hours,responseTimeMinutes:I.minutes,resolutionTimeHours:F.hours,resolutionTimeMinutes:F.minutes,description:C.description||"",isActive:C.isActive!==void 0?C.isActive:!0})}else h(null),y({name:"",organization:i||"",priority:"",responseTimeHours:"",responseTimeMinutes:"0",resolutionTimeHours:"",resolutionTimeMinutes:"0",description:"",isActive:!0});u(!0)},T=()=>{u(!1),h(null),y({name:"",organization:i||"",priority:"",responseTimeHours:"",responseTimeMinutes:"",resolutionTimeHours:"",resolutionTimeMinutes:"",description:"",isActive:!0})},A=async C=>{C.preventDefault();try{const I=_(m.responseTimeHours,m.responseTimeMinutes),F=_(m.resolutionTimeHours,m.resolutionTimeMinutes);if(I<=0){de.error("Response time must be greater than 0");return}if(F<=0){de.error("Resolution time must be greater than 0");return}const V={...m,responseTime:I,resolutionTime:F};delete V.responseTimeHours,delete V.responseTimeMinutes,delete V.resolutionTimeHours,delete V.resolutionTimeMinutes,f?(await nr.updateSLAPolicy(f._id,V),de.success("SLA Policy updated successfully!")):(await nr.createSLAPolicy(V),de.success("SLA Policy created successfully!")),T(),b()}catch(I){de.error(I.message||"Failed to save SLA Policy")}},R=async C=>{if(window.confirm("Are you sure you want to delete this SLA Policy?"))try{await nr.deleteSLAPolicy(C),de.success("SLA Policy deleted successfully!"),b()}catch(I){de.error(I.message||"Failed to delete SLA Policy")}},N=C=>{switch(C){case"urgent":return"danger";case"high":return"danger";case"medium":return"warning";case"low":return"info";default:return"info"}},O=[{value:"urgent",label:"Urgent"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}],k=C=>{if(!C&&C!==0)return"0h 0m";const I=Math.floor(C),F=Math.round((C-I)*60);return I>0&&F>0?`${I}h ${F}m`:I>0?`${I}h`:F>0?`${F}m`:"0h 0m"};return c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"SLA Policies"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Manage Service Level Agreement policies by organization and priority"})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(sn,{label:"Filter by Organization",value:i,onChange:C=>a(C.target.value),options:[{value:"",label:"All Organizations (Global)"},...n.map(C=>({value:C._id||C.id,label:C.name}))],className:"w-64"}),c.jsxs(Ye,{transparent:!0,onClick:()=>M(),children:[c.jsx(gs,{size:20,className:"mr-2"}),"Add SLA Policy"]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s?c.jsxs("div",{className:"col-span-full text-center py-12",children:[c.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),c.jsx("p",{className:"text-gray-600",children:"Loading SLA policies..."})]}):t.length===0?c.jsxs("div",{className:"col-span-full text-center py-12",children:[c.jsx(Ml,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),c.jsx("p",{className:"text-gray-600 mb-2",children:"No SLA policies found"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Create your first SLA policy to get started"})]}):t.map(C=>c.jsxs(Nt,{className:"p-6 border-l-4 border-primary-500 hover:shadow-lg transition-all duration-300",children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:C.name||`${C.priority} Priority`}),c.jsx(ln,{variant:N(C.priority),children:C.priority})]}),c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:C.organization?.name||"Global Policy"}),C.description&&c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:C.description})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>M(C),className:"text-primary-600 hover:text-primary-700 transition-colors p-1",children:c.jsx(Ll,{size:18})}),c.jsx("button",{onClick:()=>R(C._id),className:"text-red-600 hover:text-red-700 transition-colors p-1",children:c.jsx(go,{size:18})})]})]}),c.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Response Time:"}),c.jsx("span",{className:"text-sm font-semibold text-gray-900",children:k(C.responseTime)})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Resolution Time:"}),c.jsx("span",{className:"text-sm font-semibold text-gray-900",children:k(C.resolutionTime)})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),c.jsx(ln,{variant:C.isActive?"success":"warning",children:C.isActive?"Active":"Inactive"})]})]})]},C._id))}),c.jsx(Na,{isOpen:l,onClose:T,title:f?"Edit SLA Policy":"Create SLA Policy",size:"lg",children:c.jsxs("form",{onSubmit:A,className:"space-y-4",children:[c.jsx(st,{label:"Policy Name",placeholder:"e.g., Standard Urgent Policy",value:m.name,onChange:C=>y({...m,name:C.target.value}),required:!0}),c.jsx(sn,{label:"Organization (Leave empty for Global Policy)",value:m.organization,onChange:C=>y({...m,organization:C.target.value}),options:[{value:"",label:"Global (All Organizations)"},...n.map(C=>({value:C._id||C.id,label:C.name}))]}),c.jsx(sn,{label:"Priority",value:m.priority,onChange:C=>y({...m,priority:C.target.value}),options:O,required:!0}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Response Time *"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx(st,{type:"number",min:"0",placeholder:"Hours",value:m.responseTimeHours,onChange:C=>y({...m,responseTimeHours:C.target.value}),required:!0}),c.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Hours"})]}),c.jsxs("div",{children:[c.jsx(st,{type:"number",min:"0",max:"59",placeholder:"Minutes",value:m.responseTimeMinutes,onChange:C=>{const I=C.target.value;(I===""||parseInt(I)>=0&&parseInt(I)<=59)&&y({...m,responseTimeMinutes:I})}}),c.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Minutes (0-59)"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Resolution Time *"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx(st,{type:"number",min:"0",placeholder:"Hours",value:m.resolutionTimeHours,onChange:C=>y({...m,resolutionTimeHours:C.target.value}),required:!0}),c.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Hours"})]}),c.jsxs("div",{children:[c.jsx(st,{type:"number",min:"0",max:"59",placeholder:"Minutes",value:m.resolutionTimeMinutes,onChange:C=>{const I=C.target.value;(I===""||parseInt(I)>=0&&parseInt(I)<=59)&&y({...m,resolutionTimeMinutes:I})}}),c.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Minutes (0-59)"})]})]})]})]}),c.jsx(st,{label:"Description (Optional)",placeholder:"Brief description of this SLA policy",value:m.description,onChange:C=>y({...m,description:C.target.value})}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"isActive",checked:m.isActive,onChange:C=>y({...m,isActive:C.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),c.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx(Ye,{type:"button",variant:"outline",transparent:!0,onClick:T,className:"flex-1",children:"Cancel"}),c.jsx(Ye,{type:"submit",transparent:!0,className:"flex-1",children:f?"Update Policy":"Create Policy"})]})]})})]})})},mge=()=>{const{user:t}=Sr(),e=t?.role==="admin",[n,r]=L.useState([]),[i,a]=L.useState([]),[s,o]=L.useState([]),[l,u]=L.useState(!0),[f,h]=L.useState(!1),[m,y]=L.useState(null),[w,b]=L.useState({name:"",description:"",departmentHead:"",organization:"",isActive:!0});L.useEffect(()=>{x(),_(),M()},[]);const x=async()=>{try{u(!0);const O=await Rc.getAll();r(O)}catch(O){de.error("Failed to load departments"),console.error(O)}finally{u(!1)}},_=async()=>{try{const O=await ha.getAll();a(O)}catch(O){console.error("Failed to load organizations",O)}},M=async()=>{try{const O=await Jo.getAll();o(O)}catch(O){console.error("Failed to load users",O)}},T=(O=null)=>{if(console.log("handleOpenModal called with:",O),O)console.log("Setting editing department:",O),y(O),b({name:O.name||"",description:O.description||"",departmentHead:O.departmentHead?._id||O.departmentHead||"",organization:O.organization?._id||O.organization||"",isActive:O.isActive!==void 0?O.isActive:!0});else{y(null);const k=e?i[0]?._id||i[0]?.id||"":t?.organization?._id||t?.organization||"";b({name:"",description:"",departmentHead:"",organization:k,isActive:!0})}console.log("Opening modal, isModalOpen will be set to true"),h(!0)},A=()=>{h(!1),y(null),b({name:"",description:"",departmentHead:"",organization:"",isActive:!0})},R=async O=>{O.preventDefault();try{if(m){const k=m._id||m.id;if(!k){de.error("Invalid department ID");return}await Rc.update(k,w),de.success("Department updated successfully!")}else await Rc.create(w),de.success("Department created successfully!");A(),x(),M()}catch(k){console.error("Error saving department:",k),de.error(k.message||"Failed to save department")}},N=async O=>{if(console.log("handleDelete called with ID:",O),!O){console.error("No department ID provided"),de.error("Invalid department ID");return}if(window.confirm("Are you sure you want to delete this department? All users in this department will be unassigned."))try{console.log("Calling API to delete department:",O),await Rc.delete(O),console.log("Department deleted successfully"),de.success("Department deleted successfully!"),x(),M()}catch(k){console.error("Error deleting department:",k),de.error(k.message||"Failed to delete department")}};return c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Departments"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Manage departments and assign department heads"})]}),c.jsxs(Ye,{transparent:!0,onClick:()=>T(),children:[c.jsx(gs,{size:20,className:"mr-2"}),"Add Department"]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l?c.jsxs("div",{className:"col-span-full text-center py-12",children:[c.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),c.jsx("p",{className:"text-gray-600",children:"Loading departments..."})]}):n.length===0?c.jsxs("div",{className:"col-span-full text-center py-12",children:[c.jsx(t1,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),c.jsx("p",{className:"text-gray-600 mb-2",children:"No departments found"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Create your first department to get started"})]}):n.map(O=>c.jsx(Nt,{className:"p-6 border-l-4 border-primary-500 hover:shadow-lg transition-all duration-300 relative",style:{position:"relative"},children:c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:O.name}),c.jsx(ln,{variant:O.isActive?"success":"warning",children:O.isActive?"Active":"Inactive"})]}),O.description&&c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:O.description}),c.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["Organization: ",O.organization?.name||"N/A"]}),O.departmentHead?c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsx(Rm,{size:14,className:"text-gray-400"}),c.jsxs("span",{className:"text-xs text-gray-600",children:["Head: ",O.departmentHead?.name||"N/A"]})]}):c.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"No department head assigned"})]}),c.jsxs("div",{className:"flex gap-2",style:{position:"relative",zIndex:1e3,pointerEvents:"auto"},onClick:k=>{k.stopPropagation()},children:[c.jsx("button",{type:"button",onClick:k=>{k.preventDefault(),k.stopPropagation(),console.log("Edit button clicked for department:",O),T(O)},className:"text-primary-600 hover:text-primary-700 transition-colors p-2 rounded hover:bg-primary-50 cursor-pointer",title:"Edit Department",style:{pointerEvents:"auto",position:"relative",zIndex:1001},children:c.jsx(Ll,{size:18})}),e&&c.jsx("button",{type:"button",onClick:k=>{k.preventDefault(),k.stopPropagation(),console.log("Delete button clicked for department:",O);const C=O._id||O.id;console.log("Department ID:",C),C?N(C):(console.error("Invalid department ID:",O),de.error("Invalid department ID"))},className:"text-red-600 hover:text-red-700 transition-colors p-2 rounded hover:bg-red-50 cursor-pointer",title:"Delete Department",style:{pointerEvents:"auto",position:"relative",zIndex:1001},children:c.jsx(go,{size:18})})]})]})},O._id))}),c.jsx(Na,{isOpen:f,onClose:A,title:m?"Edit Department":"Create Department",size:"lg",children:c.jsxs("form",{onSubmit:R,className:"space-y-4",children:[c.jsx(st,{label:"Department Name",placeholder:"e.g., IT Support, HR, Finance",value:w.name,onChange:O=>b({...w,name:O.target.value}),required:!0}),c.jsx(st,{label:"Description (Optional)",placeholder:"Brief description of the department",value:w.description,onChange:O=>b({...w,description:O.target.value})}),c.jsx(sn,{label:"Organization",value:w.organization,onChange:O=>b({...w,organization:O.target.value}),options:i.filter(O=>e||(O._id||O.id)===(t?.organization?._id||t?.organization)).map(O=>({value:O._id||O.id,label:O.name})),required:!0,disabled:!e&&t?.organization}),c.jsx(sn,{label:"Department Head (Optional)",value:w.departmentHead,onChange:O=>b({...w,departmentHead:O.target.value}),options:[{value:"",label:"No Department Head"},...s.filter(O=>O.role!=="department-head"||O.department===w.departmentHead).map(O=>({value:O._id||O.id,label:`${O.name} (${O.email})`}))]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"isActive",checked:w.isActive,onChange:O=>b({...w,isActive:O.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),c.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx(Ye,{type:"button",variant:"outline",transparent:!0,onClick:A,className:"flex-1",children:"Cancel"}),c.jsx(Ye,{type:"submit",transparent:!0,className:"flex-1",children:m?"Update Department":"Create Department"})]})]})})]})})},gge=()=>{const[t,e]=L.useState(null),[n,r]=L.useState(!1),[i,a]=L.useState(null),[s,o]=L.useState(""),[l,u]=L.useState(!1),f=A=>{if(A)if(A.type==="application/json"||A.name.endsWith(".json")){e(A);const R=new FileReader;R.onload=N=>{try{const O=JSON.parse(N.target.result);o(JSON.stringify(O,null,2))}catch{de.error("Invalid JSON file"),e(null)}},R.readAsText(A)}else A.type==="text/csv"||A.name.endsWith(".csv")?e(A):(de.error("Please select a CSV or JSON file"),e(null))},h=A=>{const R=A.target.files[0];f(R)},m=A=>{A.preventDefault(),A.stopPropagation(),u(!0)},y=A=>{A.preventDefault(),A.stopPropagation(),u(!1)},w=A=>{A.preventDefault(),A.stopPropagation(),u(!1);const R=A.dataTransfer.files;if(R&&R.length>0){const N=R[0];f(N)}},b=async()=>{if(!t&&!s.trim()){de.error("Please select a file or paste JSON data");return}try{r(!0),a(null);let A=[];if(s.trim())try{A=JSON.parse(s),Array.isArray(A)||(A=[A])}catch{de.error("Invalid JSON format"),r(!1);return}else if(t){if(t.type==="application/json"||t.name.endsWith(".json")){const N=await t.text();A=JSON.parse(N),Array.isArray(A)||(A=[A])}else if(t.type==="text/csv"||t.name.endsWith(".csv")){const N=await t.text();A=_(N)}}const R=await Di.importTickets(A);a(R),de.success(`Successfully imported ${R.success} tickets`),R.errors&&R.errors.length>0&&de.error(`${R.errors.length} tickets failed to import`)}catch(A){console.error("Import error:",A),de.error(A.message||"Failed to import tickets")}finally{r(!1)}},x=A=>{const R=[];let N="",O=!1;for(let k=0;k<A.length;k++){const C=A[k],I=A[k+1];C==='"'?O&&I==='"'?(N+='"',k++):O=!O:C===","&&!O?(R.push(N.trim()),N=""):N+=C}return R.push(N.trim()),R},_=A=>{const R=A.split(`
`).filter(k=>k.trim());if(R.length<2)return[];const N=x(R[0]).map(k=>k.replace(/^"|"$/g,"").trim().toLowerCase()),O=[];for(let k=1;k<R.length;k++){const C=x(R[k]).map(F=>F.replace(/^"|"$/g,"").trim());if(C.length!==N.length)continue;const I={};N.forEach((F,V)=>{I[F]=C[V]}),O.push({ticketId:I.ticketid||I.id,title:I.title||I.subject,description:I.description||I.body||"",category:I.category||"General",priority:I.priority||"medium",status:I.status||"open",createdAt:I.createdat||I.created||new Date().toISOString(),dueDate:I.duedate||I.due||null})}return O},M=()=>{const A=[{ticketId:1001,title:"Sample Ticket Title",description:"Sample ticket description",category:"IT Support",priority:"medium",status:"open",createdAt:new Date().toISOString(),dueDate:null},{ticketId:1002,title:"Another Sample Ticket",description:"Another sample ticket description",category:"General",priority:"high",status:"in-progress",createdAt:new Date().toISOString(),dueDate:new Date(Date.now()+6048e5).toISOString()}],R=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),N=URL.createObjectURL(R),O=document.createElement("a");O.href=N,O.download="ticket-import-template.json",O.click(),URL.revokeObjectURL(N),de.success("JSON template downloaded")},T=()=>{const A=["ticketId","title","description","category","priority","status","createdAt","dueDate"],R=[["1001","Sample Ticket Title","Sample ticket description","IT Support","medium","open",new Date().toISOString(),""],["1002","Another Sample Ticket","Another sample ticket description","General","high","in-progress",new Date().toISOString(),new Date(Date.now()+6048e5).toISOString()]],N=[A.join(","),...R.map(I=>I.map(F=>{const V=String(F||"");return V.includes(",")||V.includes('"')||V.includes(`
`)?`"${V.replace(/"/g,'""')}"`:V}).join(","))].join(`
`),O=new Blob([N],{type:"text/csv;charset=utf-8;"}),k=URL.createObjectURL(O),C=document.createElement("a");C.href=k,C.download="ticket-import-template.csv",C.click(),URL.revokeObjectURL(k),de.success("CSV template downloaded")};return c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Import Tickets"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Import tickets from external ticketing systems"})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs(Ye,{transparent:!0,variant:"outline",onClick:T,className:"animate-scale-in",children:[c.jsx(sh,{size:20,className:"mr-2"}),"Download CSV Template"]}),c.jsxs(Ye,{transparent:!0,variant:"outline",onClick:M,className:"animate-scale-in",children:[c.jsx(sh,{size:20,className:"mr-2"}),"Download JSON Template"]})]})]}),c.jsx(Nt,{className:"animate-slide-down",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Import from File"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upload a CSV or JSON file containing ticket data. The system will automatically continue the ticket ID sequence."}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[c.jsx("p",{className:"text-xs text-blue-800 font-semibold mb-2",children:" Supported Formats:"}),c.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"CSV Format:"})," First row must contain headers: ",c.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"ticketId, title, description, category, priority, status, createdAt, dueDate"})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"JSON Format:"})," Array of ticket objects with fields: ",c.jsx("code",{className:"bg-blue-100 px-1 rounded",children:"ticketId, title, description, category, priority, status, createdAt, dueDate"})]}),c.jsxs("p",{className:"mt-2",children:[c.jsx("strong",{children:"Note:"})," Download templates above to see the exact format with sample data."]})]})]}),c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs("label",{className:"flex-1 cursor-pointer",children:[c.jsx("input",{type:"file",accept:".csv,.json",onChange:h,className:"hidden",id:"file-upload"}),c.jsx("div",{className:`flex items-center justify-center px-6 py-4 border-2 border-dashed rounded-xl transition-all duration-300 ${l?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-primary-500"} bg-white/50 backdrop-blur-sm hover:bg-white/80`,onDragOver:m,onDragLeave:y,onDrop:w,children:c.jsxs("div",{className:"text-center",children:[c.jsx(Tl,{className:`mx-auto h-8 w-8 mb-2 transition-colors ${l?"text-primary-500":"text-gray-400"}`}),c.jsx("span",{className:"text-sm text-gray-600",children:t?t.name:"Click to upload or drag and drop"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"CSV or JSON files only"})]})})]})})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Or Paste JSON Data"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Paste ticket data in JSON format directly"}),c.jsx("textarea",{value:s,onChange:A=>o(A.target.value),placeholder:'[{"ticketId": 1001, "title": "Ticket Title", "description": "Description", "category": "IT Support", "priority": "medium", "status": "open"}]',className:"w-full h-48 p-4 border border-gray-300 rounded-lg font-mono text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx(Ye,{transparent:!0,onClick:b,disabled:n||!t&&!s.trim(),className:"min-w-[120px]",children:n?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin mr-2",children:""}),"Importing..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Tl,{size:20,className:"mr-2"}),"Import Tickets"]})})})]})}),i&&c.jsxs(Nt,{className:"animate-slide-down",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Import Results"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[c.jsx(_i,{size:20}),c.jsxs("span",{className:"font-medium",children:["Successfully imported: ",i.success," tickets"]})]}),i.errors&&i.errors.length>0&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-2",children:[c.jsx(Iv,{size:20}),c.jsxs("span",{className:"font-medium",children:["Failed to import: ",i.errors.length," tickets"]})]}),c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-h-60 overflow-y-auto",children:c.jsx("ul",{className:"space-y-2 text-sm",children:i.errors.map((A,R)=>c.jsxs("li",{className:"text-red-700",children:[c.jsxs("strong",{children:["Ticket ",A.ticketId||R+1,":"]})," ",A.message]},R))})})]})]})]})]})})},U5=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],yge=()=>{const{user:t}=Sr(),[e,n]=L.useState("month"),[r,i]=L.useState("all"),[a,s]=L.useState([]),[o,l]=L.useState(null),[u,f]=L.useState([]),[h,m]=L.useState([]),[y,w]=L.useState([]),[b,x]=L.useState(null),[_,M]=L.useState([]),[T,A]=L.useState(!1);L.useEffect(()=>{t?.role==="admin"&&R()},[t]),L.useEffect(()=>{N()},[e,r]);const R=async()=>{try{const O=await ha.getAll();s(O)}catch(O){console.error("Failed to load organizations",O)}},N=async()=>{try{A(!0);const O=r!=="all"?r:null,[k,C,I,F,V,W]=await Promise.all([Af.getDashboard(e,O),Af.getStatusWise(e,O),Af.getDepartmentWise(e,O),Af.getTechnicianPerformance(e,O),Af.getSLACompliance(e,O),Af.getTrends(e,O,"day")]);l(k),f(C.data||[]),m(I.data||[]),w(F.data||[]),x(V),M(W.data||[])}catch(O){console.error("Failed to load analytics data",O),de.error("Failed to load analytics data")}finally{A(!1)}};return!t||t.role!=="admin"?c.jsx(Nn,{children:c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Iv,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Access denied. Admin access required."})]})}):c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Analytics & Reports"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive reporting and analytics dashboard"})]})}),c.jsx(Nt,{children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Period"}),c.jsx(sn,{value:e,onChange:O=>n(O.target.value),options:[{value:"day",label:"Daily"},{value:"week",label:"Weekly"},{value:"month",label:"Monthly"},{value:"year",label:"Yearly"}]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Organization"}),c.jsx(sn,{value:r,onChange:O=>i(O.target.value),options:[{value:"all",label:"All Organizations"},...a.map(O=>({value:O._id||O.id,label:O.name}))]})]})]})}),T?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),c.jsx("p",{className:"text-gray-600",children:"Loading analytics data..."})]}):c.jsxs(c.Fragment,{children:[o&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(Nt,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Total Tickets"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.totalTickets})]}),c.jsx(a1,{className:"h-8 w-8 text-primary-600"})]})}),c.jsx(Nt,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600",children:"SLA Compliance"}),c.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[o.slaMetrics?.complianceRate||0,"%"]})]}),c.jsx(_i,{className:"h-8 w-8 text-green-600"})]})}),c.jsx(Nt,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600",children:"SLA Breaches"}),c.jsx("p",{className:"text-2xl font-bold text-red-600",children:o.slaMetrics?.breached||0})]}),c.jsx(Iv,{className:"h-8 w-8 text-red-600"})]})}),c.jsx(Nt,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Active Technicians"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.technicianPerformance?.length||0})]}),c.jsx(GO,{className:"h-8 w-8 text-blue-600"})]})})]}),u.length>0&&c.jsxs(Nt,{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Status-wise Ticket Count"}),c.jsx(hv,{width:"100%",height:300,children:c.jsxs(iG,{data:u,children:[c.jsx(t_,{strokeDasharray:"3 3"}),c.jsx(mh,{dataKey:"status"}),c.jsx(gh,{}),c.jsx(ds,{}),c.jsx(id,{}),c.jsx(wd,{dataKey:"count",fill:"#3b82f6"})]})})]}),h.length>0&&c.jsxs(Nt,{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Department-wise Tickets"}),c.jsx(hv,{width:"100%",height:300,children:c.jsxs(aG,{children:[c.jsx(zl,{data:h,cx:"50%",cy:"50%",labelLine:!1,label:({departmentName:O,count:k})=>`${O}: ${k}`,outerRadius:100,fill:"#8884d8",dataKey:"count",children:h.map((O,k)=>c.jsx(Fm,{fill:U5[k%U5.length]},`cell-${k}`))}),c.jsx(ds,{})]})})]}),b&&c.jsxs(Nt,{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SLA Compliance Metrics"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Response SLA"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Compliant:"}),c.jsx("span",{className:"font-semibold text-green-600",children:b.responseSLA?.compliant||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Breached:"}),c.jsx("span",{className:"font-semibold text-red-600",children:b.responseSLA?.breached||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Compliance Rate:"}),c.jsxs("span",{className:"font-semibold",children:[b.responseSLA?.complianceRate||0,"%"]})]})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Resolution SLA"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Compliant:"}),c.jsx("span",{className:"font-semibold text-green-600",children:b.resolutionSLA?.compliant||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Breached:"}),c.jsx("span",{className:"font-semibold text-red-600",children:b.resolutionSLA?.breached||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Compliance Rate:"}),c.jsxs("span",{className:"font-semibold",children:[b.resolutionSLA?.complianceRate||0,"%"]})]})]})]})]})]}),y.length>0&&c.jsxs(Nt,{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Technician Performance"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Technician"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Assigned"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Resolved"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Closed"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Resolution Rate"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map((O,k)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:O.technicianName||"Unknown"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.totalAssigned}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.resolved}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.closed}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsxs(ln,{variant:O.resolutionRate>=80?"success":O.resolutionRate>=60?"warning":"danger",children:[O.resolutionRate?.toFixed(1)||0,"%"]})})]},k))})]})})]}),_.length>0&&c.jsxs(Nt,{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Ticket Trends"}),c.jsx(hv,{width:"100%",height:300,children:c.jsxs(Mpe,{data:_,children:[c.jsx(t_,{strokeDasharray:"3 3"}),c.jsx(mh,{dataKey:"date"}),c.jsx(gh,{}),c.jsx(ds,{}),c.jsx(id,{}),c.jsx(ed,{type:"monotone",dataKey:"count",stroke:"#3b82f6",name:"Total"}),c.jsx(ed,{type:"monotone",dataKey:"open",stroke:"#f59e0b",name:"Open"}),c.jsx(ed,{type:"monotone",dataKey:"resolved",stroke:"#10b981",name:"Resolved"}),c.jsx(ed,{type:"monotone",dataKey:"closed",stroke:"#6b7280",name:"Closed"})]})})]})]})]})})},vge=()=>{const{user:t}=Sr(),[e,n]=L.useState([]),[r,i]=L.useState([]),[a,s]=L.useState(!1),[o,l]=L.useState(!1),[u,f]=L.useState(!1),[h,m]=L.useState(null),[y,w]=L.useState({name:"",organization:"",permissions:["read"],expiresAt:"",rateLimit:1e3});L.useEffect(()=>{t?.role==="admin"&&(b(),x())},[t]);const b=async()=>{try{s(!0);const N=await rm.getAll();n(N)}catch(N){console.error("Failed to load API keys",N),de.error("Failed to load API keys")}finally{s(!1)}},x=async()=>{try{const N=await ha.getAll();i(N)}catch(N){console.error("Failed to load organizations",N)}},_=async()=>{try{if(!y.name){de.error("API key name is required");return}const N={...y,organization:y.organization||null,expiresAt:y.expiresAt?new Date(y.expiresAt).toISOString():null},O=await rm.create(N);m(O.key),l(!1),f(!0),w({name:"",organization:"",permissions:["read"],expiresAt:"",rateLimit:1e3}),b(),de.success("API key created successfully!")}catch(N){console.error("Failed to create API key",N),de.error(N.message||"Failed to create API key")}},M=N=>{navigator.clipboard.writeText(N),de.success("Copied to clipboard!")},T=async N=>{if(window.confirm("Are you sure you want to delete this API key? This action cannot be undone."))try{await rm.delete(N),de.success("API key deleted successfully"),b()}catch(O){console.error("Failed to delete API key",O),de.error("Failed to delete API key")}},A=async N=>{try{await rm.revoke(N),de.success("API key revoked successfully"),b()}catch(O){console.error("Failed to revoke API key",O),de.error("Failed to revoke API key")}},R=async N=>{try{await rm.activate(N),de.success("API key activated successfully"),b()}catch(O){console.error("Failed to activate API key",O),de.error("Failed to activate API key")}};return!t||t.role!=="admin"?c.jsx(Nn,{children:c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-600",children:"Access denied. Admin access required."})})}):c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"API Keys"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Manage API keys for external integrations"})]}),c.jsxs(Ye,{transparent:!0,onClick:()=>l(!0),className:"flex items-center gap-2",children:[c.jsx(gs,{size:18}),"Create API Key"]})]}),c.jsx(Nt,{children:a?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),c.jsx("p",{className:"text-gray-600",children:"Loading API keys..."})]}):e.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(dv,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),c.jsx("p",{className:"text-gray-600",children:"No API keys found. Create one to get started."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Key"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Organization"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Permissions"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Used"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Usage"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(N=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:N.name}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono",children:[N.keyPrefix,c.jsx(Ye,{transparent:!0,onClick:()=>M(N.keyPrefix),className:"ml-2 p-1",type:"button",children:c.jsx(r1,{size:14})})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.organization?.name||"Global"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"flex gap-1",children:N.permissions.map(O=>c.jsx(ln,{variant:"info",className:"text-xs",children:O},O))})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N.isActive?c.jsxs(ln,{variant:"success",children:[c.jsx(_i,{size:12,className:"mr-1"}),"Active"]}):c.jsxs(ln,{variant:"danger",children:[c.jsx(km,{size:12,className:"mr-1"}),"Revoked"]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.lastUsed?mn(new Date(N.lastUsed),"MMM dd, yyyy HH:mm"):"Never"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.usageCount||0}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:c.jsxs("div",{className:"flex gap-2",children:[N.isActive?c.jsx(Ye,{transparent:!0,onClick:()=>A(N._id),className:"text-red-600 hover:text-red-700",type:"button",children:"Revoke"}):c.jsx(Ye,{transparent:!0,onClick:()=>R(N._id),className:"text-green-600 hover:text-green-700",type:"button",children:"Activate"}),c.jsx(Ye,{transparent:!0,onClick:()=>T(N._id),className:"text-red-600 hover:text-red-700",type:"button",children:c.jsx(go,{size:16})})]})})]},N._id))})]})})}),c.jsx(Na,{isOpen:o,onClose:()=>l(!1),title:"Create API Key",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Name"}),c.jsx(st,{value:y.name,onChange:N=>w({...y,name:N.target.value}),placeholder:"e.g., Production API Key"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Organization"}),c.jsx(sn,{value:y.organization,onChange:N=>w({...y,organization:N.target.value}),options:[{value:"",label:"Global (All Organizations)"},...r.map(N=>({value:N._id||N.id,label:N.name}))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Permissions"}),c.jsx(sn,{value:y.permissions.join(","),onChange:N=>w({...y,permissions:N.target.value.split(",")}),options:[{value:"read",label:"Read Only"},{value:"read,write",label:"Read & Write"},{value:"read,write,admin",label:"Full Access"}]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Expires At (Optional)"}),c.jsx(st,{type:"datetime-local",value:y.expiresAt,onChange:N=>w({...y,expiresAt:N.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Rate Limit (requests/hour)"}),c.jsx(st,{type:"number",value:y.rateLimit,onChange:N=>w({...y,rateLimit:parseInt(N.target.value)||1e3})})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx(Ye,{transparent:!0,onClick:()=>l(!1),variant:"outline",children:"Cancel"}),c.jsx(Ye,{transparent:!0,onClick:_,children:"Create"})]})]})}),c.jsx(Na,{isOpen:u,onClose:()=>f(!1),title:"API Key Created",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[c.jsx("p",{className:"text-sm text-yellow-800 font-semibold mb-2",children:" Important: Save this key now!"}),c.jsx("p",{className:"text-sm text-yellow-700",children:"This is the only time you'll be able to see the full API key. Make sure to copy and store it securely."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Your API Key"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(st,{value:h||"",readOnly:!0,className:"font-mono"}),c.jsxs(Ye,{transparent:!0,onClick:()=>M(h),className:"flex items-center gap-2",type:"button",children:[c.jsx(r1,{size:16}),"Copy"]})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx(Ye,{transparent:!0,onClick:()=>f(!1),children:"I've Saved It"})})]})})]})})},xge=()=>{const{user:t}=Sr(),[e,n]=L.useState([]),[r,i]=L.useState([]),[a,s]=L.useState(!1),[o,l]=L.useState(!1),[u,f]=L.useState(!1),[h,m]=L.useState(null),[y,w]=L.useState({name:"",type:"webhook",description:"",organization:"",isActive:!0,config:{url:"",method:"POST",headers:{},authType:"none",authConfig:{bearerToken:"",username:"",password:"",apiKey:"",apiKeyHeader:"X-API-Key"},fieldMapping:{title:"title",description:"description",priority:"priority",category:"category"},workspaceId:"",subscriptionId:"",resourceGroup:""}});L.useEffect(()=>{t?.role==="admin"&&(b(),x())},[t]);const b=async()=>{try{s(!0);const k=await tv.getAll();n(k)}catch(k){console.error("Failed to load integrations",k),de.error("Failed to load integrations")}finally{s(!1)}},x=async()=>{try{const k=await ha.getAll();i(k)}catch(k){console.error("Failed to load organizations",k)}},_=async()=>{try{if(!y.name){de.error("Integration name is required");return}const k={...y,organization:y.organization||null};await tv.create(k),de.success("Integration created successfully!"),l(!1),N(),b()}catch(k){console.error("Failed to create integration",k),de.error(k.message||"Failed to create integration")}},M=k=>{m(k),w({name:k.name,type:k.type,description:k.description||"",organization:k.organization?._id||k.organization||"",isActive:k.isActive,config:{...k.config,fieldMapping:k.config.fieldMapping||{title:"title",description:"description",priority:"priority",category:"category"}}}),f(!0)},T=async()=>{try{if(!y.name){de.error("Integration name is required");return}const k={...y,organization:y.organization||null};await tv.update(h._id,k),de.success("Integration updated successfully!"),f(!1),N(),b()}catch(k){console.error("Failed to update integration",k),de.error(k.message||"Failed to update integration")}},A=async k=>{if(window.confirm("Are you sure you want to delete this integration? This action cannot be undone."))try{await tv.delete(k),de.success("Integration deleted successfully"),b()}catch(C){console.error("Failed to delete integration",C),de.error("Failed to delete integration")}},R=k=>{navigator.clipboard.writeText(k),de.success("Copied to clipboard!")},N=()=>{w({name:"",type:"webhook",description:"",organization:"",isActive:!0,config:{url:"",method:"POST",headers:{},authType:"none",authConfig:{bearerToken:"",username:"",password:"",apiKey:"",apiKeyHeader:"X-API-Key"},fieldMapping:{title:"title",description:"description",priority:"priority",category:"category"},workspaceId:"",subscriptionId:"",resourceGroup:""}}),m(null)},O=k=>k.webhookUrl?`${window.location.origin}${k.webhookUrl}`:"N/A";return!t||t.role!=="admin"?c.jsx(Nn,{children:c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-600",children:"Access denied. Admin access required."})})}):c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"External Integrations"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Manage external API integrations, webhooks, and Azure Sentinel"})]}),c.jsxs(Ye,{transparent:!0,onClick:()=>{N(),l(!0)},className:"flex items-center gap-2",children:[c.jsx(gs,{size:18}),"Create Integration"]})]}),c.jsx(Nt,{children:a?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),c.jsx("p",{className:"text-gray-600",children:"Loading integrations..."})]}):e.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(j8,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),c.jsx("p",{className:"text-gray-600",children:"No integrations found. Create one to get started."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Webhook URL"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Triggers"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(k=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.name}),k.description&&c.jsx("div",{className:"text-sm text-gray-500",children:k.description})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(ln,{variant:k.type==="azure-sentinel"?"info":"default",children:k.type==="azure-sentinel"?"Azure Sentinel":k.type})}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("code",{className:"text-xs text-gray-600 font-mono bg-gray-100 px-2 py-1 rounded",children:O(k)}),k.webhookUrl&&c.jsx(Ye,{transparent:!0,onClick:()=>R(O(k)),className:"p-1",type:"button",children:c.jsx(r1,{size:14})})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.isActive?c.jsxs(ln,{variant:"success",children:[c.jsx(_i,{size:12,className:"mr-1"}),"Active"]}):c.jsxs(ln,{variant:"danger",children:[c.jsx(km,{size:12,className:"mr-1"}),"Inactive"]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k.triggerCount||0}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ye,{transparent:!0,onClick:()=>M(k),className:"text-blue-600 hover:text-blue-700",type:"button",children:c.jsx(Ll,{size:16})}),c.jsx(Ye,{transparent:!0,onClick:()=>A(k._id),className:"text-red-600 hover:text-red-700",type:"button",children:c.jsx(go,{size:16})})]})})]},k._id))})]})})}),c.jsx(Na,{isOpen:o||u,onClose:()=>{l(!1),f(!1),N()},title:u?"Edit Integration":"Create Integration",children:c.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Name *"}),c.jsx(st,{value:y.name,onChange:k=>w({...y,name:k.target.value}),placeholder:"e.g., Azure Sentinel Production"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Type *"}),c.jsx(sn,{value:y.type,onChange:k=>w({...y,type:k.target.value}),options:[{value:"azure-sentinel",label:"Azure Sentinel"},{value:"webhook",label:"Generic Webhook"},{value:"api",label:"External API"},{value:"custom",label:"Custom"}]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),c.jsx(uS,{value:y.description,onChange:k=>w({...y,description:k.target.value}),placeholder:"Describe this integration...",rows:3})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Organization"}),c.jsx(sn,{value:y.organization,onChange:k=>w({...y,organization:k.target.value}),options:[{value:"",label:"Global (All Organizations)"},...r.map(k=>({value:k._id||k.id,label:k.name}))]})]}),y.type==="azure-sentinel"&&c.jsxs("div",{className:"space-y-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[c.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-3",children:"Azure Sentinel Configuration"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(st,{label:"Workspace ID",value:y.config.workspaceId,onChange:k=>w({...y,config:{...y.config,workspaceId:k.target.value}}),placeholder:"Azure Sentinel Workspace ID"}),c.jsx(st,{label:"Subscription ID",value:y.config.subscriptionId,onChange:k=>w({...y,config:{...y.config,subscriptionId:k.target.value}}),placeholder:"Azure Subscription ID"})]}),c.jsx(st,{label:"Resource Group",value:y.config.resourceGroup,onChange:k=>w({...y,config:{...y.config,resourceGroup:k.target.value}}),placeholder:"Resource Group Name"}),c.jsxs("div",{className:"mt-4 p-3 bg-blue-100 rounded text-xs text-blue-800",children:[c.jsx("p",{className:"font-medium mb-1",children:" Field Mapping:"}),c.jsx("p",{children:"Map Azure Sentinel alert fields to ticket fields:"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[c.jsx(st,{label:"Title Field",value:y.config.fieldMapping.title,onChange:k=>w({...y,config:{...y.config,fieldMapping:{...y.config.fieldMapping,title:k.target.value}}}),placeholder:"AlertDisplayName"}),c.jsx(st,{label:"Description Field",value:y.config.fieldMapping.description,onChange:k=>w({...y,config:{...y.config,fieldMapping:{...y.config.fieldMapping,description:k.target.value}}}),placeholder:"Description"}),c.jsx(st,{label:"Priority Field",value:y.config.fieldMapping.priority,onChange:k=>w({...y,config:{...y.config,fieldMapping:{...y.config.fieldMapping,priority:k.target.value}}}),placeholder:"Severity"}),c.jsx(st,{label:"Category Field",value:y.config.fieldMapping.category,onChange:k=>w({...y,config:{...y.config,fieldMapping:{...y.config.fieldMapping,category:k.target.value}}}),placeholder:"Category"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",id:"isActive",checked:y.isActive,onChange:k=>w({...y,isActive:k.target.checked}),className:"w-4 h-4 rounded border-gray-300"}),c.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Active"})]}),u&&h?.webhookUrl&&c.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[c.jsx("p",{className:"text-sm font-semibold text-yellow-800 mb-2",children:"Webhook URL:"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("code",{className:"text-xs text-yellow-900 font-mono bg-yellow-100 px-2 py-1 rounded flex-1",children:O(h)}),c.jsx(Ye,{transparent:!0,onClick:()=>R(O(integration)),className:"p-1",type:"button",children:c.jsx(r1,{size:16})})]}),c.jsx("p",{className:"text-xs text-yellow-700 mt-2",children:"Use this URL in Azure Sentinel to send alerts to this integration."})]}),c.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[c.jsx(Ye,{transparent:!0,onClick:()=>{l(!1),f(!1),N()},variant:"outline",children:"Cancel"}),c.jsx(Ye,{transparent:!0,onClick:u?T:_,children:u?"Update":"Create"})]})]})})]})})},bge=()=>{const{user:t}=Sr(),{hasAccess:e}=X0(),n=ni();if(!e("EMAIL_AUTOMATION"))return c.jsx(Nn,{children:c.jsxs(Nt,{className:"p-8 text-center",children:[c.jsx(Vc,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Email Automation Requires Pro"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Upgrade to Pro to enable automated email workflows and scheduled email reports."}),c.jsx(Ye,{onClick:()=>n("/upgrade"),children:"Upgrade to Pro"})]})});const[r,i]=L.useState([]),[a,s]=L.useState([]),[o,l]=L.useState([]),[u,f]=L.useState(!1),[h,m]=L.useState(!1),[y,w]=L.useState(null),[b,x]=L.useState({name:"",type:"daily-open-tickets",organization:"",isEnabled:!0,schedule:{time:"09:00",timezone:"UTC",dayOfWeek:null,dayOfMonth:null},recipients:{admins:!0,organizationManagers:!0,departmentHeads:!0,technicians:!1},reportFormat:["html"],emailTemplate:""});L.useEffect(()=>{t?.role==="admin"&&_()},[t]);const _=async()=>{try{f(!0);const[C,I,F]=await Promise.all([Ef.getAll(),om.getAll(),ha.getAll()]);i(C),s(I),l(F)}catch(C){console.error("Failed to load data",C),de.error("Failed to load data")}finally{f(!1)}},M=()=>{w(null),x({name:"",type:"daily-open-tickets",organization:"",isEnabled:!0,schedule:{time:"09:00",timezone:"UTC",dayOfWeek:null,dayOfMonth:null},recipients:{admins:!0,organizationManagers:!0,departmentHeads:!0,technicians:!1},reportFormat:["html"],emailTemplate:""}),m(!0)},T=C=>{w(C),x({name:C.name,type:C.type,organization:C.organization?._id||C.organization||"",isEnabled:C.isEnabled,schedule:C.schedule,recipients:C.recipients,reportFormat:C.reportFormat,emailTemplate:C.emailTemplate?._id||C.emailTemplate||""}),m(!0)},A=async()=>{try{if(!b.name){de.error("Name is required");return}const C={...b,organization:b.organization||null,emailTemplate:b.emailTemplate||null};y?(await Ef.update(y._id,C),de.success("Automation updated successfully")):(await Ef.create(C),de.success("Automation created successfully")),m(!1),_()}catch(C){console.error("Failed to save automation",C),de.error(C.message||"Failed to save automation")}},R=async C=>{if(window.confirm("Are you sure you want to delete this automation?"))try{await Ef.delete(C),de.success("Automation deleted successfully"),_()}catch(I){console.error("Failed to delete automation",I),de.error("Failed to delete automation")}},N=async C=>{try{await Ef.run(C),de.success("Automation run triggered successfully")}catch(I){console.error("Failed to run automation",I),de.error("Failed to run automation")}},O=async C=>{try{await Ef.update(C._id,{isEnabled:!C.isEnabled}),de.success(`Automation ${C.isEnabled?"disabled":"enabled"}`),_()}catch(I){console.error("Failed to toggle automation",I),de.error("Failed to toggle automation")}};if(!t||t.role!=="admin")return c.jsx(Nn,{children:c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-600",children:"Access denied. Admin access required."})})});const k=C=>({"daily-open-tickets":"Daily Open Tickets","daily-report":"Daily Report","weekly-report":"Weekly Report","monthly-report":"Monthly Report"})[C]||C;return c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Email Automation"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Manage automated email reports and notifications"})]}),c.jsxs(Ye,{transparent:!0,onClick:M,className:"flex items-center gap-2",children:[c.jsx(gs,{size:18}),"Create Automation"]})]}),c.jsx(Nt,{children:u?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),c.jsx("p",{className:"text-gray-600",children:"Loading automations..."})]}):r.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(wl,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),c.jsx("p",{className:"text-gray-600",children:"No automations found. Create one to get started."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Organization"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Schedule"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Last Sent"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(C=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:C.name}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k(C.type)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.organization?.name||"Global"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ml,{size:14}),C.schedule?.time||"N/A",C.type==="weekly-report"&&C.schedule?.dayOfWeek!==null&&c.jsxs("span",{className:"text-xs",children:["(Day ",C.schedule.dayOfWeek,")"]}),C.type==="monthly-report"&&C.schedule?.dayOfMonth!==null&&c.jsxs("span",{className:"text-xs",children:["(Day ",C.schedule.dayOfMonth,")"]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.isEnabled?c.jsxs(ln,{variant:"success",children:[c.jsx(_i,{size:12,className:"mr-1"}),"Enabled"]}):c.jsxs(ln,{variant:"danger",children:[c.jsx(km,{size:12,className:"mr-1"}),"Disabled"]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.lastSent?mn(new Date(C.lastSent),"MMM dd, yyyy HH:mm"):"Never"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Ye,{transparent:!0,onClick:()=>N(C._id),className:"text-blue-600 hover:text-blue-700",type:"button",title:"Run Now",children:c.jsx(k8,{size:16})}),c.jsx(Ye,{transparent:!0,onClick:()=>T(C),className:"text-primary-600 hover:text-primary-700",type:"button",title:"Edit",children:c.jsx(Ll,{size:16})}),c.jsx(Ye,{transparent:!0,onClick:()=>O(C),className:C.isEnabled?"text-yellow-600 hover:text-yellow-700":"text-green-600 hover:text-green-700",type:"button",title:C.isEnabled?"Disable":"Enable",children:C.isEnabled?c.jsx(km,{size:16}):c.jsx(_i,{size:16})}),c.jsx(Ye,{transparent:!0,onClick:()=>R(C._id),className:"text-red-600 hover:text-red-700",type:"button",title:"Delete",children:c.jsx(go,{size:16})})]})})]},C._id))})]})})}),c.jsx(Na,{isOpen:h,onClose:()=>m(!1),title:y?"Edit Automation":"Create Automation",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Name"}),c.jsx(st,{value:b.name,onChange:C=>x({...b,name:C.target.value}),placeholder:"e.g., Daily Open Tickets Report"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Type"}),c.jsx(sn,{value:b.type,onChange:C=>{const I=C.target.value;x({...b,type:I,recipients:{...b.recipients,technicians:I==="daily-open-tickets"}})},options:[{value:"daily-open-tickets",label:"Daily Open Tickets"},{value:"daily-report",label:"Daily Report"},{value:"weekly-report",label:"Weekly Report"},{value:"monthly-report",label:"Monthly Report"}]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Organization"}),c.jsx(sn,{value:b.organization,onChange:C=>x({...b,organization:C.target.value}),options:[{value:"",label:"Global (All Organizations)"},...o.map(C=>({value:C._id||C.id,label:C.name}))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Schedule Time (HH:mm)"}),c.jsx(st,{type:"time",value:b.schedule.time,onChange:C=>x({...b,schedule:{...b.schedule,time:C.target.value}})})]}),b.type==="weekly-report"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Day of Week (0=Sunday, 1=Monday, etc.)"}),c.jsx(st,{type:"number",min:"0",max:"6",value:b.schedule.dayOfWeek||"",onChange:C=>x({...b,schedule:{...b.schedule,dayOfWeek:parseInt(C.target.value)||null}})})]}),b.type==="monthly-report"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Day of Month (1-31)"}),c.jsx(st,{type:"number",min:"1",max:"31",value:b.schedule.dayOfMonth||"",onChange:C=>x({...b,schedule:{...b.schedule,dayOfMonth:parseInt(C.target.value)||null}})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Recipients"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:b.recipients.admins,onChange:C=>x({...b,recipients:{...b.recipients,admins:C.target.checked}}),className:"mr-2"}),"Admins"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:b.recipients.organizationManagers,onChange:C=>x({...b,recipients:{...b.recipients,organizationManagers:C.target.checked}}),className:"mr-2"}),"Organization Managers"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:b.recipients.departmentHeads,onChange:C=>x({...b,recipients:{...b.recipients,departmentHeads:C.target.checked}}),className:"mr-2"}),"Department Heads"]}),b.type==="daily-open-tickets"&&c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:b.recipients.technicians,onChange:C=>x({...b,recipients:{...b.recipients,technicians:C.target.checked}}),className:"mr-2"}),"Technicians"]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Template (Optional)"}),c.jsx(sn,{value:b.emailTemplate,onChange:C=>x({...b,emailTemplate:C.target.value}),options:[{value:"",label:"Use Default Template"},...a.filter(C=>C.type===b.type).map(C=>({value:C._id||C.id,label:C.name}))]})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx(Ye,{transparent:!0,onClick:()=>m(!1),variant:"outline",children:"Cancel"}),c.jsx(Ye,{transparent:!0,onClick:A,children:y?"Update":"Create"})]})]})})]})})},wge=()=>{const{user:t}=Sr(),[e,n]=L.useState(null),[r,i]=L.useState([]),[a,s]=L.useState([]),[o,l]=L.useState(!1),[u,f]=L.useState(!1),[h,m]=L.useState(!1),[y,w]=L.useState(""),[b,x]=L.useState({isEnabled:!1,webhookUrl:"",botId:"",tenantId:"",channelId:"",channelName:"",notifications:{ticketCreated:!0,ticketUpdated:!0,ticketResolved:!0,ticketClosed:!0,slaBreach:!0,ticketAssigned:!0,ticketCommented:!1},workingHours:{enabled:!1,startTime:"09:00",endTime:"17:00",timezone:"UTC",daysOfWeek:[1,2,3,4,5]},departmentRouting:[]});L.useEffect(()=>{t?.role==="admin"&&_()},[t,y]);const _=async()=>{try{l(!0);const[C,I,F]=await Promise.all([rv.getConfig(y||null),ha.getAll(),Rc.getAll()]);C._id?(n(C),x({isEnabled:C.isEnabled||!1,webhookUrl:C.webhookUrl||"",botId:C.botId||"",tenantId:C.tenantId||"",channelId:C.channelId||"",channelName:C.channelName||"",notifications:C.notifications||b.notifications,workingHours:C.workingHours||b.workingHours,departmentRouting:C.departmentRouting||[]})):n(null),i(I),s(F)}catch(C){console.error("Failed to load Teams settings",C),de.error("Failed to load Teams settings")}finally{l(!1)}},M=async()=>{try{if(!b.webhookUrl&&b.isEnabled){de.error("Webhook URL is required when integration is enabled");return}f(!0),e?._id?(await rv.updateConfig(e._id,b),de.success("Teams integration settings updated successfully")):(await rv.saveConfig({...b,organization:y||null},y||null),de.success("Teams integration settings saved successfully")),_()}catch(C){console.error("Failed to save Teams settings",C),de.error(C.message||"Failed to save settings")}finally{f(!1)}},T=async()=>{try{if(!b.webhookUrl){de.error("Please enter a webhook URL first");return}m(!0),await rv.testWebhook(b.webhookUrl,y||null),de.success("Test message sent to Teams channel! Check your Teams channel to verify."),_()}catch(C){console.error("Failed to test Teams webhook",C),de.error(C.message||"Failed to send test message. Please check your webhook URL.")}finally{m(!1)}},A=()=>{x({...b,isEnabled:!b.isEnabled})},R=()=>{x({...b,departmentRouting:[...b.departmentRouting,{department:"",channelId:"",channelName:""}]})},N=C=>{x({...b,departmentRouting:b.departmentRouting.filter((I,F)=>F!==C)})},O=(C,I,F)=>{const V=[...b.departmentRouting];V[C]={...V[C],[I]:F},x({...b,departmentRouting:V})};if(!t||t.role!=="admin")return c.jsx(Nn,{children:c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-600",children:"Access denied. Admin access required."})})});const k=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Microsoft Teams Integration"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Configure Microsoft Teams bot and notifications"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ln,{variant:b.isEnabled?"success":"danger",children:b.isEnabled?c.jsxs(c.Fragment,{children:[c.jsx(_i,{size:12,className:"mr-1"}),"Enabled"]}):c.jsxs(c.Fragment,{children:[c.jsx(km,{size:12,className:"mr-1"}),"Disabled"]})}),c.jsx(Ye,{transparent:!0,onClick:A,variant:"outline",className:"text-sm",children:b.isEnabled?"Disable":"Enable"})]})]}),c.jsx(Nt,{className:"bg-blue-50 border-blue-200",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(N8,{className:"text-blue-600 mt-0.5",size:20}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:"How to Get Your Webhook URL"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-blue-800",children:[c.jsx("li",{children:"Open Microsoft Teams and navigate to your channel"}),c.jsx("li",{children:"Click the three dots () next to the channel name"}),c.jsx("li",{children:'Select "Connectors" from the menu'}),c.jsx("li",{children:'Search for "Incoming Webhook" and click "Configure"'}),c.jsx("li",{children:'Give it a name and click "Create"'}),c.jsx("li",{children:"Copy the webhook URL and paste it below"})]})]})]})}),c.jsx(Nt,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Integration Settings"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Configure Microsoft Teams webhook and bot settings"})]}),t.role==="admin"&&r.length>0&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Organization"}),c.jsx(sn,{value:y,onChange:C=>{w(C.target.value)},options:[{value:"",label:"Global (All Organizations)"},...r.map(C=>({value:C._id||C.id,label:C.name}))]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Webhook URL ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx(st,{value:b.webhookUrl,onChange:C=>x({...b,webhookUrl:C.target.value}),placeholder:"https://outlook.office.com/webhook/...",disabled:o}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Get this from your Teams channel connector settings (see instructions above)"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bot ID (Optional)"}),c.jsx(st,{value:b.botId,onChange:C=>x({...b,botId:C.target.value}),placeholder:"Bot Application ID",disabled:o})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tenant ID (Optional)"}),c.jsx(st,{value:b.tenantId,onChange:C=>x({...b,tenantId:C.target.value}),placeholder:"Azure AD Tenant ID",disabled:o})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Channel ID (Optional)"}),c.jsx(st,{value:b.channelId,onChange:C=>x({...b,channelId:C.target.value}),placeholder:"Teams Channel ID",disabled:o})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Channel Name (Optional)"}),c.jsx(st,{value:b.channelName,onChange:C=>x({...b,channelName:C.target.value}),placeholder:"e.g., IT Support",disabled:o})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Notification Settings"}),c.jsxs("div",{className:"space-y-2 bg-gray-50 p-4 rounded-lg",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:b.notifications.ticketCreated,onChange:C=>x({...b,notifications:{...b.notifications,ticketCreated:C.target.checked}}),className:"mr-2",disabled:o}),"Notify when ticket is created"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:b.notifications.ticketUpdated,onChange:C=>x({...b,notifications:{...b.notifications,ticketUpdated:C.target.checked}}),className:"mr-2",disabled:o}),"Notify when ticket is updated"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:b.notifications.ticketResolved,onChange:C=>x({...b,notifications:{...b.notifications,ticketResolved:C.target.checked}}),className:"mr-2",disabled:o}),"Notify when ticket is resolved"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:b.notifications.ticketClosed,onChange:C=>x({...b,notifications:{...b.notifications,ticketClosed:C.target.checked}}),className:"mr-2",disabled:o}),"Notify when ticket is closed"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:b.notifications.ticketAssigned,onChange:C=>x({...b,notifications:{...b.notifications,ticketAssigned:C.target.checked}}),className:"mr-2",disabled:o}),"Notify when ticket is assigned"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:b.notifications.slaBreach,onChange:C=>x({...b,notifications:{...b.notifications,slaBreach:C.target.checked}}),className:"mr-2",disabled:o}),"Notify on SLA breach"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:b.notifications.ticketCommented,onChange:C=>x({...b,notifications:{...b.notifications,ticketCommented:C.target.checked}}),className:"mr-2",disabled:o}),"Notify when ticket is commented"]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Working Hours (Optional)"}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:b.workingHours.enabled,onChange:C=>x({...b,workingHours:{...b.workingHours,enabled:C.target.checked}}),className:"mr-2",disabled:o}),"Enable working hours restriction"]}),b.workingHours.enabled&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Start Time"}),c.jsx(st,{type:"time",value:b.workingHours.startTime,onChange:C=>x({...b,workingHours:{...b.workingHours,startTime:C.target.value}}),disabled:o})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"End Time"}),c.jsx(st,{type:"time",value:b.workingHours.endTime,onChange:C=>x({...b,workingHours:{...b.workingHours,endTime:C.target.value}}),disabled:o})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-2",children:"Days of Week"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:k.map((C,I)=>c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:b.workingHours.daysOfWeek.includes(I),onChange:F=>{const V=[...b.workingHours.daysOfWeek];if(F.target.checked)V.push(I);else{const W=V.indexOf(I);W>-1&&V.splice(W,1)}x({...b,workingHours:{...b.workingHours,daysOfWeek:V.sort()}})},className:"mr-1",disabled:o}),c.jsx("span",{className:"text-xs",children:C.substring(0,3)})]},I))})]})]})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Department Routing (Optional)"}),c.jsx(Ye,{transparent:!0,onClick:R,variant:"outline",className:"text-xs",type:"button",children:"Add Route"})]}),c.jsxs("div",{className:"space-y-2",children:[b.departmentRouting.map((C,I)=>c.jsxs("div",{className:"flex gap-2 items-end bg-gray-50 p-3 rounded-lg",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Department"}),c.jsx(sn,{value:C.department?._id||C.department||"",onChange:F=>O(I,"department",F.target.value),options:[{value:"",label:"Select Department"},...a.map(F=>({value:F._id||F.id,label:F.name}))]})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Channel Name"}),c.jsx(st,{value:C.channelName||"",onChange:F=>O(I,"channelName",F.target.value),placeholder:"Channel name"})]}),c.jsx(Ye,{transparent:!0,onClick:()=>N(I),variant:"outline",className:"text-red-600",type:"button",children:"Remove"})]},I)),b.departmentRouting.length===0&&c.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No department routes configured. All notifications will go to the main webhook."})]})]}),e?.lastTested&&c.jsxs("div",{className:"text-sm text-gray-600",children:["Last tested: ",mn(new Date(e.lastTested),"MMM dd, yyyy HH:mm")]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(Ye,{transparent:!0,onClick:T,variant:"outline",disabled:o||u||h||!b.webhookUrl,className:"flex items-center gap-2",children:[c.jsx(k8,{size:16}),h?"Testing...":"Test Webhook"]}),c.jsxs(Ye,{transparent:!0,onClick:M,disabled:o||u||h,className:"flex items-center gap-2",children:[c.jsx(HO,{size:16}),u?"Saving...":"Save Settings"]})]})]})})]})})},_ge=()=>{const{user:t}=Sr(),[e,n]=L.useState([]),[r,i]=L.useState([]),[a,s]=L.useState([]),[o,l]=L.useState(!1),[u,f]=L.useState(!1),[h,m]=L.useState(null),[y,w]=L.useState(""),[b,x]=L.useState({question:"",answer:"",keywords:"",category:"general",organization:"",department:"",priority:0});L.useEffect(()=>{t?.role==="admin"&&_()},[t]);const _=async()=>{try{l(!0);const[O,k,C]=await Promise.all([nv.getAll(),ha.getAll(),Rc.getAll()]);n(O),i(k),s(C)}catch(O){console.error("Failed to load data",O),de.error("Failed to load FAQs")}finally{l(!1)}},M=()=>{m(null),x({question:"",answer:"",keywords:"",category:"general",organization:"",department:"",priority:0}),f(!0)},T=O=>{m(O),x({question:O.question,answer:O.answer,keywords:(O.keywords||[]).join(", "),category:O.category,organization:O.organization?._id||O.organization||"",department:O.department?._id||O.department||"",priority:O.priority||0}),f(!0)},A=async()=>{try{if(!b.question||!b.answer){de.error("Question and answer are required");return}const O={...b,keywords:b.keywords.split(",").map(k=>k.trim()).filter(k=>k),organization:b.organization||null,department:b.department||null};h?(await nv.update(h._id,O),de.success("FAQ updated successfully")):(await nv.create(O),de.success("FAQ created successfully")),f(!1),_()}catch(O){console.error("Failed to save FAQ",O),de.error(O.message||"Failed to save FAQ")}},R=async O=>{if(window.confirm("Are you sure you want to delete this FAQ?"))try{await nv.delete(O),de.success("FAQ deleted successfully"),_()}catch(k){console.error("Failed to delete FAQ",k),de.error("Failed to delete FAQ")}},N=e.filter(O=>{if(!y)return!0;const k=y.toLowerCase();return O.question.toLowerCase().includes(k)||O.answer.toLowerCase().includes(k)||(O.keywords||[]).some(C=>C.toLowerCase().includes(k))});return!t||t.role!=="admin"?c.jsx(Nn,{children:c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-600",children:"Access denied. Admin access required."})})}):c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"FAQ Management"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Manage frequently asked questions for the chatbot"})]}),c.jsxs(Ye,{transparent:!0,onClick:M,className:"flex items-center gap-2",children:[c.jsx(gs,{size:18}),"Create FAQ"]})]}),c.jsx(Nt,{children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(oh,{className:"text-gray-400",size:20}),c.jsx(st,{value:y,onChange:O=>w(O.target.value),placeholder:"Search FAQs...",className:"flex-1"})]})}),c.jsx(Nt,{children:o?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),c.jsx("p",{className:"text-gray-600",children:"Loading FAQs..."})]}):N.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(C8,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),c.jsx("p",{className:"text-gray-600",children:"No FAQs found. Create one to get started."})]}):c.jsx("div",{className:"space-y-4",children:N.map(O=>c.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("h3",{className:"font-semibold text-gray-900",children:O.question}),c.jsx("span",{className:"text-xs bg-primary-100 text-primary-700 px-2 py-1 rounded",children:O.category}),O.priority>0&&c.jsxs("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded",children:["Priority ",O.priority]})]}),c.jsx("p",{className:"text-gray-600 text-sm mb-2",children:O.answer}),O.keywords&&O.keywords.length>0&&c.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:O.keywords.map((k,C)=>c.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:k},C))}),c.jsxs("div",{className:"text-xs text-gray-500",children:[O.organization?.name||"Global","  Views: ",O.viewCount||0,"  Helpful: ",O.helpfulCount||0]})]}),c.jsxs("div",{className:"flex gap-2 ml-4",children:[c.jsx(Ye,{transparent:!0,onClick:()=>T(O),className:"text-primary-600 hover:text-primary-700",type:"button",children:c.jsx(Ll,{size:16})}),c.jsx(Ye,{transparent:!0,onClick:()=>R(O._id),className:"text-red-600 hover:text-red-700",type:"button",children:c.jsx(go,{size:16})})]})]})},O._id))})}),c.jsx(Na,{isOpen:u,onClose:()=>f(!1),title:h?"Edit FAQ":"Create FAQ",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Question"}),c.jsx(st,{value:b.question,onChange:O=>x({...b,question:O.target.value}),placeholder:"e.g., How do I reset my password?"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Answer"}),c.jsx("textarea",{value:b.answer,onChange:O=>x({...b,answer:O.target.value}),placeholder:"Provide a detailed answer...",className:"w-full border border-gray-300 rounded-lg px-3 py-2 resize-none focus:outline-none focus:ring-2 focus:ring-primary-500",rows:4})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Keywords (comma-separated)"}),c.jsx(st,{value:b.keywords,onChange:O=>x({...b,keywords:O.target.value}),placeholder:"password, reset, login, account"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Category"}),c.jsx(sn,{value:b.category,onChange:O=>x({...b,category:O.target.value}),options:[{value:"general",label:"General"},{value:"password",label:"Password"},{value:"vpn",label:"VPN"},{value:"email",label:"Email"},{value:"hr",label:"HR"},{value:"it",label:"IT Support"}]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Organization"}),c.jsx(sn,{value:b.organization,onChange:O=>x({...b,organization:O.target.value}),options:[{value:"",label:"Global (All Organizations)"},...r.map(O=>({value:O._id||O.id,label:O.name}))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Department (Optional)"}),c.jsx(sn,{value:b.department,onChange:O=>x({...b,department:O.target.value}),options:[{value:"",label:"All Departments"},...a.map(O=>({value:O._id||O.id,label:O.name}))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Priority (0-10, higher = matched first)"}),c.jsx(st,{type:"number",min:"0",max:"10",value:b.priority,onChange:O=>x({...b,priority:parseInt(O.target.value)||0})})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx(Ye,{transparent:!0,onClick:()=>f(!1),variant:"outline",children:"Cancel"}),c.jsx(Ye,{transparent:!0,onClick:A,children:h?"Update":"Create"})]})]})})]})})},Sge=()=>{const{user:t}=Sr(),[e,n]=L.useState([]),[r,i]=L.useState([]),[a,s]=L.useState(!1),[o,l]=L.useState(null),[u,f]=L.useState([]),[h,m]=L.useState({userId:"",status:"",search:""});L.useEffect(()=>{t&&(t.role==="admin"||t.role==="technician")&&(y(),t.role==="admin"&&w())},[t,h]);const y=async()=>{try{s(!0);let M=await Zf.getHistory(h.userId||null);if(h.status&&(M=M.filter(T=>T.status===h.status)),h.search){const T=h.search.toLowerCase();M=M.filter(A=>A.sessionId.toLowerCase().includes(T)||A.user?.name?.toLowerCase().includes(T)||A.user?.email?.toLowerCase().includes(T))}n(M)}catch(_){console.error("Failed to load chat sessions",_),de.error("Failed to load chat history")}finally{s(!1)}},w=async()=>{try{const _=await Jo.getAll();i(_)}catch(_){console.error("Failed to load users",_)}},b=async _=>{try{s(!0);const M=await Zf.getSession(_);if(M&&M.session)l(M.session),f(M.messages||[]);else{const T=e.find(A=>A.sessionId===_);if(T){l(T);try{const R=(await Zf.getHistory(null,100)).find(N=>N.sessionId===_)?.messages||[];f(R)}catch(A){console.error("Failed to load messages",A),f([])}}}}catch(M){console.error("Failed to load session details",M),de.error(M.message||"Failed to load session details");const T=e.find(A=>A.sessionId===_);T&&l(T)}finally{s(!1)}},x=_=>({active:"info",resolved:"success",escalated:"warning",closed:"danger"})[_]||"info";return!t||t.role!=="admin"&&t.role!=="technician"?c.jsx(Nn,{children:c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-600",children:"Access denied. Admin or Technician access required."})})}):c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Chat History"}),c.jsx("p",{className:"text-sm text-gray-600",children:"View and manage chat conversations"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[c.jsx(Nt,{children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.role==="admin"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"User"}),c.jsx(sn,{value:h.userId,onChange:_=>m({...h,userId:_.target.value}),options:[{value:"",label:"All Users"},...r.map(_=>({value:_._id||_.id,label:`${_.name} (${_.email})`}))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),c.jsx(sn,{value:h.status,onChange:_=>m({...h,status:_.target.value}),options:[{value:"",label:"All Statuses"},{value:"active",label:"Active"},{value:"escalated",label:"Escalated"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Search"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(oh,{className:"text-gray-400",size:18}),c.jsx(st,{value:h.search,onChange:_=>m({...h,search:_.target.value}),placeholder:"Search sessions...",className:"flex-1"})]})]})]})}),c.jsx(Nt,{children:a?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),c.jsx("p",{className:"text-gray-600",children:"Loading chat sessions..."})]}):e.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(rd,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),c.jsx("p",{className:"text-gray-600",children:"No chat sessions found"})]}):c.jsx("div",{className:"space-y-2",children:e.map(_=>c.jsx("div",{onClick:()=>b(_.sessionId),className:`p-4 border rounded-lg cursor-pointer transition-all ${o?._id===_._id?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-primary-300 hover:bg-gray-50"}`,children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(Rm,{size:16,className:"text-gray-400"}),c.jsx("span",{className:"font-semibold text-gray-900",children:_.user?.name||"Unknown User"}),c.jsx(ln,{variant:x(_.status),children:_.status})]}),c.jsx("p",{className:"text-sm text-gray-600",children:_.user?.email}),_.ticketId&&c.jsxs("p",{className:"text-xs text-primary-600 mt-1",children:["Ticket #",_.ticketId]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:mn(new Date(_.createdAt),"MMM dd, yyyy HH:mm")})]}),c.jsx(Om,{className:"text-gray-400",size:18})]})},_._id))})})]}),c.jsx("div",{className:"lg:col-span-1",children:c.jsx(Nt,{children:a&&o?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),c.jsx("p",{className:"text-gray-600",children:"Loading messages..."})]}):o?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"border-b pb-3",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Conversation Details"}),c.jsxs("div",{className:"text-sm text-gray-600 space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Rm,{size:16,className:"text-gray-400"}),c.jsxs("span",{children:[c.jsx("strong",{children:"User:"})," ",o.user?.name||"Unknown"]})]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Email:"})," ",o.user?.email||"N/A"]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Status:"})," ",c.jsx(ln,{variant:x(o.status),children:o.status})]}),o.assignedTo&&c.jsxs("div",{children:[c.jsx("strong",{children:"Assigned to:"})," ",o.assignedTo?.name||o.assignedTo?.email]}),o.ticketId&&c.jsxs("div",{children:[c.jsx("strong",{children:"Ticket:"})," ",c.jsxs("span",{className:"text-primary-600",children:["#",o.ticketId]})]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Started:"})," ",mn(new Date(o.createdAt),"MMM dd, yyyy HH:mm")]})]})]}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsxs("h4",{className:"font-semibold text-gray-900 mb-3",children:["Messages (",u.length,")"]}),u.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(rd,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),c.jsx("p",{className:"text-sm text-gray-500",children:"No messages in this session"})]}):c.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto pr-2",children:u.map((_,M)=>c.jsxs("div",{className:`p-3 rounded-lg ${_.sender==="user"?"bg-primary-50 border border-primary-200":_.sender==="technician"?"bg-blue-50 border border-blue-200":"bg-gray-50 border border-gray-200"}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:`text-xs font-semibold ${_.sender==="user"?"text-primary-700":_.sender==="technician"?"text-blue-700":"text-gray-700"}`,children:_.sender==="user"?" User":_.sender==="technician"?" Technician":" Bot"}),c.jsx("span",{className:"text-xs text-gray-500",children:mn(new Date(_.createdAt||new Date),"MMM dd, HH:mm")})]}),c.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:_.content}),_.attachments&&_.attachments.length>0&&c.jsx("div",{className:"mt-2 space-y-1",children:_.attachments.map((T,A)=>c.jsxs("a",{href:`/api/uploads/${T.path}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary-600 hover:underline flex items-center gap-1",children:[" ",T.filename]},A))})]},_._id||M))})]})]}):c.jsxs("div",{className:"text-center py-12",children:[c.jsx(rd,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Select a session to view messages"})]})})})]})]})})},Mge=()=>{const[t,e]=L.useState([]),[n,r]=L.useState(!1),[i,a]=L.useState(!1),[s,o]=L.useState(!1),[l,u]=L.useState(null),[f,h]=L.useState(null),[m,y]=L.useState(!1),[w,b]=L.useState(!1);L.useEffect(()=>{x()},[]);const x=async()=>{r(!0);try{const V=await nr.listBackups();e(V.backups||[])}catch(V){de.error(V.message||"Failed to load backups")}finally{r(!1)}},_=async()=>{a(!0);try{const V=await nr.createBackup();de.success("Backup created successfully!"),await x()}catch(V){de.error(V.message||"Failed to create backup")}finally{a(!1)}},M=async V=>{try{await nr.downloadBackup(V),de.success("Backup downloaded successfully!")}catch(W){de.error(W.message||"Failed to download backup")}},T=async V=>{if(window.confirm(`Are you sure you want to delete backup "${V}"?`))try{await nr.deleteBackup(V),de.success("Backup deleted successfully!"),await x()}catch(W){de.error(W.message||"Failed to delete backup")}},A=async V=>{const W=m?`WARNING: This will DELETE all existing data and restore from "${V}". Are you absolutely sure?`:`Restore database from "${V}"? This will add data without clearing existing records.`;if(window.confirm(W)){u(V);try{await nr.restoreBackup(V,m),de.success("Database restored successfully!"),u(null),y(!1)}catch(G){de.error(G.message||"Failed to restore backup"),u(null)}}},R=V=>{const W=V.target.files?.[0];W?(console.log("File selected:",W.name,W.type,W.size),N(W)):console.log("No file selected")},N=V=>{if(!V)return;if(!(V.type==="application/json"||V.type==="text/json"||V.name.toLowerCase().endsWith(".json"))){de.error("Please select a JSON backup file (.json)");return}h(V),de.success(`File selected: ${V.name}`)},O=V=>{V.preventDefault(),V.stopPropagation(),b(!0)},k=V=>{V.preventDefault(),V.stopPropagation(),b(!1)},C=V=>{V.preventDefault(),V.stopPropagation(),b(!1);const W=V.dataTransfer.files[0];W&&N(W)},I=async()=>{if(!f){de.error("Please select a backup file");return}const V=m?"WARNING: This will DELETE all existing data and restore from uploaded file. Are you absolutely sure?":"Restore database from uploaded file? This will add data without clearing existing records.";if(window.confirm(V)){o(!0);try{const W=await nr.uploadBackup(f,m);de.success(W.message||"Database restored from uploaded file!"),h(null),y(!1);const G=document.getElementById("backup-file-input");G&&(G.value=""),await x()}catch(W){console.error("Upload restore error:",W),de.error(W.message||"Failed to restore from uploaded file")}finally{o(!1)}}},F=V=>{if(V===0)return"0 Bytes";const W=1024,G=["Bytes","KB","MB","GB"],J=Math.floor(Math.log(V)/Math.log(W));return Math.round(V/Math.pow(W,J)*100)/100+" "+G[J]};return c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{children:[c.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(av,{className:"w-8 h-8"}),"Database Backup & Restore"]}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Create backups of your database and restore from previous backups"})]})}),c.jsx(Nt,{children:c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Create New Backup"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create a complete backup of all database collections. This includes users, tickets, organizations, and all other data."}),c.jsx(Ye,{onClick:_,disabled:i,className:"bg-blue-600 hover:bg-blue-700",children:i?c.jsxs(c.Fragment,{children:[c.jsx(Df,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating Backup..."]}):c.jsxs(c.Fragment,{children:[c.jsx(av,{className:"w-4 h-4 mr-2"}),"Create Backup"]})})]})}),c.jsx(Nt,{children:c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Upload & Restore Backup"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Upload a backup file (JSON format) to restore your database."}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Backup File"}),c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs("label",{className:"flex-1 cursor-pointer",children:[c.jsx("input",{id:"backup-file-input",type:"file",accept:".json,application/json,text/json",onChange:R,className:"hidden"}),c.jsx("div",{className:`flex items-center justify-center px-6 py-4 border-2 border-dashed rounded-xl transition-all duration-300 ${w?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-500"} bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm hover:bg-white/80 dark:hover:bg-gray-800/80`,onDragOver:O,onDragLeave:k,onDrop:C,children:c.jsxs("div",{className:"text-center",children:[c.jsx(Tl,{className:`mx-auto h-8 w-8 mb-2 transition-colors ${w?"text-blue-500":"text-gray-400 dark:text-gray-500"}`}),c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:f?f.name:"Click to upload or drag and drop"}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"JSON files only"}),f&&c.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1 font-medium",children:F(f.size)})]})})]})})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"clear-existing",checked:m,onChange:V=>y(V.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("label",{htmlFor:"clear-existing",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Clear existing data before restore (WARNING: This will delete all current data!)"})]}),c.jsx(Ye,{onClick:I,disabled:!f||s,className:"bg-green-600 hover:bg-green-700",children:s?c.jsxs(c.Fragment,{children:[c.jsx(Df,{className:"w-4 h-4 mr-2 animate-spin"}),"Restoring..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Tl,{className:"w-4 h-4 mr-2"}),"Upload & Restore"]})})]})]})}),c.jsx(Nt,{children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Existing Backups"}),c.jsxs(Ye,{onClick:x,disabled:n,variant:"outline",size:"sm",children:[c.jsx(Df,{className:`w-4 h-4 mr-2 ${n?"animate-spin":""}`}),"Refresh"]})]}),n?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Df,{className:"w-8 h-8 animate-spin mx-auto text-gray-400"}),c.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Loading backups..."})]}):t.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(av,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No backups found. Create your first backup above."})]}):c.jsx("div",{className:"space-y-4",children:t.map(V=>c.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(av,{className:"w-5 h-5 text-blue-600"}),c.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:V.name})]}),c.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[c.jsxs("p",{className:"flex items-center gap-2",children:[c.jsx(Ml,{className:"w-4 h-4"}),Wme(new Date(V.timestamp))," ago"]}),c.jsxs("p",{children:["Size: ",F(V.size||0)]}),c.jsxs("p",{children:["Collections: ",V.collections?.length||0," (",Object.values(V.collectionCounts||{}).reduce((W,G)=>W+G,0)," records)"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ye,{onClick:()=>M(V.name),size:"sm",variant:"outline",title:"Download backup",children:c.jsx(sh,{className:"w-4 h-4"})}),c.jsx(Ye,{onClick:()=>A(V.name),size:"sm",variant:"outline",disabled:l===V.name,className:"bg-green-50 hover:bg-green-100 text-green-700 border-green-300",title:"Restore from this backup",children:l===V.name?c.jsx(Df,{className:"w-4 h-4 animate-spin"}):c.jsx(Tl,{className:"w-4 h-4"})}),c.jsx(Ye,{onClick:()=>T(V.name),size:"sm",variant:"outline",className:"bg-red-50 hover:bg-red-100 text-red-700 border-red-300",title:"Delete backup",children:c.jsx(go,{className:"w-4 h-4"})})]})]})},V.name))})]})}),c.jsx(Nt,{className:"border-yellow-200 bg-yellow-50 dark:bg-yellow-900/20 dark:border-yellow-800",children:c.jsx("div",{className:"p-6",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(eP,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-yellow-900 dark:text-yellow-200 mb-2",children:"Important Notes"}),c.jsxs("ul",{className:"text-sm text-yellow-800 dark:text-yellow-300 space-y-1 list-disc list-inside",children:[c.jsx("li",{children:"Backups include all database collections (users, tickets, organizations, etc.)"}),c.jsx("li",{children:'Restoring with "Clear existing data" will DELETE all current data before restoring'}),c.jsx("li",{children:"Always create a backup before performing a restore operation"}),c.jsx("li",{children:"Backup files are stored on the server in the backups directory"}),c.jsx("li",{children:"Download backups regularly for off-site storage"})]})]})]})})})]})})},Tge=()=>{const{hasAccess:t}=X0(),e=ni();if(!t("DOMAIN_RULES"))return c.jsx(Nn,{children:c.jsxs(Nt,{className:"p-8 text-center",children:[c.jsx(Vc,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Domain Rules Requires Pro"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Upgrade to Pro to enable domain whitelist and blacklist features for email filtering."}),c.jsx(Ye,{onClick:()=>e("/upgrade"),children:"Upgrade to Pro"})]})});const[n,r]=L.useState({enabled:!1,whitelist:[],blacklist:[]}),[i,a]=L.useState(""),[s,o]=L.useState(""),[l,u]=L.useState(!1);L.useEffect(()=>{f()},[]);const f=async()=>{try{const _=await nr.getEmailSettings();_.domainRules&&r({enabled:_.domainRules.enabled??!1,whitelist:_.domainRules.whitelist||[],blacklist:_.domainRules.blacklist||[]})}catch{de.error("Failed to load domain rules")}},h=_=>_.trim().replace(/^@/,"").toLowerCase(),m=()=>{const _=h(i||"");if(!_){de.error("Please enter a valid domain");return}if(n.whitelist.includes(_)){de.error("Domain already in whitelist");return}r({...n,whitelist:[...n.whitelist,_]}),a("")},y=(_,M)=>{M&&(M.preventDefault(),M.stopPropagation()),r({...n,whitelist:n.whitelist.filter(T=>T!==_)}),de.success(`Removed ${_} from whitelist`)},w=()=>{const _=h(s||"");if(!_){de.error("Please enter a valid domain");return}if(n.blacklist.includes(_)){de.error("Domain already in blacklist");return}r({...n,blacklist:[...n.blacklist,_]}),o("")},b=(_,M)=>{M&&(M.preventDefault(),M.stopPropagation()),r({...n,blacklist:n.blacklist.filter(T=>T!==_)}),de.success(`Removed ${_} from blacklist`)},x=async _=>{_.preventDefault(),u(!0);try{await nr.updateEmailSettings({domainRules:n}),de.success("Domain rules saved successfully")}catch(M){de.error(M.message||"Failed to save domain rules")}finally{u(!1)}};return c.jsx(Nn,{children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:c.jsx(nl,{size:20,className:"text-primary-600"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Domain Rules"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Control which external domains can create tickets via email."})]})]}),c.jsx(Nt,{title:"Domain Rules (Incoming Email)",children:c.jsxs("form",{onSubmit:x,className:"space-y-6",children:[c.jsx(sn,{label:"Domain Filtering",value:n.enabled?"enabled":"disabled",onChange:_=>r({...n,enabled:_.target.value==="enabled"}),options:[{value:"enabled",label:"Enabled (reject non-whitelisted & blacklisted)"},{value:"disabled",label:"Disabled"}]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Domain Whitelist"}),c.jsxs("div",{className:"flex gap-2 mb-3",children:[c.jsx(st,{placeholder:"example.com",value:i,onChange:_=>a(_.target.value),onKeyPress:_=>{_.key==="Enter"&&(_.preventDefault(),m())},className:"flex-1"}),c.jsxs(Ye,{type:"button",variant:"outline",onClick:m,disabled:!i.trim(),children:[c.jsx(gs,{size:16,className:"mr-1"}),"Add"]})]}),n.whitelist.length>0?c.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:n.whitelist.map(_=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:[_,c.jsx("button",{type:"button",onClick:M=>y(_,M),className:"ml-1 hover:bg-green-200 rounded-full p-0.5 transition-colors cursor-pointer",title:"Remove domain",children:c.jsx(po,{size:14})})]},_))}):c.jsx("p",{className:"text-sm text-gray-500 italic p-3 bg-gray-50 rounded-lg",children:"No whitelisted domains. Add domains to allow only specific senders."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Domain Blacklist"}),c.jsxs("div",{className:"flex gap-2 mb-3",children:[c.jsx(st,{placeholder:"spam.com",value:s,onChange:_=>o(_.target.value),onKeyPress:_=>{_.key==="Enter"&&(_.preventDefault(),w())},className:"flex-1"}),c.jsxs(Ye,{type:"button",variant:"outline",onClick:w,disabled:!s.trim(),children:[c.jsx(gs,{size:16,className:"mr-1"}),"Add"]})]}),n.blacklist.length>0?c.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:n.blacklist.map(_=>c.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium",children:[_,c.jsx("button",{type:"button",onClick:M=>b(_,M),className:"ml-1 hover:bg-red-200 rounded-full p-0.5 transition-colors cursor-pointer",title:"Remove domain",children:c.jsx(po,{size:14})})]},_))}):c.jsx("p",{className:"text-sm text-gray-500 italic p-3 bg-gray-50 rounded-lg",children:"No blacklisted domains. Add domains to block specific senders."})]}),c.jsxs("div",{className:"text-xs text-gray-600 bg-gray-50 p-3 rounded-lg",children:[c.jsx("p",{className:"font-medium mb-2",children:"Behavior:"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[c.jsx("li",{children:"Blacklisted domains are always blocked."}),c.jsx("li",{children:"If whitelist has entries, only those domains are allowed."}),c.jsx("li",{children:"Rejection emails are sent to blocked senders."})]})]}),c.jsx("div",{className:"flex space-x-3 pt-2",children:c.jsx(Ye,{type:"submit",disabled:l,children:l?"Saving...":"Save Domain Rules"})})]})})]})})},Age=()=>{const{user:t}=Sr(),e=t?.role==="admin"||t?.role==="technician",[n,r]=L.useState("daily"),[i,a]=L.useState(""),[s,o]=L.useState(""),[l,u]=L.useState([]),[f,h]=L.useState([]),[m,y]=L.useState(!1),[w,b]=L.useState("all"),[x,_]=L.useState("all"),[M,T]=L.useState("all");L.useEffect(()=>{t?.role==="admin"&&A()},[t]),L.useEffect(()=>{N()},[n,w,x,M,i,s]);const A=async()=>{try{const W=await ha.getAll();h(W)}catch(W){console.error("Failed to load organizations",W)}},R=()=>{const W=new Date;let G,J;switch(n){case"daily":G=C2(W),J=Lw(W);break;case"weekly":G=Epe(W,{weekStartsOn:1}),J=Fpe(W,{weekStartsOn:1});break;case"monthly":G=Upe(W),J=sG(W);break;case"custom":if(i&&s)G=C2(new Date(i)),J=Lw(new Date(s));else return null;break;default:G=C2(W),J=Lw(W)}return{from:G,to:J}},N=async()=>{try{y(!0);const W=R();if(n==="custom"&&!W){u([]);return}const G={status:w!=="all"?w:void 0,priority:x!=="all"?x:void 0,organization:e&&M!=="all"?M:void 0},J=await Di.getAll(G);if(W){const ee=J.filter(ae=>{const $=new Date(ae.createdAt);return $>=W.from&&$<=W.to});u(ee)}else u(J)}catch(W){de.error("Failed to load report data"),console.error(W),u([])}finally{y(!1)}},O=()=>{const W=["Ticket ID","Title","Category","Priority","Status","Assignee","Created","Due Date","Organization"],G=l.map(B=>[B.ticketId,B.title,B.category,B.priority,B.status,B.assignee?.name||"Unassigned",mn(new Date(B.createdAt),"yyyy-MM-dd HH:mm"),B.dueDate?mn(new Date(B.dueDate),"yyyy-MM-dd HH:mm"):"N/A",B.organization?.name||"N/A"]),J=[W.join(","),...G.map(B=>B.map(Y=>`"${Y}"`).join(","))].join(`
`),ee=new Blob([J],{type:"text/csv;charset=utf-8;"}),ae=document.createElement("a"),$=URL.createObjectURL(ee);ae.setAttribute("href",$),ae.setAttribute("download",`tickets-report-${mn(new Date,"yyyy-MM-dd")}.csv`),ae.style.visibility="hidden",document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),de.success("CSV report downloaded successfully!")},k=async()=>{try{const W=l.map(ee=>`
        <tr>
          <td>#${ee.ticketId}</td>
          <td>${ee.title}</td>
          <td>${ee.category}</td>
          <td>${ee.priority}</td>
          <td>${ee.status}</td>
          <td>${ee.assignee?.name||"Unassigned"}</td>
          <td>${mn(new Date(ee.createdAt),"MMM dd, yyyy HH:mm")}</td>
          <td>${ee.dueDate?mn(new Date(ee.dueDate),"MMM dd, yyyy HH:mm"):"N/A"}</td>
        </tr>
      `).join(""),G=`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Tickets Report</title>
            <style>
              body { font-family: Arial, sans-serif; margin: 20px; }
              table { width: 100%; border-collapse: collapse; }
              th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
              th { background-color: #f2f2f2; }
            </style>
          </head>
          <body>
            <h1>Tickets Report</h1>
            <p>Generated: ${mn(new Date,"MMMM dd, yyyy HH:mm")}</p>
            <p>Report Type: ${n.charAt(0).toUpperCase()+n.slice(1)}</p>
            <table>
              <thead>
                <tr>
                  <th>Ticket ID</th>
                  <th>Title</th>
                  <th>Category</th>
                  <th>Priority</th>
                  <th>Status</th>
                  <th>Assignee</th>
                  <th>Created</th>
                  <th>Due Date</th>
                </tr>
              </thead>
              <tbody>
                ${W}
              </tbody>
            </table>
          </body>
        </html>
      `,J=window.open("","_blank");J.document.write(G),J.document.close(),J.print(),de.success("PDF report opened for printing!")}catch(W){de.error("Failed to generate PDF report"),console.error(W)}},C=W=>W==="urgent"||W==="high"?"danger":W==="medium"?"warning":"info",I=W=>W==="resolved"?"success":W==="in-progress"?"info":"warning",F=R(),V=F?`${mn(F.from,"MMM dd, yyyy")} - ${mn(F.to,"MMM dd, yyyy")}`:"Select date range";return c.jsx(Nn,{children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 via-primary-700 to-gray-900 bg-clip-text text-transparent mb-1",children:"Reports"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Generate and download ticket reports"})]})}),c.jsxs(Nt,{className:"animate-slide-down",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Report Period"}),c.jsx(sn,{value:n,onChange:W=>r(W.target.value),options:[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"custom",label:"Custom Date Range"}]})]}),n==="custom"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"From Date"}),c.jsx(st,{type:"date",value:i,onChange:W=>{a(W.target.value),W.target.value&&s&&new Date(W.target.value)>new Date(s)&&de.error("From date cannot be after To date")}})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"To Date"}),c.jsx(st,{type:"date",value:s,onChange:W=>{o(W.target.value),i&&W.target.value&&new Date(i)>new Date(W.target.value)&&de.error("To date cannot be before From date")},min:i})]})]}),t?.role==="admin"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Organization"}),c.jsx(sn,{value:M,onChange:W=>T(W.target.value),options:[{value:"all",label:"All Organizations"},...f.map(W=>({value:W._id||W.id,label:W.name}))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Status"}),c.jsx(sn,{value:w,onChange:W=>b(W.target.value),options:[{value:"all",label:"All Statuses"},{value:"open",label:"Open"},{value:"in-progress",label:"In Progress"},{value:"resolved",label:"Resolved"}]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Priority"}),c.jsx(sn,{value:x,onChange:W=>_(W.target.value),options:[{value:"all",label:"All Priorities"},{value:"urgent",label:"Urgent"},{value:"high",label:"High"},{value:"medium",label:"Medium"},{value:"low",label:"Low"}]})]})]}),F&&c.jsxs("div",{className:"mt-4 p-3 bg-primary-50 rounded-lg border border-primary-200",children:[c.jsxs("p",{className:"text-sm text-gray-700",children:[c.jsx("strong",{children:"Date Range:"})," ",V]}),c.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[c.jsx("strong",{children:"Total Tickets:"})," ",l.length]})]}),c.jsxs("div",{className:"mt-4 flex gap-3",children:[c.jsxs(Ye,{transparent:!0,onClick:k,disabled:m||l.length===0,className:"flex items-center gap-2",children:[c.jsx(a1,{size:18}),"Export PDF"]}),c.jsxs(Ye,{transparent:!0,onClick:O,disabled:m||l.length===0,className:"flex items-center gap-2",children:[c.jsx(sh,{size:18}),"Export CSV"]})]})]}),c.jsx(Nt,{className:"animate-slide-down",style:{animationDelay:"0.1s"},children:c.jsx("div",{className:"overflow-x-auto",children:m?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"inline-block animate-spin text-primary-600 text-4xl mb-4",children:""}),c.jsx("p",{className:"text-gray-600",children:"Loading report data..."})]}):l.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(a1,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),c.jsx("p",{className:"text-gray-600",children:"No tickets found for the selected criteria"})]}):c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"ID"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Title"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Category"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Priority"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Assignee"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Due"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((W,G)=>{const J=W.dueDate&&new Date(W.dueDate)<new Date&&(W.status==="open"||W.status==="in-progress");return c.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-primary-50/50 hover:to-transparent transition-all duration-300 border-l-4 border-transparent hover:border-primary-500 hover:shadow-sm",style:{animationDelay:`${G*.05}s`},children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["#",W.ticketId]})}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:W.title})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:"text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded-md",children:W.category})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(ln,{variant:C(W.priority),children:W.priority})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(ln,{variant:I(W.status),children:W.status})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:W.assignee?.name||c.jsx("span",{className:"text-gray-400",children:"Unassigned"})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:[c.jsx("div",{className:"font-medium",children:mn(new Date(W.createdAt),"MMM dd, yyyy")}),c.jsx("div",{className:"text-xs text-gray-500",children:mn(new Date(W.createdAt),"HH:mm")})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:W.dueDate?c.jsxs("div",{children:[c.jsxs("div",{className:J?"text-red-600 font-medium":"text-gray-700",children:[mn(new Date(W.dueDate),"MMM dd, yyyy"),J&&c.jsx("span",{className:"ml-1 text-red-600",children:""})]}),c.jsx("div",{className:`text-xs ${J?"text-red-500":"text-gray-500"}`,children:mn(new Date(W.dueDate),"HH:mm")})]}):c.jsx("span",{className:"text-gray-400",children:""})})]},W._id)})})]})})})]})})},ZR=L.createContext({});function JR(t){const e=L.useRef(null);return e.current===null&&(e.current=t()),e.current}const QR=typeof window<"u",fG=QR?L.useLayoutEffect:L.useEffect,dS=L.createContext(null);function ek(t,e){t.indexOf(e)===-1&&t.push(e)}function tk(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const qc=(t,e,n)=>n>e?e:n<t?t:n;let nk=()=>{};const Xc={},hG=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function pG(t){return typeof t=="object"&&t!==null}const mG=t=>/^0[^.\s]+$/u.test(t);function rk(t){let e;return()=>(e===void 0&&(e=t()),e)}const ho=t=>t,Ege=(t,e)=>n=>e(t(n)),ix=(...t)=>t.reduce(Ege),v0=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class ik{constructor(){this.subscriptions=[]}add(e){return ek(this.subscriptions,e),()=>tk(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Cl=t=>t*1e3,fo=t=>t/1e3;function gG(t,e){return e?t*(1e3/e):0}const yG=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Cge=1e-7,Pge=12;function Nge(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=yG(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>Cge&&++o<Pge);return s}function ax(t,e,n,r){if(t===e&&n===r)return ho;const i=a=>Nge(a,0,1,t,n);return a=>a===0||a===1?a:yG(i(a),e,r)}const vG=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,xG=t=>e=>1-t(1-e),bG=ax(.33,1.53,.69,.99),ak=xG(bG),wG=vG(ak),_G=t=>(t*=2)<1?.5*ak(t):.5*(2-Math.pow(2,-10*(t-1))),sk=t=>1-Math.sin(Math.acos(t)),SG=xG(sk),MG=vG(sk),Oge=ax(.42,0,1,1),Rge=ax(0,0,.58,1),TG=ax(.42,0,.58,1),kge=t=>Array.isArray(t)&&typeof t[0]!="number",AG=t=>Array.isArray(t)&&typeof t[0]=="number",jge={linear:ho,easeIn:Oge,easeInOut:TG,easeOut:Rge,circIn:sk,circInOut:MG,circOut:SG,backIn:ak,backInOut:wG,backOut:bG,anticipate:_G},Ige=t=>typeof t=="string",F5=t=>{if(AG(t)){nk(t.length===4);const[e,n,r,i]=t;return ax(e,n,r,i)}else if(Ige(t))return jge[t];return t},Ob=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Dge(t,e){let n=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(f){s.has(f)&&(u.schedule(f),t()),f(o)}const u={schedule:(f,h=!1,m=!1)=>{const w=m&&i?n:r;return h&&s.add(f),w.has(f)||w.add(f),f},cancel:f=>{r.delete(f),s.delete(f)},process:f=>{if(o=f,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,a&&(a=!1,u.process(f))}};return u}const Lge=40;function EG(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=Ob.reduce((T,A)=>(T[A]=Dge(a),T),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:f,update:h,preRender:m,render:y,postRender:w}=s,b=()=>{const T=Xc.useManualTiming?i.timestamp:performance.now();n=!1,Xc.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,Lge),1)),i.timestamp=T,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),f.process(i),h.process(i),m.process(i),y.process(i),w.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(b))},x=()=>{n=!0,r=!0,i.isProcessing||t(b)};return{schedule:Ob.reduce((T,A)=>{const R=s[A];return T[A]=(N,O=!1,k=!1)=>(n||x(),R.schedule(N,O,k)),T},{}),cancel:T=>{for(let A=0;A<Ob.length;A++)s[Ob[A]].cancel(T)},state:i,steps:s}}const{schedule:Br,cancel:ud,state:fa,steps:O2}=EG(typeof requestAnimationFrame<"u"?requestAnimationFrame:ho,!0);let Uw;function Uge(){Uw=void 0}const ms={now:()=>(Uw===void 0&&ms.set(fa.isProcessing||Xc.useManualTiming?fa.timestamp:performance.now()),Uw),set:t=>{Uw=t,queueMicrotask(Uge)}},CG=t=>e=>typeof e=="string"&&e.startsWith(t),ok=CG("--"),Fge=CG("var(--"),lk=t=>Fge(t)?zge.test(t.split("/*")[0].trim()):!1,zge=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Tg={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},x0={...Tg,transform:t=>qc(0,1,t)},Rb={...Tg,default:1},wv=t=>Math.round(t*1e5)/1e5,ck=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Bge(t){return t==null}const Vge=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,uk=(t,e)=>n=>!!(typeof n=="string"&&Vge.test(n)&&n.startsWith(t)||e&&!Bge(n)&&Object.prototype.hasOwnProperty.call(n,e)),PG=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(ck);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},Hge=t=>qc(0,255,t),R2={...Tg,transform:t=>Math.round(Hge(t))},Hf={test:uk("rgb","red"),parse:PG("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+R2.transform(t)+", "+R2.transform(e)+", "+R2.transform(n)+", "+wv(x0.transform(r))+")"};function Wge(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const SN={test:uk("#"),parse:Wge,transform:Hf.transform},sx=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),$u=sx("deg"),Pl=sx("%"),on=sx("px"),Gge=sx("vh"),$ge=sx("vw"),z5={...Pl,parse:t=>Pl.parse(t)/100,transform:t=>Pl.transform(t*100)},hm={test:uk("hsl","hue"),parse:PG("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Pl.transform(wv(e))+", "+Pl.transform(wv(n))+", "+wv(x0.transform(r))+")"},bi={test:t=>Hf.test(t)||SN.test(t)||hm.test(t),parse:t=>Hf.test(t)?Hf.parse(t):hm.test(t)?hm.parse(t):SN.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Hf.transform(t):hm.transform(t),getAnimatableNone:t=>{const e=bi.parse(t);return e.alpha=0,bi.transform(e)}},qge=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Xge(t){return isNaN(t)&&typeof t=="string"&&(t.match(ck)?.length||0)+(t.match(qge)?.length||0)>0}const NG="number",OG="color",Yge="var",Kge="var(",B5="${}",Zge=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function b0(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(Zge,l=>(bi.test(l)?(r.color.push(a),i.push(OG),n.push(bi.parse(l))):l.startsWith(Kge)?(r.var.push(a),i.push(Yge),n.push(l)):(r.number.push(a),i.push(NG),n.push(parseFloat(l))),++a,B5)).split(B5);return{values:n,split:o,indexes:r,types:i}}function RG(t){return b0(t).values}function kG(t){const{split:e,types:n}=b0(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===NG?a+=wv(i[s]):o===OG?a+=bi.transform(i[s]):a+=i[s]}return a}}const Jge=t=>typeof t=="number"?0:bi.test(t)?bi.getAnimatableNone(t):t;function Qge(t){const e=RG(t);return kG(t)(e.map(Jge))}const dd={test:Xge,parse:RG,createTransformer:kG,getAnimatableNone:Qge};function k2(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function eye({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;i=k2(l,o,t+1/3),a=k2(l,o,t),s=k2(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function c_(t,e){return n=>n>0?e:t}const Gr=(t,e,n)=>t+(e-t)*n,j2=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},tye=[SN,Hf,hm],nye=t=>tye.find(e=>e.test(t));function V5(t){const e=nye(t);if(!e)return!1;let n=e.parse(t);return e===hm&&(n=eye(n)),n}const H5=(t,e)=>{const n=V5(t),r=V5(e);if(!n||!r)return c_(t,e);const i={...n};return a=>(i.red=j2(n.red,r.red,a),i.green=j2(n.green,r.green,a),i.blue=j2(n.blue,r.blue,a),i.alpha=Gr(n.alpha,r.alpha,a),Hf.transform(i))},MN=new Set(["none","hidden"]);function rye(t,e){return MN.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function iye(t,e){return n=>Gr(t,e,n)}function dk(t){return typeof t=="number"?iye:typeof t=="string"?lk(t)?c_:bi.test(t)?H5:oye:Array.isArray(t)?jG:typeof t=="object"?bi.test(t)?H5:aye:c_}function jG(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>dk(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function aye(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=dk(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function sye(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;n[i]=o,r[a]++}return n}const oye=(t,e)=>{const n=dd.createTransformer(e),r=b0(t),i=b0(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?MN.has(t)&&!i.values.length||MN.has(e)&&!r.values.length?rye(t,e):ix(jG(sye(r,i),i.values),n):c_(t,e)};function IG(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Gr(t,e,n):dk(t)(t,e)}const lye=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Br.update(e,n),stop:()=>ud(e),now:()=>fa.isProcessing?fa.timestamp:ms.now()}},DG=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},u_=2e4;function fk(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<u_;)e+=n,r=t.next(e);return e>=u_?1/0:e}function cye(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(fk(r),u_);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:fo(i)}}const uye=5;function LG(t,e,n){const r=Math.max(e-uye,0);return gG(n-t(r),e-r)}const Jr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},I2=.001;function dye({duration:t=Jr.duration,bounce:e=Jr.bounce,velocity:n=Jr.velocity,mass:r=Jr.mass}){let i,a,s=1-e;s=qc(Jr.minDamping,Jr.maxDamping,s),t=qc(Jr.minDuration,Jr.maxDuration,fo(t)),s<1?(i=u=>{const f=u*s,h=f*t,m=f-n,y=TN(u,s),w=Math.exp(-h);return I2-m/y*w},a=u=>{const h=u*s*t,m=h*n+n,y=Math.pow(s,2)*Math.pow(u,2)*t,w=Math.exp(-h),b=TN(Math.pow(u,2),s);return(-i(u)+I2>0?-1:1)*((m-y)*w)/b}):(i=u=>{const f=Math.exp(-u*t),h=(u-n)*t+1;return-I2+f*h},a=u=>{const f=Math.exp(-u*t),h=(n-u)*(t*t);return f*h});const o=5/t,l=hye(i,a,o);if(t=Cl(t),isNaN(l))return{stiffness:Jr.stiffness,damping:Jr.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const fye=12;function hye(t,e,n){let r=n;for(let i=1;i<fye;i++)r=r-t(r)/e(r);return r}function TN(t,e){return t*Math.sqrt(1-e*e)}const pye=["duration","bounce"],mye=["stiffness","damping","mass"];function W5(t,e){return e.some(n=>t[n]!==void 0)}function gye(t){let e={velocity:Jr.velocity,stiffness:Jr.stiffness,damping:Jr.damping,mass:Jr.mass,isResolvedFromDuration:!1,...t};if(!W5(t,mye)&&W5(t,pye))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*qc(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Jr.mass,stiffness:i,damping:a}}else{const n=dye(t);e={...e,...n,mass:Jr.mass},e.isResolvedFromDuration=!0}return e}function d_(t=Jr.visualDuration,e=Jr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:f,duration:h,velocity:m,isResolvedFromDuration:y}=gye({...n,velocity:-fo(n.velocity||0)}),w=m||0,b=u/(2*Math.sqrt(l*f)),x=s-a,_=fo(Math.sqrt(l/f)),M=Math.abs(x)<5;r||(r=M?Jr.restSpeed.granular:Jr.restSpeed.default),i||(i=M?Jr.restDelta.granular:Jr.restDelta.default);let T;if(b<1){const R=TN(_,b);T=N=>{const O=Math.exp(-b*_*N);return s-O*((w+b*_*x)/R*Math.sin(R*N)+x*Math.cos(R*N))}}else if(b===1)T=R=>s-Math.exp(-_*R)*(x+(w+_*x)*R);else{const R=_*Math.sqrt(b*b-1);T=N=>{const O=Math.exp(-b*_*N),k=Math.min(R*N,300);return s-O*((w+b*_*x)*Math.sinh(k)+R*x*Math.cosh(k))/R}}const A={calculatedDuration:y&&h||null,next:R=>{const N=T(R);if(y)o.done=R>=h;else{let O=R===0?w:0;b<1&&(O=R===0?Cl(w):LG(T,R,N));const k=Math.abs(O)<=r,C=Math.abs(s-N)<=i;o.done=k&&C}return o.value=o.done?s:N,o},toString:()=>{const R=Math.min(fk(A),u_),N=DG(O=>A.next(R*O).value,R,30);return R+"ms "+N},toTransition:()=>{}};return A}d_.applyToOptions=t=>{const e=cye(t,100,d_);return t.ease=e.ease,t.duration=Cl(e.duration),t.type="keyframes",t};function AN({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:f}){const h=t[0],m={done:!1,value:h},y=k=>o!==void 0&&k<o||l!==void 0&&k>l,w=k=>o===void 0?l:l===void 0||Math.abs(o-k)<Math.abs(l-k)?o:l;let b=n*e;const x=h+b,_=s===void 0?x:s(x);_!==x&&(b=_-h);const M=k=>-b*Math.exp(-k/r),T=k=>_+M(k),A=k=>{const C=M(k),I=T(k);m.done=Math.abs(C)<=u,m.value=m.done?_:I};let R,N;const O=k=>{y(m.value)&&(R=k,N=d_({keyframes:[m.value,w(m.value)],velocity:LG(T,k,m.value),damping:i,stiffness:a,restDelta:u,restSpeed:f}))};return O(0),{calculatedDuration:null,next:k=>{let C=!1;return!N&&R===void 0&&(C=!0,A(k),O(k)),R!==void 0&&k>=R?N.next(k-R):(!C&&A(k),m)}}}function yye(t,e,n){const r=[],i=n||Xc.mix||IG,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const l=Array.isArray(e)?e[s]||ho:e;o=ix(l,o)}r.push(o)}return r}function vye(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(nk(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=yye(e,r,i),l=o.length,u=f=>{if(s&&f<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(f<t[h+1]);h++);const m=v0(t[h],t[h+1],f);return o[h](m)};return n?f=>u(qc(t[0],t[a-1],f)):u}function xye(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=v0(0,e,r);t.push(Gr(n,1,i))}}function bye(t){const e=[0];return xye(e,t.length-1),e}function wye(t,e){return t.map(n=>n*e)}function _ye(t,e){return t.map(()=>e||TG).splice(0,t.length-1)}function _v({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=kge(r)?r.map(F5):F5(r),a={done:!1,value:e[0]},s=wye(n&&n.length===e.length?n:bye(e),t),o=vye(s,e,{ease:Array.isArray(i)?i:_ye(e,i)});return{calculatedDuration:t,next:l=>(a.value=o(l),a.done=l>=t,a)}}const Sye=t=>t!==null;function hk(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(Sye),o=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const Mye={decay:AN,inertia:AN,tween:_v,keyframes:_v,spring:d_};function UG(t){typeof t.type=="string"&&(t.type=Mye[t.type])}class pk{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Tye=t=>t/100;class mk extends pk{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==ms.now()&&this.tick(ms.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;UG(e);const{type:n=_v,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const l=n||_v;l!==_v&&typeof o[0]!="number"&&(this.mixKeyframes=ix(Tye,IG(o[0],o[1])),o=[0,100]);const u=l({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=fk(u));const{calculatedDuration:f}=u;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:f,repeat:h,repeatType:m,repeatDelay:y,type:w,onUpdate:b,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const _=this.currentTime-u*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?_<0:_>i;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let T=this.currentTime,A=r;if(h){const k=Math.min(this.currentTime,i)/o;let C=Math.floor(k),I=k%1;!I&&k>=1&&(I=1),I===1&&C--,C=Math.min(C,h+1),!!(C%2)&&(m==="reverse"?(I=1-I,y&&(I-=y/o)):m==="mirror"&&(A=s)),T=qc(0,1,I)*o}const R=M?{done:!1,value:f[0]}:A.next(T);a&&(R.value=a(R.value));let{done:N}=R;!M&&l!==null&&(N=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return O&&w!==AN&&(R.value=hk(f,this.options,x,this.speed)),b&&b(R.value),O&&this.finish(),R}then(e,n){return this.finished.then(e,n)}get duration(){return fo(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+fo(e)}get time(){return fo(this.currentTime)}set time(e){e=Cl(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ms.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=fo(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=lye,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ms.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Aye(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Wf=t=>t*180/Math.PI,EN=t=>{const e=Wf(Math.atan2(t[1],t[0]));return CN(e)},Eye={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:EN,rotateZ:EN,skewX:t=>Wf(Math.atan(t[1])),skewY:t=>Wf(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},CN=t=>(t=t%360,t<0&&(t+=360),t),G5=EN,$5=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),q5=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Cye={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$5,scaleY:q5,scale:t=>($5(t)+q5(t))/2,rotateX:t=>CN(Wf(Math.atan2(t[6],t[5]))),rotateY:t=>CN(Wf(Math.atan2(-t[2],t[0]))),rotateZ:G5,rotate:G5,skewX:t=>Wf(Math.atan(t[4])),skewY:t=>Wf(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function PN(t){return t.includes("scale")?1:0}function NN(t,e){if(!t||t==="none")return PN(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Cye,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Eye,i=o}if(!i)return PN(e);const a=r[e],s=i[1].split(",").map(Nye);return typeof a=="function"?a(s):s[a]}const Pye=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return NN(n,e)};function Nye(t){return parseFloat(t.trim())}const Ag=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Eg=new Set(Ag),X5=t=>t===Tg||t===on,Oye=new Set(["x","y","z"]),Rye=Ag.filter(t=>!Oye.has(t));function kye(t){const e=[];return Rye.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const eh={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>NN(e,"x"),y:(t,{transform:e})=>NN(e,"y")};eh.translateX=eh.x;eh.translateY=eh.y;const th=new Set;let ON=!1,RN=!1,kN=!1;function FG(){if(RN){const t=Array.from(th).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=kye(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{r.getValue(a)?.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}RN=!1,ON=!1,th.forEach(t=>t.complete(kN)),th.clear()}function zG(){th.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(RN=!0)})}function jye(){kN=!0,zG(),FG(),kN=!1}class gk{constructor(e,n,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(th.add(this),ON||(ON=!0,Br.read(zG),Br.resolveKeyframes(FG))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const o=r.readValue(n,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}Aye(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),th.delete(this)}cancel(){this.state==="scheduled"&&(th.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Iye=t=>t.startsWith("--");function Dye(t,e,n){Iye(e)?t.style.setProperty(e,n):t.style[e]=n}const Lye=rk(()=>window.ScrollTimeline!==void 0),Uye={};function Fye(t,e){const n=rk(t);return()=>Uye[e]??n()}const BG=Fye(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cv=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Y5={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cv([0,.65,.55,1]),circOut:cv([.55,0,1,.45]),backIn:cv([.31,.01,.66,-.59]),backOut:cv([.33,1.53,.69,.99])};function VG(t,e){if(t)return typeof t=="function"?BG()?DG(t,e):"ease-out":AG(t)?cv(t):Array.isArray(t)?t.map(n=>VG(n,e)||Y5.easeOut):Y5[t]}function zye(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:l}={},u=void 0){const f={[e]:n};l&&(f.offset=l);const h=VG(o,i);Array.isArray(h)&&(f.easing=h);const m={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),t.animate(f,m)}function HG(t){return typeof t=="function"&&"applyToOptions"in t}function Bye({type:t,...e}){return HG(t)&&BG()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Vye extends pk{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,nk(typeof e.type!="string");const u=Bye(e);this.animation=zye(n,r,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=hk(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(f):Dye(n,r,f),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return fo(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+fo(e)}get time(){return fo(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Cl(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Lye()?(this.animation.timeline=e,ho):n(this)}}const WG={anticipate:_G,backInOut:wG,circInOut:MG};function Hye(t){return t in WG}function Wye(t){typeof t.ease=="string"&&Hye(t.ease)&&(t.ease=WG[t.ease])}const K5=10;class Gye extends Vye{constructor(e){Wye(e),UG(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new mk({...s,autoplay:!1}),l=Cl(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-K5).value,o.sample(l).value,K5),o.stop()}}const Z5=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(dd.test(t)||t==="0")&&!t.startsWith("url("));function $ye(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function qye(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=Z5(i,e),o=Z5(a,e);return!s||!o?!1:$ye(t)||(n==="spring"||HG(n))&&r}function jN(t){t.duration=0,t.type="keyframes"}const Xye=new Set(["opacity","clipPath","filter","transform"]),Yye=rk(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Kye(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return Yye()&&n&&Xye.has(n)&&(n!=="transform"||!u)&&!l&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const Zye=40;class Jye extends pk{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:l,motionValue:u,element:f,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ms.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,name:l,motionValue:u,element:f,...h},y=f?.KeyframeResolver||gk;this.keyframeResolver=new y(o,(w,b,x)=>this.onKeyframesResolved(w,b,m,!x),l,u,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:l,isHandoff:u,onUpdate:f}=r;this.resolvedAt=ms.now(),qye(e,a,s,o)||((Xc.instantAnimations||!l)&&f?.(hk(e,r,n)),e[0]=e[e.length-1],jN(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Zye?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},y=!u&&Kye(m)?new Gye({...m,element:m.motionValue.owner.current}):new mk(m);y.finished.then(()=>this.notifyFinished()).catch(ho),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),jye()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Qye=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function eve(t){const e=Qye.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function GG(t,e,n=1){const[r,i]=eve(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return hG(s)?parseFloat(s):s}return lk(i)?GG(i,e,n+1):i}function yk(t,e){return t?.[e]??t?.default??t}const $G=new Set(["width","height","top","left","right","bottom",...Ag]),tve={test:t=>t==="auto",parse:t=>t},qG=t=>e=>e.test(t),XG=[Tg,on,Pl,$u,$ge,Gge,tve],J5=t=>XG.find(qG(t));function nve(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||mG(t):!0}const rve=new Set(["brightness","contrast","saturate","opacity"]);function ive(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(ck)||[];if(!r)return t;const i=n.replace(r,"");let a=rve.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const ave=/\b([a-z-]*)\(.*?\)/gu,IN={...dd,getAnimatableNone:t=>{const e=t.match(ave);return e?e.map(ive).join(" "):t}},Q5={...Tg,transform:Math.round},sve={rotate:$u,rotateX:$u,rotateY:$u,rotateZ:$u,scale:Rb,scaleX:Rb,scaleY:Rb,scaleZ:Rb,skew:$u,skewX:$u,skewY:$u,distance:on,translateX:on,translateY:on,translateZ:on,x:on,y:on,z:on,perspective:on,transformPerspective:on,opacity:x0,originX:z5,originY:z5,originZ:on},vk={borderWidth:on,borderTopWidth:on,borderRightWidth:on,borderBottomWidth:on,borderLeftWidth:on,borderRadius:on,radius:on,borderTopLeftRadius:on,borderTopRightRadius:on,borderBottomRightRadius:on,borderBottomLeftRadius:on,width:on,maxWidth:on,height:on,maxHeight:on,top:on,right:on,bottom:on,left:on,padding:on,paddingTop:on,paddingRight:on,paddingBottom:on,paddingLeft:on,margin:on,marginTop:on,marginRight:on,marginBottom:on,marginLeft:on,backgroundPositionX:on,backgroundPositionY:on,...sve,zIndex:Q5,fillOpacity:x0,strokeOpacity:x0,numOctaves:Q5},ove={...vk,color:bi,backgroundColor:bi,outlineColor:bi,fill:bi,stroke:bi,borderColor:bi,borderTopColor:bi,borderRightColor:bi,borderBottomColor:bi,borderLeftColor:bi,filter:IN,WebkitFilter:IN},YG=t=>ove[t];function KG(t,e){let n=YG(t);return n!==IN&&(n=dd),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const lve=new Set(["auto","none","0"]);function cve(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!lve.has(a)&&b0(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=KG(n,i)}class uve extends gk{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),lk(u))){const f=GG(u,n.current);f!==void 0&&(e[l]=f),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!$G.has(r)||e.length!==2)return;const[i,a]=e,s=J5(i),o=J5(a);if(s!==o)if(X5(s)&&X5(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else eh[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||nve(e[i]))&&r.push(i);r.length&&cve(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=eh[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=eh[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,l])=>{e.getValue(o).set(l)}),this.resolveNoneKeyframes()}}function dve(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const ZG=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function JG(t){return pG(t)&&"offsetHeight"in t}const ez=30,fve=t=>!isNaN(parseFloat(t));class hve{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=ms.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ms.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=fve(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new ik);const r=this.events[e].add(n);return e==="change"?()=>{r(),Br.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ms.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ez)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ez);return gG(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function sg(t,e){return new hve(t,e)}const{schedule:xk}=EG(queueMicrotask,!1),qo={x:!1,y:!1};function QG(){return qo.x||qo.y}function pve(t){return t==="x"||t==="y"?qo[t]?null:(qo[t]=!0,()=>{qo[t]=!1}):qo.x||qo.y?null:(qo.x=qo.y=!0,()=>{qo.x=qo.y=!1})}function e$(t,e){const n=dve(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function tz(t){return!(t.pointerType==="touch"||QG())}function mve(t,e,n={}){const[r,i,a]=e$(t,n),s=o=>{if(!tz(o))return;const{target:l}=o,u=e(l,o);if(typeof u!="function"||!l)return;const f=h=>{tz(h)&&(u(h),l.removeEventListener("pointerleave",f))};l.addEventListener("pointerleave",f,i)};return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const t$=(t,e)=>e?t===e?!0:t$(t,e.parentElement):!1,bk=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,gve=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function yve(t){return gve.has(t.tagName)||t.tabIndex!==-1}const Fw=new WeakSet;function nz(t){return e=>{e.key==="Enter"&&t(e)}}function D2(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const vve=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=nz(()=>{if(Fw.has(n))return;D2(n,"down");const i=nz(()=>{D2(n,"up")}),a=()=>D2(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function rz(t){return bk(t)&&!QG()}function xve(t,e,n={}){const[r,i,a]=e$(t,n),s=o=>{const l=o.currentTarget;if(!rz(o))return;Fw.add(l);const u=e(l,o),f=(y,w)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),Fw.has(l)&&Fw.delete(l),rz(y)&&typeof u=="function"&&u(y,{success:w})},h=y=>{f(y,l===window||l===document||n.useGlobalTarget||t$(l,y.target))},m=y=>{f(y,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",m,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),JG(o)&&(o.addEventListener("focus",u=>vve(u,i)),!yve(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function n$(t){return pG(t)&&"ownerSVGElement"in t}function bve(t){return n$(t)&&t.tagName==="svg"}const Ea=t=>!!(t&&t.getVelocity),wve=[...XG,bi,dd],_ve=t=>wve.find(qG(t)),wk=L.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function iz(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Sve(...t){return e=>{let n=!1;const r=t.map(i=>{const a=iz(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():iz(t[i],null)}}}}function Mve(...t){return L.useCallback(Sve(...t),t)}class Tve extends L.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=JG(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ave({children:t,isPresent:e,anchorX:n,root:r}){const i=L.useId(),a=L.useRef(null),s=L.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=L.useContext(wk),l=Mve(a,t?.ref);return L.useInsertionEffect(()=>{const{width:u,height:f,top:h,left:m,right:y}=s.current;if(e||!a.current||!u||!f)return;const w=n==="left"?`left: ${m}`:`right: ${y}`;a.current.dataset.motionPopId=i;const b=document.createElement("style");o&&(b.nonce=o);const x=r??document.head;return x.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${f}px !important;
            ${w}px !important;
            top: ${h}px !important;
          }
        `),()=>{x.contains(b)&&x.removeChild(b)}},[e]),c.jsx(Tve,{isPresent:e,childRef:a,sizeRef:s,children:L.cloneElement(t,{ref:l})})}const Eve=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,root:l})=>{const u=JR(Cve),f=L.useId();let h=!0,m=L.useMemo(()=>(h=!1,{id:f,initial:e,isPresent:n,custom:i,onExitComplete:y=>{u.set(y,!0);for(const w of u.values())if(!w)return;r&&r()},register:y=>(u.set(y,!1),()=>u.delete(y))}),[n,u,r]);return a&&h&&(m={...m}),L.useMemo(()=>{u.forEach((y,w)=>u.set(w,!1))},[n]),L.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),s==="popLayout"&&(t=c.jsx(Ave,{isPresent:n,anchorX:o,root:l,children:t})),c.jsx(dS.Provider,{value:m,children:t})};function Cve(){return new Map}function r$(t=!0){const e=L.useContext(dS);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=L.useId();L.useEffect(()=>{if(t)return i(a)},[t]);const s=L.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const kb=t=>t.key||"";function az(t){const e=[];return L.Children.forEach(t,n=>{L.isValidElement(n)&&e.push(n)}),e}const i$=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",root:l})=>{const[u,f]=r$(s),h=L.useMemo(()=>az(t),[t]),m=s&&!u?[]:h.map(kb),y=L.useRef(!0),w=L.useRef(h),b=JR(()=>new Map),[x,_]=L.useState(h),[M,T]=L.useState(h);fG(()=>{y.current=!1,w.current=h;for(let N=0;N<M.length;N++){const O=kb(M[N]);m.includes(O)?b.delete(O):b.get(O)!==!0&&b.set(O,!1)}},[M,m.length,m.join("-")]);const A=[];if(h!==x){let N=[...h];for(let O=0;O<M.length;O++){const k=M[O],C=kb(k);m.includes(C)||(N.splice(O,0,k),A.push(k))}return a==="wait"&&A.length&&(N=A),T(az(N)),_(h),null}const{forceRender:R}=L.useContext(ZR);return c.jsx(c.Fragment,{children:M.map(N=>{const O=kb(N),k=s&&!u?!1:h===M||m.includes(O),C=()=>{if(b.has(O))b.set(O,!0);else return;let I=!0;b.forEach(F=>{F||(I=!1)}),I&&(R?.(),T(w.current),s&&f?.(),r&&r())};return c.jsx(Eve,{isPresent:k,initial:!y.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:l,onExitComplete:k?void 0:C,anchorX:o,children:N},O)})})},a$=L.createContext({strict:!1}),sz={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},og={};for(const t in sz)og[t]={isEnabled:e=>sz[t].some(n=>!!e[n])};function Pve(t){for(const e in t)og[e]={...og[e],...t[e]}}const Nve=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function f_(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Nve.has(t)}let s$=t=>!f_(t);function Ove(t){typeof t=="function"&&(s$=e=>e.startsWith("on")?!f_(e):t(e))}try{Ove(require("@emotion/is-prop-valid").default)}catch{}function Rve(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(s$(i)||n===!0&&f_(i)||!e&&!f_(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const fS=L.createContext({});function hS(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function w0(t){return typeof t=="string"||Array.isArray(t)}const _k=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Sk=["initial",..._k];function pS(t){return hS(t.animate)||Sk.some(e=>w0(t[e]))}function o$(t){return!!(pS(t)||t.variants)}function kve(t,e){if(pS(t)){const{initial:n,animate:r}=t;return{initial:n===!1||w0(n)?n:void 0,animate:w0(r)?r:void 0}}return t.inherit!==!1?e:{}}function jve(t){const{initial:e,animate:n}=kve(t,L.useContext(fS));return L.useMemo(()=>({initial:e,animate:n}),[oz(e),oz(n)])}function oz(t){return Array.isArray(t)?t.join(" "):t}const _0={};function Ive(t){for(const e in t)_0[e]=t[e],ok(e)&&(_0[e].isCSSVariable=!0)}function l$(t,{layout:e,layoutId:n}){return Eg.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!_0[t]||t==="opacity")}const Dve={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Lve=Ag.length;function Uve(t,e,n){let r="",i=!0;for(let a=0;a<Lve;a++){const s=Ag[a],o=t[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=ZG(o,vk[s]);if(!l){i=!1;const f=Dve[s]||s;r+=`${f}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Mk(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const l in e){const u=e[l];if(Eg.has(l)){s=!0;continue}else if(ok(l)){i[l]=u;continue}else{const f=ZG(u,vk[l]);l.startsWith("origin")?(o=!0,a[l]=f):r[l]=f}}if(e.transform||(s||n?r.transform=Uve(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:f=0}=a;r.transformOrigin=`${l} ${u} ${f}`}}const Tk=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function c$(t,e,n){for(const r in e)!Ea(e[r])&&!l$(r,n)&&(t[r]=e[r])}function Fve({transformTemplate:t},e){return L.useMemo(()=>{const n=Tk();return Mk(n,e,t),Object.assign({},n.vars,n.style)},[e])}function zve(t,e){const n=t.style||{},r={};return c$(r,n,t),Object.assign(r,Fve(t,e)),r}function Bve(t,e){const n={},r=zve(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Vve={offset:"stroke-dashoffset",array:"stroke-dasharray"},Hve={offset:"strokeDashoffset",array:"strokeDasharray"};function Wve(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?Vve:Hve;t[a.offset]=on.transform(-r);const s=on.transform(e),o=on.transform(n);t[a.array]=`${s} ${o}`}function u$(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},l,u,f){if(Mk(t,o,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:m}=t;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=f?.transformBox??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&Wve(h,i,a,s,!1)}const d$=()=>({...Tk(),attrs:{}}),f$=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Gve(t,e,n,r){const i=L.useMemo(()=>{const a=d$();return u$(a,e,f$(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};c$(a,t.style,t),i.style={...a,...i.style}}return i}const $ve=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ak(t){return typeof t!="string"||t.includes("-")?!1:!!($ve.indexOf(t)>-1||/[A-Z]/u.test(t))}function qve(t,e,n,{latestValues:r},i,a=!1){const o=(Ak(t)?Gve:Bve)(e,r,i,t),l=Rve(e,typeof t=="string",a),u=t!==L.Fragment?{...l,...o,ref:n}:{},{children:f}=e,h=L.useMemo(()=>Ea(f)?f.get():f,[f]);return L.createElement(t,{...u,children:h})}function lz(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Ek(t,e,n,r){if(typeof e=="function"){const[i,a]=lz(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=lz(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function zw(t){return Ea(t)?t.get():t}function Xve({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:Yve(n,r,i,t),renderState:e()}}function Yve(t,e,n,r){const i={},a=r(t,{});for(const m in a)i[m]=zw(a[m]);let{initial:s,animate:o}=t;const l=pS(t),u=o$(t);e&&u&&!l&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||s===!1;const h=f?o:s;if(h&&typeof h!="boolean"&&!hS(h)){const m=Array.isArray(h)?h:[h];for(let y=0;y<m.length;y++){const w=Ek(t,m[y]);if(w){const{transitionEnd:b,transition:x,..._}=w;for(const M in _){let T=_[M];if(Array.isArray(T)){const A=f?T.length-1:0;T=T[A]}T!==null&&(i[M]=T)}for(const M in b)i[M]=b[M]}}}return i}const h$=t=>(e,n)=>{const r=L.useContext(fS),i=L.useContext(dS),a=()=>Xve(t,e,r,i);return n?a():JR(a)};function Ck(t,e,n){const{style:r}=t,i={};for(const a in r)(Ea(r[a])||e.style&&Ea(e.style[a])||l$(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const Kve=h$({scrapeMotionValuesFromProps:Ck,createRenderState:Tk});function p$(t,e,n){const r=Ck(t,e,n);for(const i in t)if(Ea(t[i])||Ea(e[i])){const a=Ag.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const Zve=h$({scrapeMotionValuesFromProps:p$,createRenderState:d$}),Jve=Symbol.for("motionComponentSymbol");function pm(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Qve(t,e,n){return L.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):pm(n)&&(n.current=r))},[e])}const Pk=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),e0e="framerAppearId",m$="data-"+Pk(e0e),g$=L.createContext({});function t0e(t,e,n,r,i){const{visualElement:a}=L.useContext(fS),s=L.useContext(a$),o=L.useContext(dS),l=L.useContext(wk).reducedMotion,u=L.useRef(null);r=r||s.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:a,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const f=u.current,h=L.useContext(g$);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&n0e(u.current,n,i,h);const m=L.useRef(!1);L.useInsertionEffect(()=>{f&&m.current&&f.update(n,o)});const y=n[m$],w=L.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return fG(()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),w.current&&f.animationState&&f.animationState.animateChanges())}),L.useEffect(()=>{f&&(!w.current&&f.animationState&&f.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),w.current=!1),f.enteringChildren=void 0)}),f}function n0e(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:y$(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&pm(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:l,layoutRoot:u})}function y$(t){if(t)return t.options.allowProjection!==!1?t.projection:y$(t.parent)}function L2(t,{forwardMotionProps:e=!1}={},n,r){n&&Pve(n);const i=Ak(t)?Zve:Kve;function a(o,l){let u;const f={...L.useContext(wk),...o,layoutId:r0e(o)},{isStatic:h}=f,m=jve(o),y=i(o,h);if(!h&&QR){i0e();const w=a0e(f);u=w.MeasureLayout,m.visualElement=t0e(t,y,f,r,w.ProjectionNode)}return c.jsxs(fS.Provider,{value:m,children:[u&&m.visualElement?c.jsx(u,{visualElement:m.visualElement,...f}):null,qve(t,o,Qve(y,m.visualElement,l),y,h,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const s=L.forwardRef(a);return s[Jve]=t,s}function r0e({layoutId:t}){const e=L.useContext(ZR).id;return e&&t!==void 0?e+"-"+t:t}function i0e(t,e){L.useContext(a$).strict}function a0e(t){const{drag:e,layout:n}=og;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function s0e(t,e){if(typeof Proxy>"u")return L2;const n=new Map,r=(a,s)=>L2(a,s,t,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(n.has(s)||n.set(s,L2(s,void 0,t,e)),n.get(s))})}function v$({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function o0e({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function l0e(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function U2(t){return t===void 0||t===1}function DN({scale:t,scaleX:e,scaleY:n}){return!U2(t)||!U2(e)||!U2(n)}function Of(t){return DN(t)||x$(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function x$(t){return cz(t.x)||cz(t.y)}function cz(t){return t&&t!=="0%"}function h_(t,e,n){const r=t-n,i=e*r;return n+i}function uz(t,e,n,r,i){return i!==void 0&&(t=h_(t,i,r)),h_(t,n,r)+e}function LN(t,e=0,n=1,r,i){t.min=uz(t.min,e,n,r,i),t.max=uz(t.max,e,n,r,i)}function b$(t,{x:e,y:n}){LN(t.x,e.translate,e.scale,e.originPoint),LN(t.y,n.translate,n.scale,n.originPoint)}const dz=.999999999999,fz=1.0000000000001;function c0e(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&gm(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,b$(t,s)),r&&Of(a.latestValues)&&gm(t,a.latestValues))}e.x<fz&&e.x>dz&&(e.x=1),e.y<fz&&e.y>dz&&(e.y=1)}function mm(t,e){t.min=t.min+e,t.max=t.max+e}function hz(t,e,n,r,i=.5){const a=Gr(t.min,t.max,i);LN(t,e,n,a,r)}function gm(t,e){hz(t.x,e.x,e.scaleX,e.scale,e.originX),hz(t.y,e.y,e.scaleY,e.scale,e.originY)}function w$(t,e){return v$(l0e(t.getBoundingClientRect(),e))}function u0e(t,e,n){const r=w$(t,n),{scroll:i}=e;return i&&(mm(r.x,i.offset.x),mm(r.y,i.offset.y)),r}const pz=()=>({translate:0,scale:1,origin:0,originPoint:0}),ym=()=>({x:pz(),y:pz()}),mz=()=>({min:0,max:0}),Ii=()=>({x:mz(),y:mz()}),UN={current:null},_$={current:!1};function d0e(){if(_$.current=!0,!!QR)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>UN.current=t.matches;t.addEventListener("change",e),e()}else UN.current=!1}const f0e=new WeakMap;function h0e(t,e,n){for(const r in e){const i=e[r],a=n[r];if(Ea(i))t.addValue(r,i);else if(Ea(a))t.addValue(r,sg(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,sg(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const gz=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class p0e{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=gk,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=ms.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Br.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=pS(n),this.isVariantNode=o$(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const y=h[m];l[m]!==void 0&&Ea(y)&&y.set(l[m])}}mount(e){this.current=e,f0e.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),_$.current||d0e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:UN.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ud(this.notifyUpdate),ud(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Eg.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&Br.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in og){const n=og[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ii()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<gz.length;r++){const i=gz[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=h0e(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=sg(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(hG(r)||mG(r))?r=parseFloat(r):!_ve(r)&&dd.test(n)&&(r=KG(e,n)),this.setBaseTarget(e,Ea(r)?r.get():r)),Ea(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=Ek(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ea(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new ik),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){xk.render(this.render)}}class S$ extends p0e{constructor(){super(...arguments),this.KeyframeResolver=uve}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ea(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function M$(t,{style:e,vars:n},r,i){const a=t.style;let s;for(s in e)a[s]=e[s];i?.applyProjectionStyles(a,r);for(s in n)a.setProperty(s,n[s])}function m0e(t){return window.getComputedStyle(t)}class g0e extends S${constructor(){super(...arguments),this.type="html",this.renderInstance=M$}readValueFromInstance(e,n){if(Eg.has(n))return this.projection?.isProjecting?PN(n):Pye(e,n);{const r=m0e(e),i=(ok(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return w$(e,n)}build(e,n,r){Mk(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Ck(e,n,r)}}const T$=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function y0e(t,e,n,r){M$(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(T$.has(i)?i:Pk(i),e.attrs[i])}class v0e extends S${constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ii}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Eg.has(n)){const r=YG(n);return r&&r.default||0}return n=T$.has(n)?n:Pk(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return p$(e,n,r)}build(e,n,r){u$(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){y0e(e,n,r,i)}mount(e){this.isSVGTag=f$(e.tagName),super.mount(e)}}const x0e=(t,e)=>Ak(t)?new v0e(e):new g0e(e,{allowProjection:t!==L.Fragment});function Em(t,e,n){const r=t.getProps();return Ek(r,e,n!==void 0?n:r.custom,t)}const FN=t=>Array.isArray(t);function b0e(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,sg(n))}function w0e(t){return FN(t)?t[t.length-1]||0:t}function _0e(t,e){const n=Em(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=w0e(a[s]);b0e(t,s,o)}}function S0e(t){return!!(Ea(t)&&t.add)}function zN(t,e){const n=t.getValue("willChange");if(S0e(n))return n.add(e);if(!n&&Xc.WillChange){const r=new Xc.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function A$(t){return t.props[m$]}const M0e=t=>t!==null;function T0e(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(M0e),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const A0e={type:"spring",stiffness:500,damping:25,restSpeed:10},E0e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),C0e={type:"keyframes",duration:.8},P0e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},N0e=(t,{keyframes:e})=>e.length>2?C0e:Eg.has(t)?t.startsWith("scale")?E0e(e[1]):A0e:P0e;function O0e({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:u,...f}){return!!Object.keys(f).length}const Nk=(t,e,n,r={},i,a)=>s=>{const o=yk(r,t)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Cl(l);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:m=>{e.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};O0e(o)||Object.assign(f,N0e(t,f)),f.duration&&(f.duration=Cl(f.duration)),f.repeatDelay&&(f.repeatDelay=Cl(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let h=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(jN(f),f.delay===0&&(h=!0)),(Xc.instantAnimations||Xc.skipAnimations)&&(h=!0,jN(f),f.delay=0),f.allowFlatten=!o.type&&!o.ease,h&&!a&&e.get()!==void 0){const m=T0e(f.keyframes,o);if(m!==void 0){Br.update(()=>{f.onUpdate(m),f.onComplete()});return}}return o.isSync?new mk(f):new Jye(f)};function R0e({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function E$(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:s,...o}=e;r&&(a=r);const l=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in o){const h=t.getValue(f,t.latestValues[f]??null),m=o[f];if(m===void 0||u&&R0e(u,f))continue;const y={delay:n,...yk(a||{},f)},w=h.get();if(w!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===w&&!y.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const _=A$(t);if(_){const M=window.MotionHandoffAnimation(_,f,Br);M!==null&&(y.startTime=M,b=!0)}}zN(t,f),h.start(Nk(f,h,m,t.shouldReduceMotion&&$G.has(f)?{type:!1}:y,t,b));const x=h.animation;x&&l.push(x)}return s&&Promise.all(l).then(()=>{Br.update(()=>{s&&_0e(t,s)})}),l}function C$(t,e,n,r=0,i=1){const a=Array.from(t).sort((u,f)=>u.sortNodePosition(f)).indexOf(e),s=t.size,o=(s-1)*r;return typeof n=="function"?n(a,s):i===1?a*r:o-a*r}function BN(t,e,n={}){const r=Em(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(E$(t,r,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=i;return k0e(t,e,l,u,f,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[l,u]=o==="beforeChildren"?[a,s]:[s,a];return l().then(()=>u())}else return Promise.all([a(),s(n.delay)])}function k0e(t,e,n=0,r=0,i=0,a=1,s){const o=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),o.push(BN(l,e,{...s,delay:n+(typeof r=="function"?0:r)+C$(t.variantChildren,l,r,i,a)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function j0e(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>BN(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=BN(t,e,n);else{const i=typeof e=="function"?Em(t,e,n.custom):e;r=Promise.all(E$(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function P$(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const I0e=Sk.length;function N$(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?N$(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<I0e;n++){const r=Sk[n],i=t.props[r];(w0(i)||i===!1)&&(e[r]=i)}return e}const D0e=[..._k].reverse(),L0e=_k.length;function U0e(t){return e=>Promise.all(e.map(({animation:n,options:r})=>j0e(t,n,r)))}function F0e(t){let e=U0e(t),n=yz(),r=!0;const i=l=>(u,f)=>{const h=Em(t,f,l==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:m,transitionEnd:y,...w}=h;u={...u,...w,...y}}return u};function a(l){e=l(t)}function s(l){const{props:u}=t,f=N$(t.parent)||{},h=[],m=new Set;let y={},w=1/0;for(let x=0;x<L0e;x++){const _=D0e[x],M=n[_],T=u[_]!==void 0?u[_]:f[_],A=w0(T),R=_===l?M.isActive:null;R===!1&&(w=x);let N=T===f[_]&&T!==u[_]&&A;if(N&&r&&t.manuallyAnimateOnMount&&(N=!1),M.protectedKeys={...y},!M.isActive&&R===null||!T&&!M.prevProp||hS(T)||typeof T=="boolean")continue;const O=z0e(M.prevProp,T);let k=O||_===l&&M.isActive&&!N&&A||x>w&&A,C=!1;const I=Array.isArray(T)?T:[T];let F=I.reduce(i(_),{});R===!1&&(F={});const{prevResolvedValues:V={}}=M,W={...V,...F},G=ae=>{k=!0,m.has(ae)&&(C=!0,m.delete(ae)),M.needsAnimating[ae]=!0;const $=t.getValue(ae);$&&($.liveStyle=!1)};for(const ae in W){const $=F[ae],B=V[ae];if(y.hasOwnProperty(ae))continue;let Y=!1;FN($)&&FN(B)?Y=!P$($,B):Y=$!==B,Y?$!=null?G(ae):m.add(ae):$!==void 0&&m.has(ae)?G(ae):M.protectedKeys[ae]=!0}M.prevProp=T,M.prevResolvedValues=F,M.isActive&&(y={...y,...F}),r&&t.blockInitialAnimation&&(k=!1);const J=N&&O;k&&(!J||C)&&h.push(...I.map(ae=>{const $={type:_};if(typeof ae=="string"&&r&&!J&&t.manuallyAnimateOnMount&&t.parent){const{parent:B}=t,Y=Em(B,ae);if(B.enteringChildren&&Y){const{delayChildren:X}=Y.transition||{};$.delay=C$(B.enteringChildren,t,X)}}return{animation:ae,options:$}}))}if(m.size){const x={};if(typeof u.initial!="boolean"){const _=Em(t,Array.isArray(u.initial)?u.initial[0]:u.initial);_&&_.transition&&(x.transition=_.transition)}m.forEach(_=>{const M=t.getBaseTarget(_),T=t.getValue(_);T&&(T.liveStyle=!0),x[_]=M??null}),h.push({animation:x})}let b=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(h):Promise.resolve()}function o(l,u){if(n[l].isActive===u)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(l,u)),n[l].isActive=u;const f=s(l);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=yz()}}}function z0e(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!P$(e,t):!1}function mf(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function yz(){return{animate:mf(!0),whileInView:mf(),whileHover:mf(),whileTap:mf(),whileDrag:mf(),whileFocus:mf(),exit:mf()}}class _d{constructor(e){this.isMounted=!1,this.node=e}update(){}}class B0e extends _d{constructor(e){super(e),e.animationState||(e.animationState=F0e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();hS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let V0e=0;class H0e extends _d{constructor(){super(...arguments),this.id=V0e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const W0e={animation:{Feature:B0e},exit:{Feature:H0e}};function S0(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ox(t){return{point:{x:t.pageX,y:t.pageY}}}const G0e=t=>e=>bk(e)&&t(e,ox(e));function Sv(t,e,n,r){return S0(t,e,G0e(n),r)}const O$=1e-4,$0e=1-O$,q0e=1+O$,R$=.01,X0e=0-R$,Y0e=0+R$;function qa(t){return t.max-t.min}function K0e(t,e,n){return Math.abs(t-e)<=n}function vz(t,e,n,r=.5){t.origin=r,t.originPoint=Gr(e.min,e.max,t.origin),t.scale=qa(n)/qa(e),t.translate=Gr(n.min,n.max,t.origin)-t.originPoint,(t.scale>=$0e&&t.scale<=q0e||isNaN(t.scale))&&(t.scale=1),(t.translate>=X0e&&t.translate<=Y0e||isNaN(t.translate))&&(t.translate=0)}function Mv(t,e,n,r){vz(t.x,e.x,n.x,r?r.originX:void 0),vz(t.y,e.y,n.y,r?r.originY:void 0)}function xz(t,e,n){t.min=n.min+e.min,t.max=t.min+qa(e)}function Z0e(t,e,n){xz(t.x,e.x,n.x),xz(t.y,e.y,n.y)}function bz(t,e,n){t.min=e.min-n.min,t.max=t.min+qa(e)}function p_(t,e,n){bz(t.x,e.x,n.x),bz(t.y,e.y,n.y)}function oo(t){return[t("x"),t("y")]}const k$=({current:t})=>t?t.ownerDocument.defaultView:null,wz=(t,e)=>Math.abs(t-e);function J0e(t,e){const n=wz(t.x,e.x),r=wz(t.y,e.y);return Math.sqrt(n**2+r**2)}class j${constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=z2(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,w=J0e(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!w)return;const{point:b}=m,{timestamp:x}=fa;this.history.push({...b,timestamp:x});const{onStart:_,onMove:M}=this.handlers;y||(_&&_(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=F2(y,this.transformPagePoint),Br.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:w,onSessionEnd:b,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=z2(m.type==="pointercancel"?this.lastMoveEventInfo:F2(y,this.transformPagePoint),this.history);this.startEvent&&w&&w(m,_),b&&b(m,_)},!bk(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const o=ox(e),l=F2(o,this.transformPagePoint),{point:u}=l,{timestamp:f}=fa;this.history=[{...u,timestamp:f}];const{onSessionStart:h}=n;h&&h(e,z2(l,this.history)),this.removeListeners=ix(Sv(this.contextWindow,"pointermove",this.handlePointerMove),Sv(this.contextWindow,"pointerup",this.handlePointerUp),Sv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ud(this.updatePoint)}}function F2(t,e){return e?{point:e(t.point)}:t}function _z(t,e){return{x:t.x-e.x,y:t.y-e.y}}function z2({point:t},e){return{point:t,delta:_z(t,I$(e)),offset:_z(t,Q0e(e)),velocity:exe(e,.1)}}function Q0e(t){return t[0]}function I$(t){return t[t.length-1]}function exe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=I$(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Cl(e)));)n--;if(!r)return{x:0,y:0};const a=fo(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function txe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Gr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Gr(n,t,r.max):Math.min(t,n)),t}function Sz(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function nxe(t,{top:e,left:n,bottom:r,right:i}){return{x:Sz(t.x,n,i),y:Sz(t.y,e,r)}}function Mz(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function rxe(t,e){return{x:Mz(t.x,e.x),y:Mz(t.y,e.y)}}function ixe(t,e){let n=.5;const r=qa(t),i=qa(e);return i>r?n=v0(e.min,e.max-r,t.min):r>i&&(n=v0(t.min,t.max-i,e.min)),qc(0,1,n)}function axe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const VN=.35;function sxe(t=VN){return t===!1?t=0:t===!0&&(t=VN),{x:Tz(t,"left","right"),y:Tz(t,"top","bottom")}}function Tz(t,e,n){return{min:Az(t,e),max:Az(t,n)}}function Az(t,e){return typeof t=="number"?t:t[e]||0}const oxe=new WeakMap;class lxe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ii(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ox(h).point)},s=(h,m)=>{const{drag:y,dragPropagation:w,onDragStart:b}=this.getProps();if(y&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=pve(y),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),oo(_=>{let M=this.getAxisMotionValue(_).get()||0;if(Pl.test(M)){const{projection:T}=this.visualElement;if(T&&T.layout){const A=T.layout.layoutBox[_];A&&(M=qa(A)*(parseFloat(M)/100))}}this.originPoint[_]=M}),b&&Br.postRender(()=>b(h,m)),zN(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:w,onDirectionLock:b,onDrag:x}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:_}=m;if(w&&this.currentDirection===null){this.currentDirection=cxe(_),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",m.point,_),this.updateAxis("y",m.point,_),this.visualElement.render(),x&&x(h,m)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>oo(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new j$(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:k$(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Br.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!jb(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=txe(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&pm(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=nxe(r.layoutBox,e):this.constraints=!1,this.elastic=sxe(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&oo(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=axe(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!pm(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=u0e(r,i.root,this.visualElement.getTransformPagePoint());let s=rxe(i.layout.layoutBox,a);if(n){const o=n(o0e(s));this.hasMutatedConstraints=!!o,o&&(s=v$(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=oo(f=>{if(!jb(f,n,this.currentDirection))return;let h=l&&l[f]||{};s&&(h={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,w={type:"inertia",velocity:r?e[f]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(f,w)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return zN(this.visualElement,e),r.start(Nk(e,r,0,n,this.visualElement,!1))}stopAnimation(){oo(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){oo(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){oo(n=>{const{drag:r}=this.getProps();if(!jb(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(e[n]-Gr(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!pm(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};oo(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=ixe({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),oo(s=>{if(!jb(s,e,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(Gr(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;oxe.set(this.visualElement,this);const e=this.visualElement.current,n=Sv(e,"pointerdown",l=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();pm(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Br.read(r);const s=S0(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(oo(f=>{const h=this.getAxisMotionValue(f);h&&(this.originPoint[f]+=l[f].translate,h.set(h.get()+l[f].translate))}),this.visualElement.render())}));return()=>{s(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=VN,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function jb(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function cxe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class uxe extends _d{constructor(e){super(e),this.removeGroupControls=ho,this.removeListeners=ho,this.controls=new lxe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ho}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ez=t=>(e,n)=>{t&&Br.postRender(()=>t(e,n))};class dxe extends _d{constructor(){super(...arguments),this.removePointerDownListener=ho}onPointerDown(e){this.session=new j$(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:k$(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Ez(e),onStart:Ez(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&Br.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Sv(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Bw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Cz(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Fy={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(on.test(t))t=parseFloat(t);else return t;const n=Cz(t,e.target.x),r=Cz(t,e.target.y);return`${n}% ${r}%`}},fxe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=dd.parse(t);if(i.length>5)return r;const a=dd.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=l;const u=Gr(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};let B2=!1;class hxe extends L.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;Ive(pxe),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),B2&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Bw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,B2=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||Br.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),xk.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;B2=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function D$(t){const[e,n]=r$(),r=L.useContext(ZR);return c.jsx(hxe,{...t,layoutGroup:r,switchLayoutGroup:L.useContext(g$),isPresent:e,safeToRemove:n})}const pxe={borderRadius:{...Fy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fy,borderTopRightRadius:Fy,borderBottomLeftRadius:Fy,borderBottomRightRadius:Fy,boxShadow:fxe};function mxe(t,e,n){const r=Ea(t)?t:sg(t);return r.start(Nk("",r,e,n)),r.animation}const gxe=(t,e)=>t.depth-e.depth;class yxe{constructor(){this.children=[],this.isDirty=!1}add(e){ek(this.children,e),this.isDirty=!0}remove(e){tk(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(gxe),this.isDirty=!1,this.children.forEach(e)}}function vxe(t,e){const n=ms.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(ud(r),t(a-e))};return Br.setup(r,!0),()=>ud(r)}const L$=["TopLeft","TopRight","BottomLeft","BottomRight"],xxe=L$.length,Pz=t=>typeof t=="string"?parseFloat(t):t,Nz=t=>typeof t=="number"||on.test(t);function bxe(t,e,n,r,i,a){i?(t.opacity=Gr(0,n.opacity??1,wxe(r)),t.opacityExit=Gr(e.opacity??1,0,_xe(r))):a&&(t.opacity=Gr(e.opacity??1,n.opacity??1,r));for(let s=0;s<xxe;s++){const o=`border${L$[s]}Radius`;let l=Oz(e,o),u=Oz(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Nz(l)===Nz(u)?(t[o]=Math.max(Gr(Pz(l),Pz(u),r),0),(Pl.test(u)||Pl.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=Gr(e.rotate||0,n.rotate||0,r))}function Oz(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const wxe=U$(0,.5,SG),_xe=U$(.5,.95,ho);function U$(t,e,n){return r=>r<t?0:r>e?1:n(v0(t,e,r))}function Rz(t,e){t.min=e.min,t.max=e.max}function Vo(t,e){Rz(t.x,e.x),Rz(t.y,e.y)}function kz(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function jz(t,e,n,r,i){return t-=e,t=h_(t,1/n,r),i!==void 0&&(t=h_(t,1/i,r)),t}function Sxe(t,e=0,n=1,r=.5,i,a=t,s=t){if(Pl.test(e)&&(e=parseFloat(e),e=Gr(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=Gr(a.min,a.max,r);t===a&&(o-=e),t.min=jz(t.min,e,n,o,i),t.max=jz(t.max,e,n,o,i)}function Iz(t,e,[n,r,i],a,s){Sxe(t,e[n],e[r],e[i],e.scale,a,s)}const Mxe=["x","scaleX","originX"],Txe=["y","scaleY","originY"];function Dz(t,e,n,r){Iz(t.x,e,Mxe,n?n.x:void 0,r?r.x:void 0),Iz(t.y,e,Txe,n?n.y:void 0,r?r.y:void 0)}function Lz(t){return t.translate===0&&t.scale===1}function F$(t){return Lz(t.x)&&Lz(t.y)}function Uz(t,e){return t.min===e.min&&t.max===e.max}function Axe(t,e){return Uz(t.x,e.x)&&Uz(t.y,e.y)}function Fz(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function z$(t,e){return Fz(t.x,e.x)&&Fz(t.y,e.y)}function zz(t){return qa(t.x)/qa(t.y)}function Bz(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Exe{constructor(){this.members=[]}add(e){ek(this.members,e),e.scheduleRender()}remove(e){if(tk(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Cxe(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=n?.z||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:f,rotateX:h,rotateY:m,skewX:y,skewY:w}=n;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),w&&(r+=`skewY(${w}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const V2=["","X","Y","Z"],Pxe=1e3;let Nxe=0;function H2(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function B$(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=A$(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Br,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&B$(r)}function V$({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e?.()){this.id=Nxe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(kxe),this.nodes.forEach(Lxe),this.nodes.forEach(Uxe),this.nodes.forEach(jxe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new yxe)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new ik),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=n$(s)&&!bve(s),this.instance=s;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let f,h=0;const m=()=>this.root.updateBlockedByResize=!1;Br.read(()=>{h=window.innerWidth}),t(s,()=>{const y=window.innerWidth;y!==h&&(h=y,this.root.updateBlockedByResize=!0,f&&f(),f=vxe(m,250),Bw.hasAnimatedSinceResize&&(Bw.hasAnimatedSinceResize=!1,this.nodes.forEach(Wz)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||u.getDefaultTransition()||Hxe,{onLayoutAnimationStart:b,onLayoutAnimationComplete:x}=u.getProps(),_=!this.targetLayout||!z$(this.targetLayout,y),M=!h&&m;if(this.options.layoutRoot||this.resumeFrom||M||h&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...yk(w,"layout"),onPlay:b,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(f,M)}else h||Wz(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ud(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Fxe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&B$(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Vz);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Hz);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Dxe),this.nodes.forEach(Oxe),this.nodes.forEach(Rxe)):this.nodes.forEach(Hz),this.clearAllSnapshots();const o=ms.now();fa.delta=qc(0,1e3/60,o-fa.timestamp),fa.timestamp=o,fa.isProcessing=!0,O2.update.process(fa),O2.preRender.process(fa),O2.render.process(fa),fa.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,xk.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Ixe),this.sharedNodes.forEach(zxe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Br.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Br.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!qa(this.snapshot.measuredBox.x)&&!qa(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ii(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!F$(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||Of(this.latestValues)||f)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),Wxe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return Ii();const o=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Gxe))){const{scroll:u}=this.root;u&&(mm(o.x,u.offset.x),mm(o.y,u.offset.y))}return o}removeElementScroll(s){const o=Ii();if(Vo(o,s),this.scroll?.wasRoot)return o;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Vo(o,s),mm(o.x,f.offset.x),mm(o.y,f.offset.y))}return o}applyTransform(s,o=!1){const l=Ii();Vo(l,s);for(let u=0;u<this.path.length;u++){const f=this.path[u];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&gm(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Of(f.latestValues)&&gm(l,f.latestValues)}return Of(this.latestValues)&&gm(l,this.latestValues),l}removeTransform(s){const o=Ii();Vo(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Of(u.latestValues))continue;DN(u.latestValues)&&u.updateSnapshot();const f=Ii(),h=u.measurePageBox();Vo(f,h),Dz(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return Of(this.latestValues)&&Dz(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fa.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!this.layout||!(f||h))return;this.resolvedRelativeTargetAt=fa.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ii(),this.targetWithTransforms=Ii()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Z0e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Vo(this.target,this.layout.layoutBox),b$(this.target,this.targetDelta)):Vo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||DN(this.parent.latestValues)||x$(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(s,o,l){this.relativeParent=s,this.linkedParentVersion=s.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ii(),this.relativeTargetOrigin=Ii(),p_(this.relativeTargetOrigin,o,l),Vo(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const s=this.getLead(),o=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===fa.timestamp&&(l=!1),l)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;Vo(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;c0e(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Ii());const{target:y}=s;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(kz(this.prevProjectionDelta.x,this.projectionDelta.x),kz(this.prevProjectionDelta.y,this.projectionDelta.y)),Mv(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!Bz(this.projectionDelta.x,this.prevProjectionDelta.x)||!Bz(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ym(),this.projectionDelta=ym(),this.projectionDeltaWithTransform=ym()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},f={...this.latestValues},h=ym();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=Ii(),y=l?l.source:void 0,w=this.layout?this.layout.source:void 0,b=y!==w,x=this.getStack(),_=!x||x.members.length<=1,M=!!(b&&!_&&this.options.crossfade===!0&&!this.path.some(Vxe));this.animationProgress=0;let T;this.mixTargetDelta=A=>{const R=A/1e3;Gz(h.x,s.x,R),Gz(h.y,s.y,R),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(p_(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Bxe(this.relativeTarget,this.relativeTargetOrigin,m,R),T&&Axe(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=Ii()),Vo(T,this.relativeTarget)),b&&(this.animationValues=f,bxe(f,u,this.latestValues,R,M,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ud(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Br.update(()=>{Bw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=sg(0)),this.currentAnimation=mxe(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Pxe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:f}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&H$(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ii();const h=qa(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+h;const m=qa(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+m}Vo(o,l),gm(o,f),Mv(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new Exe),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&H2("z",s,u,this.animationValues);for(let f=0;f<V2.length;f++)H2(`rotate${V2[f]}`,s,u,this.animationValues),H2(`skew${V2[f]}`,s,u,this.animationValues);s.render();for(const f in u)s.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=zw(o?.pointerEvents)||"",s.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=zw(o?.pointerEvents)||""),this.hasProjected&&!Of(this.latestValues)&&(s.transform=l?l({},""):"none",this.hasProjected=!1);return}s.visibility="";const f=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=Cxe(this.projectionDeltaWithTransform,this.treeScale,f);l&&(h=l(f,h)),s.transform=h;const{x:m,y}=this.projectionDelta;s.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,u.animationValues?s.opacity=u===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:s.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const w in _0){if(f[w]===void 0)continue;const{correct:b,applyTo:x,isCSSVariable:_}=_0[w],M=h==="none"?f[w]:b(f[w],u);if(x){const T=x.length;for(let A=0;A<T;A++)s[x[A]]=M}else _?this.options.visualElement.renderState.vars[w]=M:s[w]=M}this.options.layoutId&&(s.pointerEvents=u===this?zw(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(Vz),this.root.sharedNodes.clear()}}}function Oxe(t){t.updateLayout()}function Rxe(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?oo(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],m=qa(h);h.min=n[f].min,h.max=h.min+m}):H$(i,e.layoutBox,n)&&oo(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],m=qa(n[f]);h.max=h.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+m)});const s=ym();Mv(s,n,e.layoutBox);const o=ym();a?Mv(o,t.applyTransform(r,!0),e.measuredBox):Mv(o,n,e.layoutBox);const l=!F$(s);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:m}=f;if(h&&m){const y=Ii();p_(y,e.layoutBox,h.layoutBox);const w=Ii();p_(w,n,m.layoutBox),z$(y,w)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=y,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:o,layoutDelta:s,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function kxe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function jxe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Ixe(t){t.clearSnapshot()}function Vz(t){t.clearMeasurements()}function Hz(t){t.isLayoutDirty=!1}function Dxe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Wz(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Lxe(t){t.resolveTargetDelta()}function Uxe(t){t.calcProjection()}function Fxe(t){t.resetSkewAndRotation()}function zxe(t){t.removeLeadSnapshot()}function Gz(t,e,n){t.translate=Gr(e.translate,0,n),t.scale=Gr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function $z(t,e,n,r){t.min=Gr(e.min,n.min,r),t.max=Gr(e.max,n.max,r)}function Bxe(t,e,n,r){$z(t.x,e.x,n.x,r),$z(t.y,e.y,n.y,r)}function Vxe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Hxe={duration:.45,ease:[.4,0,.1,1]},qz=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Xz=qz("applewebkit/")&&!qz("chrome/")?Math.round:ho;function Yz(t){t.min=Xz(t.min),t.max=Xz(t.max)}function Wxe(t){Yz(t.x),Yz(t.y)}function H$(t,e,n){return t==="position"||t==="preserve-aspect"&&!K0e(zz(e),zz(n),.2)}function Gxe(t){return t!==t.root&&t.scroll?.wasRoot}const $xe=V$({attachResizeListener:(t,e)=>S0(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),W2={current:void 0},W$=V$({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!W2.current){const t=new $xe({});t.mount(window),t.setOptions({layoutScroll:!0}),W2.current=t}return W2.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),qxe={pan:{Feature:dxe},drag:{Feature:uxe,ProjectionNode:W$,MeasureLayout:D$}};function Kz(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&Br.postRender(()=>a(e,ox(e)))}class Xxe extends _d{mount(){const{current:e}=this.node;e&&(this.unmount=mve(e,(n,r)=>(Kz(this.node,r,"Start"),i=>Kz(this.node,i,"End"))))}unmount(){}}class Yxe extends _d{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ix(S0(this.node.current,"focus",()=>this.onFocus()),S0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Zz(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&Br.postRender(()=>a(e,ox(e)))}class Kxe extends _d{mount(){const{current:e}=this.node;e&&(this.unmount=xve(e,(n,r)=>(Zz(this.node,r,"Start"),(i,{success:a})=>Zz(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const HN=new WeakMap,G2=new WeakMap,Zxe=t=>{const e=HN.get(t.target);e&&e(t)},Jxe=t=>{t.forEach(Zxe)};function Qxe({root:t,...e}){const n=t||document;G2.has(n)||G2.set(n,{});const r=G2.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Jxe,{root:t,...e})),r[i]}function ebe(t,e,n){const r=Qxe(e);return HN.set(t,n),r.observe(t),()=>{HN.delete(t),r.unobserve(t)}}const tbe={some:0,all:1};class nbe extends _d{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:tbe[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),m=u?f:h;m&&m(l)};return ebe(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(rbe(e,n))&&this.startObserver()}unmount(){}}function rbe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const ibe={inView:{Feature:nbe},tap:{Feature:Kxe},focus:{Feature:Yxe},hover:{Feature:Xxe}},abe={layout:{ProjectionNode:W$,MeasureLayout:D$}},sbe={...W0e,...ibe,...qxe,...abe},Zi=s0e(sbe,x0e),obe=({isOpen:t,onClose:e})=>{const n=ni(),r=()=>{e(),n("/activate")};return c.jsx(i$,{children:t&&c.jsxs(c.Fragment,{children:[c.jsx(Zi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),c.jsx(Zi.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:c.jsx("div",{className:"relative w-full max-w-md",children:c.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl border border-gray-800/50 rounded-2xl shadow-2xl p-6",children:[c.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white transition-colors rounded-lg hover:bg-gray-800/50",children:c.jsx(po,{size:20})}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Upgrade to Pro"}),c.jsx("p",{className:"text-gray-400",children:"Unlock advanced features with MernDesk Pro"})]}),c.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-br from-primary-500/10 to-primary-600/10 rounded-xl border border-primary-500/20",children:[c.jsxs("div",{className:"flex items-baseline gap-2",children:[c.jsx("span",{className:"text-4xl font-bold text-white",children:"4,999"}),c.jsx("span",{className:"text-gray-400",children:"one-time"})]}),c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Lifetime license with all Pro features"})]}),c.jsxs("div",{className:"mb-6 space-y-3",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-5 h-5 rounded-full bg-primary-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:c.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-500"})}),c.jsx("span",{className:"text-gray-300",children:"SLA Automation"})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-5 h-5 rounded-full bg-primary-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:c.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-500"})}),c.jsx("span",{className:"text-gray-300",children:"AI Chatbot Integration"})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-5 h-5 rounded-full bg-primary-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:c.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-500"})}),c.jsx("span",{className:"text-gray-300",children:"Priority Support"})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-5 h-5 rounded-full bg-primary-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:c.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-500"})}),c.jsx("span",{className:"text-gray-300",children:"Advanced Analytics"})]})]}),c.jsx("button",{onClick:r,className:"w-full bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 shadow-lg shadow-primary-500/25 hover:shadow-xl hover:shadow-primary-500/40",children:"Proceed to Payment"}),c.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Secure payment via UPI"})]})})})]})})},lbe=()=>{const t=[{name:"Manual Support",basic:!0,pro:!0},{name:"Ticket Management",basic:!0,pro:!0},{name:"User Management",basic:!0,pro:!0},{name:"Email Integration",basic:!0,pro:!0},{name:"SLA Automation",basic:!1,pro:!0},{name:"AI Chatbot",basic:!1,pro:!0},{name:"Advanced Analytics",basic:!1,pro:!0},{name:"Priority Support",basic:!1,pro:!0}];return c.jsx("div",{className:"w-full max-w-5xl mx-auto",children:c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsxs(Zi.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},className:"bg-gray-900/40 backdrop-blur-xl border border-gray-800/50 rounded-2xl p-8",children:[c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("h3",{className:"text-2xl font-bold text-white",children:"Basic"}),c.jsx("span",{className:"px-3 py-1 text-xs font-semibold bg-green-500/20 text-green-400 rounded-full border border-green-500/30",children:"Open Source"})]}),c.jsxs("div",{className:"flex items-baseline gap-2 mt-4",children:[c.jsx("span",{className:"text-4xl font-bold text-white",children:"Free"}),c.jsx("span",{className:"text-gray-400",children:"Forever"})]}),c.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Perfect for small teams getting started"})]}),c.jsx("ul",{className:"space-y-4 mb-8",children:t.map((e,n)=>c.jsxs("li",{className:"flex items-start gap-3",children:[e.basic?c.jsx(PI,{className:"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5"}):c.jsx(po,{className:"w-5 h-5 text-gray-600 flex-shrink-0 mt-0.5"}),c.jsx("span",{className:e.basic?"text-gray-300":"text-gray-600",children:e.name})]},n))})]}),c.jsxs(Zi.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.1},className:"bg-gradient-to-br from-primary-500/10 to-primary-600/10 backdrop-blur-xl border-2 border-primary-500/50 rounded-2xl p-8 relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-6 right-6",children:c.jsx("span",{className:"px-3 py-1 text-xs font-semibold bg-primary-500/20 text-primary-400 rounded-full border border-primary-500/50",children:"Enterprise"})}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Pro"}),c.jsxs("div",{className:"flex items-baseline gap-2 mt-4",children:[c.jsx("span",{className:"text-4xl font-bold text-white",children:"4,999"}),c.jsx("span",{className:"text-gray-400",children:"one-time"})]}),c.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Advanced features for growing teams"})]}),c.jsx("ul",{className:"space-y-4 mb-8",children:t.map((e,n)=>c.jsxs("li",{className:"flex items-start gap-3",children:[e.pro?c.jsx(PI,{className:"w-5 h-5 text-primary-400 flex-shrink-0 mt-0.5"}):c.jsx(po,{className:"w-5 h-5 text-gray-600 flex-shrink-0 mt-0.5"}),c.jsx("span",{className:e.pro?"text-gray-300":"text-gray-600",children:e.name})]},n))})]})]})})},cbe="https://github.com/yourusername/merndesk",ube=()=>{const t=ni(),[e,n]=L.useState(!1),r=()=>{window.open(cbe,"_blank")};return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950 text-white",children:[c.jsx("nav",{className:"fixed top-0 left-0 right-0 z-40 bg-gray-900/50 backdrop-blur-xl border-b border-gray-800/50",children:c.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center",children:c.jsx(AM,{className:"w-5 h-5"})}),c.jsx("span",{className:"text-xl font-bold",children:"MernDesk"})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("a",{href:"#features",className:"text-gray-400 hover:text-white transition-colors",children:"Features"}),c.jsx("a",{href:"#pricing",className:"text-gray-400 hover:text-white transition-colors",children:"Pricing"}),c.jsx("button",{onClick:()=>t("/login"),className:"text-gray-400 hover:text-white transition-colors",children:"Login"}),c.jsx("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition-colors",children:"Buy Pro"})]})]})})}),c.jsxs("section",{className:"relative pt-32 pb-20 px-6 overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[c.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary-500/10 rounded-full blur-3xl animate-pulse"}),c.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-primary-600/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),c.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[c.jsxs(Zi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[c.jsxs(Zi.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-full mb-6",children:[c.jsx(EK,{className:"w-4 h-4 text-primary-400"}),c.jsx("span",{className:"text-sm text-gray-300",children:"Open Source Ticketing Tool"})]}),c.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-white via-gray-100 to-gray-400 bg-clip-text text-transparent",children:["Modern Ticketing",c.jsx("br",{}),c.jsx("span",{className:"bg-gradient-to-r from-primary-400 to-primary-600 bg-clip-text text-transparent",children:"Made Simple"})]}),c.jsx("p",{className:"text-xl md:text-2xl text-gray-400 max-w-3xl mx-auto mb-12",children:"An open-source ticketing solution with freemium model. Start free, upgrade to Pro for advanced automation and AI features."}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[c.jsxs(Zi.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r,className:"group flex items-center gap-3 px-8 py-4 bg-white text-gray-900 font-semibold rounded-xl hover:bg-gray-100 transition-all duration-200 shadow-lg hover:shadow-xl",children:[c.jsx(sh,{className:"w-5 h-5"}),"Download Core",c.jsx(xK,{className:"w-5 h-5"})]}),c.jsxs(Zi.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(!0),className:"group flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold rounded-xl hover:from-primary-600 hover:to-primary-700 transition-all duration-200 shadow-lg shadow-primary-500/25 hover:shadow-xl hover:shadow-primary-500/40",children:["Buy Pro License",c.jsx("span",{className:"text-sm opacity-90",children:"4,999"}),c.jsx(jw,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})]}),c.jsx(Zi.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{delay:.4,duration:.6},className:"grid md:grid-cols-3 gap-6 mt-20",children:[{icon:OK,title:"Lightning Fast",description:"Built for performance with modern tech stack"},{icon:nl,title:"Secure & Reliable",description:"Enterprise-grade security and data protection"},{icon:AM,title:"Open Source",description:"Fully customizable and community-driven"}].map((i,a)=>c.jsxs(Zi.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:a*.1},whileHover:{y:-5},className:"bg-gray-900/40 backdrop-blur-xl border border-gray-800/50 rounded-2xl p-6 hover:border-primary-500/50 transition-all duration-300",children:[c.jsx("div",{className:"w-12 h-12 bg-primary-500/10 rounded-xl flex items-center justify-center mb-4",children:c.jsx(i.icon,{className:"w-6 h-6 text-primary-400"})}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:i.title}),c.jsx("p",{className:"text-gray-400",children:i.description})]},a))})]})]}),c.jsx("section",{id:"features",className:"py-20 px-6",children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs(Zi.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[c.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Powerful Features"}),c.jsx("p",{className:"text-xl text-gray-400",children:"Everything you need to manage support tickets efficiently"})]}),c.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{icon:fv,title:"Ticket Management",description:"Create, track, and resolve tickets with ease. Full lifecycle management with status tracking.",color:"from-blue-500/20 to-blue-600/20",iconColor:"text-blue-400"},{icon:GO,title:"User Management",description:"Comprehensive user roles and permissions. Manage teams, departments, and access levels.",color:"from-purple-500/20 to-purple-600/20",iconColor:"text-purple-400"},{icon:wl,title:"Email Integration",description:"Seamless email integration for ticket creation and notifications. IMAP and SMTP support.",color:"from-green-500/20 to-green-600/20",iconColor:"text-green-400"},{icon:pK,title:"AI Chatbot (Pro)",description:"Intelligent AI-powered chatbot for instant customer support and ticket routing.",color:"from-primary-500/20 to-primary-600/20",iconColor:"text-primary-400"},{icon:A8,title:"Analytics & Reports",description:"Advanced analytics and reporting. Track performance metrics and generate insights.",color:"from-orange-500/20 to-orange-600/20",iconColor:"text-orange-400"},{icon:Vc,title:"Security & SSO",description:"Enterprise-grade security with SSO support. SAML, OAuth, and Azure AD integration.",color:"from-red-500/20 to-red-600/20",iconColor:"text-red-400"},{icon:I8,title:"SLA Automation (Pro)",description:"Automated SLA management with policy enforcement and escalation workflows.",color:"from-primary-500/20 to-primary-600/20",iconColor:"text-primary-400"},{icon:nl,title:"Multi-Factor Auth",description:"Enhanced security with MFA support. Protect your account with two-factor authentication.",color:"from-indigo-500/20 to-indigo-600/20",iconColor:"text-indigo-400"},{icon:AM,title:"API & Integrations",description:"RESTful API for custom integrations. Connect with your existing tools and workflows.",color:"from-cyan-500/20 to-cyan-600/20",iconColor:"text-cyan-400"}].map((i,a)=>c.jsxs(Zi.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:a*.1},whileHover:{y:-5},className:`bg-gradient-to-br ${i.color} backdrop-blur-xl border border-gray-800/50 rounded-2xl p-6 hover:border-gray-700/50 transition-all duration-300`,children:[c.jsx("div",{className:"w-12 h-12 bg-gray-900/50 rounded-xl flex items-center justify-center mb-4",children:c.jsx(i.icon,{className:`w-6 h-6 ${i.iconColor}`})}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:i.title}),c.jsx("p",{className:"text-gray-400 text-sm",children:i.description})]},a))})]})}),c.jsx("section",{id:"pricing",className:"py-20 px-6",children:c.jsxs("div",{className:"max-w-7xl mx-auto",children:[c.jsxs(Zi.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-12",children:[c.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Simple, Transparent Pricing"}),c.jsx("p",{className:"text-xl text-gray-400",children:"Choose the plan that fits your needs"})]}),c.jsx(lbe,{})]})}),c.jsx(obe,{isOpen:e,onClose:()=>n(!1)})]})},Jz=t=>btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),dbe="merndesk-pro-license-secret-key-2024",fbe=t=>{let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return Math.abs(e).toString(16)},hbe=t=>{const e={alg:"HS256",typ:"JWT"},n={plan:"PRO",transactionId:t,issuedAt:new Date().toISOString(),expiresAt:new Date(Date.now()+365*24*60*60*1e3).toISOString(),version:"1.0"},r=Jz(JSON.stringify(e)),i=Jz(JSON.stringify(n)),a=fbe(r+"."+i+dbe);return`${r}.${i}.${a}`},pbe=t=>{const n={plan:"PRO",licenseKey:hbe(t),transactionId:t,activatedAt:new Date().toISOString(),version:"1.0"},r=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download="license.json",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)},mbe=async t=>new Promise(e=>{setTimeout(()=>{const n=t&&t.trim().length>=10;e(n)},1500)}),gbe=()=>{const t=ni(),[e,n]=L.useState(""),[r,i]=L.useState(!1),[a,s]=L.useState(!1),[o,l]=L.useState(""),u=async f=>{f.preventDefault(),l(""),i(!0);try{await mbe(e)?(s(!0),de.success("Transaction validated successfully!"),setTimeout(()=>{pbe(e),de.success("License file downloaded!")},500)):(l("Invalid transaction ID. Please check and try again."),de.error("Validation failed"))}catch{l("An error occurred during validation. Please try again."),de.error("Validation error")}finally{i(!1)}};return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950 text-white",children:[c.jsx("nav",{className:"fixed top-0 left-0 right-0 z-40 bg-gray-900/50 backdrop-blur-xl border-b border-gray-800/50",children:c.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[c.jsx(q0,{className:"w-5 h-5"}),c.jsx("span",{children:"Back to Home"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-500 to-primary-600 rounded-lg flex items-center justify-center",children:c.jsx(NI,{className:"w-5 h-5"})}),c.jsx("span",{className:"text-xl font-bold",children:"MernDesk"})]})]})})}),c.jsx("div",{className:"pt-32 pb-20 px-6",children:c.jsxs("div",{className:"max-w-6xl mx-auto",children:[c.jsxs(Zi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[c.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Activate Pro License"}),c.jsx("p",{className:"text-xl text-gray-400",children:"Complete your payment and activate your Pro features"})]}),c.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[c.jsx(Zi.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:c.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-xl border border-gray-800/50 rounded-2xl p-8",children:[c.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Step 1: Complete Payment"}),c.jsxs("div",{className:"mb-8",children:[c.jsx("div",{className:"bg-white p-6 rounded-xl flex items-center justify-center mb-4",children:c.jsx("div",{className:"w-64 h-64 bg-gray-200 rounded-lg flex flex-col items-center justify-center gap-4",children:c.jsx("div",{className:"w-48 h-48 bg-gray-300 rounded-lg flex items-center justify-center",children:c.jsxs("div",{className:"text-center text-gray-500",children:[c.jsx("div",{className:"text-4xl mb-2",children:""}),c.jsx("div",{className:"text-sm font-semibold",children:"UPI QR Code"}),c.jsx("div",{className:"text-xs mt-1",children:"Scan to Pay 4,999"})]})})})}),c.jsx("p",{className:"text-sm text-gray-400 text-center",children:"Scan this QR code with any UPI app to complete payment"})]}),c.jsxs("form",{onSubmit:u,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Payment Transaction ID"}),c.jsx("input",{type:"text",value:e,onChange:f=>{n(f.target.value),l(""),s(!1)},placeholder:"Enter your UPI transaction ID",className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700/50 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:r||a,required:!0}),o&&c.jsxs(Zi.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-2 flex items-center gap-2 text-red-400 text-sm",children:[c.jsx(Iv,{className:"w-4 h-4"}),o]})]}),c.jsx(i$,{children:a&&c.jsxs(Zi.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"p-4 bg-green-500/10 border border-green-500/30 rounded-xl flex items-center gap-3",children:[c.jsx(_i,{className:"w-5 h-5 text-green-400 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-green-400 font-semibold",children:"License Generated!"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Your license.json file has been downloaded."})]})]})}),c.jsx("button",{type:"submit",disabled:r||a||!e,className:"w-full bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 disabled:from-gray-700 disabled:to-gray-700 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 shadow-lg shadow-primary-500/25 hover:shadow-xl hover:shadow-primary-500/40 flex items-center justify-center gap-2",children:r?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Validating..."]}):a?c.jsxs(c.Fragment,{children:[c.jsx(_i,{className:"w-5 h-5"}),"License Generated"]}):c.jsxs(c.Fragment,{children:["Validate & Download License",c.jsx(sh,{className:"w-5 h-5"})]})})]})]})}),c.jsx(Zi.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:c.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-xl border border-gray-800/50 rounded-2xl p-8",children:[c.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Step 2: How to Activate"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex gap-4",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 bg-primary-500/20 rounded-full flex items-center justify-center border border-primary-500/50",children:c.jsx("span",{className:"text-primary-400 font-bold",children:"1"})})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-white mb-2",children:"Download License File"}),c.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"After payment validation, your license.json file will be automatically downloaded."}),c.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-3 flex items-center gap-2",children:[c.jsx(NI,{className:"w-5 h-5 text-primary-400"}),c.jsx("span",{className:"text-sm text-gray-300 font-mono",children:"license.json"})]})]})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 bg-primary-500/20 rounded-full flex items-center justify-center border border-primary-500/50",children:c.jsx("span",{className:"text-primary-400 font-bold",children:"2"})})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-white mb-2",children:"Locate MernDesk Root Directory"}),c.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Navigate to your MernDesk installation directory."}),c.jsx("div",{className:"bg-gray-800/50 rounded-lg p-3",children:c.jsx("code",{className:"text-sm text-gray-300 font-mono",children:"/path/to/merndesk/"})})]})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 bg-primary-500/20 rounded-full flex items-center justify-center border border-primary-500/50",children:c.jsx("span",{className:"text-primary-400 font-bold",children:"3"})})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-white mb-2",children:"Drag & Drop License File"}),c.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Simply drag the license.json file into the MernDesk root directory."}),c.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border-2 border-dashed border-gray-700",children:c.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 py-4",children:[c.jsx("div",{className:"w-16 h-16 bg-primary-500/10 rounded-xl flex items-center justify-center",children:c.jsx(Tl,{className:"w-8 h-8 text-primary-400"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-sm text-gray-300 font-semibold",children:"Drop license.json here"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"or place it in the root directory"})]})]})})]})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-10 h-10 bg-primary-500/20 rounded-full flex items-center justify-center border border-primary-500/50",children:c.jsx("span",{className:"text-primary-400 font-bold",children:"4"})})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-white mb-2",children:"Restart Application"}),c.jsx("p",{className:"text-gray-400 text-sm",children:"Restart your MernDesk application. Pro features will be automatically activated!"})]})]})]}),c.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-br from-primary-500/10 to-primary-600/10 rounded-xl border border-primary-500/20",children:[c.jsxs("h3",{className:"font-semibold text-white mb-4 flex items-center gap-2",children:[c.jsx(_i,{className:"w-5 h-5 text-primary-400"}),"Activation Complete"]}),c.jsxs("div",{className:"space-y-2 text-sm text-gray-300",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(jw,{className:"w-4 h-4 text-primary-400"}),c.jsx("span",{children:"SLA Automation enabled"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(jw,{className:"w-4 h-4 text-primary-400"}),c.jsx("span",{children:"AI Chatbot activated"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(jw,{className:"w-4 h-4 text-primary-400"}),c.jsx("span",{children:"Advanced analytics unlocked"})]})]})]})]})})]})]})})]})};const lx="160",Rf={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},kf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},G$=0,WN=1,$$=2,ybe=3,q$=0,mS=1,Tv=2,Xo=3,Yc=0,Xa=1,el=2,vbe=2,Nl=0,nh=1,GN=2,$N=3,qN=4,X$=5,Zu=100,Y$=101,K$=102,XN=103,YN=104,Z$=200,J$=201,Q$=202,e7=203,m_=204,g_=205,t7=206,n7=207,r7=208,i7=209,a7=210,s7=211,o7=212,l7=213,c7=214,u7=0,d7=1,f7=2,M0=3,h7=4,p7=5,m7=6,g7=7,cx=0,y7=1,v7=2,Ol=0,x7=1,b7=2,w7=3,Ok=4,_7=5,S7=6,KN="attached",M7="detached",fd=300,Il=301,hd=302,lg=303,T0=304,Cg=306,A0=1e3,Fr=1001,E0=1002,li=1003,y_=1004,xbe=1004,Av=1005,bbe=1005,Gn=1006,Rk=1007,wbe=1007,pd=1008,ZN=1008,zs=1009,kk=1010,jk=1011,gS=1012,yS=1013,Sl=1014,ui=1015,zi=1016,Ik=1017,Dk=1018,sd=1020,T7=1021,Si=1023,A7=1024,E7=1025,od=1026,yh=1027,Lk=1028,Uk=1029,C7=1030,Fk=1031,zk=1033,Vw=33776,Hw=33777,Ww=33778,Gw=33779,JN=35840,QN=35841,eO=35842,tO=35843,Bk=36196,nO=37492,rO=37496,iO=37808,aO=37809,sO=37810,oO=37811,lO=37812,cO=37813,uO=37814,dO=37815,fO=37816,hO=37817,pO=37818,mO=37819,gO=37820,yO=37821,$w=36492,vO=36494,xO=36495,P7=36283,bO=36284,wO=36285,_O=36286,N7=2200,O7=2201,R7=2202,C0=2300,P0=2301,qw=2302,Gf=2400,$f=2401,N0=2402,vS=2500,Vk=2501,_be=0,Sbe=1,Mbe=2,Hk=3e3,ld=3001,k7=3200,j7=3201,Sd=0,I7=1,Ls="",wi="srgb",Hs="srgb-linear",xS="display-p3",ux="display-p3-linear",O0="linear",Ar="srgb",R0="rec709",k0="p3",Tbe=0,jf=7680,Abe=7681,Ebe=7682,Cbe=7683,Pbe=34055,Nbe=34056,Obe=5386,Rbe=512,kbe=513,jbe=514,Ibe=515,Dbe=516,Lbe=517,Ube=518,SO=519,D7=512,L7=513,U7=514,Wk=515,F7=516,z7=517,B7=518,V7=519,j0=35044,Fbe=35048,zbe=35040,Bbe=35045,Vbe=35049,Hbe=35041,Wbe=35046,Gbe=35050,$be=35042,qbe="100",MO="300 es",v_=1035,tl=2e3,cg=2001;let tu=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(n);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}};const _a=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Qz=1234567;const rh=Math.PI/180,ug=180/Math.PI;function Bs(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(_a[t&255]+_a[t>>8&255]+_a[t>>16&255]+_a[t>>24&255]+"-"+_a[e&255]+_a[e>>8&255]+"-"+_a[e>>16&15|64]+_a[e>>24&255]+"-"+_a[n&63|128]+_a[n>>8&255]+"-"+_a[n>>16&255]+_a[n>>24&255]+_a[r&255]+_a[r>>8&255]+_a[r>>16&255]+_a[r>>24&255]).toLowerCase()}function ei(t,e,n){return Math.max(e,Math.min(n,t))}function Gk(t,e){return(t%e+e)%e}function Xbe(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function Ybe(t,e,n){return t!==e?(n-t)/(e-t):0}function Ev(t,e,n){return(1-n)*t+n*e}function Kbe(t,e,n,r){return Ev(t,e,1-Math.exp(-n*r))}function Zbe(t,e=1){return e-Math.abs(Gk(t,e*2)-e)}function Jbe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function Qbe(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function ewe(t,e){return t+Math.floor(Math.random()*(e-t+1))}function twe(t,e){return t+Math.random()*(e-t)}function nwe(t){return t*(.5-Math.random())}function rwe(t){t!==void 0&&(Qz=t);let e=Qz+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function iwe(t){return t*rh}function awe(t){return t*ug}function TO(t){return(t&t-1)===0&&t!==0}function swe(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function x_(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function owe(t,e,n,r,i){const a=Math.cos,s=Math.sin,o=a(n/2),l=s(n/2),u=a((e+r)/2),f=s((e+r)/2),h=a((e-r)/2),m=s((e-r)/2),y=a((r-e)/2),w=s((r-e)/2);switch(i){case"XYX":t.set(o*f,l*h,l*m,o*u);break;case"YZY":t.set(l*m,o*f,l*h,o*u);break;case"ZXZ":t.set(l*h,l*m,o*f,o*u);break;case"XZX":t.set(o*f,l*w,l*y,o*u);break;case"YXY":t.set(l*y,o*f,l*w,o*u);break;case"ZYZ":t.set(l*w,l*y,o*f,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function hs(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Cn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const lwe={DEG2RAD:rh,RAD2DEG:ug,generateUUID:Bs,clamp:ei,euclideanModulo:Gk,mapLinear:Xbe,inverseLerp:Ybe,lerp:Ev,damp:Kbe,pingpong:Zbe,smoothstep:Jbe,smootherstep:Qbe,randInt:ewe,randFloat:twe,randFloatSpread:nwe,seededRandom:rwe,degToRad:iwe,radToDeg:awe,isPowerOfTwo:TO,ceilPowerOfTwo:swe,floorPowerOfTwo:x_,setQuaternionFromProperEuler:owe,normalize:Cn,denormalize:hs};class Ke{constructor(e=0,n=0){Ke.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(ei(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),a=this.x-e.x,s=this.y-e.y;return this.x=a*r-s*i+e.x,this.y=a*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class jn{constructor(e,n,r,i,a,s,o,l,u){jn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,a,s,o,l,u)}set(e,n,r,i,a,s,o,l,u){const f=this.elements;return f[0]=e,f[1]=i,f[2]=o,f[3]=n,f[4]=a,f[5]=l,f[6]=r,f[7]=s,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,a=this.elements,s=r[0],o=r[3],l=r[6],u=r[1],f=r[4],h=r[7],m=r[2],y=r[5],w=r[8],b=i[0],x=i[3],_=i[6],M=i[1],T=i[4],A=i[7],R=i[2],N=i[5],O=i[8];return a[0]=s*b+o*M+l*R,a[3]=s*x+o*T+l*N,a[6]=s*_+o*A+l*O,a[1]=u*b+f*M+h*R,a[4]=u*x+f*T+h*N,a[7]=u*_+f*A+h*O,a[2]=m*b+y*M+w*R,a[5]=m*x+y*T+w*N,a[8]=m*_+y*A+w*O,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],f=e[8];return n*s*f-n*o*u-r*a*f+r*o*l+i*a*u-i*s*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],f=e[8],h=f*s-o*u,m=o*l-f*a,y=u*a-s*l,w=n*h+r*m+i*y;if(w===0)return this.set(0,0,0,0,0,0,0,0,0);const b=1/w;return e[0]=h*b,e[1]=(i*u-f*r)*b,e[2]=(o*r-i*s)*b,e[3]=m*b,e[4]=(f*n-i*l)*b,e[5]=(i*a-o*n)*b,e[6]=y*b,e[7]=(r*l-u*n)*b,e[8]=(s*n-r*a)*b,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,a,s,o){const l=Math.cos(a),u=Math.sin(a);return this.set(r*l,r*u,-r*(l*s+u*o)+s+e,-i*u,i*l,-i*(-u*s+l*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply($2.makeScale(e,n)),this}rotate(e){return this.premultiply($2.makeRotation(-e)),this}translate(e,n){return this.premultiply($2.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const $2=new jn;function H7(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const cwe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function vm(t,e){return new cwe[t](e)}function I0(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function W7(){const t=I0("canvas");return t.style.display="block",t}const eB={};function Cv(t){t in eB||(eB[t]=!0,console.warn(t))}const tB=new jn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),nB=new jn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Ib={[Hs]:{transfer:O0,primaries:R0,toReference:t=>t,fromReference:t=>t},[wi]:{transfer:Ar,primaries:R0,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[ux]:{transfer:O0,primaries:k0,toReference:t=>t.applyMatrix3(nB),fromReference:t=>t.applyMatrix3(tB)},[xS]:{transfer:Ar,primaries:k0,toReference:t=>t.convertSRGBToLinear().applyMatrix3(nB),fromReference:t=>t.applyMatrix3(tB).convertLinearToSRGB()}},uwe=new Set([Hs,ux]),ur={enabled:!0,_workingColorSpace:Hs,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!uwe.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=Ib[e].toReference,i=Ib[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return Ib[t].primaries},getTransfer:function(t){return t===Ls?O0:Ib[t].transfer}};function Cm(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function q2(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Ip;class $k{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Ip===void 0&&(Ip=I0("canvas")),Ip.width=e.width,Ip.height=e.height;const r=Ip.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Ip}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=I0("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),a=i.data;for(let s=0;s<a.length;s++)a[s]=Cm(a[s]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Cm(n[r]/255)*255):n[r]=Cm(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let dwe=0;class qf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:dwe++}),this.uuid=Bs(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?a.push(X2(i[s].image)):a.push(X2(i[s]))}else a=X2(i);r.url=a}return n||(e.images[this.uuid]=r),r}}function X2(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?$k.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let fwe=0;class _r extends tu{constructor(e=_r.DEFAULT_IMAGE,n=_r.DEFAULT_MAPPING,r=Fr,i=Fr,a=Gn,s=pd,o=Si,l=zs,u=_r.DEFAULT_ANISOTROPY,f=Ls){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:fwe++}),this.uuid=Bs(),this.name="",this.source=new qf(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=s,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Ke(0,0),this.repeat=new Ke(1,1),this.center=new Ke(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new jn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof f=="string"?this.colorSpace=f:(Cv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=f===ld?wi:Ls),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==fd)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case A0:e.x=e.x-Math.floor(e.x);break;case Fr:e.x=e.x<0?0:1;break;case E0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case A0:e.y=e.y-Math.floor(e.y);break;case Fr:e.y=e.y<0?0:1;break;case E0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Cv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===wi?ld:Hk}set encoding(e){Cv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===ld?wi:Ls}}_r.DEFAULT_IMAGE=null;_r.DEFAULT_MAPPING=fd;_r.DEFAULT_ANISOTROPY=1;class dr{constructor(e=0,n=0,r=0,i=1){dr.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,a=this.w,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i+s[12]*a,this.y=s[1]*n+s[5]*r+s[9]*i+s[13]*a,this.z=s[2]*n+s[6]*r+s[10]*i+s[14]*a,this.w=s[3]*n+s[7]*r+s[11]*i+s[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,a;const l=e.elements,u=l[0],f=l[4],h=l[8],m=l[1],y=l[5],w=l[9],b=l[2],x=l[6],_=l[10];if(Math.abs(f-m)<.01&&Math.abs(h-b)<.01&&Math.abs(w-x)<.01){if(Math.abs(f+m)<.1&&Math.abs(h+b)<.1&&Math.abs(w+x)<.1&&Math.abs(u+y+_-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const T=(u+1)/2,A=(y+1)/2,R=(_+1)/2,N=(f+m)/4,O=(h+b)/4,k=(w+x)/4;return T>A&&T>R?T<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(T),i=N/r,a=O/r):A>R?A<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(A),r=N/i,a=k/i):R<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(R),r=O/a,i=k/a),this.set(r,i,a,n),this}let M=Math.sqrt((x-w)*(x-w)+(h-b)*(h-b)+(m-f)*(m-f));return Math.abs(M)<.001&&(M=1),this.x=(x-w)/M,this.y=(h-b)/M,this.z=(m-f)/M,this.w=Math.acos((u+y+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class G7 extends tu{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new dr(0,0,e,n),this.scissorTest=!1,this.viewport=new dr(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(Cv("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===ld?wi:Ls),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Gn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new _r(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new qf(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ys extends G7{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class bS extends _r{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=li,this.minFilter=li,this.wrapR=Fr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class hwe extends ys{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new bS(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class qk extends _r{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=li,this.minFilter=li,this.wrapR=Fr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class pwe extends ys{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new qk(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class mwe extends ys{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLMultipleRenderTargets=!0;const a=this.texture;this.texture=[];for(let s=0;s<r;s++)this.texture[s]=a.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,a=this.texture.length;i<a;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class Ca{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,a,s,o){let l=r[i+0],u=r[i+1],f=r[i+2],h=r[i+3];const m=a[s+0],y=a[s+1],w=a[s+2],b=a[s+3];if(o===0){e[n+0]=l,e[n+1]=u,e[n+2]=f,e[n+3]=h;return}if(o===1){e[n+0]=m,e[n+1]=y,e[n+2]=w,e[n+3]=b;return}if(h!==b||l!==m||u!==y||f!==w){let x=1-o;const _=l*m+u*y+f*w+h*b,M=_>=0?1:-1,T=1-_*_;if(T>Number.EPSILON){const R=Math.sqrt(T),N=Math.atan2(R,_*M);x=Math.sin(x*N)/R,o=Math.sin(o*N)/R}const A=o*M;if(l=l*x+m*A,u=u*x+y*A,f=f*x+w*A,h=h*x+b*A,x===1-o){const R=1/Math.sqrt(l*l+u*u+f*f+h*h);l*=R,u*=R,f*=R,h*=R}}e[n]=l,e[n+1]=u,e[n+2]=f,e[n+3]=h}static multiplyQuaternionsFlat(e,n,r,i,a,s){const o=r[i],l=r[i+1],u=r[i+2],f=r[i+3],h=a[s],m=a[s+1],y=a[s+2],w=a[s+3];return e[n]=o*w+f*h+l*y-u*m,e[n+1]=l*w+f*m+u*h-o*y,e[n+2]=u*w+f*y+o*m-l*h,e[n+3]=f*w-o*h-l*m-u*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,a=e._z,s=e._order,o=Math.cos,l=Math.sin,u=o(r/2),f=o(i/2),h=o(a/2),m=l(r/2),y=l(i/2),w=l(a/2);switch(s){case"XYZ":this._x=m*f*h+u*y*w,this._y=u*y*h-m*f*w,this._z=u*f*w+m*y*h,this._w=u*f*h-m*y*w;break;case"YXZ":this._x=m*f*h+u*y*w,this._y=u*y*h-m*f*w,this._z=u*f*w-m*y*h,this._w=u*f*h+m*y*w;break;case"ZXY":this._x=m*f*h-u*y*w,this._y=u*y*h+m*f*w,this._z=u*f*w+m*y*h,this._w=u*f*h-m*y*w;break;case"ZYX":this._x=m*f*h-u*y*w,this._y=u*y*h+m*f*w,this._z=u*f*w-m*y*h,this._w=u*f*h+m*y*w;break;case"YZX":this._x=m*f*h+u*y*w,this._y=u*y*h+m*f*w,this._z=u*f*w-m*y*h,this._w=u*f*h-m*y*w;break;case"XZY":this._x=m*f*h-u*y*w,this._y=u*y*h-m*f*w,this._z=u*f*w+m*y*h,this._w=u*f*h+m*y*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],a=n[8],s=n[1],o=n[5],l=n[9],u=n[2],f=n[6],h=n[10],m=r+o+h;if(m>0){const y=.5/Math.sqrt(m+1);this._w=.25/y,this._x=(f-l)*y,this._y=(a-u)*y,this._z=(s-i)*y}else if(r>o&&r>h){const y=2*Math.sqrt(1+r-o-h);this._w=(f-l)/y,this._x=.25*y,this._y=(i+s)/y,this._z=(a+u)/y}else if(o>h){const y=2*Math.sqrt(1+o-r-h);this._w=(a-u)/y,this._x=(i+s)/y,this._y=.25*y,this._z=(l+f)/y}else{const y=2*Math.sqrt(1+h-r-o);this._w=(s-i)/y,this._x=(a+u)/y,this._y=(l+f)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ei(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,a=e._z,s=e._w,o=n._x,l=n._y,u=n._z,f=n._w;return this._x=r*f+s*o+i*u-a*l,this._y=i*f+s*l+a*o-r*u,this._z=a*f+s*u+r*l-i*o,this._w=s*f-r*o-i*l-a*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,a=this._z,s=this._w;let o=s*e._w+r*e._x+i*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=r,this._y=i,this._z=a,this;const l=1-o*o;if(l<=Number.EPSILON){const y=1-n;return this._w=y*s+n*this._w,this._x=y*r+n*this._x,this._y=y*i+n*this._y,this._z=y*a+n*this._z,this.normalize(),this}const u=Math.sqrt(l),f=Math.atan2(u,o),h=Math.sin((1-n)*f)/u,m=Math.sin(n*f)/u;return this._w=s*h+this._w*m,this._x=r*h+this._x*m,this._y=i*h+this._y*m,this._z=a*h+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(a),r*Math.cos(a),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class le{constructor(e=0,n=0,r=0){le.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(rB.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(rB.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*n+a[3]*r+a[6]*i,this.y=a[1]*n+a[4]*r+a[7]*i,this.z=a[2]*n+a[5]*r+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,a=e.elements,s=1/(a[3]*n+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*n+a[4]*r+a[8]*i+a[12])*s,this.y=(a[1]*n+a[5]*r+a[9]*i+a[13])*s,this.z=(a[2]*n+a[6]*r+a[10]*i+a[14])*s,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,a=e.x,s=e.y,o=e.z,l=e.w,u=2*(s*i-o*r),f=2*(o*n-a*i),h=2*(a*r-s*n);return this.x=n+l*u+s*h-o*f,this.y=r+l*f+o*u-a*h,this.z=i+l*h+a*f-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i,this.y=a[1]*n+a[5]*r+a[9]*i,this.z=a[2]*n+a[6]*r+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,a=e.z,s=n.x,o=n.y,l=n.z;return this.x=i*l-a*o,this.y=a*s-r*l,this.z=r*o-i*s,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Y2.copy(this).projectOnVector(e),this.sub(Y2)}reflect(e){return this.sub(Y2.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(ei(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Y2=new le,rB=new Ca;class Ya{constructor(e=new le(1/0,1/0,1/0),n=new le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Ho.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Ho.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Ho.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const a=r.getAttribute("position");if(n===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,Ho):Ho.fromBufferAttribute(a,s),Ho.applyMatrix4(e.matrixWorld),this.expandByPoint(Ho);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Db.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Db.copy(r.boundingBox)),Db.applyMatrix4(e.matrixWorld),this.union(Db)}const i=e.children;for(let a=0,s=i.length;a<s;a++)this.expandByObject(i[a],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ho),Ho.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(zy),Lb.subVectors(this.max,zy),Dp.subVectors(e.a,zy),Lp.subVectors(e.b,zy),Up.subVectors(e.c,zy),Lu.subVectors(Lp,Dp),Uu.subVectors(Up,Lp),gf.subVectors(Dp,Up);let n=[0,-Lu.z,Lu.y,0,-Uu.z,Uu.y,0,-gf.z,gf.y,Lu.z,0,-Lu.x,Uu.z,0,-Uu.x,gf.z,0,-gf.x,-Lu.y,Lu.x,0,-Uu.y,Uu.x,0,-gf.y,gf.x,0];return!K2(n,Dp,Lp,Up,Lb)||(n=[1,0,0,0,1,0,0,0,1],!K2(n,Dp,Lp,Up,Lb))?!1:(Ub.crossVectors(Lu,Uu),n=[Ub.x,Ub.y,Ub.z],K2(n,Dp,Lp,Up,Lb))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ho).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ho).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Sc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Sc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Sc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Sc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Sc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Sc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Sc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Sc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Sc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Sc=[new le,new le,new le,new le,new le,new le,new le,new le],Ho=new le,Db=new Ya,Dp=new le,Lp=new le,Up=new le,Lu=new le,Uu=new le,gf=new le,zy=new le,Lb=new le,Ub=new le,yf=new le;function K2(t,e,n,r,i){for(let a=0,s=t.length-3;a<=s;a+=3){yf.fromArray(t,a);const o=i.x*Math.abs(yf.x)+i.y*Math.abs(yf.y)+i.z*Math.abs(yf.z),l=e.dot(yf),u=n.dot(yf),f=r.dot(yf);if(Math.max(-Math.max(l,u,f),Math.min(l,u,f))>o)return!1}return!0}const gwe=new Ya,By=new le,Z2=new le;let Pa=class{constructor(e=new le,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):gwe.setFromPoints(e).getCenter(r);let i=0;for(let a=0,s=e.length;a<s;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;By.subVectors(e,this.center);const n=By.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(By,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Z2.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(By.copy(e.center).add(Z2)),this.expandByPoint(By.copy(e.center).sub(Z2))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Mc=new le,J2=new le,Fb=new le,Fu=new le,Q2=new le,zb=new le,eC=new le;class Ah{constructor(e=new le,n=new le(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Mc)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Mc.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Mc.copy(this.origin).addScaledVector(this.direction,n),Mc.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){J2.copy(e).add(n).multiplyScalar(.5),Fb.copy(n).sub(e).normalize(),Fu.copy(this.origin).sub(J2);const a=e.distanceTo(n)*.5,s=-this.direction.dot(Fb),o=Fu.dot(this.direction),l=-Fu.dot(Fb),u=Fu.lengthSq(),f=Math.abs(1-s*s);let h,m,y,w;if(f>0)if(h=s*l-o,m=s*o-l,w=a*f,h>=0)if(m>=-w)if(m<=w){const b=1/f;h*=b,m*=b,y=h*(h+s*m+2*o)+m*(s*h+m+2*l)+u}else m=a,h=Math.max(0,-(s*m+o)),y=-h*h+m*(m+2*l)+u;else m=-a,h=Math.max(0,-(s*m+o)),y=-h*h+m*(m+2*l)+u;else m<=-w?(h=Math.max(0,-(-s*a+o)),m=h>0?-a:Math.min(Math.max(-a,-l),a),y=-h*h+m*(m+2*l)+u):m<=w?(h=0,m=Math.min(Math.max(-a,-l),a),y=m*(m+2*l)+u):(h=Math.max(0,-(s*a+o)),m=h>0?a:Math.min(Math.max(-a,-l),a),y=-h*h+m*(m+2*l)+u);else m=s>0?-a:a,h=Math.max(0,-(s*m+o)),y=-h*h+m*(m+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(J2).addScaledVector(Fb,m),y}intersectSphere(e,n){Mc.subVectors(e.center,this.origin);const r=Mc.dot(this.direction),i=Mc.dot(Mc)-r*r,a=e.radius*e.radius;if(i>a)return null;const s=Math.sqrt(a-i),o=r-s,l=r+s;return l<0?null:o<0?this.at(l,n):this.at(o,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,a,s,o,l;const u=1/this.direction.x,f=1/this.direction.y,h=1/this.direction.z,m=this.origin;return u>=0?(r=(e.min.x-m.x)*u,i=(e.max.x-m.x)*u):(r=(e.max.x-m.x)*u,i=(e.min.x-m.x)*u),f>=0?(a=(e.min.y-m.y)*f,s=(e.max.y-m.y)*f):(a=(e.max.y-m.y)*f,s=(e.min.y-m.y)*f),r>s||a>i||((a>r||isNaN(r))&&(r=a),(s<i||isNaN(i))&&(i=s),h>=0?(o=(e.min.z-m.z)*h,l=(e.max.z-m.z)*h):(o=(e.max.z-m.z)*h,l=(e.min.z-m.z)*h),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Mc)!==null}intersectTriangle(e,n,r,i,a){Q2.subVectors(n,e),zb.subVectors(r,e),eC.crossVectors(Q2,zb);let s=this.direction.dot(eC),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Fu.subVectors(this.origin,e);const l=o*this.direction.dot(zb.crossVectors(Fu,zb));if(l<0)return null;const u=o*this.direction.dot(Q2.cross(Fu));if(u<0||l+u>s)return null;const f=-o*Fu.dot(eC);return f<0?null:this.at(f/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class dn{constructor(e,n,r,i,a,s,o,l,u,f,h,m,y,w,b,x){dn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,a,s,o,l,u,f,h,m,y,w,b,x)}set(e,n,r,i,a,s,o,l,u,f,h,m,y,w,b,x){const _=this.elements;return _[0]=e,_[4]=n,_[8]=r,_[12]=i,_[1]=a,_[5]=s,_[9]=o,_[13]=l,_[2]=u,_[6]=f,_[10]=h,_[14]=m,_[3]=y,_[7]=w,_[11]=b,_[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new dn().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Fp.setFromMatrixColumn(e,0).length(),a=1/Fp.setFromMatrixColumn(e,1).length(),s=1/Fp.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*a,n[5]=r[5]*a,n[6]=r[6]*a,n[7]=0,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,a=e.z,s=Math.cos(r),o=Math.sin(r),l=Math.cos(i),u=Math.sin(i),f=Math.cos(a),h=Math.sin(a);if(e.order==="XYZ"){const m=s*f,y=s*h,w=o*f,b=o*h;n[0]=l*f,n[4]=-l*h,n[8]=u,n[1]=y+w*u,n[5]=m-b*u,n[9]=-o*l,n[2]=b-m*u,n[6]=w+y*u,n[10]=s*l}else if(e.order==="YXZ"){const m=l*f,y=l*h,w=u*f,b=u*h;n[0]=m+b*o,n[4]=w*o-y,n[8]=s*u,n[1]=s*h,n[5]=s*f,n[9]=-o,n[2]=y*o-w,n[6]=b+m*o,n[10]=s*l}else if(e.order==="ZXY"){const m=l*f,y=l*h,w=u*f,b=u*h;n[0]=m-b*o,n[4]=-s*h,n[8]=w+y*o,n[1]=y+w*o,n[5]=s*f,n[9]=b-m*o,n[2]=-s*u,n[6]=o,n[10]=s*l}else if(e.order==="ZYX"){const m=s*f,y=s*h,w=o*f,b=o*h;n[0]=l*f,n[4]=w*u-y,n[8]=m*u+b,n[1]=l*h,n[5]=b*u+m,n[9]=y*u-w,n[2]=-u,n[6]=o*l,n[10]=s*l}else if(e.order==="YZX"){const m=s*l,y=s*u,w=o*l,b=o*u;n[0]=l*f,n[4]=b-m*h,n[8]=w*h+y,n[1]=h,n[5]=s*f,n[9]=-o*f,n[2]=-u*f,n[6]=y*h+w,n[10]=m-b*h}else if(e.order==="XZY"){const m=s*l,y=s*u,w=o*l,b=o*u;n[0]=l*f,n[4]=-h,n[8]=u*f,n[1]=m*h+b,n[5]=s*f,n[9]=y*h-w,n[2]=w*h-y,n[6]=o*f,n[10]=b*h+m}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ywe,e,vwe)}lookAt(e,n,r){const i=this.elements;return Ns.subVectors(e,n),Ns.lengthSq()===0&&(Ns.z=1),Ns.normalize(),zu.crossVectors(r,Ns),zu.lengthSq()===0&&(Math.abs(r.z)===1?Ns.x+=1e-4:Ns.z+=1e-4,Ns.normalize(),zu.crossVectors(r,Ns)),zu.normalize(),Bb.crossVectors(Ns,zu),i[0]=zu.x,i[4]=Bb.x,i[8]=Ns.x,i[1]=zu.y,i[5]=Bb.y,i[9]=Ns.y,i[2]=zu.z,i[6]=Bb.z,i[10]=Ns.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,a=this.elements,s=r[0],o=r[4],l=r[8],u=r[12],f=r[1],h=r[5],m=r[9],y=r[13],w=r[2],b=r[6],x=r[10],_=r[14],M=r[3],T=r[7],A=r[11],R=r[15],N=i[0],O=i[4],k=i[8],C=i[12],I=i[1],F=i[5],V=i[9],W=i[13],G=i[2],J=i[6],ee=i[10],ae=i[14],$=i[3],B=i[7],Y=i[11],X=i[15];return a[0]=s*N+o*I+l*G+u*$,a[4]=s*O+o*F+l*J+u*B,a[8]=s*k+o*V+l*ee+u*Y,a[12]=s*C+o*W+l*ae+u*X,a[1]=f*N+h*I+m*G+y*$,a[5]=f*O+h*F+m*J+y*B,a[9]=f*k+h*V+m*ee+y*Y,a[13]=f*C+h*W+m*ae+y*X,a[2]=w*N+b*I+x*G+_*$,a[6]=w*O+b*F+x*J+_*B,a[10]=w*k+b*V+x*ee+_*Y,a[14]=w*C+b*W+x*ae+_*X,a[3]=M*N+T*I+A*G+R*$,a[7]=M*O+T*F+A*J+R*B,a[11]=M*k+T*V+A*ee+R*Y,a[15]=M*C+T*W+A*ae+R*X,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],a=e[12],s=e[1],o=e[5],l=e[9],u=e[13],f=e[2],h=e[6],m=e[10],y=e[14],w=e[3],b=e[7],x=e[11],_=e[15];return w*(+a*l*h-i*u*h-a*o*m+r*u*m+i*o*y-r*l*y)+b*(+n*l*y-n*u*m+a*s*m-i*s*y+i*u*f-a*l*f)+x*(+n*u*h-n*o*y-a*s*h+r*s*y+a*o*f-r*u*f)+_*(-i*o*f-n*l*h+n*o*m+i*s*h-r*s*m+r*l*f)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],f=e[8],h=e[9],m=e[10],y=e[11],w=e[12],b=e[13],x=e[14],_=e[15],M=h*x*u-b*m*u+b*l*y-o*x*y-h*l*_+o*m*_,T=w*m*u-f*x*u-w*l*y+s*x*y+f*l*_-s*m*_,A=f*b*u-w*h*u+w*o*y-s*b*y-f*o*_+s*h*_,R=w*h*l-f*b*l-w*o*m+s*b*m+f*o*x-s*h*x,N=n*M+r*T+i*A+a*R;if(N===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/N;return e[0]=M*O,e[1]=(b*m*a-h*x*a-b*i*y+r*x*y+h*i*_-r*m*_)*O,e[2]=(o*x*a-b*l*a+b*i*u-r*x*u-o*i*_+r*l*_)*O,e[3]=(h*l*a-o*m*a-h*i*u+r*m*u+o*i*y-r*l*y)*O,e[4]=T*O,e[5]=(f*x*a-w*m*a+w*i*y-n*x*y-f*i*_+n*m*_)*O,e[6]=(w*l*a-s*x*a-w*i*u+n*x*u+s*i*_-n*l*_)*O,e[7]=(s*m*a-f*l*a+f*i*u-n*m*u-s*i*y+n*l*y)*O,e[8]=A*O,e[9]=(w*h*a-f*b*a-w*r*y+n*b*y+f*r*_-n*h*_)*O,e[10]=(s*b*a-w*o*a+w*r*u-n*b*u-s*r*_+n*o*_)*O,e[11]=(f*o*a-s*h*a-f*r*u+n*h*u+s*r*y-n*o*y)*O,e[12]=R*O,e[13]=(f*b*i-w*h*i+w*r*m-n*b*m-f*r*x+n*h*x)*O,e[14]=(w*o*i-s*b*i-w*r*l+n*b*l+s*r*x-n*o*x)*O,e[15]=(s*h*i-f*o*i+f*r*l-n*h*l-s*r*m+n*o*m)*O,this}scale(e){const n=this.elements,r=e.x,i=e.y,a=e.z;return n[0]*=r,n[4]*=i,n[8]*=a,n[1]*=r,n[5]*=i,n[9]*=a,n[2]*=r,n[6]*=i,n[10]*=a,n[3]*=r,n[7]*=i,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),a=1-r,s=e.x,o=e.y,l=e.z,u=a*s,f=a*o;return this.set(u*s+r,u*o-i*l,u*l+i*o,0,u*o+i*l,f*o+r,f*l-i*s,0,u*l-i*o,f*l+i*s,a*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,a,s){return this.set(1,r,a,0,e,1,s,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,a=n._x,s=n._y,o=n._z,l=n._w,u=a+a,f=s+s,h=o+o,m=a*u,y=a*f,w=a*h,b=s*f,x=s*h,_=o*h,M=l*u,T=l*f,A=l*h,R=r.x,N=r.y,O=r.z;return i[0]=(1-(b+_))*R,i[1]=(y+A)*R,i[2]=(w-T)*R,i[3]=0,i[4]=(y-A)*N,i[5]=(1-(m+_))*N,i[6]=(x+M)*N,i[7]=0,i[8]=(w+T)*O,i[9]=(x-M)*O,i[10]=(1-(m+b))*O,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let a=Fp.set(i[0],i[1],i[2]).length();const s=Fp.set(i[4],i[5],i[6]).length(),o=Fp.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],Wo.copy(this);const u=1/a,f=1/s,h=1/o;return Wo.elements[0]*=u,Wo.elements[1]*=u,Wo.elements[2]*=u,Wo.elements[4]*=f,Wo.elements[5]*=f,Wo.elements[6]*=f,Wo.elements[8]*=h,Wo.elements[9]*=h,Wo.elements[10]*=h,n.setFromRotationMatrix(Wo),r.x=a,r.y=s,r.z=o,this}makePerspective(e,n,r,i,a,s,o=tl){const l=this.elements,u=2*a/(n-e),f=2*a/(r-i),h=(n+e)/(n-e),m=(r+i)/(r-i);let y,w;if(o===tl)y=-(s+a)/(s-a),w=-2*s*a/(s-a);else if(o===cg)y=-s/(s-a),w=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=f,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=y,l[14]=w,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,a,s,o=tl){const l=this.elements,u=1/(n-e),f=1/(r-i),h=1/(s-a),m=(n+e)*u,y=(r+i)*f;let w,b;if(o===tl)w=(s+a)*h,b=-2*h;else if(o===cg)w=a*h,b=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-m,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-y,l[2]=0,l[6]=0,l[10]=b,l[14]=-w,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Fp=new le,Wo=new dn,ywe=new le(0,0,0),vwe=new le(1,1,1),zu=new le,Bb=new le,Ns=new le,iB=new dn,aB=new Ca;class dx{constructor(e=0,n=0,r=0,i=dx.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,a=i[0],s=i[4],o=i[8],l=i[1],u=i[5],f=i[9],h=i[2],m=i[6],y=i[10];switch(n){case"XYZ":this._y=Math.asin(ei(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-f,y),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(m,u),this._z=0);break;case"YXZ":this._x=Math.asin(-ei(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(o,y),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0);break;case"ZXY":this._x=Math.asin(ei(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-h,y),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-ei(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(m,y),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(ei(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(o,y));break;case"XZY":this._z=Math.asin(-ei(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(m,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-f,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return iB.makeRotationFromQuaternion(e),this.setFromRotationMatrix(iB,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return aB.setFromEuler(this),this.setFromQuaternion(aB,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}dx.DEFAULT_ORDER="XYZ";class ih{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let xwe=0;const sB=new le,zp=new Ca,Tc=new dn,Vb=new le,Vy=new le,bwe=new le,wwe=new Ca,oB=new le(1,0,0),lB=new le(0,1,0),cB=new le(0,0,1),_we={type:"added"},Swe={type:"removed"};class Xn extends tu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:xwe++}),this.uuid=Bs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Xn.DEFAULT_UP.clone();const e=new le,n=new dx,r=new Ca,i=new le(1,1,1);function a(){r.setFromEuler(n,!1)}function s(){n.setFromQuaternion(r,void 0,!1)}n._onChange(a),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new dn},normalMatrix:{value:new jn}}),this.matrix=new dn,this.matrixWorld=new dn,this.matrixAutoUpdate=Xn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Xn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ih,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return zp.setFromAxisAngle(e,n),this.quaternion.multiply(zp),this}rotateOnWorldAxis(e,n){return zp.setFromAxisAngle(e,n),this.quaternion.premultiply(zp),this}rotateX(e){return this.rotateOnAxis(oB,e)}rotateY(e){return this.rotateOnAxis(lB,e)}rotateZ(e){return this.rotateOnAxis(cB,e)}translateOnAxis(e,n){return sB.copy(e).applyQuaternion(this.quaternion),this.position.add(sB.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(oB,e)}translateY(e){return this.translateOnAxis(lB,e)}translateZ(e){return this.translateOnAxis(cB,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Tc.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?Vb.copy(e):Vb.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Vy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Tc.lookAt(Vy,Vb,this.up):Tc.lookAt(Vb,Vy,this.up),this.quaternion.setFromRotationMatrix(Tc),i&&(Tc.extractRotation(i.matrixWorld),zp.setFromRotationMatrix(Tc),this.quaternion.premultiply(zp.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(_we)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Swe)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Tc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Tc.multiply(e.parent.matrixWorld)),e.applyMatrix4(Tc),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vy,e,bwe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vy,wwe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const a=n[r];(a.matrixWorldAutoUpdate===!0||e===!0)&&a.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let a=0,s=i.length;a<s;a++){const o=i[a];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function a(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,f=l.length;u<f;u++){const h=l[u];a(e.shapes,h)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(a(e.materials,this.material[l]));i.material=o}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(a(e.animations,l))}}if(n){const o=s(e.geometries),l=s(e.materials),u=s(e.textures),f=s(e.images),h=s(e.shapes),m=s(e.skeletons),y=s(e.animations),w=s(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),f.length>0&&(r.images=f),h.length>0&&(r.shapes=h),m.length>0&&(r.skeletons=m),y.length>0&&(r.animations=y),w.length>0&&(r.nodes=w)}return r.object=i,r;function s(o){const l=[];for(const u in o){const f=o[u];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Xn.DEFAULT_UP=new le(0,1,0);Xn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Xn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Go=new le,Ac=new le,tC=new le,Ec=new le,Bp=new le,Vp=new le,uB=new le,nC=new le,rC=new le,iC=new le;let Hb=!1;class fs{constructor(e=new le,n=new le,r=new le){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Go.subVectors(e,n),i.cross(Go);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,n,r,i,a){Go.subVectors(i,n),Ac.subVectors(r,n),tC.subVectors(e,n);const s=Go.dot(Go),o=Go.dot(Ac),l=Go.dot(tC),u=Ac.dot(Ac),f=Ac.dot(tC),h=s*u-o*o;if(h===0)return a.set(0,0,0),null;const m=1/h,y=(u*l-o*f)*m,w=(s*f-o*l)*m;return a.set(1-y-w,w,y)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Ec)===null?!1:Ec.x>=0&&Ec.y>=0&&Ec.x+Ec.y<=1}static getUV(e,n,r,i,a,s,o,l){return Hb===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Hb=!0),this.getInterpolation(e,n,r,i,a,s,o,l)}static getInterpolation(e,n,r,i,a,s,o,l){return this.getBarycoord(e,n,r,i,Ec)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,Ec.x),l.addScaledVector(s,Ec.y),l.addScaledVector(o,Ec.z),l)}static isFrontFacing(e,n,r,i){return Go.subVectors(r,n),Ac.subVectors(e,n),Go.cross(Ac).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Go.subVectors(this.c,this.b),Ac.subVectors(this.a,this.b),Go.cross(Ac).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return fs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return fs.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,a){return Hb===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Hb=!0),fs.getInterpolation(e,this.a,this.b,this.c,n,r,i,a)}getInterpolation(e,n,r,i,a){return fs.getInterpolation(e,this.a,this.b,this.c,n,r,i,a)}containsPoint(e){return fs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return fs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,a=this.c;let s,o;Bp.subVectors(i,r),Vp.subVectors(a,r),nC.subVectors(e,r);const l=Bp.dot(nC),u=Vp.dot(nC);if(l<=0&&u<=0)return n.copy(r);rC.subVectors(e,i);const f=Bp.dot(rC),h=Vp.dot(rC);if(f>=0&&h<=f)return n.copy(i);const m=l*h-f*u;if(m<=0&&l>=0&&f<=0)return s=l/(l-f),n.copy(r).addScaledVector(Bp,s);iC.subVectors(e,a);const y=Bp.dot(iC),w=Vp.dot(iC);if(w>=0&&y<=w)return n.copy(a);const b=y*u-l*w;if(b<=0&&u>=0&&w<=0)return o=u/(u-w),n.copy(r).addScaledVector(Vp,o);const x=f*w-y*h;if(x<=0&&h-f>=0&&y-w>=0)return uB.subVectors(a,i),o=(h-f)/(h-f+(y-w)),n.copy(i).addScaledVector(uB,o);const _=1/(x+b+m);return s=b*_,o=m*_,n.copy(r).addScaledVector(Bp,s).addScaledVector(Vp,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const $7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Bu={h:0,s:0,l:0},Wb={h:0,s:0,l:0};function aC(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class kt{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=wi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ur.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=ur.workingColorSpace){return this.r=e,this.g=n,this.b=r,ur.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=ur.workingColorSpace){if(e=Gk(e,1),n=ei(n,0,1),r=ei(r,0,1),n===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+n):r+n-r*n,s=2*r-a;this.r=aC(s,a,e+1/3),this.g=aC(s,a,e),this.b=aC(s,a,e-1/3)}return ur.toWorkingColorSpace(this,i),this}setStyle(e,n=wi){function r(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(a,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=wi){const r=$7[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Cm(e.r),this.g=Cm(e.g),this.b=Cm(e.b),this}copyLinearToSRGB(e){return this.r=q2(e.r),this.g=q2(e.g),this.b=q2(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=wi){return ur.fromWorkingColorSpace(Sa.copy(this),e),Math.round(ei(Sa.r*255,0,255))*65536+Math.round(ei(Sa.g*255,0,255))*256+Math.round(ei(Sa.b*255,0,255))}getHexString(e=wi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=ur.workingColorSpace){ur.fromWorkingColorSpace(Sa.copy(this),n);const r=Sa.r,i=Sa.g,a=Sa.b,s=Math.max(r,i,a),o=Math.min(r,i,a);let l,u;const f=(o+s)/2;if(o===s)l=0,u=0;else{const h=s-o;switch(u=f<=.5?h/(s+o):h/(2-s-o),s){case r:l=(i-a)/h+(i<a?6:0);break;case i:l=(a-r)/h+2;break;case a:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=f,e}getRGB(e,n=ur.workingColorSpace){return ur.fromWorkingColorSpace(Sa.copy(this),n),e.r=Sa.r,e.g=Sa.g,e.b=Sa.b,e}getStyle(e=wi){ur.fromWorkingColorSpace(Sa.copy(this),e);const n=Sa.r,r=Sa.g,i=Sa.b;return e!==wi?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Bu),this.setHSL(Bu.h+e,Bu.s+n,Bu.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Bu),e.getHSL(Wb);const r=Ev(Bu.h,Wb.h,n),i=Ev(Bu.s,Wb.s,n),a=Ev(Bu.l,Wb.l,n);return this.setHSL(r,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,a=e.elements;return this.r=a[0]*n+a[3]*r+a[6]*i,this.g=a[1]*n+a[4]*r+a[7]*i,this.b=a[2]*n+a[5]*r+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Sa=new kt;kt.NAMES=$7;let Mwe=0;class Oa extends tu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Mwe++}),this.uuid=Bs(),this.name="",this.type="Material",this.blending=nh,this.side=Yc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=m_,this.blendDst=g_,this.blendEquation=Zu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new kt(0,0,0),this.blendAlpha=0,this.depthFunc=M0,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=SO,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=jf,this.stencilZFail=jf,this.stencilZPass=jf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==nh&&(r.blending=this.blending),this.side!==Yc&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==m_&&(r.blendSrc=this.blendSrc),this.blendDst!==g_&&(r.blendDst=this.blendDst),this.blendEquation!==Zu&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==M0&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==SO&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==jf&&(r.stencilFail=this.stencilFail),this.stencilZFail!==jf&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==jf&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(a){const s=[];for(const o in a){const l=a[o];delete l.metadata,s.push(l)}return s}if(n){const a=i(e.textures),s=i(e.images);a.length>0&&(r.textures=a),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=n[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class nu extends Oa{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new kt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=cx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Oc=Twe();function Twe(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,f=0;for(;(u&8388608)===0;)u<<=1,f-=8388608;u&=-8388609,f+=947912704,a[l]=u|f}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:o}}function us(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=ei(t,-65504,65504),Oc.floatView[0]=t;const e=Oc.uint32View[0],n=e>>23&511;return Oc.baseTable[n]+((e&8388607)>>Oc.shiftTable[n])}function uv(t){const e=t>>10;return Oc.uint32View[0]=Oc.mantissaTable[Oc.offsetTable[e]+(t&1023)]+Oc.exponentTable[e],Oc.floatView[0]}const Xf={toHalfFloat:us,fromHalfFloat:uv},vi=new le,Gb=new Ke;class fr{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=j0,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ui,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)Gb.fromBufferAttribute(this,n),Gb.applyMatrix3(e),this.setXY(n,Gb.x,Gb.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)vi.fromBufferAttribute(this,n),vi.applyMatrix3(e),this.setXYZ(n,vi.x,vi.y,vi.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)vi.fromBufferAttribute(this,n),vi.applyMatrix4(e),this.setXYZ(n,vi.x,vi.y,vi.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)vi.fromBufferAttribute(this,n),vi.applyNormalMatrix(e),this.setXYZ(n,vi.x,vi.y,vi.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)vi.fromBufferAttribute(this,n),vi.transformDirection(e),this.setXYZ(n,vi.x,vi.y,vi.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=hs(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Cn(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=hs(n,this.array)),n}setX(e,n){return this.normalized&&(n=Cn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=hs(n,this.array)),n}setY(e,n){return this.normalized&&(n=Cn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=hs(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Cn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=hs(n,this.array)),n}setW(e,n){return this.normalized&&(n=Cn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Cn(n,this.array),r=Cn(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Cn(n,this.array),r=Cn(r,this.array),i=Cn(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,a){return e*=this.itemSize,this.normalized&&(n=Cn(n,this.array),r=Cn(r,this.array),i=Cn(i,this.array),a=Cn(a,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==j0&&(e.usage=this.usage),e}}class Awe extends fr{constructor(e,n,r){super(new Int8Array(e),n,r)}}class Ewe extends fr{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class Cwe extends fr{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class Pwe extends fr{constructor(e,n,r){super(new Int16Array(e),n,r)}}class Xk extends fr{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class Nwe extends fr{constructor(e,n,r){super(new Int32Array(e),n,r)}}class Yk extends fr{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Owe extends fr{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=uv(this.array[e*this.itemSize]);return this.normalized&&(n=hs(n,this.array)),n}setX(e,n){return this.normalized&&(n=Cn(n,this.array)),this.array[e*this.itemSize]=us(n),this}getY(e){let n=uv(this.array[e*this.itemSize+1]);return this.normalized&&(n=hs(n,this.array)),n}setY(e,n){return this.normalized&&(n=Cn(n,this.array)),this.array[e*this.itemSize+1]=us(n),this}getZ(e){let n=uv(this.array[e*this.itemSize+2]);return this.normalized&&(n=hs(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Cn(n,this.array)),this.array[e*this.itemSize+2]=us(n),this}getW(e){let n=uv(this.array[e*this.itemSize+3]);return this.normalized&&(n=hs(n,this.array)),n}setW(e,n){return this.normalized&&(n=Cn(n,this.array)),this.array[e*this.itemSize+3]=us(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Cn(n,this.array),r=Cn(r,this.array)),this.array[e+0]=us(n),this.array[e+1]=us(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Cn(n,this.array),r=Cn(r,this.array),i=Cn(i,this.array)),this.array[e+0]=us(n),this.array[e+1]=us(r),this.array[e+2]=us(i),this}setXYZW(e,n,r,i,a){return e*=this.itemSize,this.normalized&&(n=Cn(n,this.array),r=Cn(r,this.array),i=Cn(i,this.array),a=Cn(a,this.array)),this.array[e+0]=us(n),this.array[e+1]=us(r),this.array[e+2]=us(i),this.array[e+3]=us(a),this}}class Vt extends fr{constructor(e,n,r){super(new Float32Array(e),n,r)}}class Rwe extends fr{constructor(e,n,r){super(new Float64Array(e),n,r)}}let kwe=0;const so=new dn,sC=new Xn,Hp=new le,Os=new Ya,Hy=new Ya,Yi=new le;class In extends tu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:kwe++}),this.uuid=Bs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(H7(e)?Yk:Xk)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new jn().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return so.makeRotationFromQuaternion(e),this.applyMatrix4(so),this}rotateX(e){return so.makeRotationX(e),this.applyMatrix4(so),this}rotateY(e){return so.makeRotationY(e),this.applyMatrix4(so),this}rotateZ(e){return so.makeRotationZ(e),this.applyMatrix4(so),this}translate(e,n,r){return so.makeTranslation(e,n,r),this.applyMatrix4(so),this}scale(e,n,r){return so.makeScale(e,n,r),this.applyMatrix4(so),this}lookAt(e){return sC.lookAt(e),sC.updateMatrix(),this.applyMatrix4(sC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Hp).negate(),this.translate(Hp.x,Hp.y,Hp.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const a=e[r];n.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new Vt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ya);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new le(-1/0,-1/0,-1/0),new le(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const a=n[r];Os.setFromBufferAttribute(a),this.morphTargetsRelative?(Yi.addVectors(this.boundingBox.min,Os.min),this.boundingBox.expandByPoint(Yi),Yi.addVectors(this.boundingBox.max,Os.max),this.boundingBox.expandByPoint(Yi)):(this.boundingBox.expandByPoint(Os.min),this.boundingBox.expandByPoint(Os.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Pa);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new le,1/0);return}if(e){const r=this.boundingSphere.center;if(Os.setFromBufferAttribute(e),n)for(let a=0,s=n.length;a<s;a++){const o=n[a];Hy.setFromBufferAttribute(o),this.morphTargetsRelative?(Yi.addVectors(Os.min,Hy.min),Os.expandByPoint(Yi),Yi.addVectors(Os.max,Hy.max),Os.expandByPoint(Yi)):(Os.expandByPoint(Hy.min),Os.expandByPoint(Hy.max))}Os.getCenter(r);let i=0;for(let a=0,s=e.count;a<s;a++)Yi.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(Yi));if(n)for(let a=0,s=n.length;a<s;a++){const o=n[a],l=this.morphTargetsRelative;for(let u=0,f=o.count;u<f;u++)Yi.fromBufferAttribute(o,u),l&&(Hp.fromBufferAttribute(e,u),Yi.add(Hp)),i=Math.max(i,r.distanceToSquared(Yi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,a=n.normal.array,s=n.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new fr(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,u=[],f=[];for(let I=0;I<o;I++)u[I]=new le,f[I]=new le;const h=new le,m=new le,y=new le,w=new Ke,b=new Ke,x=new Ke,_=new le,M=new le;function T(I,F,V){h.fromArray(i,I*3),m.fromArray(i,F*3),y.fromArray(i,V*3),w.fromArray(s,I*2),b.fromArray(s,F*2),x.fromArray(s,V*2),m.sub(h),y.sub(h),b.sub(w),x.sub(w);const W=1/(b.x*x.y-x.x*b.y);isFinite(W)&&(_.copy(m).multiplyScalar(x.y).addScaledVector(y,-b.y).multiplyScalar(W),M.copy(y).multiplyScalar(b.x).addScaledVector(m,-x.x).multiplyScalar(W),u[I].add(_),u[F].add(_),u[V].add(_),f[I].add(M),f[F].add(M),f[V].add(M))}let A=this.groups;A.length===0&&(A=[{start:0,count:r.length}]);for(let I=0,F=A.length;I<F;++I){const V=A[I],W=V.start,G=V.count;for(let J=W,ee=W+G;J<ee;J+=3)T(r[J+0],r[J+1],r[J+2])}const R=new le,N=new le,O=new le,k=new le;function C(I){O.fromArray(a,I*3),k.copy(O);const F=u[I];R.copy(F),R.sub(O.multiplyScalar(O.dot(F))).normalize(),N.crossVectors(k,F);const W=N.dot(f[I])<0?-1:1;l[I*4]=R.x,l[I*4+1]=R.y,l[I*4+2]=R.z,l[I*4+3]=W}for(let I=0,F=A.length;I<F;++I){const V=A[I],W=V.start,G=V.count;for(let J=W,ee=W+G;J<ee;J+=3)C(r[J+0]),C(r[J+1]),C(r[J+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new fr(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let m=0,y=r.count;m<y;m++)r.setXYZ(m,0,0,0);const i=new le,a=new le,s=new le,o=new le,l=new le,u=new le,f=new le,h=new le;if(e)for(let m=0,y=e.count;m<y;m+=3){const w=e.getX(m+0),b=e.getX(m+1),x=e.getX(m+2);i.fromBufferAttribute(n,w),a.fromBufferAttribute(n,b),s.fromBufferAttribute(n,x),f.subVectors(s,a),h.subVectors(i,a),f.cross(h),o.fromBufferAttribute(r,w),l.fromBufferAttribute(r,b),u.fromBufferAttribute(r,x),o.add(f),l.add(f),u.add(f),r.setXYZ(w,o.x,o.y,o.z),r.setXYZ(b,l.x,l.y,l.z),r.setXYZ(x,u.x,u.y,u.z)}else for(let m=0,y=n.count;m<y;m+=3)i.fromBufferAttribute(n,m+0),a.fromBufferAttribute(n,m+1),s.fromBufferAttribute(n,m+2),f.subVectors(s,a),h.subVectors(i,a),f.cross(h),r.setXYZ(m+0,f.x,f.y,f.z),r.setXYZ(m+1,f.x,f.y,f.z),r.setXYZ(m+2,f.x,f.y,f.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)Yi.fromBufferAttribute(e,n),Yi.normalize(),e.setXYZ(n,Yi.x,Yi.y,Yi.z)}toNonIndexed(){function e(o,l){const u=o.array,f=o.itemSize,h=o.normalized,m=new u.constructor(l.length*f);let y=0,w=0;for(let b=0,x=l.length;b<x;b++){o.isInterleavedBufferAttribute?y=l[b]*o.data.stride+o.offset:y=l[b]*f;for(let _=0;_<f;_++)m[w++]=u[y++]}return new fr(m,f,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new In,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],u=e(l,r);n.setAttribute(o,u)}const a=this.morphAttributes;for(const o in a){const l=[],u=a[o];for(let f=0,h=u.length;f<h;f++){const m=u[f],y=e(m,r);l.push(y)}n.morphAttributes[o]=l}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,l=s.length;o<l;o++){const u=s[o];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let a=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],f=[];for(let h=0,m=u.length;h<m;h++){const y=u[h];f.push(y.toJSON(e.data))}f.length>0&&(i[l]=f,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const u in i){const f=i[u];this.setAttribute(u,f.clone(n))}const a=e.morphAttributes;for(const u in a){const f=[],h=a[u];for(let m=0,y=h.length;m<y;m++)f.push(h[m].clone(n));this.morphAttributes[u]=f}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,f=s.length;u<f;u++){const h=s[u];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const dB=new dn,vf=new Ah,$b=new Pa,fB=new le,Wp=new le,Gp=new le,$p=new le,oC=new le,qb=new le,Xb=new Ke,Yb=new Ke,Kb=new Ke,hB=new le,pB=new le,mB=new le,Zb=new le,Jb=new le;class ti extends Xn{constructor(e=new In,n=new nu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,a=r.morphAttributes.position,s=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(a&&o){qb.set(0,0,0);for(let l=0,u=a.length;l<u;l++){const f=o[l],h=a[l];f!==0&&(oC.fromBufferAttribute(h,e),s?qb.addScaledVector(oC,f):qb.addScaledVector(oC.sub(n),f))}n.add(qb)}return n}raycast(e,n){const r=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),$b.copy(r.boundingSphere),$b.applyMatrix4(a),vf.copy(e.ray).recast(e.near),!($b.containsPoint(vf.origin)===!1&&(vf.intersectSphere($b,fB)===null||vf.origin.distanceToSquared(fB)>(e.far-e.near)**2))&&(dB.copy(a).invert(),vf.copy(e.ray).applyMatrix4(dB),!(r.boundingBox!==null&&vf.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,vf)))}_computeIntersections(e,n,r){let i;const a=this.geometry,s=this.material,o=a.index,l=a.attributes.position,u=a.attributes.uv,f=a.attributes.uv1,h=a.attributes.normal,m=a.groups,y=a.drawRange;if(o!==null)if(Array.isArray(s))for(let w=0,b=m.length;w<b;w++){const x=m[w],_=s[x.materialIndex],M=Math.max(x.start,y.start),T=Math.min(o.count,Math.min(x.start+x.count,y.start+y.count));for(let A=M,R=T;A<R;A+=3){const N=o.getX(A),O=o.getX(A+1),k=o.getX(A+2);i=Qb(this,_,e,r,u,f,h,N,O,k),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=x.materialIndex,n.push(i))}}else{const w=Math.max(0,y.start),b=Math.min(o.count,y.start+y.count);for(let x=w,_=b;x<_;x+=3){const M=o.getX(x),T=o.getX(x+1),A=o.getX(x+2);i=Qb(this,s,e,r,u,f,h,M,T,A),i&&(i.faceIndex=Math.floor(x/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let w=0,b=m.length;w<b;w++){const x=m[w],_=s[x.materialIndex],M=Math.max(x.start,y.start),T=Math.min(l.count,Math.min(x.start+x.count,y.start+y.count));for(let A=M,R=T;A<R;A+=3){const N=A,O=A+1,k=A+2;i=Qb(this,_,e,r,u,f,h,N,O,k),i&&(i.faceIndex=Math.floor(A/3),i.face.materialIndex=x.materialIndex,n.push(i))}}else{const w=Math.max(0,y.start),b=Math.min(l.count,y.start+y.count);for(let x=w,_=b;x<_;x+=3){const M=x,T=x+1,A=x+2;i=Qb(this,s,e,r,u,f,h,M,T,A),i&&(i.faceIndex=Math.floor(x/3),n.push(i))}}}}function jwe(t,e,n,r,i,a,s,o){let l;if(e.side===Xa?l=r.intersectTriangle(s,a,i,!0,o):l=r.intersectTriangle(i,a,s,e.side===Yc,o),l===null)return null;Jb.copy(o),Jb.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(Jb);return u<n.near||u>n.far?null:{distance:u,point:Jb.clone(),object:t}}function Qb(t,e,n,r,i,a,s,o,l,u){t.getVertexPosition(o,Wp),t.getVertexPosition(l,Gp),t.getVertexPosition(u,$p);const f=jwe(t,e,n,r,Wp,Gp,$p,Zb);if(f){i&&(Xb.fromBufferAttribute(i,o),Yb.fromBufferAttribute(i,l),Kb.fromBufferAttribute(i,u),f.uv=fs.getInterpolation(Zb,Wp,Gp,$p,Xb,Yb,Kb,new Ke)),a&&(Xb.fromBufferAttribute(a,o),Yb.fromBufferAttribute(a,l),Kb.fromBufferAttribute(a,u),f.uv1=fs.getInterpolation(Zb,Wp,Gp,$p,Xb,Yb,Kb,new Ke),f.uv2=f.uv1),s&&(hB.fromBufferAttribute(s,o),pB.fromBufferAttribute(s,l),mB.fromBufferAttribute(s,u),f.normal=fs.getInterpolation(Zb,Wp,Gp,$p,hB,pB,mB,new le),f.normal.dot(r.direction)>0&&f.normal.multiplyScalar(-1));const h={a:o,b:l,c:u,normal:new le,materialIndex:0};fs.getNormal(Wp,Gp,$p,h.normal),f.face=h}return f}class Eh extends In{constructor(e=1,n=1,r=1,i=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:a,depthSegments:s};const o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);const l=[],u=[],f=[],h=[];let m=0,y=0;w("z","y","x",-1,-1,r,n,e,s,a,0),w("z","y","x",1,-1,r,n,-e,s,a,1),w("x","z","y",1,1,e,r,n,i,s,2),w("x","z","y",1,-1,e,r,-n,i,s,3),w("x","y","z",1,-1,e,n,r,i,a,4),w("x","y","z",-1,-1,e,n,-r,i,a,5),this.setIndex(l),this.setAttribute("position",new Vt(u,3)),this.setAttribute("normal",new Vt(f,3)),this.setAttribute("uv",new Vt(h,2));function w(b,x,_,M,T,A,R,N,O,k,C){const I=A/O,F=R/k,V=A/2,W=R/2,G=N/2,J=O+1,ee=k+1;let ae=0,$=0;const B=new le;for(let Y=0;Y<ee;Y++){const X=Y*F-W;for(let ne=0;ne<J;ne++){const se=ne*I-V;B[b]=se*M,B[x]=X*T,B[_]=G,u.push(B.x,B.y,B.z),B[b]=0,B[x]=0,B[_]=N>0?1:-1,f.push(B.x,B.y,B.z),h.push(ne/O),h.push(1-Y/k),ae+=1}}for(let Y=0;Y<k;Y++)for(let X=0;X<O;X++){const ne=m+X+J*Y,se=m+X+J*(Y+1),ye=m+(X+1)+J*(Y+1),Ne=m+(X+1)+J*Y;l.push(ne,se,Ne),l.push(se,ye,Ne),$+=6}o.addGroup(y,$,C),y+=$,m+=ae}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Eh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function dg(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Ha(t){const e={};for(let n=0;n<t.length;n++){const r=dg(t[n]);for(const i in r)e[i]=r[i]}return e}function Iwe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function q7(t){return t.getRenderTarget()===null?t.outputColorSpace:ur.workingColorSpace}const X7={clone:dg,merge:Ha};var Dwe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Lwe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ws extends Oa{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Dwe,this.fragmentShader=Lwe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=dg(e.uniforms),this.uniformsGroups=Iwe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?n.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[i]={type:"m4",value:s.toArray()}:n.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class fx extends Xn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new dn,this.projectionMatrix=new dn,this.projectionMatrixInverse=new dn,this.coordinateSystem=tl}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let ci=class extends fx{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=ug*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(rh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return ug*2*Math.atan(Math.tan(rh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,a,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(rh*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,a=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,u=s.fullHeight;a+=s.offsetX*i/l,n-=s.offsetY*r/u,i*=s.width/l,r*=s.height/u}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}};const qp=-90,Xp=1;class Y7 extends Xn{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new ci(qp,Xp,e,n);i.layers=this.layers,this.add(i);const a=new ci(qp,Xp,e,n);a.layers=this.layers,this.add(a);const s=new ci(qp,Xp,e,n);s.layers=this.layers,this.add(s);const o=new ci(qp,Xp,e,n);o.layers=this.layers,this.add(o);const l=new ci(qp,Xp,e,n);l.layers=this.layers,this.add(l);const u=new ci(qp,Xp,e,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,a,s,o,l]=n;for(const u of n)this.remove(u);if(e===tl)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===cg)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of n)this.add(u),u.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,l,u,f]=this.children,h=e.getRenderTarget(),m=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),w=e.xr.enabled;e.xr.enabled=!1;const b=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,a),e.setRenderTarget(r,1,i),e.render(n,s),e.setRenderTarget(r,2,i),e.render(n,o),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,u),r.texture.generateMipmaps=b,e.setRenderTarget(r,5,i),e.render(n,f),e.setRenderTarget(h,m,y),e.xr.enabled=w,r.texture.needsPMREMUpdate=!0}}class hx extends _r{constructor(e,n,r,i,a,s,o,l,u,f){e=e!==void 0?e:[],n=n!==void 0?n:Il,super(e,n,r,i,a,s,o,l,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Kk extends ys{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(Cv("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===ld?wi:Ls),this.texture=new hx(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Gn}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Eh(5,5,5),a=new Ws({name:"CubemapFromEquirect",uniforms:dg(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Xa,blending:Nl});a.uniforms.tEquirect.value=n;const s=new ti(i,a),o=n.minFilter;return n.minFilter===pd&&(n.minFilter=Gn),new Y7(1,10,this).update(e,s),n.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,n,r,i){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,r,i);e.setRenderTarget(a)}}const lC=new le,Uwe=new le,Fwe=new jn;class Nc{constructor(e=new le(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=lC.subVectors(r,n).cross(Uwe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(lC),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:n.copy(e.start).addScaledVector(r,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||Fwe.getNormalMatrix(e),i=this.coplanarPoint(lC).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const xf=new Pa,ew=new le;class px{constructor(e=new Nc,n=new Nc,r=new Nc,i=new Nc,a=new Nc,s=new Nc){this.planes=[e,n,r,i,a,s]}set(e,n,r,i,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(r),o[3].copy(i),o[4].copy(a),o[5].copy(s),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=tl){const r=this.planes,i=e.elements,a=i[0],s=i[1],o=i[2],l=i[3],u=i[4],f=i[5],h=i[6],m=i[7],y=i[8],w=i[9],b=i[10],x=i[11],_=i[12],M=i[13],T=i[14],A=i[15];if(r[0].setComponents(l-a,m-u,x-y,A-_).normalize(),r[1].setComponents(l+a,m+u,x+y,A+_).normalize(),r[2].setComponents(l+s,m+f,x+w,A+M).normalize(),r[3].setComponents(l-s,m-f,x-w,A-M).normalize(),r[4].setComponents(l-o,m-h,x-b,A-T).normalize(),n===tl)r[5].setComponents(l+o,m+h,x+b,A+T).normalize();else if(n===cg)r[5].setComponents(o,h,b,T).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),xf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),xf.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(xf)}intersectsSprite(e){return xf.center.set(0,0,0),xf.radius=.7071067811865476,xf.applyMatrix4(e.matrixWorld),this.intersectsSphere(xf)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(ew.x=i.normal.x>0?e.max.x:e.min.x,ew.y=i.normal.y>0?e.max.y:e.min.y,ew.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(ew)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function K7(){let t=null,e=!1,n=null,r=null;function i(a,s){n(a,s),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){n=a},setContext:function(a){t=a}}}function zwe(t,e){const n=e.isWebGL2,r=new WeakMap;function i(u,f){const h=u.array,m=u.usage,y=h.byteLength,w=t.createBuffer();t.bindBuffer(f,w),t.bufferData(f,h,m),u.onUploadCallback();let b;if(h instanceof Float32Array)b=t.FLOAT;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(n)b=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else b=t.UNSIGNED_SHORT;else if(h instanceof Int16Array)b=t.SHORT;else if(h instanceof Uint32Array)b=t.UNSIGNED_INT;else if(h instanceof Int32Array)b=t.INT;else if(h instanceof Int8Array)b=t.BYTE;else if(h instanceof Uint8Array)b=t.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)b=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:w,type:b,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version,size:y}}function a(u,f,h){const m=f.array,y=f._updateRange,w=f.updateRanges;if(t.bindBuffer(h,u),y.count===-1&&w.length===0&&t.bufferSubData(h,0,m),w.length!==0){for(let b=0,x=w.length;b<x;b++){const _=w[b];n?t.bufferSubData(h,_.start*m.BYTES_PER_ELEMENT,m,_.start,_.count):t.bufferSubData(h,_.start*m.BYTES_PER_ELEMENT,m.subarray(_.start,_.start+_.count))}f.clearUpdateRanges()}y.count!==-1&&(n?t.bufferSubData(h,y.offset*m.BYTES_PER_ELEMENT,m,y.offset,y.count):t.bufferSubData(h,y.offset*m.BYTES_PER_ELEMENT,m.subarray(y.offset,y.offset+y.count)),y.count=-1),f.onUploadCallback()}function s(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);const f=r.get(u);f&&(t.deleteBuffer(f.buffer),r.delete(u))}function l(u,f){if(u.isGLBufferAttribute){const m=r.get(u);(!m||m.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=r.get(u);if(h===void 0)r.set(u,i(u,f));else if(h.version<u.version){if(h.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");a(h.buffer,u,f),h.version=u.version}}return{get:s,remove:o,update:l}}class Ch extends In{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const a=e/2,s=n/2,o=Math.floor(r),l=Math.floor(i),u=o+1,f=l+1,h=e/o,m=n/l,y=[],w=[],b=[],x=[];for(let _=0;_<f;_++){const M=_*m-s;for(let T=0;T<u;T++){const A=T*h-a;w.push(A,-M,0),b.push(0,0,1),x.push(T/o),x.push(1-_/l)}}for(let _=0;_<l;_++)for(let M=0;M<o;M++){const T=M+u*_,A=M+u*(_+1),R=M+1+u*(_+1),N=M+1+u*_;y.push(T,A,N),y.push(A,R,N)}this.setIndex(y),this.setAttribute("position",new Vt(w,3)),this.setAttribute("normal",new Vt(b,3)),this.setAttribute("uv",new Vt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ch(e.width,e.height,e.widthSegments,e.heightSegments)}}var Bwe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Vwe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Hwe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Wwe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Gwe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,$we=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,qwe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Xwe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Ywe=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Kwe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Zwe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Jwe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Qwe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,e1e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,t1e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,n1e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,r1e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,i1e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,a1e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,s1e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,o1e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,l1e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,c1e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,u1e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,d1e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,f1e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,h1e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,p1e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,m1e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,g1e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,y1e="gl_FragColor = linearToOutputTexel( gl_FragColor );",v1e=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,x1e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,b1e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,w1e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,_1e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,S1e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,M1e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,T1e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,A1e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,E1e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,C1e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,P1e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,N1e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,O1e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,R1e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,k1e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,j1e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,I1e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,D1e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,L1e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,U1e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,F1e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,z1e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,B1e=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,V1e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,H1e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,W1e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,G1e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,$1e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,q1e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,X1e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Y1e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,K1e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Z1e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,J1e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Q1e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,e_e=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,t_e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,n_e=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,r_e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,i_e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,a_e=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,s_e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,o_e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,l_e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,c_e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,u_e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,d_e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,f_e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,h_e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,p_e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,m_e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,g_e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,y_e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,v_e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,x_e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,b_e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,w_e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,__e=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,S_e=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,M_e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,T_e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,A_e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,E_e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,C_e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,P_e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,N_e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,O_e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,R_e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,k_e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,j_e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,I_e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,D_e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,L_e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,U_e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,F_e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const z_e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,B_e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,V_e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,H_e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,W_e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,G_e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$_e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,q_e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,X_e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Y_e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,K_e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Z_e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,J_e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Q_e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,eSe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,tSe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nSe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rSe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iSe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,aSe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sSe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,oSe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,lSe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cSe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uSe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,dSe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fSe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hSe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pSe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,mSe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,gSe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ySe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vSe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xSe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,En={alphahash_fragment:Bwe,alphahash_pars_fragment:Vwe,alphamap_fragment:Hwe,alphamap_pars_fragment:Wwe,alphatest_fragment:Gwe,alphatest_pars_fragment:$we,aomap_fragment:qwe,aomap_pars_fragment:Xwe,batching_pars_vertex:Ywe,batching_vertex:Kwe,begin_vertex:Zwe,beginnormal_vertex:Jwe,bsdfs:Qwe,iridescence_fragment:e1e,bumpmap_pars_fragment:t1e,clipping_planes_fragment:n1e,clipping_planes_pars_fragment:r1e,clipping_planes_pars_vertex:i1e,clipping_planes_vertex:a1e,color_fragment:s1e,color_pars_fragment:o1e,color_pars_vertex:l1e,color_vertex:c1e,common:u1e,cube_uv_reflection_fragment:d1e,defaultnormal_vertex:f1e,displacementmap_pars_vertex:h1e,displacementmap_vertex:p1e,emissivemap_fragment:m1e,emissivemap_pars_fragment:g1e,colorspace_fragment:y1e,colorspace_pars_fragment:v1e,envmap_fragment:x1e,envmap_common_pars_fragment:b1e,envmap_pars_fragment:w1e,envmap_pars_vertex:_1e,envmap_physical_pars_fragment:j1e,envmap_vertex:S1e,fog_vertex:M1e,fog_pars_vertex:T1e,fog_fragment:A1e,fog_pars_fragment:E1e,gradientmap_pars_fragment:C1e,lightmap_fragment:P1e,lightmap_pars_fragment:N1e,lights_lambert_fragment:O1e,lights_lambert_pars_fragment:R1e,lights_pars_begin:k1e,lights_toon_fragment:I1e,lights_toon_pars_fragment:D1e,lights_phong_fragment:L1e,lights_phong_pars_fragment:U1e,lights_physical_fragment:F1e,lights_physical_pars_fragment:z1e,lights_fragment_begin:B1e,lights_fragment_maps:V1e,lights_fragment_end:H1e,logdepthbuf_fragment:W1e,logdepthbuf_pars_fragment:G1e,logdepthbuf_pars_vertex:$1e,logdepthbuf_vertex:q1e,map_fragment:X1e,map_pars_fragment:Y1e,map_particle_fragment:K1e,map_particle_pars_fragment:Z1e,metalnessmap_fragment:J1e,metalnessmap_pars_fragment:Q1e,morphcolor_vertex:e_e,morphnormal_vertex:t_e,morphtarget_pars_vertex:n_e,morphtarget_vertex:r_e,normal_fragment_begin:i_e,normal_fragment_maps:a_e,normal_pars_fragment:s_e,normal_pars_vertex:o_e,normal_vertex:l_e,normalmap_pars_fragment:c_e,clearcoat_normal_fragment_begin:u_e,clearcoat_normal_fragment_maps:d_e,clearcoat_pars_fragment:f_e,iridescence_pars_fragment:h_e,opaque_fragment:p_e,packing:m_e,premultiplied_alpha_fragment:g_e,project_vertex:y_e,dithering_fragment:v_e,dithering_pars_fragment:x_e,roughnessmap_fragment:b_e,roughnessmap_pars_fragment:w_e,shadowmap_pars_fragment:__e,shadowmap_pars_vertex:S_e,shadowmap_vertex:M_e,shadowmask_pars_fragment:T_e,skinbase_vertex:A_e,skinning_pars_vertex:E_e,skinning_vertex:C_e,skinnormal_vertex:P_e,specularmap_fragment:N_e,specularmap_pars_fragment:O_e,tonemapping_fragment:R_e,tonemapping_pars_fragment:k_e,transmission_fragment:j_e,transmission_pars_fragment:I_e,uv_pars_fragment:D_e,uv_pars_vertex:L_e,uv_vertex:U_e,worldpos_vertex:F_e,background_vert:z_e,background_frag:B_e,backgroundCube_vert:V_e,backgroundCube_frag:H_e,cube_vert:W_e,cube_frag:G_e,depth_vert:$_e,depth_frag:q_e,distanceRGBA_vert:X_e,distanceRGBA_frag:Y_e,equirect_vert:K_e,equirect_frag:Z_e,linedashed_vert:J_e,linedashed_frag:Q_e,meshbasic_vert:eSe,meshbasic_frag:tSe,meshlambert_vert:nSe,meshlambert_frag:rSe,meshmatcap_vert:iSe,meshmatcap_frag:aSe,meshnormal_vert:sSe,meshnormal_frag:oSe,meshphong_vert:lSe,meshphong_frag:cSe,meshphysical_vert:uSe,meshphysical_frag:dSe,meshtoon_vert:fSe,meshtoon_frag:hSe,points_vert:pSe,points_frag:mSe,shadow_vert:gSe,shadow_frag:ySe,sprite_vert:vSe,sprite_frag:xSe},bt={common:{diffuse:{value:new kt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new jn},alphaMap:{value:null},alphaMapTransform:{value:new jn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new jn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new jn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new jn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new jn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new jn},normalScale:{value:new Ke(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new jn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new jn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new jn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new jn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new kt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new kt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new jn},alphaTest:{value:0},uvTransform:{value:new jn}},sprite:{diffuse:{value:new kt(16777215)},opacity:{value:1},center:{value:new Ke(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new jn},alphaMap:{value:null},alphaMapTransform:{value:new jn},alphaTest:{value:0}}},Zo={basic:{uniforms:Ha([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.fog]),vertexShader:En.meshbasic_vert,fragmentShader:En.meshbasic_frag},lambert:{uniforms:Ha([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,bt.lights,{emissive:{value:new kt(0)}}]),vertexShader:En.meshlambert_vert,fragmentShader:En.meshlambert_frag},phong:{uniforms:Ha([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,bt.lights,{emissive:{value:new kt(0)},specular:{value:new kt(1118481)},shininess:{value:30}}]),vertexShader:En.meshphong_vert,fragmentShader:En.meshphong_frag},standard:{uniforms:Ha([bt.common,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.roughnessmap,bt.metalnessmap,bt.fog,bt.lights,{emissive:{value:new kt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:En.meshphysical_vert,fragmentShader:En.meshphysical_frag},toon:{uniforms:Ha([bt.common,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.gradientmap,bt.fog,bt.lights,{emissive:{value:new kt(0)}}]),vertexShader:En.meshtoon_vert,fragmentShader:En.meshtoon_frag},matcap:{uniforms:Ha([bt.common,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,{matcap:{value:null}}]),vertexShader:En.meshmatcap_vert,fragmentShader:En.meshmatcap_frag},points:{uniforms:Ha([bt.points,bt.fog]),vertexShader:En.points_vert,fragmentShader:En.points_frag},dashed:{uniforms:Ha([bt.common,bt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:En.linedashed_vert,fragmentShader:En.linedashed_frag},depth:{uniforms:Ha([bt.common,bt.displacementmap]),vertexShader:En.depth_vert,fragmentShader:En.depth_frag},normal:{uniforms:Ha([bt.common,bt.bumpmap,bt.normalmap,bt.displacementmap,{opacity:{value:1}}]),vertexShader:En.meshnormal_vert,fragmentShader:En.meshnormal_frag},sprite:{uniforms:Ha([bt.sprite,bt.fog]),vertexShader:En.sprite_vert,fragmentShader:En.sprite_frag},background:{uniforms:{uvTransform:{value:new jn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:En.background_vert,fragmentShader:En.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:En.backgroundCube_vert,fragmentShader:En.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:En.cube_vert,fragmentShader:En.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:En.equirect_vert,fragmentShader:En.equirect_frag},distanceRGBA:{uniforms:Ha([bt.common,bt.displacementmap,{referencePosition:{value:new le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:En.distanceRGBA_vert,fragmentShader:En.distanceRGBA_frag},shadow:{uniforms:Ha([bt.lights,bt.fog,{color:{value:new kt(0)},opacity:{value:1}}]),vertexShader:En.shadow_vert,fragmentShader:En.shadow_frag}};Zo.physical={uniforms:Ha([Zo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new jn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new jn},clearcoatNormalScale:{value:new Ke(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new jn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new jn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new jn},sheen:{value:0},sheenColor:{value:new kt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new jn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new jn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new jn},transmissionSamplerSize:{value:new Ke},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new jn},attenuationDistance:{value:0},attenuationColor:{value:new kt(0)},specularColor:{value:new kt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new jn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new jn},anisotropyVector:{value:new Ke},anisotropyMap:{value:null},anisotropyMapTransform:{value:new jn}}]),vertexShader:En.meshphysical_vert,fragmentShader:En.meshphysical_frag};const tw={r:0,b:0,g:0};function bSe(t,e,n,r,i,a,s){const o=new kt(0);let l=a===!0?0:1,u,f,h=null,m=0,y=null;function w(x,_){let M=!1,T=_.isScene===!0?_.background:null;T&&T.isTexture&&(T=(_.backgroundBlurriness>0?n:e).get(T)),T===null?b(o,l):T&&T.isColor&&(b(T,1),M=!0);const A=t.xr.getEnvironmentBlendMode();A==="additive"?r.buffers.color.setClear(0,0,0,1,s):A==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(t.autoClear||M)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),T&&(T.isCubeTexture||T.mapping===Cg)?(f===void 0&&(f=new ti(new Eh(1,1,1),new Ws({name:"BackgroundCubeMaterial",uniforms:dg(Zo.backgroundCube.uniforms),vertexShader:Zo.backgroundCube.vertexShader,fragmentShader:Zo.backgroundCube.fragmentShader,side:Xa,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(R,N,O){this.matrixWorld.copyPosition(O.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(f)),f.material.uniforms.envMap.value=T,f.material.uniforms.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,f.material.toneMapped=ur.getTransfer(T.colorSpace)!==Ar,(h!==T||m!==T.version||y!==t.toneMapping)&&(f.material.needsUpdate=!0,h=T,m=T.version,y=t.toneMapping),f.layers.enableAll(),x.unshift(f,f.geometry,f.material,0,0,null)):T&&T.isTexture&&(u===void 0&&(u=new ti(new Ch(2,2),new Ws({name:"BackgroundMaterial",uniforms:dg(Zo.background.uniforms),vertexShader:Zo.background.vertexShader,fragmentShader:Zo.background.fragmentShader,side:Yc,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=T,u.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,u.material.toneMapped=ur.getTransfer(T.colorSpace)!==Ar,T.matrixAutoUpdate===!0&&T.updateMatrix(),u.material.uniforms.uvTransform.value.copy(T.matrix),(h!==T||m!==T.version||y!==t.toneMapping)&&(u.material.needsUpdate=!0,h=T,m=T.version,y=t.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null))}function b(x,_){x.getRGB(tw,q7(t)),r.buffers.color.setClear(tw.r,tw.g,tw.b,_,s)}return{getClearColor:function(){return o},setClearColor:function(x,_=1){o.set(x),l=_,b(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,b(o,l)},render:w}}function wSe(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),a=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||a!==null,o={},l=x(null);let u=l,f=!1;function h(G,J,ee,ae,$){let B=!1;if(s){const Y=b(ae,ee,J);u!==Y&&(u=Y,y(u.object)),B=_(G,ae,ee,$),B&&M(G,ae,ee,$)}else{const Y=J.wireframe===!0;(u.geometry!==ae.id||u.program!==ee.id||u.wireframe!==Y)&&(u.geometry=ae.id,u.program=ee.id,u.wireframe=Y,B=!0)}$!==null&&n.update($,t.ELEMENT_ARRAY_BUFFER),(B||f)&&(f=!1,k(G,J,ee,ae),$!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get($).buffer))}function m(){return r.isWebGL2?t.createVertexArray():a.createVertexArrayOES()}function y(G){return r.isWebGL2?t.bindVertexArray(G):a.bindVertexArrayOES(G)}function w(G){return r.isWebGL2?t.deleteVertexArray(G):a.deleteVertexArrayOES(G)}function b(G,J,ee){const ae=ee.wireframe===!0;let $=o[G.id];$===void 0&&($={},o[G.id]=$);let B=$[J.id];B===void 0&&(B={},$[J.id]=B);let Y=B[ae];return Y===void 0&&(Y=x(m()),B[ae]=Y),Y}function x(G){const J=[],ee=[],ae=[];for(let $=0;$<i;$++)J[$]=0,ee[$]=0,ae[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:J,enabledAttributes:ee,attributeDivisors:ae,object:G,attributes:{},index:null}}function _(G,J,ee,ae){const $=u.attributes,B=J.attributes;let Y=0;const X=ee.getAttributes();for(const ne in X)if(X[ne].location>=0){const ye=$[ne];let Ne=B[ne];if(Ne===void 0&&(ne==="instanceMatrix"&&G.instanceMatrix&&(Ne=G.instanceMatrix),ne==="instanceColor"&&G.instanceColor&&(Ne=G.instanceColor)),ye===void 0||ye.attribute!==Ne||Ne&&ye.data!==Ne.data)return!0;Y++}return u.attributesNum!==Y||u.index!==ae}function M(G,J,ee,ae){const $={},B=J.attributes;let Y=0;const X=ee.getAttributes();for(const ne in X)if(X[ne].location>=0){let ye=B[ne];ye===void 0&&(ne==="instanceMatrix"&&G.instanceMatrix&&(ye=G.instanceMatrix),ne==="instanceColor"&&G.instanceColor&&(ye=G.instanceColor));const Ne={};Ne.attribute=ye,ye&&ye.data&&(Ne.data=ye.data),$[ne]=Ne,Y++}u.attributes=$,u.attributesNum=Y,u.index=ae}function T(){const G=u.newAttributes;for(let J=0,ee=G.length;J<ee;J++)G[J]=0}function A(G){R(G,0)}function R(G,J){const ee=u.newAttributes,ae=u.enabledAttributes,$=u.attributeDivisors;ee[G]=1,ae[G]===0&&(t.enableVertexAttribArray(G),ae[G]=1),$[G]!==J&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,J),$[G]=J)}function N(){const G=u.newAttributes,J=u.enabledAttributes;for(let ee=0,ae=J.length;ee<ae;ee++)J[ee]!==G[ee]&&(t.disableVertexAttribArray(ee),J[ee]=0)}function O(G,J,ee,ae,$,B,Y){Y===!0?t.vertexAttribIPointer(G,J,ee,$,B):t.vertexAttribPointer(G,J,ee,ae,$,B)}function k(G,J,ee,ae){if(r.isWebGL2===!1&&(G.isInstancedMesh||ae.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;T();const $=ae.attributes,B=ee.getAttributes(),Y=J.defaultAttributeValues;for(const X in B){const ne=B[X];if(ne.location>=0){let se=$[X];if(se===void 0&&(X==="instanceMatrix"&&G.instanceMatrix&&(se=G.instanceMatrix),X==="instanceColor"&&G.instanceColor&&(se=G.instanceColor)),se!==void 0){const ye=se.normalized,Ne=se.itemSize,Ee=n.get(se);if(Ee===void 0)continue;const Oe=Ee.buffer,$e=Ee.type,Ie=Ee.bytesPerElement,qe=r.isWebGL2===!0&&($e===t.INT||$e===t.UNSIGNED_INT||se.gpuType===yS);if(se.isInterleavedBufferAttribute){const ve=se.data,Z=ve.stride,Pe=se.offset;if(ve.isInstancedInterleavedBuffer){for(let Me=0;Me<ne.locationSize;Me++)R(ne.location+Me,ve.meshPerAttribute);G.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let Me=0;Me<ne.locationSize;Me++)A(ne.location+Me);t.bindBuffer(t.ARRAY_BUFFER,Oe);for(let Me=0;Me<ne.locationSize;Me++)O(ne.location+Me,Ne/ne.locationSize,$e,ye,Z*Ie,(Pe+Ne/ne.locationSize*Me)*Ie,qe)}else{if(se.isInstancedBufferAttribute){for(let ve=0;ve<ne.locationSize;ve++)R(ne.location+ve,se.meshPerAttribute);G.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let ve=0;ve<ne.locationSize;ve++)A(ne.location+ve);t.bindBuffer(t.ARRAY_BUFFER,Oe);for(let ve=0;ve<ne.locationSize;ve++)O(ne.location+ve,Ne/ne.locationSize,$e,ye,Ne*Ie,Ne/ne.locationSize*ve*Ie,qe)}}else if(Y!==void 0){const ye=Y[X];if(ye!==void 0)switch(ye.length){case 2:t.vertexAttrib2fv(ne.location,ye);break;case 3:t.vertexAttrib3fv(ne.location,ye);break;case 4:t.vertexAttrib4fv(ne.location,ye);break;default:t.vertexAttrib1fv(ne.location,ye)}}}}N()}function C(){V();for(const G in o){const J=o[G];for(const ee in J){const ae=J[ee];for(const $ in ae)w(ae[$].object),delete ae[$];delete J[ee]}delete o[G]}}function I(G){if(o[G.id]===void 0)return;const J=o[G.id];for(const ee in J){const ae=J[ee];for(const $ in ae)w(ae[$].object),delete ae[$];delete J[ee]}delete o[G.id]}function F(G){for(const J in o){const ee=o[J];if(ee[G.id]===void 0)continue;const ae=ee[G.id];for(const $ in ae)w(ae[$].object),delete ae[$];delete ee[G.id]}}function V(){W(),f=!0,u!==l&&(u=l,y(u.object))}function W(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:V,resetDefaultState:W,dispose:C,releaseStatesOfGeometry:I,releaseStatesOfProgram:F,initAttributes:T,enableAttribute:A,disableUnusedAttributes:N}}function _Se(t,e,n,r){const i=r.isWebGL2;let a;function s(f){a=f}function o(f,h){t.drawArrays(a,f,h),n.update(h,a,1)}function l(f,h,m){if(m===0)return;let y,w;if(i)y=t,w="drawArraysInstanced";else if(y=e.get("ANGLE_instanced_arrays"),w="drawArraysInstancedANGLE",y===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[w](a,f,h,m),n.update(h,a,m)}function u(f,h,m){if(m===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let w=0;w<m;w++)this.render(f[w],h[w]);else{y.multiDrawArraysWEBGL(a,f,0,h,0,m);let w=0;for(let b=0;b<m;b++)w+=h[b];n.update(w,a,1)}}this.setMode=s,this.render=o,this.renderInstances=l,this.renderMultiDraw=u}function SSe(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(O){if(O==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";O="mediump"}return O==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let o=n.precision!==void 0?n.precision:"highp";const l=a(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const u=s||e.has("WEBGL_draw_buffers"),f=n.logarithmicDepthBuffer===!0,h=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),m=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=t.getParameter(t.MAX_TEXTURE_SIZE),w=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),b=t.getParameter(t.MAX_VERTEX_ATTRIBS),x=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),_=t.getParameter(t.MAX_VARYING_VECTORS),M=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),T=m>0,A=s||e.has("OES_texture_float"),R=T&&A,N=s?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:f,maxTextures:h,maxVertexTextures:m,maxTextureSize:y,maxCubemapSize:w,maxAttributes:b,maxVertexUniforms:x,maxVaryings:_,maxFragmentUniforms:M,vertexTextures:T,floatFragmentTextures:A,floatVertexTextures:R,maxSamples:N}}function MSe(t){const e=this;let n=null,r=0,i=!1,a=!1;const s=new Nc,o=new jn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,m){const y=h.length!==0||m||r!==0||i;return i=m,r=h.length,y},this.beginShadows=function(){a=!0,f(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(h,m){n=f(h,m,0)},this.setState=function(h,m,y){const w=h.clippingPlanes,b=h.clipIntersection,x=h.clipShadows,_=t.get(h);if(!i||w===null||w.length===0||a&&!x)a?f(null):u();else{const M=a?0:r,T=M*4;let A=_.clippingState||null;l.value=A,A=f(w,m,T,y);for(let R=0;R!==T;++R)A[R]=n[R];_.clippingState=A,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=M}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function f(h,m,y,w){const b=h!==null?h.length:0;let x=null;if(b!==0){if(x=l.value,w!==!0||x===null){const _=y+b*4,M=m.matrixWorldInverse;o.getNormalMatrix(M),(x===null||x.length<_)&&(x=new Float32Array(_));for(let T=0,A=y;T!==b;++T,A+=4)s.copy(h[T]).applyMatrix4(M,o),s.normal.toArray(x,A),x[A+3]=s.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,x}}function TSe(t){let e=new WeakMap;function n(s,o){return o===lg?s.mapping=Il:o===T0&&(s.mapping=hd),s}function r(s){if(s&&s.isTexture){const o=s.mapping;if(o===lg||o===T0)if(e.has(s)){const l=e.get(s).texture;return n(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const u=new Kk(l.height/2);return u.fromEquirectangularTexture(t,s),e.set(s,u),s.addEventListener("dispose",i),n(u.texture,s.mapping)}else return null}}return s}function i(s){const o=s.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}class zc extends fx{constructor(e=-1,n=1,r=1,i=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=r-e,s=r+e,o=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,s=a+u*this.view.width,o-=f*this.view.offsetY,l=o-f*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const xm=4,gB=[.125,.215,.35,.446,.526,.582],Uf=20,cC=new zc,yB=new kt;let uC=null,dC=0,fC=0;const If=(1+Math.sqrt(5))/2,Yp=1/If,vB=[new le(1,1,1),new le(-1,1,1),new le(1,1,-1),new le(-1,1,-1),new le(0,If,Yp),new le(0,If,-Yp),new le(Yp,0,If),new le(-Yp,0,If),new le(If,Yp,0),new le(-If,Yp,0)];class AO{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){uC=this._renderer.getRenderTarget(),dC=this._renderer.getActiveCubeFace(),fC=this._renderer.getActiveMipmapLevel(),this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,r,i,a),n>0&&this._blur(a,0,0,n),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=wB(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=bB(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(uC,dC,fC),e.scissorTest=!1,nw(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Il||e.mapping===hd?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),uC=this._renderer.getRenderTarget(),dC=this._renderer.getActiveCubeFace(),fC=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Gn,minFilter:Gn,generateMipmaps:!1,type:zi,format:Si,colorSpace:Hs,depthBuffer:!1},i=xB(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=xB(e,n,r);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ASe(a)),this._blurMaterial=ESe(a,e,n)}return i}_compileMaterial(e){const n=new ti(this._lodPlanes[0],e);this._renderer.compile(n,cC)}_sceneToCubeUV(e,n,r,i){const o=new ci(90,1,n,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,h=f.autoClear,m=f.toneMapping;f.getClearColor(yB),f.toneMapping=Ol,f.autoClear=!1;const y=new nu({name:"PMREM.Background",side:Xa,depthWrite:!1,depthTest:!1}),w=new ti(new Eh,y);let b=!1;const x=e.background;x?x.isColor&&(y.color.copy(x),e.background=null,b=!0):(y.color.copy(yB),b=!0);for(let _=0;_<6;_++){const M=_%3;M===0?(o.up.set(0,l[_],0),o.lookAt(u[_],0,0)):M===1?(o.up.set(0,0,l[_]),o.lookAt(0,u[_],0)):(o.up.set(0,l[_],0),o.lookAt(0,0,u[_]));const T=this._cubeSize;nw(i,M*T,_>2?T:0,T,T),f.setRenderTarget(i),b&&f.render(w,o),f.render(e,o)}w.geometry.dispose(),w.material.dispose(),f.toneMapping=m,f.autoClear=h,e.background=x}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Il||e.mapping===hd;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=wB()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=bB());const a=i?this._cubemapMaterial:this._equirectMaterial,s=new ti(this._lodPlanes[0],a),o=a.uniforms;o.envMap.value=e;const l=this._cubeSize;nw(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(s,cC)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=vB[(i-1)%vB.length];this._blur(e,i-1,i,a,s)}n.autoClear=r}_blur(e,n,r,i,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,n,r,i,"latitudinal",a),this._halfBlur(s,e,r,r,i,"longitudinal",a)}_halfBlur(e,n,r,i,a,s,o){const l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,h=new ti(this._lodPlanes[i],u),m=u.uniforms,y=this._sizeLods[r]-1,w=isFinite(a)?Math.PI/(2*y):2*Math.PI/(2*Uf-1),b=a/w,x=isFinite(a)?1+Math.floor(f*b):Uf;x>Uf&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Uf}`);const _=[];let M=0;for(let O=0;O<Uf;++O){const k=O/b,C=Math.exp(-k*k/2);_.push(C),O===0?M+=C:O<x&&(M+=2*C)}for(let O=0;O<_.length;O++)_[O]=_[O]/M;m.envMap.value=e.texture,m.samples.value=x,m.weights.value=_,m.latitudinal.value=s==="latitudinal",o&&(m.poleAxis.value=o);const{_lodMax:T}=this;m.dTheta.value=w,m.mipInt.value=T-r;const A=this._sizeLods[i],R=3*A*(i>T-xm?i-T+xm:0),N=4*(this._cubeSize-A);nw(n,R,N,3*A,2*A),l.setRenderTarget(n),l.render(h,cC)}}function ASe(t){const e=[],n=[],r=[];let i=t;const a=t-xm+1+gB.length;for(let s=0;s<a;s++){const o=Math.pow(2,i);n.push(o);let l=1/o;s>t-xm?l=gB[s-t+xm-1]:s===0&&(l=0),r.push(l);const u=1/(o-2),f=-u,h=1+u,m=[f,f,h,f,h,h,f,f,h,h,f,h],y=6,w=6,b=3,x=2,_=1,M=new Float32Array(b*w*y),T=new Float32Array(x*w*y),A=new Float32Array(_*w*y);for(let N=0;N<y;N++){const O=N%3*2/3-1,k=N>2?0:-1,C=[O,k,0,O+2/3,k,0,O+2/3,k+1,0,O,k,0,O+2/3,k+1,0,O,k+1,0];M.set(C,b*w*N),T.set(m,x*w*N);const I=[N,N,N,N,N,N];A.set(I,_*w*N)}const R=new In;R.setAttribute("position",new fr(M,b)),R.setAttribute("uv",new fr(T,x)),R.setAttribute("faceIndex",new fr(A,_)),e.push(R),i>xm&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function xB(t,e,n){const r=new ys(t,e,n);return r.texture.mapping=Cg,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function nw(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function ESe(t,e,n){const r=new Float32Array(Uf),i=new le(0,1,0);return new Ws({name:"SphericalGaussianBlur",defines:{n:Uf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Zk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Nl,depthTest:!1,depthWrite:!1})}function bB(){return new Ws({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Zk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Nl,depthTest:!1,depthWrite:!1})}function wB(){return new Ws({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Zk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Nl,depthTest:!1,depthWrite:!1})}function Zk(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function CSe(t){let e=new WeakMap,n=null;function r(o){if(o&&o.isTexture){const l=o.mapping,u=l===lg||l===T0,f=l===Il||l===hd;if(u||f)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let h=e.get(o);return n===null&&(n=new AO(t)),h=u?n.fromEquirectangular(o,h):n.fromCubemap(o,h),e.set(o,h),h.texture}else{if(e.has(o))return e.get(o).texture;{const h=o.image;if(u&&h&&h.height>0||f&&h&&i(h)){n===null&&(n=new AO(t));const m=u?n.fromEquirectangular(o):n.fromCubemap(o);return e.set(o,m),o.addEventListener("dispose",a),m.texture}else return null}}}return o}function i(o){let l=0;const u=6;for(let f=0;f<u;f++)o[f]!==void 0&&l++;return l===u}function a(o){const l=o.target;l.removeEventListener("dispose",a);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:s}}function PSe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function NSe(t,e,n,r){const i={},a=new WeakMap;function s(h){const m=h.target;m.index!==null&&e.remove(m.index);for(const w in m.attributes)e.remove(m.attributes[w]);for(const w in m.morphAttributes){const b=m.morphAttributes[w];for(let x=0,_=b.length;x<_;x++)e.remove(b[x])}m.removeEventListener("dispose",s),delete i[m.id];const y=a.get(m);y&&(e.remove(y),a.delete(m)),r.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,n.memory.geometries--}function o(h,m){return i[m.id]===!0||(m.addEventListener("dispose",s),i[m.id]=!0,n.memory.geometries++),m}function l(h){const m=h.attributes;for(const w in m)e.update(m[w],t.ARRAY_BUFFER);const y=h.morphAttributes;for(const w in y){const b=y[w];for(let x=0,_=b.length;x<_;x++)e.update(b[x],t.ARRAY_BUFFER)}}function u(h){const m=[],y=h.index,w=h.attributes.position;let b=0;if(y!==null){const M=y.array;b=y.version;for(let T=0,A=M.length;T<A;T+=3){const R=M[T+0],N=M[T+1],O=M[T+2];m.push(R,N,N,O,O,R)}}else if(w!==void 0){const M=w.array;b=w.version;for(let T=0,A=M.length/3-1;T<A;T+=3){const R=T+0,N=T+1,O=T+2;m.push(R,N,N,O,O,R)}}else return;const x=new(H7(m)?Yk:Xk)(m,1);x.version=b;const _=a.get(h);_&&e.remove(_),a.set(h,x)}function f(h){const m=a.get(h);if(m){const y=h.index;y!==null&&m.version<y.version&&u(h)}else u(h);return a.get(h)}return{get:o,update:l,getWireframeAttribute:f}}function OSe(t,e,n,r){const i=r.isWebGL2;let a;function s(y){a=y}let o,l;function u(y){o=y.type,l=y.bytesPerElement}function f(y,w){t.drawElements(a,w,o,y*l),n.update(w,a,1)}function h(y,w,b){if(b===0)return;let x,_;if(i)x=t,_="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[_](a,w,o,y*l,b),n.update(w,a,b)}function m(y,w,b){if(b===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let _=0;_<b;_++)this.render(y[_]/l,w[_]);else{x.multiDrawElementsWEBGL(a,w,0,o,y,0,b);let _=0;for(let M=0;M<b;M++)_+=w[M];n.update(_,a,1)}}this.setMode=s,this.setIndex=u,this.render=f,this.renderInstances=h,this.renderMultiDraw=m}function RSe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,s,o){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=o*(a/3);break;case t.LINES:n.lines+=o*(a/2);break;case t.LINE_STRIP:n.lines+=o*(a-1);break;case t.LINE_LOOP:n.lines+=o*a;break;case t.POINTS:n.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function kSe(t,e){return t[0]-e[0]}function jSe(t,e){return Math.abs(e[1])-Math.abs(t[1])}function ISe(t,e,n){const r={},i=new Float32Array(8),a=new WeakMap,s=new dr,o=[];for(let u=0;u<8;u++)o[u]=[u,0];function l(u,f,h){const m=u.morphTargetInfluences;if(e.isWebGL2===!0){const w=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,b=w!==void 0?w.length:0;let x=a.get(f);if(x===void 0||x.count!==b){let J=function(){W.dispose(),a.delete(f),f.removeEventListener("dispose",J)};var y=J;x!==void 0&&x.texture.dispose();const T=f.morphAttributes.position!==void 0,A=f.morphAttributes.normal!==void 0,R=f.morphAttributes.color!==void 0,N=f.morphAttributes.position||[],O=f.morphAttributes.normal||[],k=f.morphAttributes.color||[];let C=0;T===!0&&(C=1),A===!0&&(C=2),R===!0&&(C=3);let I=f.attributes.position.count*C,F=1;I>e.maxTextureSize&&(F=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const V=new Float32Array(I*F*4*b),W=new bS(V,I,F,b);W.type=ui,W.needsUpdate=!0;const G=C*4;for(let ee=0;ee<b;ee++){const ae=N[ee],$=O[ee],B=k[ee],Y=I*F*4*ee;for(let X=0;X<ae.count;X++){const ne=X*G;T===!0&&(s.fromBufferAttribute(ae,X),V[Y+ne+0]=s.x,V[Y+ne+1]=s.y,V[Y+ne+2]=s.z,V[Y+ne+3]=0),A===!0&&(s.fromBufferAttribute($,X),V[Y+ne+4]=s.x,V[Y+ne+5]=s.y,V[Y+ne+6]=s.z,V[Y+ne+7]=0),R===!0&&(s.fromBufferAttribute(B,X),V[Y+ne+8]=s.x,V[Y+ne+9]=s.y,V[Y+ne+10]=s.z,V[Y+ne+11]=B.itemSize===4?s.w:1)}}x={count:b,texture:W,size:new Ke(I,F)},a.set(f,x),f.addEventListener("dispose",J)}let _=0;for(let T=0;T<m.length;T++)_+=m[T];const M=f.morphTargetsRelative?1:1-_;h.getUniforms().setValue(t,"morphTargetBaseInfluence",M),h.getUniforms().setValue(t,"morphTargetInfluences",m),h.getUniforms().setValue(t,"morphTargetsTexture",x.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",x.size)}else{const w=m===void 0?0:m.length;let b=r[f.id];if(b===void 0||b.length!==w){b=[];for(let A=0;A<w;A++)b[A]=[A,0];r[f.id]=b}for(let A=0;A<w;A++){const R=b[A];R[0]=A,R[1]=m[A]}b.sort(jSe);for(let A=0;A<8;A++)A<w&&b[A][1]?(o[A][0]=b[A][0],o[A][1]=b[A][1]):(o[A][0]=Number.MAX_SAFE_INTEGER,o[A][1]=0);o.sort(kSe);const x=f.morphAttributes.position,_=f.morphAttributes.normal;let M=0;for(let A=0;A<8;A++){const R=o[A],N=R[0],O=R[1];N!==Number.MAX_SAFE_INTEGER&&O?(x&&f.getAttribute("morphTarget"+A)!==x[N]&&f.setAttribute("morphTarget"+A,x[N]),_&&f.getAttribute("morphNormal"+A)!==_[N]&&f.setAttribute("morphNormal"+A,_[N]),i[A]=O,M+=O):(x&&f.hasAttribute("morphTarget"+A)===!0&&f.deleteAttribute("morphTarget"+A),_&&f.hasAttribute("morphNormal"+A)===!0&&f.deleteAttribute("morphNormal"+A),i[A]=0)}const T=f.morphTargetsRelative?1:1-M;h.getUniforms().setValue(t,"morphTargetBaseInfluence",T),h.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function DSe(t,e,n,r){let i=new WeakMap;function a(l){const u=r.render.frame,f=l.geometry,h=e.get(l,f);if(i.get(h)!==u&&(e.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==u&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const m=l.skeleton;i.get(m)!==u&&(m.update(),i.set(m,u))}return h}function s(){i=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:a,dispose:s}}class wS extends _r{constructor(e,n,r,i,a,s,o,l,u,f){if(f=f!==void 0?f:od,f!==od&&f!==yh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&f===od&&(r=Sl),r===void 0&&f===yh&&(r=sd),super(null,i,a,s,o,l,f,r,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=o!==void 0?o:li,this.minFilter=l!==void 0?l:li,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const Z7=new _r,J7=new wS(1,1);J7.compareFunction=Wk;const Q7=new bS,e9=new qk,t9=new hx,_B=[],SB=[],MB=new Float32Array(16),TB=new Float32Array(9),AB=new Float32Array(4);function Pg(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let a=_B[i];if(a===void 0&&(a=new Float32Array(i),_B[i]=a),e!==0){r.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=n,t[s].toArray(a,o)}return a}function Bi(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Vi(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function _S(t,e){let n=SB[e];n===void 0&&(n=new Int32Array(e),SB[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function LSe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function USe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Bi(n,e))return;t.uniform2fv(this.addr,e),Vi(n,e)}}function FSe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Bi(n,e))return;t.uniform3fv(this.addr,e),Vi(n,e)}}function zSe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Bi(n,e))return;t.uniform4fv(this.addr,e),Vi(n,e)}}function BSe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Bi(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Vi(n,e)}else{if(Bi(n,r))return;AB.set(r),t.uniformMatrix2fv(this.addr,!1,AB),Vi(n,r)}}function VSe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Bi(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Vi(n,e)}else{if(Bi(n,r))return;TB.set(r),t.uniformMatrix3fv(this.addr,!1,TB),Vi(n,r)}}function HSe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Bi(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Vi(n,e)}else{if(Bi(n,r))return;MB.set(r),t.uniformMatrix4fv(this.addr,!1,MB),Vi(n,r)}}function WSe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function GSe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Bi(n,e))return;t.uniform2iv(this.addr,e),Vi(n,e)}}function $Se(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Bi(n,e))return;t.uniform3iv(this.addr,e),Vi(n,e)}}function qSe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Bi(n,e))return;t.uniform4iv(this.addr,e),Vi(n,e)}}function XSe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function YSe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Bi(n,e))return;t.uniform2uiv(this.addr,e),Vi(n,e)}}function KSe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Bi(n,e))return;t.uniform3uiv(this.addr,e),Vi(n,e)}}function ZSe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Bi(n,e))return;t.uniform4uiv(this.addr,e),Vi(n,e)}}function JSe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const a=this.type===t.SAMPLER_2D_SHADOW?J7:Z7;n.setTexture2D(e||a,i)}function QSe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||e9,i)}function eMe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||t9,i)}function tMe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Q7,i)}function nMe(t){switch(t){case 5126:return LSe;case 35664:return USe;case 35665:return FSe;case 35666:return zSe;case 35674:return BSe;case 35675:return VSe;case 35676:return HSe;case 5124:case 35670:return WSe;case 35667:case 35671:return GSe;case 35668:case 35672:return $Se;case 35669:case 35673:return qSe;case 5125:return XSe;case 36294:return YSe;case 36295:return KSe;case 36296:return ZSe;case 35678:case 36198:case 36298:case 36306:case 35682:return JSe;case 35679:case 36299:case 36307:return QSe;case 35680:case 36300:case 36308:case 36293:return eMe;case 36289:case 36303:case 36311:case 36292:return tMe}}function rMe(t,e){t.uniform1fv(this.addr,e)}function iMe(t,e){const n=Pg(e,this.size,2);t.uniform2fv(this.addr,n)}function aMe(t,e){const n=Pg(e,this.size,3);t.uniform3fv(this.addr,n)}function sMe(t,e){const n=Pg(e,this.size,4);t.uniform4fv(this.addr,n)}function oMe(t,e){const n=Pg(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function lMe(t,e){const n=Pg(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function cMe(t,e){const n=Pg(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function uMe(t,e){t.uniform1iv(this.addr,e)}function dMe(t,e){t.uniform2iv(this.addr,e)}function fMe(t,e){t.uniform3iv(this.addr,e)}function hMe(t,e){t.uniform4iv(this.addr,e)}function pMe(t,e){t.uniform1uiv(this.addr,e)}function mMe(t,e){t.uniform2uiv(this.addr,e)}function gMe(t,e){t.uniform3uiv(this.addr,e)}function yMe(t,e){t.uniform4uiv(this.addr,e)}function vMe(t,e,n){const r=this.cache,i=e.length,a=_S(n,i);Bi(r,a)||(t.uniform1iv(this.addr,a),Vi(r,a));for(let s=0;s!==i;++s)n.setTexture2D(e[s]||Z7,a[s])}function xMe(t,e,n){const r=this.cache,i=e.length,a=_S(n,i);Bi(r,a)||(t.uniform1iv(this.addr,a),Vi(r,a));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||e9,a[s])}function bMe(t,e,n){const r=this.cache,i=e.length,a=_S(n,i);Bi(r,a)||(t.uniform1iv(this.addr,a),Vi(r,a));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||t9,a[s])}function wMe(t,e,n){const r=this.cache,i=e.length,a=_S(n,i);Bi(r,a)||(t.uniform1iv(this.addr,a),Vi(r,a));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||Q7,a[s])}function _Me(t){switch(t){case 5126:return rMe;case 35664:return iMe;case 35665:return aMe;case 35666:return sMe;case 35674:return oMe;case 35675:return lMe;case 35676:return cMe;case 5124:case 35670:return uMe;case 35667:case 35671:return dMe;case 35668:case 35672:return fMe;case 35669:case 35673:return hMe;case 5125:return pMe;case 36294:return mMe;case 36295:return gMe;case 36296:return yMe;case 35678:case 36198:case 36298:case 36306:case 35682:return vMe;case 35679:case 36299:case 36307:return xMe;case 35680:case 36300:case 36308:case 36293:return bMe;case 36289:case 36303:case 36311:case 36292:return wMe}}class SMe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=nMe(n.type)}}class MMe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=_Me(n.type)}}class TMe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let a=0,s=i.length;a!==s;++a){const o=i[a];o.setValue(e,n[o.id],r)}}}const hC=/(\w+)(\])?(\[|\.)?/g;function EB(t,e){t.seq.push(e),t.map[e.id]=e}function AMe(t,e,n){const r=t.name,i=r.length;for(hC.lastIndex=0;;){const a=hC.exec(r),s=hC.lastIndex;let o=a[1];const l=a[2]==="]",u=a[3];if(l&&(o=o|0),u===void 0||u==="["&&s+2===i){EB(n,u===void 0?new SMe(o,t,e):new MMe(o,t,e));break}else{let h=n.map[o];h===void 0&&(h=new TMe(o),EB(n,h)),n=h}}}class Xw{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const a=e.getActiveUniform(n,i),s=e.getUniformLocation(n,a.name);AMe(a,s,this)}}setValue(e,n,r,i){const a=this.map[n];a!==void 0&&a.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let a=0,s=n.length;a!==s;++a){const o=n[a],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,a=e.length;i!==a;++i){const s=e[i];s.id in n&&r.push(s)}return r}}function CB(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const EMe=37297;let CMe=0;function PMe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let s=i;s<a;s++){const o=s+1;r.push(`${o===e?">":" "} ${o}: ${n[s]}`)}return r.join(`
`)}function NMe(t){const e=ur.getPrimaries(ur.workingColorSpace),n=ur.getPrimaries(t);let r;switch(e===n?r="":e===k0&&n===R0?r="LinearDisplayP3ToLinearSRGB":e===R0&&n===k0&&(r="LinearSRGBToLinearDisplayP3"),t){case Hs:case ux:return[r,"LinearTransferOETF"];case wi:case xS:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function PB(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const s=parseInt(a[1]);return n.toUpperCase()+`

`+i+`

`+PMe(t.getShaderSource(e),s)}else return i}function OMe(t,e){const n=NMe(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function RMe(t,e){let n;switch(e){case x7:n="Linear";break;case b7:n="Reinhard";break;case w7:n="OptimizedCineon";break;case Ok:n="ACESFilmic";break;case S7:n="AgX";break;case _7:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function kMe(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(bm).join(`
`)}function jMe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(bm).join(`
`)}function IMe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function DMe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const a=t.getActiveAttrib(e,i),s=a.name;let o=1;a.type===t.FLOAT_MAT2&&(o=2),a.type===t.FLOAT_MAT3&&(o=3),a.type===t.FLOAT_MAT4&&(o=4),n[s]={type:a.type,location:t.getAttribLocation(e,s),locationSize:o}}return n}function bm(t){return t!==""}function NB(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function OB(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const LMe=/^[ \t]*#include +<([\w\d./]+)>/gm;function EO(t){return t.replace(LMe,FMe)}const UMe=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function FMe(t,e){let n=En[e];if(n===void 0){const r=UMe.get(e);if(r!==void 0)n=En[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return EO(n)}const zMe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function RB(t){return t.replace(zMe,BMe)}function BMe(t,e,n,r){let i="";for(let a=parseInt(e);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function kB(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function VMe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===mS?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Tv?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Xo&&(e="SHADOWMAP_TYPE_VSM"),e}function HMe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Il:case hd:e="ENVMAP_TYPE_CUBE";break;case Cg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function WMe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case hd:e="ENVMAP_MODE_REFRACTION";break}return e}function GMe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case cx:e="ENVMAP_BLENDING_MULTIPLY";break;case y7:e="ENVMAP_BLENDING_MIX";break;case v7:e="ENVMAP_BLENDING_ADD";break}return e}function $Me(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}function qMe(t,e,n,r){const i=t.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const l=VMe(n),u=HMe(n),f=WMe(n),h=GMe(n),m=$Me(n),y=n.isWebGL2?"":kMe(n),w=jMe(n),b=IMe(a),x=i.createProgram();let _,M,T=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(_=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(bm).join(`
`),_.length>0&&(_+=`
`),M=[y,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b].filter(bm).join(`
`),M.length>0&&(M+=`
`)):(_=[kB(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(bm).join(`
`),M=[y,kB(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,b,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",n.envMap?"#define "+h:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Ol?"#define TONE_MAPPING":"",n.toneMapping!==Ol?En.tonemapping_pars_fragment:"",n.toneMapping!==Ol?RMe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",En.colorspace_pars_fragment,OMe("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(bm).join(`
`)),s=EO(s),s=NB(s,n),s=OB(s,n),o=EO(o),o=NB(o,n),o=OB(o,n),s=RB(s),o=RB(o),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(T=`#version 300 es
`,_=[w,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,M=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===MO?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===MO?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const A=T+_+s,R=T+M+o,N=CB(i,i.VERTEX_SHADER,A),O=CB(i,i.FRAGMENT_SHADER,R);i.attachShader(x,N),i.attachShader(x,O),n.index0AttributeName!==void 0?i.bindAttribLocation(x,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(x,0,"position"),i.linkProgram(x);function k(V){if(t.debug.checkShaderErrors){const W=i.getProgramInfoLog(x).trim(),G=i.getShaderInfoLog(N).trim(),J=i.getShaderInfoLog(O).trim();let ee=!0,ae=!0;if(i.getProgramParameter(x,i.LINK_STATUS)===!1)if(ee=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,x,N,O);else{const $=PB(i,N,"vertex"),B=PB(i,O,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(x,i.VALIDATE_STATUS)+`

Program Info Log: `+W+`
`+$+`
`+B)}else W!==""?console.warn("THREE.WebGLProgram: Program Info Log:",W):(G===""||J==="")&&(ae=!1);ae&&(V.diagnostics={runnable:ee,programLog:W,vertexShader:{log:G,prefix:_},fragmentShader:{log:J,prefix:M}})}i.deleteShader(N),i.deleteShader(O),C=new Xw(i,x),I=DMe(i,x)}let C;this.getUniforms=function(){return C===void 0&&k(this),C};let I;this.getAttributes=function(){return I===void 0&&k(this),I};let F=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return F===!1&&(F=i.getProgramParameter(x,EMe)),F},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(x),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=CMe++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=N,this.fragmentShader=O,this}let XMe=0;class YMe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),a=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new KMe(e),n.set(e,r)),r}}class KMe{constructor(e){this.id=XMe++,this.code=e,this.usedTimes=0}}function ZMe(t,e,n,r,i,a,s){const o=new ih,l=new YMe,u=[],f=i.isWebGL2,h=i.logarithmicDepthBuffer,m=i.vertexTextures;let y=i.precision;const w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(C){return C===0?"uv":`uv${C}`}function x(C,I,F,V,W){const G=V.fog,J=W.geometry,ee=C.isMeshStandardMaterial?V.environment:null,ae=(C.isMeshStandardMaterial?n:e).get(C.envMap||ee),$=ae&&ae.mapping===Cg?ae.image.height:null,B=w[C.type];C.precision!==null&&(y=i.getMaxPrecision(C.precision),y!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",y,"instead."));const Y=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,X=Y!==void 0?Y.length:0;let ne=0;J.morphAttributes.position!==void 0&&(ne=1),J.morphAttributes.normal!==void 0&&(ne=2),J.morphAttributes.color!==void 0&&(ne=3);let se,ye,Ne,Ee;if(B){const ir=Zo[B];se=ir.vertexShader,ye=ir.fragmentShader}else se=C.vertexShader,ye=C.fragmentShader,l.update(C),Ne=l.getVertexShaderID(C),Ee=l.getFragmentShaderID(C);const Oe=t.getRenderTarget(),$e=W.isInstancedMesh===!0,Ie=W.isBatchedMesh===!0,qe=!!C.map,ve=!!C.matcap,Z=!!ae,Pe=!!C.aoMap,Me=!!C.lightMap,We=!!C.bumpMap,ke=!!C.normalMap,ct=!!C.displacementMap,ot=!!C.emissiveMap,ie=!!C.metalnessMap,te=!!C.roughnessMap,Ae=C.anisotropy>0,Je=C.clearcoat>0,Qe=C.iridescence>0,Ze=C.sheen>0,At=C.transmission>0,gt=Ae&&!!C.anisotropyMap,St=Je&&!!C.clearcoatMap,Ft=Je&&!!C.clearcoatNormalMap,Yt=Je&&!!C.clearcoatRoughnessMap,tt=Qe&&!!C.iridescenceMap,yn=Qe&&!!C.iridescenceThicknessMap,gn=Ze&&!!C.sheenColorMap,$t=Ze&&!!C.sheenRoughnessMap,Mt=!!C.specularMap,Et=!!C.specularColorMap,me=!!C.specularIntensityMap,Ge=At&&!!C.transmissionMap,dt=At&&!!C.thicknessMap,wt=!!C.gradientMap,Ce=!!C.alphaMap,ge=C.alphaTest>0,ut=!!C.alphaHash,vt=!!C.extensions,Gt=!!J.attributes.uv1,It=!!J.attributes.uv2,wn=!!J.attributes.uv3;let On=Ol;return C.toneMapped&&(Oe===null||Oe.isXRRenderTarget===!0)&&(On=t.toneMapping),{isWebGL2:f,shaderID:B,shaderType:C.type,shaderName:C.name,vertexShader:se,fragmentShader:ye,defines:C.defines,customVertexShaderID:Ne,customFragmentShaderID:Ee,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:y,batching:Ie,instancing:$e,instancingColor:$e&&W.instanceColor!==null,supportsVertexTextures:m,outputColorSpace:Oe===null?t.outputColorSpace:Oe.isXRRenderTarget===!0?Oe.texture.colorSpace:Hs,map:qe,matcap:ve,envMap:Z,envMapMode:Z&&ae.mapping,envMapCubeUVHeight:$,aoMap:Pe,lightMap:Me,bumpMap:We,normalMap:ke,displacementMap:m&&ct,emissiveMap:ot,normalMapObjectSpace:ke&&C.normalMapType===I7,normalMapTangentSpace:ke&&C.normalMapType===Sd,metalnessMap:ie,roughnessMap:te,anisotropy:Ae,anisotropyMap:gt,clearcoat:Je,clearcoatMap:St,clearcoatNormalMap:Ft,clearcoatRoughnessMap:Yt,iridescence:Qe,iridescenceMap:tt,iridescenceThicknessMap:yn,sheen:Ze,sheenColorMap:gn,sheenRoughnessMap:$t,specularMap:Mt,specularColorMap:Et,specularIntensityMap:me,transmission:At,transmissionMap:Ge,thicknessMap:dt,gradientMap:wt,opaque:C.transparent===!1&&C.blending===nh,alphaMap:Ce,alphaTest:ge,alphaHash:ut,combine:C.combine,mapUv:qe&&b(C.map.channel),aoMapUv:Pe&&b(C.aoMap.channel),lightMapUv:Me&&b(C.lightMap.channel),bumpMapUv:We&&b(C.bumpMap.channel),normalMapUv:ke&&b(C.normalMap.channel),displacementMapUv:ct&&b(C.displacementMap.channel),emissiveMapUv:ot&&b(C.emissiveMap.channel),metalnessMapUv:ie&&b(C.metalnessMap.channel),roughnessMapUv:te&&b(C.roughnessMap.channel),anisotropyMapUv:gt&&b(C.anisotropyMap.channel),clearcoatMapUv:St&&b(C.clearcoatMap.channel),clearcoatNormalMapUv:Ft&&b(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Yt&&b(C.clearcoatRoughnessMap.channel),iridescenceMapUv:tt&&b(C.iridescenceMap.channel),iridescenceThicknessMapUv:yn&&b(C.iridescenceThicknessMap.channel),sheenColorMapUv:gn&&b(C.sheenColorMap.channel),sheenRoughnessMapUv:$t&&b(C.sheenRoughnessMap.channel),specularMapUv:Mt&&b(C.specularMap.channel),specularColorMapUv:Et&&b(C.specularColorMap.channel),specularIntensityMapUv:me&&b(C.specularIntensityMap.channel),transmissionMapUv:Ge&&b(C.transmissionMap.channel),thicknessMapUv:dt&&b(C.thicknessMap.channel),alphaMapUv:Ce&&b(C.alphaMap.channel),vertexTangents:!!J.attributes.tangent&&(ke||Ae),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,vertexUv1s:Gt,vertexUv2s:It,vertexUv3s:wn,pointsUvs:W.isPoints===!0&&!!J.attributes.uv&&(qe||Ce),fog:!!G,useFog:C.fog===!0,fogExp2:G&&G.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:W.isSkinnedMesh===!0,morphTargets:J.morphAttributes.position!==void 0,morphNormals:J.morphAttributes.normal!==void 0,morphColors:J.morphAttributes.color!==void 0,morphTargetsCount:X,morphTextureStride:ne,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:C.dithering,shadowMapEnabled:t.shadowMap.enabled&&F.length>0,shadowMapType:t.shadowMap.type,toneMapping:On,useLegacyLights:t._useLegacyLights,decodeVideoTexture:qe&&C.map.isVideoTexture===!0&&ur.getTransfer(C.map.colorSpace)===Ar,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===el,flipSided:C.side===Xa,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:vt&&C.extensions.derivatives===!0,extensionFragDepth:vt&&C.extensions.fragDepth===!0,extensionDrawBuffers:vt&&C.extensions.drawBuffers===!0,extensionShaderTextureLOD:vt&&C.extensions.shaderTextureLOD===!0,extensionClipCullDistance:vt&&C.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:f||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()}}function _(C){const I=[];if(C.shaderID?I.push(C.shaderID):(I.push(C.customVertexShaderID),I.push(C.customFragmentShaderID)),C.defines!==void 0)for(const F in C.defines)I.push(F),I.push(C.defines[F]);return C.isRawShaderMaterial===!1&&(M(I,C),T(I,C),I.push(t.outputColorSpace)),I.push(C.customProgramCacheKey),I.join()}function M(C,I){C.push(I.precision),C.push(I.outputColorSpace),C.push(I.envMapMode),C.push(I.envMapCubeUVHeight),C.push(I.mapUv),C.push(I.alphaMapUv),C.push(I.lightMapUv),C.push(I.aoMapUv),C.push(I.bumpMapUv),C.push(I.normalMapUv),C.push(I.displacementMapUv),C.push(I.emissiveMapUv),C.push(I.metalnessMapUv),C.push(I.roughnessMapUv),C.push(I.anisotropyMapUv),C.push(I.clearcoatMapUv),C.push(I.clearcoatNormalMapUv),C.push(I.clearcoatRoughnessMapUv),C.push(I.iridescenceMapUv),C.push(I.iridescenceThicknessMapUv),C.push(I.sheenColorMapUv),C.push(I.sheenRoughnessMapUv),C.push(I.specularMapUv),C.push(I.specularColorMapUv),C.push(I.specularIntensityMapUv),C.push(I.transmissionMapUv),C.push(I.thicknessMapUv),C.push(I.combine),C.push(I.fogExp2),C.push(I.sizeAttenuation),C.push(I.morphTargetsCount),C.push(I.morphAttributeCount),C.push(I.numDirLights),C.push(I.numPointLights),C.push(I.numSpotLights),C.push(I.numSpotLightMaps),C.push(I.numHemiLights),C.push(I.numRectAreaLights),C.push(I.numDirLightShadows),C.push(I.numPointLightShadows),C.push(I.numSpotLightShadows),C.push(I.numSpotLightShadowsWithMaps),C.push(I.numLightProbes),C.push(I.shadowMapType),C.push(I.toneMapping),C.push(I.numClippingPlanes),C.push(I.numClipIntersection),C.push(I.depthPacking)}function T(C,I){o.disableAll(),I.isWebGL2&&o.enable(0),I.supportsVertexTextures&&o.enable(1),I.instancing&&o.enable(2),I.instancingColor&&o.enable(3),I.matcap&&o.enable(4),I.envMap&&o.enable(5),I.normalMapObjectSpace&&o.enable(6),I.normalMapTangentSpace&&o.enable(7),I.clearcoat&&o.enable(8),I.iridescence&&o.enable(9),I.alphaTest&&o.enable(10),I.vertexColors&&o.enable(11),I.vertexAlphas&&o.enable(12),I.vertexUv1s&&o.enable(13),I.vertexUv2s&&o.enable(14),I.vertexUv3s&&o.enable(15),I.vertexTangents&&o.enable(16),I.anisotropy&&o.enable(17),I.alphaHash&&o.enable(18),I.batching&&o.enable(19),C.push(o.mask),o.disableAll(),I.fog&&o.enable(0),I.useFog&&o.enable(1),I.flatShading&&o.enable(2),I.logarithmicDepthBuffer&&o.enable(3),I.skinning&&o.enable(4),I.morphTargets&&o.enable(5),I.morphNormals&&o.enable(6),I.morphColors&&o.enable(7),I.premultipliedAlpha&&o.enable(8),I.shadowMapEnabled&&o.enable(9),I.useLegacyLights&&o.enable(10),I.doubleSided&&o.enable(11),I.flipSided&&o.enable(12),I.useDepthPacking&&o.enable(13),I.dithering&&o.enable(14),I.transmission&&o.enable(15),I.sheen&&o.enable(16),I.opaque&&o.enable(17),I.pointsUvs&&o.enable(18),I.decodeVideoTexture&&o.enable(19),C.push(o.mask)}function A(C){const I=w[C.type];let F;if(I){const V=Zo[I];F=X7.clone(V.uniforms)}else F=C.uniforms;return F}function R(C,I){let F;for(let V=0,W=u.length;V<W;V++){const G=u[V];if(G.cacheKey===I){F=G,++F.usedTimes;break}}return F===void 0&&(F=new qMe(t,I,C,a),u.push(F)),F}function N(C){if(--C.usedTimes===0){const I=u.indexOf(C);u[I]=u[u.length-1],u.pop(),C.destroy()}}function O(C){l.remove(C)}function k(){l.dispose()}return{getParameters:x,getProgramCacheKey:_,getUniforms:A,acquireProgram:R,releaseProgram:N,releaseShaderCache:O,programs:u,dispose:k}}function JMe(){let t=new WeakMap;function e(a){let s=t.get(a);return s===void 0&&(s={},t.set(a,s)),s}function n(a){t.delete(a)}function r(a,s,o){t.get(a)[s]=o}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function QMe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function jB(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function IB(){const t=[];let e=0;const n=[],r=[],i=[];function a(){e=0,n.length=0,r.length=0,i.length=0}function s(h,m,y,w,b,x){let _=t[e];return _===void 0?(_={id:h.id,object:h,geometry:m,material:y,groupOrder:w,renderOrder:h.renderOrder,z:b,group:x},t[e]=_):(_.id=h.id,_.object=h,_.geometry=m,_.material=y,_.groupOrder=w,_.renderOrder=h.renderOrder,_.z=b,_.group=x),e++,_}function o(h,m,y,w,b,x){const _=s(h,m,y,w,b,x);y.transmission>0?r.push(_):y.transparent===!0?i.push(_):n.push(_)}function l(h,m,y,w,b,x){const _=s(h,m,y,w,b,x);y.transmission>0?r.unshift(_):y.transparent===!0?i.unshift(_):n.unshift(_)}function u(h,m){n.length>1&&n.sort(h||QMe),r.length>1&&r.sort(m||jB),i.length>1&&i.sort(m||jB)}function f(){for(let h=e,m=t.length;h<m;h++){const y=t[h];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:n,transmissive:r,transparent:i,init:a,push:o,unshift:l,finish:f,sort:u}}function eTe(){let t=new WeakMap;function e(r,i){const a=t.get(r);let s;return a===void 0?(s=new IB,t.set(r,[s])):i>=a.length?(s=new IB,a.push(s)):s=a[i],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function tTe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new le,color:new kt};break;case"SpotLight":n={position:new le,direction:new le,color:new kt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new le,color:new kt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new le,skyColor:new kt,groundColor:new kt};break;case"RectAreaLight":n={color:new kt,position:new le,halfWidth:new le,halfHeight:new le};break}return t[e.id]=n,n}}}function nTe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let rTe=0;function iTe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function aTe(t,e){const n=new tTe,r=nTe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new le);const a=new le,s=new dn,o=new dn;function l(f,h){let m=0,y=0,w=0;for(let V=0;V<9;V++)i.probe[V].set(0,0,0);let b=0,x=0,_=0,M=0,T=0,A=0,R=0,N=0,O=0,k=0,C=0;f.sort(iTe);const I=h===!0?Math.PI:1;for(let V=0,W=f.length;V<W;V++){const G=f[V],J=G.color,ee=G.intensity,ae=G.distance,$=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)m+=J.r*ee*I,y+=J.g*ee*I,w+=J.b*ee*I;else if(G.isLightProbe){for(let B=0;B<9;B++)i.probe[B].addScaledVector(G.sh.coefficients[B],ee);C++}else if(G.isDirectionalLight){const B=n.get(G);if(B.color.copy(G.color).multiplyScalar(G.intensity*I),G.castShadow){const Y=G.shadow,X=r.get(G);X.shadowBias=Y.bias,X.shadowNormalBias=Y.normalBias,X.shadowRadius=Y.radius,X.shadowMapSize=Y.mapSize,i.directionalShadow[b]=X,i.directionalShadowMap[b]=$,i.directionalShadowMatrix[b]=G.shadow.matrix,A++}i.directional[b]=B,b++}else if(G.isSpotLight){const B=n.get(G);B.position.setFromMatrixPosition(G.matrixWorld),B.color.copy(J).multiplyScalar(ee*I),B.distance=ae,B.coneCos=Math.cos(G.angle),B.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),B.decay=G.decay,i.spot[_]=B;const Y=G.shadow;if(G.map&&(i.spotLightMap[O]=G.map,O++,Y.updateMatrices(G),G.castShadow&&k++),i.spotLightMatrix[_]=Y.matrix,G.castShadow){const X=r.get(G);X.shadowBias=Y.bias,X.shadowNormalBias=Y.normalBias,X.shadowRadius=Y.radius,X.shadowMapSize=Y.mapSize,i.spotShadow[_]=X,i.spotShadowMap[_]=$,N++}_++}else if(G.isRectAreaLight){const B=n.get(G);B.color.copy(J).multiplyScalar(ee),B.halfWidth.set(G.width*.5,0,0),B.halfHeight.set(0,G.height*.5,0),i.rectArea[M]=B,M++}else if(G.isPointLight){const B=n.get(G);if(B.color.copy(G.color).multiplyScalar(G.intensity*I),B.distance=G.distance,B.decay=G.decay,G.castShadow){const Y=G.shadow,X=r.get(G);X.shadowBias=Y.bias,X.shadowNormalBias=Y.normalBias,X.shadowRadius=Y.radius,X.shadowMapSize=Y.mapSize,X.shadowCameraNear=Y.camera.near,X.shadowCameraFar=Y.camera.far,i.pointShadow[x]=X,i.pointShadowMap[x]=$,i.pointShadowMatrix[x]=G.shadow.matrix,R++}i.point[x]=B,x++}else if(G.isHemisphereLight){const B=n.get(G);B.skyColor.copy(G.color).multiplyScalar(ee*I),B.groundColor.copy(G.groundColor).multiplyScalar(ee*I),i.hemi[T]=B,T++}}M>0&&(e.isWebGL2?t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=bt.LTC_FLOAT_1,i.rectAreaLTC2=bt.LTC_FLOAT_2):(i.rectAreaLTC1=bt.LTC_HALF_1,i.rectAreaLTC2=bt.LTC_HALF_2):t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=bt.LTC_FLOAT_1,i.rectAreaLTC2=bt.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=bt.LTC_HALF_1,i.rectAreaLTC2=bt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=m,i.ambient[1]=y,i.ambient[2]=w;const F=i.hash;(F.directionalLength!==b||F.pointLength!==x||F.spotLength!==_||F.rectAreaLength!==M||F.hemiLength!==T||F.numDirectionalShadows!==A||F.numPointShadows!==R||F.numSpotShadows!==N||F.numSpotMaps!==O||F.numLightProbes!==C)&&(i.directional.length=b,i.spot.length=_,i.rectArea.length=M,i.point.length=x,i.hemi.length=T,i.directionalShadow.length=A,i.directionalShadowMap.length=A,i.pointShadow.length=R,i.pointShadowMap.length=R,i.spotShadow.length=N,i.spotShadowMap.length=N,i.directionalShadowMatrix.length=A,i.pointShadowMatrix.length=R,i.spotLightMatrix.length=N+O-k,i.spotLightMap.length=O,i.numSpotLightShadowsWithMaps=k,i.numLightProbes=C,F.directionalLength=b,F.pointLength=x,F.spotLength=_,F.rectAreaLength=M,F.hemiLength=T,F.numDirectionalShadows=A,F.numPointShadows=R,F.numSpotShadows=N,F.numSpotMaps=O,F.numLightProbes=C,i.version=rTe++)}function u(f,h){let m=0,y=0,w=0,b=0,x=0;const _=h.matrixWorldInverse;for(let M=0,T=f.length;M<T;M++){const A=f[M];if(A.isDirectionalLight){const R=i.directional[m];R.direction.setFromMatrixPosition(A.matrixWorld),a.setFromMatrixPosition(A.target.matrixWorld),R.direction.sub(a),R.direction.transformDirection(_),m++}else if(A.isSpotLight){const R=i.spot[w];R.position.setFromMatrixPosition(A.matrixWorld),R.position.applyMatrix4(_),R.direction.setFromMatrixPosition(A.matrixWorld),a.setFromMatrixPosition(A.target.matrixWorld),R.direction.sub(a),R.direction.transformDirection(_),w++}else if(A.isRectAreaLight){const R=i.rectArea[b];R.position.setFromMatrixPosition(A.matrixWorld),R.position.applyMatrix4(_),o.identity(),s.copy(A.matrixWorld),s.premultiply(_),o.extractRotation(s),R.halfWidth.set(A.width*.5,0,0),R.halfHeight.set(0,A.height*.5,0),R.halfWidth.applyMatrix4(o),R.halfHeight.applyMatrix4(o),b++}else if(A.isPointLight){const R=i.point[y];R.position.setFromMatrixPosition(A.matrixWorld),R.position.applyMatrix4(_),y++}else if(A.isHemisphereLight){const R=i.hemi[x];R.direction.setFromMatrixPosition(A.matrixWorld),R.direction.transformDirection(_),x++}}}return{setup:l,setupView:u,state:i}}function DB(t,e){const n=new aTe(t,e),r=[],i=[];function a(){r.length=0,i.length=0}function s(h){r.push(h)}function o(h){i.push(h)}function l(h){n.setup(r,h)}function u(h){n.setupView(r,h)}return{init:a,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:u,pushLight:s,pushShadow:o}}function sTe(t,e){let n=new WeakMap;function r(a,s=0){const o=n.get(a);let l;return o===void 0?(l=new DB(t,e),n.set(a,[l])):s>=o.length?(l=new DB(t,e),o.push(l)):l=o[s],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class Jk extends Oa{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=k7,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Qk extends Oa{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const oTe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,lTe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function cTe(t,e,n){let r=new px;const i=new Ke,a=new Ke,s=new dr,o=new Jk({depthPacking:j7}),l=new Qk,u={},f=n.maxTextureSize,h={[Yc]:Xa,[Xa]:Yc,[el]:el},m=new Ws({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ke},radius:{value:4}},vertexShader:oTe,fragmentShader:lTe}),y=m.clone();y.defines.HORIZONTAL_PASS=1;const w=new In;w.setAttribute("position",new fr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new ti(w,m),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=mS;let _=this.type;this.render=function(N,O,k){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||N.length===0)return;const C=t.getRenderTarget(),I=t.getActiveCubeFace(),F=t.getActiveMipmapLevel(),V=t.state;V.setBlending(Nl),V.buffers.color.setClear(1,1,1,1),V.buffers.depth.setTest(!0),V.setScissorTest(!1);const W=_!==Xo&&this.type===Xo,G=_===Xo&&this.type!==Xo;for(let J=0,ee=N.length;J<ee;J++){const ae=N[J],$=ae.shadow;if($===void 0){console.warn("THREE.WebGLShadowMap:",ae,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;i.copy($.mapSize);const B=$.getFrameExtents();if(i.multiply(B),a.copy($.mapSize),(i.x>f||i.y>f)&&(i.x>f&&(a.x=Math.floor(f/B.x),i.x=a.x*B.x,$.mapSize.x=a.x),i.y>f&&(a.y=Math.floor(f/B.y),i.y=a.y*B.y,$.mapSize.y=a.y)),$.map===null||W===!0||G===!0){const X=this.type!==Xo?{minFilter:li,magFilter:li}:{};$.map!==null&&$.map.dispose(),$.map=new ys(i.x,i.y,X),$.map.texture.name=ae.name+".shadowMap",$.camera.updateProjectionMatrix()}t.setRenderTarget($.map),t.clear();const Y=$.getViewportCount();for(let X=0;X<Y;X++){const ne=$.getViewport(X);s.set(a.x*ne.x,a.y*ne.y,a.x*ne.z,a.y*ne.w),V.viewport(s),$.updateMatrices(ae,X),r=$.getFrustum(),A(O,k,$.camera,ae,this.type)}$.isPointLightShadow!==!0&&this.type===Xo&&M($,k),$.needsUpdate=!1}_=this.type,x.needsUpdate=!1,t.setRenderTarget(C,I,F)};function M(N,O){const k=e.update(b);m.defines.VSM_SAMPLES!==N.blurSamples&&(m.defines.VSM_SAMPLES=N.blurSamples,y.defines.VSM_SAMPLES=N.blurSamples,m.needsUpdate=!0,y.needsUpdate=!0),N.mapPass===null&&(N.mapPass=new ys(i.x,i.y)),m.uniforms.shadow_pass.value=N.map.texture,m.uniforms.resolution.value=N.mapSize,m.uniforms.radius.value=N.radius,t.setRenderTarget(N.mapPass),t.clear(),t.renderBufferDirect(O,null,k,m,b,null),y.uniforms.shadow_pass.value=N.mapPass.texture,y.uniforms.resolution.value=N.mapSize,y.uniforms.radius.value=N.radius,t.setRenderTarget(N.map),t.clear(),t.renderBufferDirect(O,null,k,y,b,null)}function T(N,O,k,C){let I=null;const F=k.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(F!==void 0)I=F;else if(I=k.isPointLight===!0?l:o,t.localClippingEnabled&&O.clipShadows===!0&&Array.isArray(O.clippingPlanes)&&O.clippingPlanes.length!==0||O.displacementMap&&O.displacementScale!==0||O.alphaMap&&O.alphaTest>0||O.map&&O.alphaTest>0){const V=I.uuid,W=O.uuid;let G=u[V];G===void 0&&(G={},u[V]=G);let J=G[W];J===void 0&&(J=I.clone(),G[W]=J,O.addEventListener("dispose",R)),I=J}if(I.visible=O.visible,I.wireframe=O.wireframe,C===Xo?I.side=O.shadowSide!==null?O.shadowSide:O.side:I.side=O.shadowSide!==null?O.shadowSide:h[O.side],I.alphaMap=O.alphaMap,I.alphaTest=O.alphaTest,I.map=O.map,I.clipShadows=O.clipShadows,I.clippingPlanes=O.clippingPlanes,I.clipIntersection=O.clipIntersection,I.displacementMap=O.displacementMap,I.displacementScale=O.displacementScale,I.displacementBias=O.displacementBias,I.wireframeLinewidth=O.wireframeLinewidth,I.linewidth=O.linewidth,k.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const V=t.properties.get(I);V.light=k}return I}function A(N,O,k,C,I){if(N.visible===!1)return;if(N.layers.test(O.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&I===Xo)&&(!N.frustumCulled||r.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,N.matrixWorld);const W=e.update(N),G=N.material;if(Array.isArray(G)){const J=W.groups;for(let ee=0,ae=J.length;ee<ae;ee++){const $=J[ee],B=G[$.materialIndex];if(B&&B.visible){const Y=T(N,B,C,I);N.onBeforeShadow(t,N,O,k,W,Y,$),t.renderBufferDirect(k,null,W,Y,N,$),N.onAfterShadow(t,N,O,k,W,Y,$)}}}else if(G.visible){const J=T(N,G,C,I);N.onBeforeShadow(t,N,O,k,W,J,null),t.renderBufferDirect(k,null,W,J,N,null),N.onAfterShadow(t,N,O,k,W,J,null)}}const V=N.children;for(let W=0,G=V.length;W<G;W++)A(V[W],O,k,C,I)}function R(N){N.target.removeEventListener("dispose",R);for(const k in u){const C=u[k],I=N.target.uuid;I in C&&(C[I].dispose(),delete C[I])}}}function uTe(t,e,n){const r=n.isWebGL2;function i(){let ge=!1;const ut=new dr;let vt=null;const Gt=new dr(0,0,0,0);return{setMask:function(It){vt!==It&&!ge&&(t.colorMask(It,It,It,It),vt=It)},setLocked:function(It){ge=It},setClear:function(It,wn,On,Vn,ir){ir===!0&&(It*=Vn,wn*=Vn,On*=Vn),ut.set(It,wn,On,Vn),Gt.equals(ut)===!1&&(t.clearColor(It,wn,On,Vn),Gt.copy(ut))},reset:function(){ge=!1,vt=null,Gt.set(-1,0,0,0)}}}function a(){let ge=!1,ut=null,vt=null,Gt=null;return{setTest:function(It){It?Ie(t.DEPTH_TEST):qe(t.DEPTH_TEST)},setMask:function(It){ut!==It&&!ge&&(t.depthMask(It),ut=It)},setFunc:function(It){if(vt!==It){switch(It){case u7:t.depthFunc(t.NEVER);break;case d7:t.depthFunc(t.ALWAYS);break;case f7:t.depthFunc(t.LESS);break;case M0:t.depthFunc(t.LEQUAL);break;case h7:t.depthFunc(t.EQUAL);break;case p7:t.depthFunc(t.GEQUAL);break;case m7:t.depthFunc(t.GREATER);break;case g7:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}vt=It}},setLocked:function(It){ge=It},setClear:function(It){Gt!==It&&(t.clearDepth(It),Gt=It)},reset:function(){ge=!1,ut=null,vt=null,Gt=null}}}function s(){let ge=!1,ut=null,vt=null,Gt=null,It=null,wn=null,On=null,Vn=null,ir=null;return{setTest:function(Tn){ge||(Tn?Ie(t.STENCIL_TEST):qe(t.STENCIL_TEST))},setMask:function(Tn){ut!==Tn&&!ge&&(t.stencilMask(Tn),ut=Tn)},setFunc:function(Tn,Vr,di){(vt!==Tn||Gt!==Vr||It!==di)&&(t.stencilFunc(Tn,Vr,di),vt=Tn,Gt=Vr,It=di)},setOp:function(Tn,Vr,di){(wn!==Tn||On!==Vr||Vn!==di)&&(t.stencilOp(Tn,Vr,di),wn=Tn,On=Vr,Vn=di)},setLocked:function(Tn){ge=Tn},setClear:function(Tn){ir!==Tn&&(t.clearStencil(Tn),ir=Tn)},reset:function(){ge=!1,ut=null,vt=null,Gt=null,It=null,wn=null,On=null,Vn=null,ir=null}}}const o=new i,l=new a,u=new s,f=new WeakMap,h=new WeakMap;let m={},y={},w=new WeakMap,b=[],x=null,_=!1,M=null,T=null,A=null,R=null,N=null,O=null,k=null,C=new kt(0,0,0),I=0,F=!1,V=null,W=null,G=null,J=null,ee=null;const ae=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let $=!1,B=0;const Y=t.getParameter(t.VERSION);Y.indexOf("WebGL")!==-1?(B=parseFloat(/^WebGL (\d)/.exec(Y)[1]),$=B>=1):Y.indexOf("OpenGL ES")!==-1&&(B=parseFloat(/^OpenGL ES (\d)/.exec(Y)[1]),$=B>=2);let X=null,ne={};const se=t.getParameter(t.SCISSOR_BOX),ye=t.getParameter(t.VIEWPORT),Ne=new dr().fromArray(se),Ee=new dr().fromArray(ye);function Oe(ge,ut,vt,Gt){const It=new Uint8Array(4),wn=t.createTexture();t.bindTexture(ge,wn),t.texParameteri(ge,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ge,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let On=0;On<vt;On++)r&&(ge===t.TEXTURE_3D||ge===t.TEXTURE_2D_ARRAY)?t.texImage3D(ut,0,t.RGBA,1,1,Gt,0,t.RGBA,t.UNSIGNED_BYTE,It):t.texImage2D(ut+On,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,It);return wn}const $e={};$e[t.TEXTURE_2D]=Oe(t.TEXTURE_2D,t.TEXTURE_2D,1),$e[t.TEXTURE_CUBE_MAP]=Oe(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&($e[t.TEXTURE_2D_ARRAY]=Oe(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),$e[t.TEXTURE_3D]=Oe(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),o.setClear(0,0,0,1),l.setClear(1),u.setClear(0),Ie(t.DEPTH_TEST),l.setFunc(M0),ot(!1),ie(WN),Ie(t.CULL_FACE),ke(Nl);function Ie(ge){m[ge]!==!0&&(t.enable(ge),m[ge]=!0)}function qe(ge){m[ge]!==!1&&(t.disable(ge),m[ge]=!1)}function ve(ge,ut){return y[ge]!==ut?(t.bindFramebuffer(ge,ut),y[ge]=ut,r&&(ge===t.DRAW_FRAMEBUFFER&&(y[t.FRAMEBUFFER]=ut),ge===t.FRAMEBUFFER&&(y[t.DRAW_FRAMEBUFFER]=ut)),!0):!1}function Z(ge,ut){let vt=b,Gt=!1;if(ge)if(vt=w.get(ut),vt===void 0&&(vt=[],w.set(ut,vt)),ge.isWebGLMultipleRenderTargets){const It=ge.texture;if(vt.length!==It.length||vt[0]!==t.COLOR_ATTACHMENT0){for(let wn=0,On=It.length;wn<On;wn++)vt[wn]=t.COLOR_ATTACHMENT0+wn;vt.length=It.length,Gt=!0}}else vt[0]!==t.COLOR_ATTACHMENT0&&(vt[0]=t.COLOR_ATTACHMENT0,Gt=!0);else vt[0]!==t.BACK&&(vt[0]=t.BACK,Gt=!0);Gt&&(n.isWebGL2?t.drawBuffers(vt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(vt))}function Pe(ge){return x!==ge?(t.useProgram(ge),x=ge,!0):!1}const Me={[Zu]:t.FUNC_ADD,[Y$]:t.FUNC_SUBTRACT,[K$]:t.FUNC_REVERSE_SUBTRACT};if(r)Me[XN]=t.MIN,Me[YN]=t.MAX;else{const ge=e.get("EXT_blend_minmax");ge!==null&&(Me[XN]=ge.MIN_EXT,Me[YN]=ge.MAX_EXT)}const We={[Z$]:t.ZERO,[J$]:t.ONE,[Q$]:t.SRC_COLOR,[m_]:t.SRC_ALPHA,[a7]:t.SRC_ALPHA_SATURATE,[r7]:t.DST_COLOR,[t7]:t.DST_ALPHA,[e7]:t.ONE_MINUS_SRC_COLOR,[g_]:t.ONE_MINUS_SRC_ALPHA,[i7]:t.ONE_MINUS_DST_COLOR,[n7]:t.ONE_MINUS_DST_ALPHA,[s7]:t.CONSTANT_COLOR,[o7]:t.ONE_MINUS_CONSTANT_COLOR,[l7]:t.CONSTANT_ALPHA,[c7]:t.ONE_MINUS_CONSTANT_ALPHA};function ke(ge,ut,vt,Gt,It,wn,On,Vn,ir,Tn){if(ge===Nl){_===!0&&(qe(t.BLEND),_=!1);return}if(_===!1&&(Ie(t.BLEND),_=!0),ge!==X$){if(ge!==M||Tn!==F){if((T!==Zu||N!==Zu)&&(t.blendEquation(t.FUNC_ADD),T=Zu,N=Zu),Tn)switch(ge){case nh:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case GN:t.blendFunc(t.ONE,t.ONE);break;case $N:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case qN:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ge);break}else switch(ge){case nh:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case GN:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case $N:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case qN:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ge);break}A=null,R=null,O=null,k=null,C.set(0,0,0),I=0,M=ge,F=Tn}return}It=It||ut,wn=wn||vt,On=On||Gt,(ut!==T||It!==N)&&(t.blendEquationSeparate(Me[ut],Me[It]),T=ut,N=It),(vt!==A||Gt!==R||wn!==O||On!==k)&&(t.blendFuncSeparate(We[vt],We[Gt],We[wn],We[On]),A=vt,R=Gt,O=wn,k=On),(Vn.equals(C)===!1||ir!==I)&&(t.blendColor(Vn.r,Vn.g,Vn.b,ir),C.copy(Vn),I=ir),M=ge,F=!1}function ct(ge,ut){ge.side===el?qe(t.CULL_FACE):Ie(t.CULL_FACE);let vt=ge.side===Xa;ut&&(vt=!vt),ot(vt),ge.blending===nh&&ge.transparent===!1?ke(Nl):ke(ge.blending,ge.blendEquation,ge.blendSrc,ge.blendDst,ge.blendEquationAlpha,ge.blendSrcAlpha,ge.blendDstAlpha,ge.blendColor,ge.blendAlpha,ge.premultipliedAlpha),l.setFunc(ge.depthFunc),l.setTest(ge.depthTest),l.setMask(ge.depthWrite),o.setMask(ge.colorWrite);const Gt=ge.stencilWrite;u.setTest(Gt),Gt&&(u.setMask(ge.stencilWriteMask),u.setFunc(ge.stencilFunc,ge.stencilRef,ge.stencilFuncMask),u.setOp(ge.stencilFail,ge.stencilZFail,ge.stencilZPass)),Ae(ge.polygonOffset,ge.polygonOffsetFactor,ge.polygonOffsetUnits),ge.alphaToCoverage===!0?Ie(t.SAMPLE_ALPHA_TO_COVERAGE):qe(t.SAMPLE_ALPHA_TO_COVERAGE)}function ot(ge){V!==ge&&(ge?t.frontFace(t.CW):t.frontFace(t.CCW),V=ge)}function ie(ge){ge!==G$?(Ie(t.CULL_FACE),ge!==W&&(ge===WN?t.cullFace(t.BACK):ge===$$?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):qe(t.CULL_FACE),W=ge}function te(ge){ge!==G&&($&&t.lineWidth(ge),G=ge)}function Ae(ge,ut,vt){ge?(Ie(t.POLYGON_OFFSET_FILL),(J!==ut||ee!==vt)&&(t.polygonOffset(ut,vt),J=ut,ee=vt)):qe(t.POLYGON_OFFSET_FILL)}function Je(ge){ge?Ie(t.SCISSOR_TEST):qe(t.SCISSOR_TEST)}function Qe(ge){ge===void 0&&(ge=t.TEXTURE0+ae-1),X!==ge&&(t.activeTexture(ge),X=ge)}function Ze(ge,ut,vt){vt===void 0&&(X===null?vt=t.TEXTURE0+ae-1:vt=X);let Gt=ne[vt];Gt===void 0&&(Gt={type:void 0,texture:void 0},ne[vt]=Gt),(Gt.type!==ge||Gt.texture!==ut)&&(X!==vt&&(t.activeTexture(vt),X=vt),t.bindTexture(ge,ut||$e[ge]),Gt.type=ge,Gt.texture=ut)}function At(){const ge=ne[X];ge!==void 0&&ge.type!==void 0&&(t.bindTexture(ge.type,null),ge.type=void 0,ge.texture=void 0)}function gt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function St(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Ft(){try{t.texSubImage2D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Yt(){try{t.texSubImage3D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function tt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function yn(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function gn(){try{t.texStorage2D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function $t(){try{t.texStorage3D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Mt(){try{t.texImage2D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function Et(){try{t.texImage3D.apply(t,arguments)}catch(ge){console.error("THREE.WebGLState:",ge)}}function me(ge){Ne.equals(ge)===!1&&(t.scissor(ge.x,ge.y,ge.z,ge.w),Ne.copy(ge))}function Ge(ge){Ee.equals(ge)===!1&&(t.viewport(ge.x,ge.y,ge.z,ge.w),Ee.copy(ge))}function dt(ge,ut){let vt=h.get(ut);vt===void 0&&(vt=new WeakMap,h.set(ut,vt));let Gt=vt.get(ge);Gt===void 0&&(Gt=t.getUniformBlockIndex(ut,ge.name),vt.set(ge,Gt))}function wt(ge,ut){const Gt=h.get(ut).get(ge);f.get(ut)!==Gt&&(t.uniformBlockBinding(ut,Gt,ge.__bindingPointIndex),f.set(ut,Gt))}function Ce(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),m={},X=null,ne={},y={},w=new WeakMap,b=[],x=null,_=!1,M=null,T=null,A=null,R=null,N=null,O=null,k=null,C=new kt(0,0,0),I=0,F=!1,V=null,W=null,G=null,J=null,ee=null,Ne.set(0,0,t.canvas.width,t.canvas.height),Ee.set(0,0,t.canvas.width,t.canvas.height),o.reset(),l.reset(),u.reset()}return{buffers:{color:o,depth:l,stencil:u},enable:Ie,disable:qe,bindFramebuffer:ve,drawBuffers:Z,useProgram:Pe,setBlending:ke,setMaterial:ct,setFlipSided:ot,setCullFace:ie,setLineWidth:te,setPolygonOffset:Ae,setScissorTest:Je,activeTexture:Qe,bindTexture:Ze,unbindTexture:At,compressedTexImage2D:gt,compressedTexImage3D:St,texImage2D:Mt,texImage3D:Et,updateUBOMapping:dt,uniformBlockBinding:wt,texStorage2D:gn,texStorage3D:$t,texSubImage2D:Ft,texSubImage3D:Yt,compressedTexSubImage2D:tt,compressedTexSubImage3D:yn,scissor:me,viewport:Ge,reset:Ce}}function dTe(t,e,n,r,i,a,s){const o=i.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let h;const m=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function w(ie,te){return y?new OffscreenCanvas(ie,te):I0("canvas")}function b(ie,te,Ae,Je){let Qe=1;if((ie.width>Je||ie.height>Je)&&(Qe=Je/Math.max(ie.width,ie.height)),Qe<1||te===!0)if(typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ie instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ie instanceof ImageBitmap){const Ze=te?x_:Math.floor,At=Ze(Qe*ie.width),gt=Ze(Qe*ie.height);h===void 0&&(h=w(At,gt));const St=Ae?w(At,gt):h;return St.width=At,St.height=gt,St.getContext("2d").drawImage(ie,0,0,At,gt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ie.width+"x"+ie.height+") to ("+At+"x"+gt+")."),St}else return"data"in ie&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ie.width+"x"+ie.height+")."),ie;return ie}function x(ie){return TO(ie.width)&&TO(ie.height)}function _(ie){return o?!1:ie.wrapS!==Fr||ie.wrapT!==Fr||ie.minFilter!==li&&ie.minFilter!==Gn}function M(ie,te){return ie.generateMipmaps&&te&&ie.minFilter!==li&&ie.minFilter!==Gn}function T(ie){t.generateMipmap(ie)}function A(ie,te,Ae,Je,Qe=!1){if(o===!1)return te;if(ie!==null){if(t[ie]!==void 0)return t[ie];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ie+"'")}let Ze=te;if(te===t.RED&&(Ae===t.FLOAT&&(Ze=t.R32F),Ae===t.HALF_FLOAT&&(Ze=t.R16F),Ae===t.UNSIGNED_BYTE&&(Ze=t.R8)),te===t.RED_INTEGER&&(Ae===t.UNSIGNED_BYTE&&(Ze=t.R8UI),Ae===t.UNSIGNED_SHORT&&(Ze=t.R16UI),Ae===t.UNSIGNED_INT&&(Ze=t.R32UI),Ae===t.BYTE&&(Ze=t.R8I),Ae===t.SHORT&&(Ze=t.R16I),Ae===t.INT&&(Ze=t.R32I)),te===t.RG&&(Ae===t.FLOAT&&(Ze=t.RG32F),Ae===t.HALF_FLOAT&&(Ze=t.RG16F),Ae===t.UNSIGNED_BYTE&&(Ze=t.RG8)),te===t.RGBA){const At=Qe?O0:ur.getTransfer(Je);Ae===t.FLOAT&&(Ze=t.RGBA32F),Ae===t.HALF_FLOAT&&(Ze=t.RGBA16F),Ae===t.UNSIGNED_BYTE&&(Ze=At===Ar?t.SRGB8_ALPHA8:t.RGBA8),Ae===t.UNSIGNED_SHORT_4_4_4_4&&(Ze=t.RGBA4),Ae===t.UNSIGNED_SHORT_5_5_5_1&&(Ze=t.RGB5_A1)}return(Ze===t.R16F||Ze===t.R32F||Ze===t.RG16F||Ze===t.RG32F||Ze===t.RGBA16F||Ze===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Ze}function R(ie,te,Ae){return M(ie,Ae)===!0||ie.isFramebufferTexture&&ie.minFilter!==li&&ie.minFilter!==Gn?Math.log2(Math.max(te.width,te.height))+1:ie.mipmaps!==void 0&&ie.mipmaps.length>0?ie.mipmaps.length:ie.isCompressedTexture&&Array.isArray(ie.image)?te.mipmaps.length:1}function N(ie){return ie===li||ie===y_||ie===Av?t.NEAREST:t.LINEAR}function O(ie){const te=ie.target;te.removeEventListener("dispose",O),C(te),te.isVideoTexture&&f.delete(te)}function k(ie){const te=ie.target;te.removeEventListener("dispose",k),F(te)}function C(ie){const te=r.get(ie);if(te.__webglInit===void 0)return;const Ae=ie.source,Je=m.get(Ae);if(Je){const Qe=Je[te.__cacheKey];Qe.usedTimes--,Qe.usedTimes===0&&I(ie),Object.keys(Je).length===0&&m.delete(Ae)}r.remove(ie)}function I(ie){const te=r.get(ie);t.deleteTexture(te.__webglTexture);const Ae=ie.source,Je=m.get(Ae);delete Je[te.__cacheKey],s.memory.textures--}function F(ie){const te=ie.texture,Ae=r.get(ie),Je=r.get(te);if(Je.__webglTexture!==void 0&&(t.deleteTexture(Je.__webglTexture),s.memory.textures--),ie.depthTexture&&ie.depthTexture.dispose(),ie.isWebGLCubeRenderTarget)for(let Qe=0;Qe<6;Qe++){if(Array.isArray(Ae.__webglFramebuffer[Qe]))for(let Ze=0;Ze<Ae.__webglFramebuffer[Qe].length;Ze++)t.deleteFramebuffer(Ae.__webglFramebuffer[Qe][Ze]);else t.deleteFramebuffer(Ae.__webglFramebuffer[Qe]);Ae.__webglDepthbuffer&&t.deleteRenderbuffer(Ae.__webglDepthbuffer[Qe])}else{if(Array.isArray(Ae.__webglFramebuffer))for(let Qe=0;Qe<Ae.__webglFramebuffer.length;Qe++)t.deleteFramebuffer(Ae.__webglFramebuffer[Qe]);else t.deleteFramebuffer(Ae.__webglFramebuffer);if(Ae.__webglDepthbuffer&&t.deleteRenderbuffer(Ae.__webglDepthbuffer),Ae.__webglMultisampledFramebuffer&&t.deleteFramebuffer(Ae.__webglMultisampledFramebuffer),Ae.__webglColorRenderbuffer)for(let Qe=0;Qe<Ae.__webglColorRenderbuffer.length;Qe++)Ae.__webglColorRenderbuffer[Qe]&&t.deleteRenderbuffer(Ae.__webglColorRenderbuffer[Qe]);Ae.__webglDepthRenderbuffer&&t.deleteRenderbuffer(Ae.__webglDepthRenderbuffer)}if(ie.isWebGLMultipleRenderTargets)for(let Qe=0,Ze=te.length;Qe<Ze;Qe++){const At=r.get(te[Qe]);At.__webglTexture&&(t.deleteTexture(At.__webglTexture),s.memory.textures--),r.remove(te[Qe])}r.remove(te),r.remove(ie)}let V=0;function W(){V=0}function G(){const ie=V;return ie>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ie+" texture units while this GPU supports only "+i.maxTextures),V+=1,ie}function J(ie){const te=[];return te.push(ie.wrapS),te.push(ie.wrapT),te.push(ie.wrapR||0),te.push(ie.magFilter),te.push(ie.minFilter),te.push(ie.anisotropy),te.push(ie.internalFormat),te.push(ie.format),te.push(ie.type),te.push(ie.generateMipmaps),te.push(ie.premultiplyAlpha),te.push(ie.flipY),te.push(ie.unpackAlignment),te.push(ie.colorSpace),te.join()}function ee(ie,te){const Ae=r.get(ie);if(ie.isVideoTexture&&ct(ie),ie.isRenderTargetTexture===!1&&ie.version>0&&Ae.__version!==ie.version){const Je=ie.image;if(Je===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Je.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ne(Ae,ie,te);return}}n.bindTexture(t.TEXTURE_2D,Ae.__webglTexture,t.TEXTURE0+te)}function ae(ie,te){const Ae=r.get(ie);if(ie.version>0&&Ae.__version!==ie.version){Ne(Ae,ie,te);return}n.bindTexture(t.TEXTURE_2D_ARRAY,Ae.__webglTexture,t.TEXTURE0+te)}function $(ie,te){const Ae=r.get(ie);if(ie.version>0&&Ae.__version!==ie.version){Ne(Ae,ie,te);return}n.bindTexture(t.TEXTURE_3D,Ae.__webglTexture,t.TEXTURE0+te)}function B(ie,te){const Ae=r.get(ie);if(ie.version>0&&Ae.__version!==ie.version){Ee(Ae,ie,te);return}n.bindTexture(t.TEXTURE_CUBE_MAP,Ae.__webglTexture,t.TEXTURE0+te)}const Y={[A0]:t.REPEAT,[Fr]:t.CLAMP_TO_EDGE,[E0]:t.MIRRORED_REPEAT},X={[li]:t.NEAREST,[y_]:t.NEAREST_MIPMAP_NEAREST,[Av]:t.NEAREST_MIPMAP_LINEAR,[Gn]:t.LINEAR,[Rk]:t.LINEAR_MIPMAP_NEAREST,[pd]:t.LINEAR_MIPMAP_LINEAR},ne={[D7]:t.NEVER,[V7]:t.ALWAYS,[L7]:t.LESS,[Wk]:t.LEQUAL,[U7]:t.EQUAL,[B7]:t.GEQUAL,[F7]:t.GREATER,[z7]:t.NOTEQUAL};function se(ie,te,Ae){if(Ae?(t.texParameteri(ie,t.TEXTURE_WRAP_S,Y[te.wrapS]),t.texParameteri(ie,t.TEXTURE_WRAP_T,Y[te.wrapT]),(ie===t.TEXTURE_3D||ie===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ie,t.TEXTURE_WRAP_R,Y[te.wrapR]),t.texParameteri(ie,t.TEXTURE_MAG_FILTER,X[te.magFilter]),t.texParameteri(ie,t.TEXTURE_MIN_FILTER,X[te.minFilter])):(t.texParameteri(ie,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(ie,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(ie===t.TEXTURE_3D||ie===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ie,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(te.wrapS!==Fr||te.wrapT!==Fr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(ie,t.TEXTURE_MAG_FILTER,N(te.magFilter)),t.texParameteri(ie,t.TEXTURE_MIN_FILTER,N(te.minFilter)),te.minFilter!==li&&te.minFilter!==Gn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),te.compareFunction&&(t.texParameteri(ie,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(ie,t.TEXTURE_COMPARE_FUNC,ne[te.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Je=e.get("EXT_texture_filter_anisotropic");if(te.magFilter===li||te.minFilter!==Av&&te.minFilter!==pd||te.type===ui&&e.has("OES_texture_float_linear")===!1||o===!1&&te.type===zi&&e.has("OES_texture_half_float_linear")===!1)return;(te.anisotropy>1||r.get(te).__currentAnisotropy)&&(t.texParameterf(ie,Je.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(te.anisotropy,i.getMaxAnisotropy())),r.get(te).__currentAnisotropy=te.anisotropy)}}function ye(ie,te){let Ae=!1;ie.__webglInit===void 0&&(ie.__webglInit=!0,te.addEventListener("dispose",O));const Je=te.source;let Qe=m.get(Je);Qe===void 0&&(Qe={},m.set(Je,Qe));const Ze=J(te);if(Ze!==ie.__cacheKey){Qe[Ze]===void 0&&(Qe[Ze]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,Ae=!0),Qe[Ze].usedTimes++;const At=Qe[ie.__cacheKey];At!==void 0&&(Qe[ie.__cacheKey].usedTimes--,At.usedTimes===0&&I(te)),ie.__cacheKey=Ze,ie.__webglTexture=Qe[Ze].texture}return Ae}function Ne(ie,te,Ae){let Je=t.TEXTURE_2D;(te.isDataArrayTexture||te.isCompressedArrayTexture)&&(Je=t.TEXTURE_2D_ARRAY),te.isData3DTexture&&(Je=t.TEXTURE_3D);const Qe=ye(ie,te),Ze=te.source;n.bindTexture(Je,ie.__webglTexture,t.TEXTURE0+Ae);const At=r.get(Ze);if(Ze.version!==At.__version||Qe===!0){n.activeTexture(t.TEXTURE0+Ae);const gt=ur.getPrimaries(ur.workingColorSpace),St=te.colorSpace===Ls?null:ur.getPrimaries(te.colorSpace),Ft=te.colorSpace===Ls||gt===St?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,te.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,te.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ft);const Yt=_(te)&&x(te.image)===!1;let tt=b(te.image,Yt,!1,i.maxTextureSize);tt=ot(te,tt);const yn=x(tt)||o,gn=a.convert(te.format,te.colorSpace);let $t=a.convert(te.type),Mt=A(te.internalFormat,gn,$t,te.colorSpace,te.isVideoTexture);se(Je,te,yn);let Et;const me=te.mipmaps,Ge=o&&te.isVideoTexture!==!0&&Mt!==Bk,dt=At.__version===void 0||Qe===!0,wt=R(te,tt,yn);if(te.isDepthTexture)Mt=t.DEPTH_COMPONENT,o?te.type===ui?Mt=t.DEPTH_COMPONENT32F:te.type===Sl?Mt=t.DEPTH_COMPONENT24:te.type===sd?Mt=t.DEPTH24_STENCIL8:Mt=t.DEPTH_COMPONENT16:te.type===ui&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),te.format===od&&Mt===t.DEPTH_COMPONENT&&te.type!==gS&&te.type!==Sl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),te.type=Sl,$t=a.convert(te.type)),te.format===yh&&Mt===t.DEPTH_COMPONENT&&(Mt=t.DEPTH_STENCIL,te.type!==sd&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),te.type=sd,$t=a.convert(te.type))),dt&&(Ge?n.texStorage2D(t.TEXTURE_2D,1,Mt,tt.width,tt.height):n.texImage2D(t.TEXTURE_2D,0,Mt,tt.width,tt.height,0,gn,$t,null));else if(te.isDataTexture)if(me.length>0&&yn){Ge&&dt&&n.texStorage2D(t.TEXTURE_2D,wt,Mt,me[0].width,me[0].height);for(let Ce=0,ge=me.length;Ce<ge;Ce++)Et=me[Ce],Ge?n.texSubImage2D(t.TEXTURE_2D,Ce,0,0,Et.width,Et.height,gn,$t,Et.data):n.texImage2D(t.TEXTURE_2D,Ce,Mt,Et.width,Et.height,0,gn,$t,Et.data);te.generateMipmaps=!1}else Ge?(dt&&n.texStorage2D(t.TEXTURE_2D,wt,Mt,tt.width,tt.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,tt.width,tt.height,gn,$t,tt.data)):n.texImage2D(t.TEXTURE_2D,0,Mt,tt.width,tt.height,0,gn,$t,tt.data);else if(te.isCompressedTexture)if(te.isCompressedArrayTexture){Ge&&dt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,wt,Mt,me[0].width,me[0].height,tt.depth);for(let Ce=0,ge=me.length;Ce<ge;Ce++)Et=me[Ce],te.format!==Si?gn!==null?Ge?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ce,0,0,0,Et.width,Et.height,tt.depth,gn,Et.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Ce,Mt,Et.width,Et.height,tt.depth,0,Et.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ge?n.texSubImage3D(t.TEXTURE_2D_ARRAY,Ce,0,0,0,Et.width,Et.height,tt.depth,gn,$t,Et.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Ce,Mt,Et.width,Et.height,tt.depth,0,gn,$t,Et.data)}else{Ge&&dt&&n.texStorage2D(t.TEXTURE_2D,wt,Mt,me[0].width,me[0].height);for(let Ce=0,ge=me.length;Ce<ge;Ce++)Et=me[Ce],te.format!==Si?gn!==null?Ge?n.compressedTexSubImage2D(t.TEXTURE_2D,Ce,0,0,Et.width,Et.height,gn,Et.data):n.compressedTexImage2D(t.TEXTURE_2D,Ce,Mt,Et.width,Et.height,0,Et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ge?n.texSubImage2D(t.TEXTURE_2D,Ce,0,0,Et.width,Et.height,gn,$t,Et.data):n.texImage2D(t.TEXTURE_2D,Ce,Mt,Et.width,Et.height,0,gn,$t,Et.data)}else if(te.isDataArrayTexture)Ge?(dt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,wt,Mt,tt.width,tt.height,tt.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,tt.width,tt.height,tt.depth,gn,$t,tt.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Mt,tt.width,tt.height,tt.depth,0,gn,$t,tt.data);else if(te.isData3DTexture)Ge?(dt&&n.texStorage3D(t.TEXTURE_3D,wt,Mt,tt.width,tt.height,tt.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,tt.width,tt.height,tt.depth,gn,$t,tt.data)):n.texImage3D(t.TEXTURE_3D,0,Mt,tt.width,tt.height,tt.depth,0,gn,$t,tt.data);else if(te.isFramebufferTexture){if(dt)if(Ge)n.texStorage2D(t.TEXTURE_2D,wt,Mt,tt.width,tt.height);else{let Ce=tt.width,ge=tt.height;for(let ut=0;ut<wt;ut++)n.texImage2D(t.TEXTURE_2D,ut,Mt,Ce,ge,0,gn,$t,null),Ce>>=1,ge>>=1}}else if(me.length>0&&yn){Ge&&dt&&n.texStorage2D(t.TEXTURE_2D,wt,Mt,me[0].width,me[0].height);for(let Ce=0,ge=me.length;Ce<ge;Ce++)Et=me[Ce],Ge?n.texSubImage2D(t.TEXTURE_2D,Ce,0,0,gn,$t,Et):n.texImage2D(t.TEXTURE_2D,Ce,Mt,gn,$t,Et);te.generateMipmaps=!1}else Ge?(dt&&n.texStorage2D(t.TEXTURE_2D,wt,Mt,tt.width,tt.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,gn,$t,tt)):n.texImage2D(t.TEXTURE_2D,0,Mt,gn,$t,tt);M(te,yn)&&T(Je),At.__version=Ze.version,te.onUpdate&&te.onUpdate(te)}ie.__version=te.version}function Ee(ie,te,Ae){if(te.image.length!==6)return;const Je=ye(ie,te),Qe=te.source;n.bindTexture(t.TEXTURE_CUBE_MAP,ie.__webglTexture,t.TEXTURE0+Ae);const Ze=r.get(Qe);if(Qe.version!==Ze.__version||Je===!0){n.activeTexture(t.TEXTURE0+Ae);const At=ur.getPrimaries(ur.workingColorSpace),gt=te.colorSpace===Ls?null:ur.getPrimaries(te.colorSpace),St=te.colorSpace===Ls||At===gt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,te.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,te.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,St);const Ft=te.isCompressedTexture||te.image[0].isCompressedTexture,Yt=te.image[0]&&te.image[0].isDataTexture,tt=[];for(let Ce=0;Ce<6;Ce++)!Ft&&!Yt?tt[Ce]=b(te.image[Ce],!1,!0,i.maxCubemapSize):tt[Ce]=Yt?te.image[Ce].image:te.image[Ce],tt[Ce]=ot(te,tt[Ce]);const yn=tt[0],gn=x(yn)||o,$t=a.convert(te.format,te.colorSpace),Mt=a.convert(te.type),Et=A(te.internalFormat,$t,Mt,te.colorSpace),me=o&&te.isVideoTexture!==!0,Ge=Ze.__version===void 0||Je===!0;let dt=R(te,yn,gn);se(t.TEXTURE_CUBE_MAP,te,gn);let wt;if(Ft){me&&Ge&&n.texStorage2D(t.TEXTURE_CUBE_MAP,dt,Et,yn.width,yn.height);for(let Ce=0;Ce<6;Ce++){wt=tt[Ce].mipmaps;for(let ge=0;ge<wt.length;ge++){const ut=wt[ge];te.format!==Si?$t!==null?me?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,ge,0,0,ut.width,ut.height,$t,ut.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,ge,Et,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):me?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,ge,0,0,ut.width,ut.height,$t,Mt,ut.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,ge,Et,ut.width,ut.height,0,$t,Mt,ut.data)}}}else{wt=te.mipmaps,me&&Ge&&(wt.length>0&&dt++,n.texStorage2D(t.TEXTURE_CUBE_MAP,dt,Et,tt[0].width,tt[0].height));for(let Ce=0;Ce<6;Ce++)if(Yt){me?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,0,0,tt[Ce].width,tt[Ce].height,$t,Mt,tt[Ce].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,Et,tt[Ce].width,tt[Ce].height,0,$t,Mt,tt[Ce].data);for(let ge=0;ge<wt.length;ge++){const vt=wt[ge].image[Ce].image;me?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,ge+1,0,0,vt.width,vt.height,$t,Mt,vt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,ge+1,Et,vt.width,vt.height,0,$t,Mt,vt.data)}}else{me?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,0,0,$t,Mt,tt[Ce]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,Et,$t,Mt,tt[Ce]);for(let ge=0;ge<wt.length;ge++){const ut=wt[ge];me?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,ge+1,0,0,$t,Mt,ut.image[Ce]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,ge+1,Et,$t,Mt,ut.image[Ce])}}}M(te,gn)&&T(t.TEXTURE_CUBE_MAP),Ze.__version=Qe.version,te.onUpdate&&te.onUpdate(te)}ie.__version=te.version}function Oe(ie,te,Ae,Je,Qe,Ze){const At=a.convert(Ae.format,Ae.colorSpace),gt=a.convert(Ae.type),St=A(Ae.internalFormat,At,gt,Ae.colorSpace);if(!r.get(te).__hasExternalTextures){const Yt=Math.max(1,te.width>>Ze),tt=Math.max(1,te.height>>Ze);Qe===t.TEXTURE_3D||Qe===t.TEXTURE_2D_ARRAY?n.texImage3D(Qe,Ze,St,Yt,tt,te.depth,0,At,gt,null):n.texImage2D(Qe,Ze,St,Yt,tt,0,At,gt,null)}n.bindFramebuffer(t.FRAMEBUFFER,ie),ke(te)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Je,Qe,r.get(Ae).__webglTexture,0,We(te)):(Qe===t.TEXTURE_2D||Qe>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Qe<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Je,Qe,r.get(Ae).__webglTexture,Ze),n.bindFramebuffer(t.FRAMEBUFFER,null)}function $e(ie,te,Ae){if(t.bindRenderbuffer(t.RENDERBUFFER,ie),te.depthBuffer&&!te.stencilBuffer){let Je=o===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(Ae||ke(te)){const Qe=te.depthTexture;Qe&&Qe.isDepthTexture&&(Qe.type===ui?Je=t.DEPTH_COMPONENT32F:Qe.type===Sl&&(Je=t.DEPTH_COMPONENT24));const Ze=We(te);ke(te)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ze,Je,te.width,te.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Ze,Je,te.width,te.height)}else t.renderbufferStorage(t.RENDERBUFFER,Je,te.width,te.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,ie)}else if(te.depthBuffer&&te.stencilBuffer){const Je=We(te);Ae&&ke(te)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Je,t.DEPTH24_STENCIL8,te.width,te.height):ke(te)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Je,t.DEPTH24_STENCIL8,te.width,te.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,te.width,te.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,ie)}else{const Je=te.isWebGLMultipleRenderTargets===!0?te.texture:[te.texture];for(let Qe=0;Qe<Je.length;Qe++){const Ze=Je[Qe],At=a.convert(Ze.format,Ze.colorSpace),gt=a.convert(Ze.type),St=A(Ze.internalFormat,At,gt,Ze.colorSpace),Ft=We(te);Ae&&ke(te)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Ft,St,te.width,te.height):ke(te)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ft,St,te.width,te.height):t.renderbufferStorage(t.RENDERBUFFER,St,te.width,te.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Ie(ie,te){if(te&&te.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,ie),!(te.depthTexture&&te.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(te.depthTexture).__webglTexture||te.depthTexture.image.width!==te.width||te.depthTexture.image.height!==te.height)&&(te.depthTexture.image.width=te.width,te.depthTexture.image.height=te.height,te.depthTexture.needsUpdate=!0),ee(te.depthTexture,0);const Je=r.get(te.depthTexture).__webglTexture,Qe=We(te);if(te.depthTexture.format===od)ke(te)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Je,0,Qe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Je,0);else if(te.depthTexture.format===yh)ke(te)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Je,0,Qe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Je,0);else throw new Error("Unknown depthTexture format")}function qe(ie){const te=r.get(ie),Ae=ie.isWebGLCubeRenderTarget===!0;if(ie.depthTexture&&!te.__autoAllocateDepthBuffer){if(Ae)throw new Error("target.depthTexture not supported in Cube render targets");Ie(te.__webglFramebuffer,ie)}else if(Ae){te.__webglDepthbuffer=[];for(let Je=0;Je<6;Je++)n.bindFramebuffer(t.FRAMEBUFFER,te.__webglFramebuffer[Je]),te.__webglDepthbuffer[Je]=t.createRenderbuffer(),$e(te.__webglDepthbuffer[Je],ie,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,te.__webglFramebuffer),te.__webglDepthbuffer=t.createRenderbuffer(),$e(te.__webglDepthbuffer,ie,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function ve(ie,te,Ae){const Je=r.get(ie);te!==void 0&&Oe(Je.__webglFramebuffer,ie,ie.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),Ae!==void 0&&qe(ie)}function Z(ie){const te=ie.texture,Ae=r.get(ie),Je=r.get(te);ie.addEventListener("dispose",k),ie.isWebGLMultipleRenderTargets!==!0&&(Je.__webglTexture===void 0&&(Je.__webglTexture=t.createTexture()),Je.__version=te.version,s.memory.textures++);const Qe=ie.isWebGLCubeRenderTarget===!0,Ze=ie.isWebGLMultipleRenderTargets===!0,At=x(ie)||o;if(Qe){Ae.__webglFramebuffer=[];for(let gt=0;gt<6;gt++)if(o&&te.mipmaps&&te.mipmaps.length>0){Ae.__webglFramebuffer[gt]=[];for(let St=0;St<te.mipmaps.length;St++)Ae.__webglFramebuffer[gt][St]=t.createFramebuffer()}else Ae.__webglFramebuffer[gt]=t.createFramebuffer()}else{if(o&&te.mipmaps&&te.mipmaps.length>0){Ae.__webglFramebuffer=[];for(let gt=0;gt<te.mipmaps.length;gt++)Ae.__webglFramebuffer[gt]=t.createFramebuffer()}else Ae.__webglFramebuffer=t.createFramebuffer();if(Ze)if(i.drawBuffers){const gt=ie.texture;for(let St=0,Ft=gt.length;St<Ft;St++){const Yt=r.get(gt[St]);Yt.__webglTexture===void 0&&(Yt.__webglTexture=t.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&ie.samples>0&&ke(ie)===!1){const gt=Ze?te:[te];Ae.__webglMultisampledFramebuffer=t.createFramebuffer(),Ae.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,Ae.__webglMultisampledFramebuffer);for(let St=0;St<gt.length;St++){const Ft=gt[St];Ae.__webglColorRenderbuffer[St]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,Ae.__webglColorRenderbuffer[St]);const Yt=a.convert(Ft.format,Ft.colorSpace),tt=a.convert(Ft.type),yn=A(Ft.internalFormat,Yt,tt,Ft.colorSpace,ie.isXRRenderTarget===!0),gn=We(ie);t.renderbufferStorageMultisample(t.RENDERBUFFER,gn,yn,ie.width,ie.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+St,t.RENDERBUFFER,Ae.__webglColorRenderbuffer[St])}t.bindRenderbuffer(t.RENDERBUFFER,null),ie.depthBuffer&&(Ae.__webglDepthRenderbuffer=t.createRenderbuffer(),$e(Ae.__webglDepthRenderbuffer,ie,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Qe){n.bindTexture(t.TEXTURE_CUBE_MAP,Je.__webglTexture),se(t.TEXTURE_CUBE_MAP,te,At);for(let gt=0;gt<6;gt++)if(o&&te.mipmaps&&te.mipmaps.length>0)for(let St=0;St<te.mipmaps.length;St++)Oe(Ae.__webglFramebuffer[gt][St],ie,te,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,St);else Oe(Ae.__webglFramebuffer[gt],ie,te,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0);M(te,At)&&T(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Ze){const gt=ie.texture;for(let St=0,Ft=gt.length;St<Ft;St++){const Yt=gt[St],tt=r.get(Yt);n.bindTexture(t.TEXTURE_2D,tt.__webglTexture),se(t.TEXTURE_2D,Yt,At),Oe(Ae.__webglFramebuffer,ie,Yt,t.COLOR_ATTACHMENT0+St,t.TEXTURE_2D,0),M(Yt,At)&&T(t.TEXTURE_2D)}n.unbindTexture()}else{let gt=t.TEXTURE_2D;if((ie.isWebGL3DRenderTarget||ie.isWebGLArrayRenderTarget)&&(o?gt=ie.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(gt,Je.__webglTexture),se(gt,te,At),o&&te.mipmaps&&te.mipmaps.length>0)for(let St=0;St<te.mipmaps.length;St++)Oe(Ae.__webglFramebuffer[St],ie,te,t.COLOR_ATTACHMENT0,gt,St);else Oe(Ae.__webglFramebuffer,ie,te,t.COLOR_ATTACHMENT0,gt,0);M(te,At)&&T(gt),n.unbindTexture()}ie.depthBuffer&&qe(ie)}function Pe(ie){const te=x(ie)||o,Ae=ie.isWebGLMultipleRenderTargets===!0?ie.texture:[ie.texture];for(let Je=0,Qe=Ae.length;Je<Qe;Je++){const Ze=Ae[Je];if(M(Ze,te)){const At=ie.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,gt=r.get(Ze).__webglTexture;n.bindTexture(At,gt),T(At),n.unbindTexture()}}}function Me(ie){if(o&&ie.samples>0&&ke(ie)===!1){const te=ie.isWebGLMultipleRenderTargets?ie.texture:[ie.texture],Ae=ie.width,Je=ie.height;let Qe=t.COLOR_BUFFER_BIT;const Ze=[],At=ie.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,gt=r.get(ie),St=ie.isWebGLMultipleRenderTargets===!0;if(St)for(let Ft=0;Ft<te.length;Ft++)n.bindFramebuffer(t.FRAMEBUFFER,gt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ft,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,gt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ft,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,gt.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,gt.__webglFramebuffer);for(let Ft=0;Ft<te.length;Ft++){Ze.push(t.COLOR_ATTACHMENT0+Ft),ie.depthBuffer&&Ze.push(At);const Yt=gt.__ignoreDepthValues!==void 0?gt.__ignoreDepthValues:!1;if(Yt===!1&&(ie.depthBuffer&&(Qe|=t.DEPTH_BUFFER_BIT),ie.stencilBuffer&&(Qe|=t.STENCIL_BUFFER_BIT)),St&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,gt.__webglColorRenderbuffer[Ft]),Yt===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[At]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[At])),St){const tt=r.get(te[Ft]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,tt,0)}t.blitFramebuffer(0,0,Ae,Je,0,0,Ae,Je,Qe,t.NEAREST),u&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Ze)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),St)for(let Ft=0;Ft<te.length;Ft++){n.bindFramebuffer(t.FRAMEBUFFER,gt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ft,t.RENDERBUFFER,gt.__webglColorRenderbuffer[Ft]);const Yt=r.get(te[Ft]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,gt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ft,t.TEXTURE_2D,Yt,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,gt.__webglMultisampledFramebuffer)}}function We(ie){return Math.min(i.maxSamples,ie.samples)}function ke(ie){const te=r.get(ie);return o&&ie.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&te.__useRenderToTexture!==!1}function ct(ie){const te=s.render.frame;f.get(ie)!==te&&(f.set(ie,te),ie.update())}function ot(ie,te){const Ae=ie.colorSpace,Je=ie.format,Qe=ie.type;return ie.isCompressedTexture===!0||ie.isVideoTexture===!0||ie.format===v_||Ae!==Hs&&Ae!==Ls&&(ur.getTransfer(Ae)===Ar?o===!1?e.has("EXT_sRGB")===!0&&Je===Si?(ie.format=v_,ie.minFilter=Gn,ie.generateMipmaps=!1):te=$k.sRGBToLinear(te):(Je!==Si||Qe!==zs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ae)),te}this.allocateTextureUnit=G,this.resetTextureUnits=W,this.setTexture2D=ee,this.setTexture2DArray=ae,this.setTexture3D=$,this.setTextureCube=B,this.rebindTextures=ve,this.setupRenderTarget=Z,this.updateRenderTargetMipmap=Pe,this.updateMultisampleRenderTarget=Me,this.setupDepthRenderbuffer=qe,this.setupFrameBufferTexture=Oe,this.useMultisampledRTT=ke}function n9(t,e,n){const r=n.isWebGL2;function i(a,s=Ls){let o;const l=ur.getTransfer(s);if(a===zs)return t.UNSIGNED_BYTE;if(a===Ik)return t.UNSIGNED_SHORT_4_4_4_4;if(a===Dk)return t.UNSIGNED_SHORT_5_5_5_1;if(a===kk)return t.BYTE;if(a===jk)return t.SHORT;if(a===gS)return t.UNSIGNED_SHORT;if(a===yS)return t.INT;if(a===Sl)return t.UNSIGNED_INT;if(a===ui)return t.FLOAT;if(a===zi)return r?t.HALF_FLOAT:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(a===T7)return t.ALPHA;if(a===Si)return t.RGBA;if(a===A7)return t.LUMINANCE;if(a===E7)return t.LUMINANCE_ALPHA;if(a===od)return t.DEPTH_COMPONENT;if(a===yh)return t.DEPTH_STENCIL;if(a===v_)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(a===Lk)return t.RED;if(a===Uk)return t.RED_INTEGER;if(a===C7)return t.RG;if(a===Fk)return t.RG_INTEGER;if(a===zk)return t.RGBA_INTEGER;if(a===Vw||a===Hw||a===Ww||a===Gw)if(l===Ar)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(a===Vw)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===Hw)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===Ww)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===Gw)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(a===Vw)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===Hw)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===Ww)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===Gw)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===JN||a===QN||a===eO||a===tO)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(a===JN)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===QN)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===eO)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===tO)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===Bk)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===nO||a===rO)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(a===nO)return l===Ar?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(a===rO)return l===Ar?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===iO||a===aO||a===sO||a===oO||a===lO||a===cO||a===uO||a===dO||a===fO||a===hO||a===pO||a===mO||a===gO||a===yO)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(a===iO)return l===Ar?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===aO)return l===Ar?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===sO)return l===Ar?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===oO)return l===Ar?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===lO)return l===Ar?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===cO)return l===Ar?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===uO)return l===Ar?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===dO)return l===Ar?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===fO)return l===Ar?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===hO)return l===Ar?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===pO)return l===Ar?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===mO)return l===Ar?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===gO)return l===Ar?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===yO)return l===Ar?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===$w||a===vO||a===xO)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(a===$w)return l===Ar?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(a===vO)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(a===xO)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(a===P7||a===bO||a===wO||a===_O)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(a===$w)return o.COMPRESSED_RED_RGTC1_EXT;if(a===bO)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===wO)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===_O)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===sd?r?t.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):t[a]!==void 0?t[a]:null}return{convert:i}}class r9 extends ci{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class wm extends Xn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const fTe={type:"move"};class pC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new wm,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new wm,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new le),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new wm,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new le),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,a=null,s=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const b of e.hand.values()){const x=n.getJointPose(b,r),_=this._getHandJoint(u,b);x!==null&&(_.matrix.fromArray(x.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=x.radius),_.visible=x!==null}const f=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],m=f.position.distanceTo(h.position),y=.02,w=.005;u.inputState.pinching&&m>y+w?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&m<=y-w&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=n.getPose(e.gripSpace,r),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&a!==null&&(i=a),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(fTe)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=a!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new wm;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class hTe extends tu{constructor(e,n){super();const r=this;let i=null,a=1,s=null,o="local-floor",l=1,u=null,f=null,h=null,m=null,y=null,w=null;const b=n.getContextAttributes();let x=null,_=null;const M=[],T=[],A=new Ke;let R=null;const N=new ci;N.layers.enable(1),N.viewport=new dr;const O=new ci;O.layers.enable(2),O.viewport=new dr;const k=[N,O],C=new r9;C.layers.enable(1),C.layers.enable(2);let I=null,F=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(se){let ye=M[se];return ye===void 0&&(ye=new pC,M[se]=ye),ye.getTargetRaySpace()},this.getControllerGrip=function(se){let ye=M[se];return ye===void 0&&(ye=new pC,M[se]=ye),ye.getGripSpace()},this.getHand=function(se){let ye=M[se];return ye===void 0&&(ye=new pC,M[se]=ye),ye.getHandSpace()};function V(se){const ye=T.indexOf(se.inputSource);if(ye===-1)return;const Ne=M[ye];Ne!==void 0&&(Ne.update(se.inputSource,se.frame,u||s),Ne.dispatchEvent({type:se.type,data:se.inputSource}))}function W(){i.removeEventListener("select",V),i.removeEventListener("selectstart",V),i.removeEventListener("selectend",V),i.removeEventListener("squeeze",V),i.removeEventListener("squeezestart",V),i.removeEventListener("squeezeend",V),i.removeEventListener("end",W),i.removeEventListener("inputsourceschange",G);for(let se=0;se<M.length;se++){const ye=T[se];ye!==null&&(T[se]=null,M[se].disconnect(ye))}I=null,F=null,e.setRenderTarget(x),y=null,m=null,h=null,i=null,_=null,ne.stop(),r.isPresenting=!1,e.setPixelRatio(R),e.setSize(A.width,A.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(se){a=se,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(se){o=se,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(se){u=se},this.getBaseLayer=function(){return m!==null?m:y},this.getBinding=function(){return h},this.getFrame=function(){return w},this.getSession=function(){return i},this.setSession=async function(se){if(i=se,i!==null){if(x=e.getRenderTarget(),i.addEventListener("select",V),i.addEventListener("selectstart",V),i.addEventListener("selectend",V),i.addEventListener("squeeze",V),i.addEventListener("squeezestart",V),i.addEventListener("squeezeend",V),i.addEventListener("end",W),i.addEventListener("inputsourceschange",G),b.xrCompatible!==!0&&await n.makeXRCompatible(),R=e.getPixelRatio(),e.getSize(A),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ye={antialias:i.renderState.layers===void 0?b.antialias:!0,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:a};y=new XRWebGLLayer(i,n,ye),i.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),_=new ys(y.framebufferWidth,y.framebufferHeight,{format:Si,type:zs,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil})}else{let ye=null,Ne=null,Ee=null;b.depth&&(Ee=b.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ye=b.stencil?yh:od,Ne=b.stencil?sd:Sl);const Oe={colorFormat:n.RGBA8,depthFormat:Ee,scaleFactor:a};h=new XRWebGLBinding(i,n),m=h.createProjectionLayer(Oe),i.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),_=new ys(m.textureWidth,m.textureHeight,{format:Si,type:zs,depthTexture:new wS(m.textureWidth,m.textureHeight,Ne,void 0,void 0,void 0,void 0,void 0,void 0,ye),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0});const $e=e.properties.get(_);$e.__ignoreDepthValues=m.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=await i.requestReferenceSpace(o),ne.setContext(i),ne.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function G(se){for(let ye=0;ye<se.removed.length;ye++){const Ne=se.removed[ye],Ee=T.indexOf(Ne);Ee>=0&&(T[Ee]=null,M[Ee].disconnect(Ne))}for(let ye=0;ye<se.added.length;ye++){const Ne=se.added[ye];let Ee=T.indexOf(Ne);if(Ee===-1){for(let $e=0;$e<M.length;$e++)if($e>=T.length){T.push(Ne),Ee=$e;break}else if(T[$e]===null){T[$e]=Ne,Ee=$e;break}if(Ee===-1)break}const Oe=M[Ee];Oe&&Oe.connect(Ne)}}const J=new le,ee=new le;function ae(se,ye,Ne){J.setFromMatrixPosition(ye.matrixWorld),ee.setFromMatrixPosition(Ne.matrixWorld);const Ee=J.distanceTo(ee),Oe=ye.projectionMatrix.elements,$e=Ne.projectionMatrix.elements,Ie=Oe[14]/(Oe[10]-1),qe=Oe[14]/(Oe[10]+1),ve=(Oe[9]+1)/Oe[5],Z=(Oe[9]-1)/Oe[5],Pe=(Oe[8]-1)/Oe[0],Me=($e[8]+1)/$e[0],We=Ie*Pe,ke=Ie*Me,ct=Ee/(-Pe+Me),ot=ct*-Pe;ye.matrixWorld.decompose(se.position,se.quaternion,se.scale),se.translateX(ot),se.translateZ(ct),se.matrixWorld.compose(se.position,se.quaternion,se.scale),se.matrixWorldInverse.copy(se.matrixWorld).invert();const ie=Ie+ct,te=qe+ct,Ae=We-ot,Je=ke+(Ee-ot),Qe=ve*qe/te*ie,Ze=Z*qe/te*ie;se.projectionMatrix.makePerspective(Ae,Je,Qe,Ze,ie,te),se.projectionMatrixInverse.copy(se.projectionMatrix).invert()}function $(se,ye){ye===null?se.matrixWorld.copy(se.matrix):se.matrixWorld.multiplyMatrices(ye.matrixWorld,se.matrix),se.matrixWorldInverse.copy(se.matrixWorld).invert()}this.updateCamera=function(se){if(i===null)return;C.near=O.near=N.near=se.near,C.far=O.far=N.far=se.far,(I!==C.near||F!==C.far)&&(i.updateRenderState({depthNear:C.near,depthFar:C.far}),I=C.near,F=C.far);const ye=se.parent,Ne=C.cameras;$(C,ye);for(let Ee=0;Ee<Ne.length;Ee++)$(Ne[Ee],ye);Ne.length===2?ae(C,N,O):C.projectionMatrix.copy(N.projectionMatrix),B(se,C,ye)};function B(se,ye,Ne){Ne===null?se.matrix.copy(ye.matrixWorld):(se.matrix.copy(Ne.matrixWorld),se.matrix.invert(),se.matrix.multiply(ye.matrixWorld)),se.matrix.decompose(se.position,se.quaternion,se.scale),se.updateMatrixWorld(!0),se.projectionMatrix.copy(ye.projectionMatrix),se.projectionMatrixInverse.copy(ye.projectionMatrixInverse),se.isPerspectiveCamera&&(se.fov=ug*2*Math.atan(1/se.projectionMatrix.elements[5]),se.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(m===null&&y===null))return l},this.setFoveation=function(se){l=se,m!==null&&(m.fixedFoveation=se),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=se)};let Y=null;function X(se,ye){if(f=ye.getViewerPose(u||s),w=ye,f!==null){const Ne=f.views;y!==null&&(e.setRenderTargetFramebuffer(_,y.framebuffer),e.setRenderTarget(_));let Ee=!1;Ne.length!==C.cameras.length&&(C.cameras.length=0,Ee=!0);for(let Oe=0;Oe<Ne.length;Oe++){const $e=Ne[Oe];let Ie=null;if(y!==null)Ie=y.getViewport($e);else{const ve=h.getViewSubImage(m,$e);Ie=ve.viewport,Oe===0&&(e.setRenderTargetTextures(_,ve.colorTexture,m.ignoreDepthValues?void 0:ve.depthStencilTexture),e.setRenderTarget(_))}let qe=k[Oe];qe===void 0&&(qe=new ci,qe.layers.enable(Oe),qe.viewport=new dr,k[Oe]=qe),qe.matrix.fromArray($e.transform.matrix),qe.matrix.decompose(qe.position,qe.quaternion,qe.scale),qe.projectionMatrix.fromArray($e.projectionMatrix),qe.projectionMatrixInverse.copy(qe.projectionMatrix).invert(),qe.viewport.set(Ie.x,Ie.y,Ie.width,Ie.height),Oe===0&&(C.matrix.copy(qe.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),Ee===!0&&C.cameras.push(qe)}}for(let Ne=0;Ne<M.length;Ne++){const Ee=T[Ne],Oe=M[Ne];Ee!==null&&Oe!==void 0&&Oe.update(Ee,ye,u||s)}Y&&Y(se,ye),ye.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ye}),w=null}const ne=new K7;ne.setAnimationLoop(X),this.setAnimationLoop=function(se){Y=se},this.dispose=function(){}}}function pTe(t,e){function n(x,_){x.matrixAutoUpdate===!0&&x.updateMatrix(),_.value.copy(x.matrix)}function r(x,_){_.color.getRGB(x.fogColor.value,q7(t)),_.isFog?(x.fogNear.value=_.near,x.fogFar.value=_.far):_.isFogExp2&&(x.fogDensity.value=_.density)}function i(x,_,M,T,A){_.isMeshBasicMaterial||_.isMeshLambertMaterial?a(x,_):_.isMeshToonMaterial?(a(x,_),h(x,_)):_.isMeshPhongMaterial?(a(x,_),f(x,_)):_.isMeshStandardMaterial?(a(x,_),m(x,_),_.isMeshPhysicalMaterial&&y(x,_,A)):_.isMeshMatcapMaterial?(a(x,_),w(x,_)):_.isMeshDepthMaterial?a(x,_):_.isMeshDistanceMaterial?(a(x,_),b(x,_)):_.isMeshNormalMaterial?a(x,_):_.isLineBasicMaterial?(s(x,_),_.isLineDashedMaterial&&o(x,_)):_.isPointsMaterial?l(x,_,M,T):_.isSpriteMaterial?u(x,_):_.isShadowMaterial?(x.color.value.copy(_.color),x.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function a(x,_){x.opacity.value=_.opacity,_.color&&x.diffuse.value.copy(_.color),_.emissive&&x.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(x.map.value=_.map,n(_.map,x.mapTransform)),_.alphaMap&&(x.alphaMap.value=_.alphaMap,n(_.alphaMap,x.alphaMapTransform)),_.bumpMap&&(x.bumpMap.value=_.bumpMap,n(_.bumpMap,x.bumpMapTransform),x.bumpScale.value=_.bumpScale,_.side===Xa&&(x.bumpScale.value*=-1)),_.normalMap&&(x.normalMap.value=_.normalMap,n(_.normalMap,x.normalMapTransform),x.normalScale.value.copy(_.normalScale),_.side===Xa&&x.normalScale.value.negate()),_.displacementMap&&(x.displacementMap.value=_.displacementMap,n(_.displacementMap,x.displacementMapTransform),x.displacementScale.value=_.displacementScale,x.displacementBias.value=_.displacementBias),_.emissiveMap&&(x.emissiveMap.value=_.emissiveMap,n(_.emissiveMap,x.emissiveMapTransform)),_.specularMap&&(x.specularMap.value=_.specularMap,n(_.specularMap,x.specularMapTransform)),_.alphaTest>0&&(x.alphaTest.value=_.alphaTest);const M=e.get(_).envMap;if(M&&(x.envMap.value=M,x.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=_.reflectivity,x.ior.value=_.ior,x.refractionRatio.value=_.refractionRatio),_.lightMap){x.lightMap.value=_.lightMap;const T=t._useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=_.lightMapIntensity*T,n(_.lightMap,x.lightMapTransform)}_.aoMap&&(x.aoMap.value=_.aoMap,x.aoMapIntensity.value=_.aoMapIntensity,n(_.aoMap,x.aoMapTransform))}function s(x,_){x.diffuse.value.copy(_.color),x.opacity.value=_.opacity,_.map&&(x.map.value=_.map,n(_.map,x.mapTransform))}function o(x,_){x.dashSize.value=_.dashSize,x.totalSize.value=_.dashSize+_.gapSize,x.scale.value=_.scale}function l(x,_,M,T){x.diffuse.value.copy(_.color),x.opacity.value=_.opacity,x.size.value=_.size*M,x.scale.value=T*.5,_.map&&(x.map.value=_.map,n(_.map,x.uvTransform)),_.alphaMap&&(x.alphaMap.value=_.alphaMap,n(_.alphaMap,x.alphaMapTransform)),_.alphaTest>0&&(x.alphaTest.value=_.alphaTest)}function u(x,_){x.diffuse.value.copy(_.color),x.opacity.value=_.opacity,x.rotation.value=_.rotation,_.map&&(x.map.value=_.map,n(_.map,x.mapTransform)),_.alphaMap&&(x.alphaMap.value=_.alphaMap,n(_.alphaMap,x.alphaMapTransform)),_.alphaTest>0&&(x.alphaTest.value=_.alphaTest)}function f(x,_){x.specular.value.copy(_.specular),x.shininess.value=Math.max(_.shininess,1e-4)}function h(x,_){_.gradientMap&&(x.gradientMap.value=_.gradientMap)}function m(x,_){x.metalness.value=_.metalness,_.metalnessMap&&(x.metalnessMap.value=_.metalnessMap,n(_.metalnessMap,x.metalnessMapTransform)),x.roughness.value=_.roughness,_.roughnessMap&&(x.roughnessMap.value=_.roughnessMap,n(_.roughnessMap,x.roughnessMapTransform)),e.get(_).envMap&&(x.envMapIntensity.value=_.envMapIntensity)}function y(x,_,M){x.ior.value=_.ior,_.sheen>0&&(x.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),x.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(x.sheenColorMap.value=_.sheenColorMap,n(_.sheenColorMap,x.sheenColorMapTransform)),_.sheenRoughnessMap&&(x.sheenRoughnessMap.value=_.sheenRoughnessMap,n(_.sheenRoughnessMap,x.sheenRoughnessMapTransform))),_.clearcoat>0&&(x.clearcoat.value=_.clearcoat,x.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(x.clearcoatMap.value=_.clearcoatMap,n(_.clearcoatMap,x.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,n(_.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(x.clearcoatNormalMap.value=_.clearcoatNormalMap,n(_.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===Xa&&x.clearcoatNormalScale.value.negate())),_.iridescence>0&&(x.iridescence.value=_.iridescence,x.iridescenceIOR.value=_.iridescenceIOR,x.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(x.iridescenceMap.value=_.iridescenceMap,n(_.iridescenceMap,x.iridescenceMapTransform)),_.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=_.iridescenceThicknessMap,n(_.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),_.transmission>0&&(x.transmission.value=_.transmission,x.transmissionSamplerMap.value=M.texture,x.transmissionSamplerSize.value.set(M.width,M.height),_.transmissionMap&&(x.transmissionMap.value=_.transmissionMap,n(_.transmissionMap,x.transmissionMapTransform)),x.thickness.value=_.thickness,_.thicknessMap&&(x.thicknessMap.value=_.thicknessMap,n(_.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=_.attenuationDistance,x.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(x.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(x.anisotropyMap.value=_.anisotropyMap,n(_.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=_.specularIntensity,x.specularColor.value.copy(_.specularColor),_.specularColorMap&&(x.specularColorMap.value=_.specularColorMap,n(_.specularColorMap,x.specularColorMapTransform)),_.specularIntensityMap&&(x.specularIntensityMap.value=_.specularIntensityMap,n(_.specularIntensityMap,x.specularIntensityMapTransform))}function w(x,_){_.matcap&&(x.matcap.value=_.matcap)}function b(x,_){const M=e.get(_).light;x.referencePosition.value.setFromMatrixPosition(M.matrixWorld),x.nearDistance.value=M.shadow.camera.near,x.farDistance.value=M.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function mTe(t,e,n,r){let i={},a={},s=[];const o=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(M,T){const A=T.program;r.uniformBlockBinding(M,A)}function u(M,T){let A=i[M.id];A===void 0&&(w(M),A=f(M),i[M.id]=A,M.addEventListener("dispose",x));const R=T.program;r.updateUBOMapping(M,R);const N=e.render.frame;a[M.id]!==N&&(m(M),a[M.id]=N)}function f(M){const T=h();M.__bindingPointIndex=T;const A=t.createBuffer(),R=M.__size,N=M.usage;return t.bindBuffer(t.UNIFORM_BUFFER,A),t.bufferData(t.UNIFORM_BUFFER,R,N),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,T,A),A}function h(){for(let M=0;M<o;M++)if(s.indexOf(M)===-1)return s.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(M){const T=i[M.id],A=M.uniforms,R=M.__cache;t.bindBuffer(t.UNIFORM_BUFFER,T);for(let N=0,O=A.length;N<O;N++){const k=Array.isArray(A[N])?A[N]:[A[N]];for(let C=0,I=k.length;C<I;C++){const F=k[C];if(y(F,N,C,R)===!0){const V=F.__offset,W=Array.isArray(F.value)?F.value:[F.value];let G=0;for(let J=0;J<W.length;J++){const ee=W[J],ae=b(ee);typeof ee=="number"||typeof ee=="boolean"?(F.__data[0]=ee,t.bufferSubData(t.UNIFORM_BUFFER,V+G,F.__data)):ee.isMatrix3?(F.__data[0]=ee.elements[0],F.__data[1]=ee.elements[1],F.__data[2]=ee.elements[2],F.__data[3]=0,F.__data[4]=ee.elements[3],F.__data[5]=ee.elements[4],F.__data[6]=ee.elements[5],F.__data[7]=0,F.__data[8]=ee.elements[6],F.__data[9]=ee.elements[7],F.__data[10]=ee.elements[8],F.__data[11]=0):(ee.toArray(F.__data,G),G+=ae.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,V,F.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function y(M,T,A,R){const N=M.value,O=T+"_"+A;if(R[O]===void 0)return typeof N=="number"||typeof N=="boolean"?R[O]=N:R[O]=N.clone(),!0;{const k=R[O];if(typeof N=="number"||typeof N=="boolean"){if(k!==N)return R[O]=N,!0}else if(k.equals(N)===!1)return k.copy(N),!0}return!1}function w(M){const T=M.uniforms;let A=0;const R=16;for(let O=0,k=T.length;O<k;O++){const C=Array.isArray(T[O])?T[O]:[T[O]];for(let I=0,F=C.length;I<F;I++){const V=C[I],W=Array.isArray(V.value)?V.value:[V.value];for(let G=0,J=W.length;G<J;G++){const ee=W[G],ae=b(ee),$=A%R;$!==0&&R-$<ae.boundary&&(A+=R-$),V.__data=new Float32Array(ae.storage/Float32Array.BYTES_PER_ELEMENT),V.__offset=A,A+=ae.storage}}}const N=A%R;return N>0&&(A+=R-N),M.__size=A,M.__cache={},this}function b(M){const T={boundary:0,storage:0};return typeof M=="number"||typeof M=="boolean"?(T.boundary=4,T.storage=4):M.isVector2?(T.boundary=8,T.storage=8):M.isVector3||M.isColor?(T.boundary=16,T.storage=12):M.isVector4?(T.boundary=16,T.storage=16):M.isMatrix3?(T.boundary=48,T.storage=48):M.isMatrix4?(T.boundary=64,T.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),T}function x(M){const T=M.target;T.removeEventListener("dispose",x);const A=s.indexOf(T.__bindingPointIndex);s.splice(A,1),t.deleteBuffer(i[T.id]),delete i[T.id],delete a[T.id]}function _(){for(const M in i)t.deleteBuffer(i[M]);s=[],i={},a={}}return{bind:l,update:u,dispose:_}}class SS{constructor(e={}){const{canvas:n=W7(),context:r=null,depth:i=!0,stencil:a=!0,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let m;r!==null?m=r.getContextAttributes().alpha:m=s;const y=new Uint32Array(4),w=new Int32Array(4);let b=null,x=null;const _=[],M=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=wi,this._useLegacyLights=!1,this.toneMapping=Ol,this.toneMappingExposure=1;const T=this;let A=!1,R=0,N=0,O=null,k=-1,C=null;const I=new dr,F=new dr;let V=null;const W=new kt(0);let G=0,J=n.width,ee=n.height,ae=1,$=null,B=null;const Y=new dr(0,0,J,ee),X=new dr(0,0,J,ee);let ne=!1;const se=new px;let ye=!1,Ne=!1,Ee=null;const Oe=new dn,$e=new Ke,Ie=new le,qe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ve(){return O===null?ae:1}let Z=r;function Pe(q,oe){for(let ce=0;ce<q.length;ce++){const pe=q[ce],he=n.getContext(pe,oe);if(he!==null)return he}return null}try{const q={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${lx}`),n.addEventListener("webglcontextlost",Ce,!1),n.addEventListener("webglcontextrestored",ge,!1),n.addEventListener("webglcontextcreationerror",ut,!1),Z===null){const oe=["webgl2","webgl","experimental-webgl"];if(T.isWebGL1Renderer===!0&&oe.shift(),Z=Pe(oe,q),Z===null)throw Pe(oe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&Z instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),Z.getShaderPrecisionFormat===void 0&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(q){throw console.error("THREE.WebGLRenderer: "+q.message),q}let Me,We,ke,ct,ot,ie,te,Ae,Je,Qe,Ze,At,gt,St,Ft,Yt,tt,yn,gn,$t,Mt,Et,me,Ge;function dt(){Me=new PSe(Z),We=new SSe(Z,Me,e),Me.init(We),Et=new n9(Z,Me,We),ke=new uTe(Z,Me,We),ct=new RSe(Z),ot=new JMe,ie=new dTe(Z,Me,ke,ot,We,Et,ct),te=new TSe(T),Ae=new CSe(T),Je=new zwe(Z,We),me=new wSe(Z,Me,Je,We),Qe=new NSe(Z,Je,ct,me),Ze=new DSe(Z,Qe,Je,ct),gn=new ISe(Z,We,ie),Yt=new MSe(ot),At=new ZMe(T,te,Ae,Me,We,me,Yt),gt=new pTe(T,ot),St=new eTe,Ft=new sTe(Me,We),yn=new bSe(T,te,Ae,ke,Ze,m,l),tt=new cTe(T,Ze,We),Ge=new mTe(Z,ct,We,ke),$t=new _Se(Z,Me,ct,We),Mt=new OSe(Z,Me,ct,We),ct.programs=At.programs,T.capabilities=We,T.extensions=Me,T.properties=ot,T.renderLists=St,T.shadowMap=tt,T.state=ke,T.info=ct}dt();const wt=new hTe(T,Z);this.xr=wt,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const q=Me.get("WEBGL_lose_context");q&&q.loseContext()},this.forceContextRestore=function(){const q=Me.get("WEBGL_lose_context");q&&q.restoreContext()},this.getPixelRatio=function(){return ae},this.setPixelRatio=function(q){q!==void 0&&(ae=q,this.setSize(J,ee,!1))},this.getSize=function(q){return q.set(J,ee)},this.setSize=function(q,oe,ce=!0){if(wt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}J=q,ee=oe,n.width=Math.floor(q*ae),n.height=Math.floor(oe*ae),ce===!0&&(n.style.width=q+"px",n.style.height=oe+"px"),this.setViewport(0,0,q,oe)},this.getDrawingBufferSize=function(q){return q.set(J*ae,ee*ae).floor()},this.setDrawingBufferSize=function(q,oe,ce){J=q,ee=oe,ae=ce,n.width=Math.floor(q*ce),n.height=Math.floor(oe*ce),this.setViewport(0,0,q,oe)},this.getCurrentViewport=function(q){return q.copy(I)},this.getViewport=function(q){return q.copy(Y)},this.setViewport=function(q,oe,ce,pe){q.isVector4?Y.set(q.x,q.y,q.z,q.w):Y.set(q,oe,ce,pe),ke.viewport(I.copy(Y).multiplyScalar(ae).floor())},this.getScissor=function(q){return q.copy(X)},this.setScissor=function(q,oe,ce,pe){q.isVector4?X.set(q.x,q.y,q.z,q.w):X.set(q,oe,ce,pe),ke.scissor(F.copy(X).multiplyScalar(ae).floor())},this.getScissorTest=function(){return ne},this.setScissorTest=function(q){ke.setScissorTest(ne=q)},this.setOpaqueSort=function(q){$=q},this.setTransparentSort=function(q){B=q},this.getClearColor=function(q){return q.copy(yn.getClearColor())},this.setClearColor=function(){yn.setClearColor.apply(yn,arguments)},this.getClearAlpha=function(){return yn.getClearAlpha()},this.setClearAlpha=function(){yn.setClearAlpha.apply(yn,arguments)},this.clear=function(q=!0,oe=!0,ce=!0){let pe=0;if(q){let he=!1;if(O!==null){const Ue=O.texture.format;he=Ue===zk||Ue===Fk||Ue===Uk}if(he){const Ue=O.texture.type,ze=Ue===zs||Ue===Sl||Ue===gS||Ue===sd||Ue===Ik||Ue===Dk,Ve=yn.getClearColor(),De=yn.getClearAlpha(),Ct=Ve.r,nt=Ve.g,it=Ve.b;ze?(y[0]=Ct,y[1]=nt,y[2]=it,y[3]=De,Z.clearBufferuiv(Z.COLOR,0,y)):(w[0]=Ct,w[1]=nt,w[2]=it,w[3]=De,Z.clearBufferiv(Z.COLOR,0,w))}else pe|=Z.COLOR_BUFFER_BIT}oe&&(pe|=Z.DEPTH_BUFFER_BIT),ce&&(pe|=Z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Z.clear(pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ce,!1),n.removeEventListener("webglcontextrestored",ge,!1),n.removeEventListener("webglcontextcreationerror",ut,!1),St.dispose(),Ft.dispose(),ot.dispose(),te.dispose(),Ae.dispose(),Ze.dispose(),me.dispose(),Ge.dispose(),At.dispose(),wt.dispose(),wt.removeEventListener("sessionstart",ir),wt.removeEventListener("sessionend",Tn),Ee&&(Ee.dispose(),Ee=null),Vr.stop()};function Ce(q){q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const q=ct.autoReset,oe=tt.enabled,ce=tt.autoUpdate,pe=tt.needsUpdate,he=tt.type;dt(),ct.autoReset=q,tt.enabled=oe,tt.autoUpdate=ce,tt.needsUpdate=pe,tt.type=he}function ut(q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",q.statusMessage)}function vt(q){const oe=q.target;oe.removeEventListener("dispose",vt),Gt(oe)}function Gt(q){It(q),ot.remove(q)}function It(q){const oe=ot.get(q).programs;oe!==void 0&&(oe.forEach(function(ce){At.releaseProgram(ce)}),q.isShaderMaterial&&At.releaseShaderCache(q))}this.renderBufferDirect=function(q,oe,ce,pe,he,Ue){oe===null&&(oe=qe);const ze=he.isMesh&&he.matrixWorld.determinant()<0,Ve=K(q,oe,ce,pe,he);ke.setMaterial(pe,ze);let De=ce.index,Ct=1;if(pe.wireframe===!0){if(De=Qe.getWireframeAttribute(ce),De===void 0)return;Ct=2}const nt=ce.drawRange,it=ce.attributes.position;let Pt=nt.start*Ct,Wt=(nt.start+nt.count)*Ct;Ue!==null&&(Pt=Math.max(Pt,Ue.start*Ct),Wt=Math.min(Wt,(Ue.start+Ue.count)*Ct)),De!==null?(Pt=Math.max(Pt,0),Wt=Math.min(Wt,De.count)):it!=null&&(Pt=Math.max(Pt,0),Wt=Math.min(Wt,it.count));const qt=Wt-Pt;if(qt<0||qt===1/0)return;me.setup(he,pe,Ve,ce,De);let nn,xt=$t;if(De!==null&&(nn=Je.get(De),xt=Mt,xt.setIndex(nn)),he.isMesh)pe.wireframe===!0?(ke.setLineWidth(pe.wireframeLinewidth*ve()),xt.setMode(Z.LINES)):xt.setMode(Z.TRIANGLES);else if(he.isLine){let yt=pe.linewidth;yt===void 0&&(yt=1),ke.setLineWidth(yt*ve()),he.isLineSegments?xt.setMode(Z.LINES):he.isLineLoop?xt.setMode(Z.LINE_LOOP):xt.setMode(Z.LINE_STRIP)}else he.isPoints?xt.setMode(Z.POINTS):he.isSprite&&xt.setMode(Z.TRIANGLES);if(he.isBatchedMesh)xt.renderMultiDraw(he._multiDrawStarts,he._multiDrawCounts,he._multiDrawCount);else if(he.isInstancedMesh)xt.renderInstances(Pt,qt,he.count);else if(ce.isInstancedBufferGeometry){const yt=ce._maxInstanceCount!==void 0?ce._maxInstanceCount:1/0,tn=Math.min(ce.instanceCount,yt);xt.renderInstances(Pt,qt,tn)}else xt.render(Pt,qt)};function wn(q,oe,ce){q.transparent===!0&&q.side===el&&q.forceSinglePass===!1?(q.side=Xa,q.needsUpdate=!0,fn(q,oe,ce),q.side=Yc,q.needsUpdate=!0,fn(q,oe,ce),q.side=el):fn(q,oe,ce)}this.compile=function(q,oe,ce=null){ce===null&&(ce=q),x=Ft.get(ce),x.init(),M.push(x),ce.traverseVisible(function(he){he.isLight&&he.layers.test(oe.layers)&&(x.pushLight(he),he.castShadow&&x.pushShadow(he))}),q!==ce&&q.traverseVisible(function(he){he.isLight&&he.layers.test(oe.layers)&&(x.pushLight(he),he.castShadow&&x.pushShadow(he))}),x.setupLights(T._useLegacyLights);const pe=new Set;return q.traverse(function(he){const Ue=he.material;if(Ue)if(Array.isArray(Ue))for(let ze=0;ze<Ue.length;ze++){const Ve=Ue[ze];wn(Ve,ce,he),pe.add(Ve)}else wn(Ue,ce,he),pe.add(Ue)}),M.pop(),x=null,pe},this.compileAsync=function(q,oe,ce=null){const pe=this.compile(q,oe,ce);return new Promise(he=>{function Ue(){if(pe.forEach(function(ze){ot.get(ze).currentProgram.isReady()&&pe.delete(ze)}),pe.size===0){he(q);return}setTimeout(Ue,10)}Me.get("KHR_parallel_shader_compile")!==null?Ue():setTimeout(Ue,10)})};let On=null;function Vn(q){On&&On(q)}function ir(){Vr.stop()}function Tn(){Vr.start()}const Vr=new K7;Vr.setAnimationLoop(Vn),typeof self<"u"&&Vr.setContext(self),this.setAnimationLoop=function(q){On=q,wt.setAnimationLoop(q),q===null?Vr.stop():Vr.start()},wt.addEventListener("sessionstart",ir),wt.addEventListener("sessionend",Tn),this.render=function(q,oe){if(oe!==void 0&&oe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),oe.parent===null&&oe.matrixWorldAutoUpdate===!0&&oe.updateMatrixWorld(),wt.enabled===!0&&wt.isPresenting===!0&&(wt.cameraAutoUpdate===!0&&wt.updateCamera(oe),oe=wt.getCamera()),q.isScene===!0&&q.onBeforeRender(T,q,oe,O),x=Ft.get(q,M.length),x.init(),M.push(x),Oe.multiplyMatrices(oe.projectionMatrix,oe.matrixWorldInverse),se.setFromProjectionMatrix(Oe),Ne=this.localClippingEnabled,ye=Yt.init(this.clippingPlanes,Ne),b=St.get(q,_.length),b.init(),_.push(b),di(q,oe,0,T.sortObjects),b.finish(),T.sortObjects===!0&&b.sort($,B),this.info.render.frame++,ye===!0&&Yt.beginShadows();const ce=x.state.shadowsArray;if(tt.render(ce,q,oe),ye===!0&&Yt.endShadows(),this.info.autoReset===!0&&this.info.reset(),yn.render(b,q),x.setupLights(T._useLegacyLights),oe.isArrayCamera){const pe=oe.cameras;for(let he=0,Ue=pe.length;he<Ue;he++){const ze=pe[he];Gs(b,q,ze,ze.viewport)}}else Gs(b,q,oe);O!==null&&(ie.updateMultisampleRenderTarget(O),ie.updateRenderTargetMipmap(O)),q.isScene===!0&&q.onAfterRender(T,q,oe),me.resetDefaultState(),k=-1,C=null,M.pop(),M.length>0?x=M[M.length-1]:x=null,_.pop(),_.length>0?b=_[_.length-1]:b=null};function di(q,oe,ce,pe){if(q.visible===!1)return;if(q.layers.test(oe.layers)){if(q.isGroup)ce=q.renderOrder;else if(q.isLOD)q.autoUpdate===!0&&q.update(oe);else if(q.isLight)x.pushLight(q),q.castShadow&&x.pushShadow(q);else if(q.isSprite){if(!q.frustumCulled||se.intersectsSprite(q)){pe&&Ie.setFromMatrixPosition(q.matrixWorld).applyMatrix4(Oe);const ze=Ze.update(q),Ve=q.material;Ve.visible&&b.push(q,ze,Ve,ce,Ie.z,null)}}else if((q.isMesh||q.isLine||q.isPoints)&&(!q.frustumCulled||se.intersectsObject(q))){const ze=Ze.update(q),Ve=q.material;if(pe&&(q.boundingSphere!==void 0?(q.boundingSphere===null&&q.computeBoundingSphere(),Ie.copy(q.boundingSphere.center)):(ze.boundingSphere===null&&ze.computeBoundingSphere(),Ie.copy(ze.boundingSphere.center)),Ie.applyMatrix4(q.matrixWorld).applyMatrix4(Oe)),Array.isArray(Ve)){const De=ze.groups;for(let Ct=0,nt=De.length;Ct<nt;Ct++){const it=De[Ct],Pt=Ve[it.materialIndex];Pt&&Pt.visible&&b.push(q,ze,Pt,ce,Ie.z,it)}}else Ve.visible&&b.push(q,ze,Ve,ce,Ie.z,null)}}const Ue=q.children;for(let ze=0,Ve=Ue.length;ze<Ve;ze++)di(Ue[ze],oe,ce,pe)}function Gs(q,oe,ce,pe){const he=q.opaque,Ue=q.transmissive,ze=q.transparent;x.setupLightsView(ce),ye===!0&&Yt.setGlobalState(T.clippingPlanes,ce),Ue.length>0&&xs(he,Ue,oe,ce),pe&&ke.viewport(I.copy(pe)),he.length>0&&ta(he,oe,ce),Ue.length>0&&ta(Ue,oe,ce),ze.length>0&&ta(ze,oe,ce),ke.buffers.depth.setTest(!0),ke.buffers.depth.setMask(!0),ke.buffers.color.setMask(!0),ke.setPolygonOffset(!1)}function xs(q,oe,ce,pe){if((ce.isScene===!0?ce.overrideMaterial:null)!==null)return;const Ue=We.isWebGL2;Ee===null&&(Ee=new ys(1,1,{generateMipmaps:!0,type:Me.has("EXT_color_buffer_half_float")?zi:zs,minFilter:pd,samples:Ue?4:0})),T.getDrawingBufferSize($e),Ue?Ee.setSize($e.x,$e.y):Ee.setSize(x_($e.x),x_($e.y));const ze=T.getRenderTarget();T.setRenderTarget(Ee),T.getClearColor(W),G=T.getClearAlpha(),G<1&&T.setClearColor(16777215,.5),T.clear();const Ve=T.toneMapping;T.toneMapping=Ol,ta(q,ce,pe),ie.updateMultisampleRenderTarget(Ee),ie.updateRenderTargetMipmap(Ee);let De=!1;for(let Ct=0,nt=oe.length;Ct<nt;Ct++){const it=oe[Ct],Pt=it.object,Wt=it.geometry,qt=it.material,nn=it.group;if(qt.side===el&&Pt.layers.test(pe.layers)){const xt=qt.side;qt.side=Xa,qt.needsUpdate=!0,Ti(Pt,ce,pe,Wt,qt,nn),qt.side=xt,qt.needsUpdate=!0,De=!0}}De===!0&&(ie.updateMultisampleRenderTarget(Ee),ie.updateRenderTargetMipmap(Ee)),T.setRenderTarget(ze),T.setClearColor(W,G),T.toneMapping=Ve}function ta(q,oe,ce){const pe=oe.isScene===!0?oe.overrideMaterial:null;for(let he=0,Ue=q.length;he<Ue;he++){const ze=q[he],Ve=ze.object,De=ze.geometry,Ct=pe===null?ze.material:pe,nt=ze.group;Ve.layers.test(ce.layers)&&Ti(Ve,oe,ce,De,Ct,nt)}}function Ti(q,oe,ce,pe,he,Ue){q.onBeforeRender(T,oe,ce,pe,he,Ue),q.modelViewMatrix.multiplyMatrices(ce.matrixWorldInverse,q.matrixWorld),q.normalMatrix.getNormalMatrix(q.modelViewMatrix),he.onBeforeRender(T,oe,ce,pe,q,Ue),he.transparent===!0&&he.side===el&&he.forceSinglePass===!1?(he.side=Xa,he.needsUpdate=!0,T.renderBufferDirect(ce,oe,pe,he,q,Ue),he.side=Yc,he.needsUpdate=!0,T.renderBufferDirect(ce,oe,pe,he,q,Ue),he.side=el):T.renderBufferDirect(ce,oe,pe,he,q,Ue),q.onAfterRender(T,oe,ce,pe,he,Ue)}function fn(q,oe,ce){oe.isScene!==!0&&(oe=qe);const pe=ot.get(q),he=x.state.lights,Ue=x.state.shadowsArray,ze=he.state.version,Ve=At.getParameters(q,he.state,Ue,oe,ce),De=At.getProgramCacheKey(Ve);let Ct=pe.programs;pe.environment=q.isMeshStandardMaterial?oe.environment:null,pe.fog=oe.fog,pe.envMap=(q.isMeshStandardMaterial?Ae:te).get(q.envMap||pe.environment),Ct===void 0&&(q.addEventListener("dispose",vt),Ct=new Map,pe.programs=Ct);let nt=Ct.get(De);if(nt!==void 0){if(pe.currentProgram===nt&&pe.lightsStateVersion===ze)return ru(q,Ve),nt}else Ve.uniforms=At.getUniforms(q),q.onBuild(ce,Ve,T),q.onBeforeCompile(Ve,T),nt=At.acquireProgram(Ve,De),Ct.set(De,nt),pe.uniforms=Ve.uniforms;const it=pe.uniforms;return(!q.isShaderMaterial&&!q.isRawShaderMaterial||q.clipping===!0)&&(it.clippingPlanes=Yt.uniform),ru(q,Ve),pe.needsLights=be(q),pe.lightsStateVersion=ze,pe.needsLights&&(it.ambientLightColor.value=he.state.ambient,it.lightProbe.value=he.state.probe,it.directionalLights.value=he.state.directional,it.directionalLightShadows.value=he.state.directionalShadow,it.spotLights.value=he.state.spot,it.spotLightShadows.value=he.state.spotShadow,it.rectAreaLights.value=he.state.rectArea,it.ltc_1.value=he.state.rectAreaLTC1,it.ltc_2.value=he.state.rectAreaLTC2,it.pointLights.value=he.state.point,it.pointLightShadows.value=he.state.pointShadow,it.hemisphereLights.value=he.state.hemi,it.directionalShadowMap.value=he.state.directionalShadowMap,it.directionalShadowMatrix.value=he.state.directionalShadowMatrix,it.spotShadowMap.value=he.state.spotShadowMap,it.spotLightMatrix.value=he.state.spotLightMatrix,it.spotLightMap.value=he.state.spotLightMap,it.pointShadowMap.value=he.state.pointShadowMap,it.pointShadowMatrix.value=he.state.pointShadowMatrix),pe.currentProgram=nt,pe.uniformsList=null,nt}function Vl(q){if(q.uniformsList===null){const oe=q.currentProgram.getUniforms();q.uniformsList=Xw.seqWithValue(oe.seq,q.uniforms)}return q.uniformsList}function ru(q,oe){const ce=ot.get(q);ce.outputColorSpace=oe.outputColorSpace,ce.batching=oe.batching,ce.instancing=oe.instancing,ce.instancingColor=oe.instancingColor,ce.skinning=oe.skinning,ce.morphTargets=oe.morphTargets,ce.morphNormals=oe.morphNormals,ce.morphColors=oe.morphColors,ce.morphTargetsCount=oe.morphTargetsCount,ce.numClippingPlanes=oe.numClippingPlanes,ce.numIntersection=oe.numClipIntersection,ce.vertexAlphas=oe.vertexAlphas,ce.vertexTangents=oe.vertexTangents,ce.toneMapping=oe.toneMapping}function K(q,oe,ce,pe,he){oe.isScene!==!0&&(oe=qe),ie.resetTextureUnits();const Ue=oe.fog,ze=pe.isMeshStandardMaterial?oe.environment:null,Ve=O===null?T.outputColorSpace:O.isXRRenderTarget===!0?O.texture.colorSpace:Hs,De=(pe.isMeshStandardMaterial?Ae:te).get(pe.envMap||ze),Ct=pe.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,nt=!!ce.attributes.tangent&&(!!pe.normalMap||pe.anisotropy>0),it=!!ce.morphAttributes.position,Pt=!!ce.morphAttributes.normal,Wt=!!ce.morphAttributes.color;let qt=Ol;pe.toneMapped&&(O===null||O.isXRRenderTarget===!0)&&(qt=T.toneMapping);const nn=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,xt=nn!==void 0?nn.length:0,yt=ot.get(pe),tn=x.state.lights;if(ye===!0&&(Ne===!0||q!==C)){const vn=q===C&&pe.id===k;Yt.setState(pe,q,vn)}let Kt=!1;pe.version===yt.__version?(yt.needsLights&&yt.lightsStateVersion!==tn.state.version||yt.outputColorSpace!==Ve||he.isBatchedMesh&&yt.batching===!1||!he.isBatchedMesh&&yt.batching===!0||he.isInstancedMesh&&yt.instancing===!1||!he.isInstancedMesh&&yt.instancing===!0||he.isSkinnedMesh&&yt.skinning===!1||!he.isSkinnedMesh&&yt.skinning===!0||he.isInstancedMesh&&yt.instancingColor===!0&&he.instanceColor===null||he.isInstancedMesh&&yt.instancingColor===!1&&he.instanceColor!==null||yt.envMap!==De||pe.fog===!0&&yt.fog!==Ue||yt.numClippingPlanes!==void 0&&(yt.numClippingPlanes!==Yt.numPlanes||yt.numIntersection!==Yt.numIntersection)||yt.vertexAlphas!==Ct||yt.vertexTangents!==nt||yt.morphTargets!==it||yt.morphNormals!==Pt||yt.morphColors!==Wt||yt.toneMapping!==qt||We.isWebGL2===!0&&yt.morphTargetsCount!==xt)&&(Kt=!0):(Kt=!0,yt.__version=pe.version);let rn=yt.currentProgram;Kt===!0&&(rn=fn(pe,oe,he));let Kn=!1,vr=!1,ar=!1;const Rn=rn.getUniforms(),_n=yt.uniforms;if(ke.useProgram(rn.program)&&(Kn=!0,vr=!0,ar=!0),pe.id!==k&&(k=pe.id,vr=!0),Kn||C!==q){Rn.setValue(Z,"projectionMatrix",q.projectionMatrix),Rn.setValue(Z,"viewMatrix",q.matrixWorldInverse);const vn=Rn.map.cameraPosition;vn!==void 0&&vn.setValue(Z,Ie.setFromMatrixPosition(q.matrixWorld)),We.logarithmicDepthBuffer&&Rn.setValue(Z,"logDepthBufFC",2/(Math.log(q.far+1)/Math.LN2)),(pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshLambertMaterial||pe.isMeshBasicMaterial||pe.isMeshStandardMaterial||pe.isShaderMaterial)&&Rn.setValue(Z,"isOrthographic",q.isOrthographicCamera===!0),C!==q&&(C=q,vr=!0,ar=!0)}if(he.isSkinnedMesh){Rn.setOptional(Z,he,"bindMatrix"),Rn.setOptional(Z,he,"bindMatrixInverse");const vn=he.skeleton;vn&&(We.floatVertexTextures?(vn.boneTexture===null&&vn.computeBoneTexture(),Rn.setValue(Z,"boneTexture",vn.boneTexture,ie)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}he.isBatchedMesh&&(Rn.setOptional(Z,he,"batchingTexture"),Rn.setValue(Z,"batchingTexture",he._matricesTexture,ie));const Or=ce.morphAttributes;if((Or.position!==void 0||Or.normal!==void 0||Or.color!==void 0&&We.isWebGL2===!0)&&gn.update(he,ce,rn),(vr||yt.receiveShadow!==he.receiveShadow)&&(yt.receiveShadow=he.receiveShadow,Rn.setValue(Z,"receiveShadow",he.receiveShadow)),pe.isMeshGouraudMaterial&&pe.envMap!==null&&(_n.envMap.value=De,_n.flipEnvMap.value=De.isCubeTexture&&De.isRenderTargetTexture===!1?-1:1),vr&&(Rn.setValue(Z,"toneMappingExposure",T.toneMappingExposure),yt.needsLights&&re(_n,ar),Ue&&pe.fog===!0&&gt.refreshFogUniforms(_n,Ue),gt.refreshMaterialUniforms(_n,pe,ae,ee,Ee),Xw.upload(Z,Vl(yt),_n,ie)),pe.isShaderMaterial&&pe.uniformsNeedUpdate===!0&&(Xw.upload(Z,Vl(yt),_n,ie),pe.uniformsNeedUpdate=!1),pe.isSpriteMaterial&&Rn.setValue(Z,"center",he.center),Rn.setValue(Z,"modelViewMatrix",he.modelViewMatrix),Rn.setValue(Z,"normalMatrix",he.normalMatrix),Rn.setValue(Z,"modelMatrix",he.matrixWorld),pe.isShaderMaterial||pe.isRawShaderMaterial){const vn=pe.uniformsGroups;for(let kn=0,sr=vn.length;kn<sr;kn++)if(We.isWebGL2){const pa=vn[kn];Ge.update(pa,rn),Ge.bind(pa,rn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return rn}function re(q,oe){q.ambientLightColor.needsUpdate=oe,q.lightProbe.needsUpdate=oe,q.directionalLights.needsUpdate=oe,q.directionalLightShadows.needsUpdate=oe,q.pointLights.needsUpdate=oe,q.pointLightShadows.needsUpdate=oe,q.spotLights.needsUpdate=oe,q.spotLightShadows.needsUpdate=oe,q.rectAreaLights.needsUpdate=oe,q.hemisphereLights.needsUpdate=oe}function be(q){return q.isMeshLambertMaterial||q.isMeshToonMaterial||q.isMeshPhongMaterial||q.isMeshStandardMaterial||q.isShadowMaterial||q.isShaderMaterial&&q.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return O},this.setRenderTargetTextures=function(q,oe,ce){ot.get(q.texture).__webglTexture=oe,ot.get(q.depthTexture).__webglTexture=ce;const pe=ot.get(q);pe.__hasExternalTextures=!0,pe.__hasExternalTextures&&(pe.__autoAllocateDepthBuffer=ce===void 0,pe.__autoAllocateDepthBuffer||Me.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),pe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(q,oe){const ce=ot.get(q);ce.__webglFramebuffer=oe,ce.__useDefaultFramebuffer=oe===void 0},this.setRenderTarget=function(q,oe=0,ce=0){O=q,R=oe,N=ce;let pe=!0,he=null,Ue=!1,ze=!1;if(q){const De=ot.get(q);De.__useDefaultFramebuffer!==void 0?(ke.bindFramebuffer(Z.FRAMEBUFFER,null),pe=!1):De.__webglFramebuffer===void 0?ie.setupRenderTarget(q):De.__hasExternalTextures&&ie.rebindTextures(q,ot.get(q.texture).__webglTexture,ot.get(q.depthTexture).__webglTexture);const Ct=q.texture;(Ct.isData3DTexture||Ct.isDataArrayTexture||Ct.isCompressedArrayTexture)&&(ze=!0);const nt=ot.get(q).__webglFramebuffer;q.isWebGLCubeRenderTarget?(Array.isArray(nt[oe])?he=nt[oe][ce]:he=nt[oe],Ue=!0):We.isWebGL2&&q.samples>0&&ie.useMultisampledRTT(q)===!1?he=ot.get(q).__webglMultisampledFramebuffer:Array.isArray(nt)?he=nt[ce]:he=nt,I.copy(q.viewport),F.copy(q.scissor),V=q.scissorTest}else I.copy(Y).multiplyScalar(ae).floor(),F.copy(X).multiplyScalar(ae).floor(),V=ne;if(ke.bindFramebuffer(Z.FRAMEBUFFER,he)&&We.drawBuffers&&pe&&ke.drawBuffers(q,he),ke.viewport(I),ke.scissor(F),ke.setScissorTest(V),Ue){const De=ot.get(q.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+oe,De.__webglTexture,ce)}else if(ze){const De=ot.get(q.texture),Ct=oe||0;Z.framebufferTextureLayer(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,De.__webglTexture,ce||0,Ct)}k=-1},this.readRenderTargetPixels=function(q,oe,ce,pe,he,Ue,ze){if(!(q&&q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ve=ot.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&ze!==void 0&&(Ve=Ve[ze]),Ve){ke.bindFramebuffer(Z.FRAMEBUFFER,Ve);try{const De=q.texture,Ct=De.format,nt=De.type;if(Ct!==Si&&Et.convert(Ct)!==Z.getParameter(Z.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const it=nt===zi&&(Me.has("EXT_color_buffer_half_float")||We.isWebGL2&&Me.has("EXT_color_buffer_float"));if(nt!==zs&&Et.convert(nt)!==Z.getParameter(Z.IMPLEMENTATION_COLOR_READ_TYPE)&&!(nt===ui&&(We.isWebGL2||Me.has("OES_texture_float")||Me.has("WEBGL_color_buffer_float")))&&!it){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}oe>=0&&oe<=q.width-pe&&ce>=0&&ce<=q.height-he&&Z.readPixels(oe,ce,pe,he,Et.convert(Ct),Et.convert(nt),Ue)}finally{const De=O!==null?ot.get(O).__webglFramebuffer:null;ke.bindFramebuffer(Z.FRAMEBUFFER,De)}}},this.copyFramebufferToTexture=function(q,oe,ce=0){const pe=Math.pow(2,-ce),he=Math.floor(oe.image.width*pe),Ue=Math.floor(oe.image.height*pe);ie.setTexture2D(oe,0),Z.copyTexSubImage2D(Z.TEXTURE_2D,ce,0,0,q.x,q.y,he,Ue),ke.unbindTexture()},this.copyTextureToTexture=function(q,oe,ce,pe=0){const he=oe.image.width,Ue=oe.image.height,ze=Et.convert(ce.format),Ve=Et.convert(ce.type);ie.setTexture2D(ce,0),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,ce.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,ce.unpackAlignment),oe.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,pe,q.x,q.y,he,Ue,ze,Ve,oe.image.data):oe.isCompressedTexture?Z.compressedTexSubImage2D(Z.TEXTURE_2D,pe,q.x,q.y,oe.mipmaps[0].width,oe.mipmaps[0].height,ze,oe.mipmaps[0].data):Z.texSubImage2D(Z.TEXTURE_2D,pe,q.x,q.y,ze,Ve,oe.image),pe===0&&ce.generateMipmaps&&Z.generateMipmap(Z.TEXTURE_2D),ke.unbindTexture()},this.copyTextureToTexture3D=function(q,oe,ce,pe,he=0){if(T.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ue=q.max.x-q.min.x+1,ze=q.max.y-q.min.y+1,Ve=q.max.z-q.min.z+1,De=Et.convert(pe.format),Ct=Et.convert(pe.type);let nt;if(pe.isData3DTexture)ie.setTexture3D(pe,0),nt=Z.TEXTURE_3D;else if(pe.isDataArrayTexture||pe.isCompressedArrayTexture)ie.setTexture2DArray(pe,0),nt=Z.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,pe.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pe.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,pe.unpackAlignment);const it=Z.getParameter(Z.UNPACK_ROW_LENGTH),Pt=Z.getParameter(Z.UNPACK_IMAGE_HEIGHT),Wt=Z.getParameter(Z.UNPACK_SKIP_PIXELS),qt=Z.getParameter(Z.UNPACK_SKIP_ROWS),nn=Z.getParameter(Z.UNPACK_SKIP_IMAGES),xt=ce.isCompressedTexture?ce.mipmaps[he]:ce.image;Z.pixelStorei(Z.UNPACK_ROW_LENGTH,xt.width),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,xt.height),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,q.min.x),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,q.min.y),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,q.min.z),ce.isDataTexture||ce.isData3DTexture?Z.texSubImage3D(nt,he,oe.x,oe.y,oe.z,Ue,ze,Ve,De,Ct,xt.data):ce.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Z.compressedTexSubImage3D(nt,he,oe.x,oe.y,oe.z,Ue,ze,Ve,De,xt.data)):Z.texSubImage3D(nt,he,oe.x,oe.y,oe.z,Ue,ze,Ve,De,Ct,xt),Z.pixelStorei(Z.UNPACK_ROW_LENGTH,it),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,Pt),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,Wt),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,qt),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,nn),he===0&&pe.generateMipmaps&&Z.generateMipmap(nt),ke.unbindTexture()},this.initTexture=function(q){q.isCubeTexture?ie.setTextureCube(q,0):q.isData3DTexture?ie.setTexture3D(q,0):q.isDataArrayTexture||q.isCompressedArrayTexture?ie.setTexture2DArray(q,0):ie.setTexture2D(q,0),ke.unbindTexture()},this.resetState=function(){R=0,N=0,O=null,ke.reset(),me.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return tl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===xS?"display-p3":"srgb",n.unpackColorSpace=ur.workingColorSpace===ux?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===wi?ld:Hk}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===ld?wi:Hs}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class i9 extends SS{}i9.prototype.isWebGL1Renderer=!0;class MS{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new kt(e),this.density=n}clone(){return new MS(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class TS{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new kt(e),this.near=n,this.far=r}clone(){return new TS(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let mx=class extends Xn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}};class AS{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=j0,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Bs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Bs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Bs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Va=new le;class vh{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)Va.fromBufferAttribute(this,n),Va.applyMatrix4(e),this.setXYZ(n,Va.x,Va.y,Va.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Va.fromBufferAttribute(this,n),Va.applyNormalMatrix(e),this.setXYZ(n,Va.x,Va.y,Va.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Va.fromBufferAttribute(this,n),Va.transformDirection(e),this.setXYZ(n,Va.x,Va.y,Va.z);return this}setX(e,n){return this.normalized&&(n=Cn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Cn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Cn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Cn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=hs(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=hs(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=hs(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=hs(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Cn(n,this.array),r=Cn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Cn(n,this.array),r=Cn(r,this.array),i=Cn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=Cn(n,this.array),r=Cn(r,this.array),i=Cn(i,this.array),a=Cn(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[i+a])}return new fr(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new vh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ej extends Oa{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new kt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Kp;const Wy=new le,Zp=new le,Jp=new le,Qp=new Ke,Gy=new Ke,a9=new dn,rw=new le,$y=new le,iw=new le,LB=new Ke,mC=new Ke,UB=new Ke;class s9 extends Xn{constructor(e=new ej){if(super(),this.isSprite=!0,this.type="Sprite",Kp===void 0){Kp=new In;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new AS(n,5);Kp.setIndex([0,1,2,0,2,3]),Kp.setAttribute("position",new vh(r,3,0,!1)),Kp.setAttribute("uv",new vh(r,2,3,!1))}this.geometry=Kp,this.material=e,this.center=new Ke(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zp.setFromMatrixScale(this.matrixWorld),a9.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Jp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Zp.multiplyScalar(-Jp.z);const r=this.material.rotation;let i,a;r!==0&&(a=Math.cos(r),i=Math.sin(r));const s=this.center;aw(rw.set(-.5,-.5,0),Jp,s,Zp,i,a),aw($y.set(.5,-.5,0),Jp,s,Zp,i,a),aw(iw.set(.5,.5,0),Jp,s,Zp,i,a),LB.set(0,0),mC.set(1,0),UB.set(1,1);let o=e.ray.intersectTriangle(rw,$y,iw,!1,Wy);if(o===null&&(aw($y.set(-.5,.5,0),Jp,s,Zp,i,a),mC.set(0,1),o=e.ray.intersectTriangle(rw,iw,$y,!1,Wy),o===null))return;const l=e.ray.origin.distanceTo(Wy);l<e.near||l>e.far||n.push({distance:l,point:Wy.clone(),uv:fs.getInterpolation(Wy,rw,$y,iw,LB,mC,UB,new Ke),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function aw(t,e,n,r,i,a){Qp.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(Gy.x=a*Qp.x-i*Qp.y,Gy.y=i*Qp.x+a*Qp.y):Gy.copy(Qp),t.copy(e),t.x+=Gy.x,t.y+=Gy.y,t.applyMatrix4(a9)}const sw=new le,FB=new le;class o9 extends Xn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const a=n[r];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let a;for(a=0;a<i.length&&!(n<i[a].distance);a++);return i.splice(a,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let a=n[r].distance;if(n[r].object.visible&&(a-=a*n[r].hysteresis),e<a)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){sw.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(sw);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){sw.setFromMatrixPosition(e.matrixWorld),FB.setFromMatrixPosition(this.matrixWorld);const r=sw.distanceTo(FB)/e.zoom;n[0].object.visible=!0;let i,a;for(i=1,a=n.length;i<a;i++){let s=n[i].distance;if(n[i].object.visible&&(s-=s*n[i].hysteresis),r>=s)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<a;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,a=r.length;i<a;i++){const s=r[i];n.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return n}}const zB=new le,BB=new dr,VB=new dr,gTe=new le,HB=new dn,ow=new le,gC=new Pa,WB=new dn,yC=new Ah;class l9 extends ti{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=KN,this.bindMatrix=new dn,this.bindMatrixInverse=new dn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ya),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,ow),this.boundingBox.expandByPoint(ow)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Pa),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,ow),this.boundingSphere.expandByPoint(ow)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),gC.copy(this.boundingSphere),gC.applyMatrix4(i),e.ray.intersectsSphere(gC)!==!1&&(WB.copy(i).invert(),yC.copy(e.ray).applyMatrix4(WB),!(this.boundingBox!==null&&yC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,yC)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new dr,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===KN?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===M7?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;BB.fromBufferAttribute(i.attributes.skinIndex,e),VB.fromBufferAttribute(i.attributes.skinWeight,e),zB.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let a=0;a<4;a++){const s=VB.getComponent(a);if(s!==0){const o=BB.getComponent(a);HB.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),n.addScaledVector(gTe.copy(zB).applyMatrix4(HB),s)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class tj extends Xn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class cd extends _r{constructor(e=null,n=1,r=1,i,a,s,o,l,u=li,f=li,h,m){super(null,s,o,l,u,f,i,a,h,m),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const GB=new dn,yTe=new dn;class ES{constructor(e=[],n=[]){this.uuid=Bs(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new dn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new dn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:yTe;GB.multiplyMatrices(o,n[a]),GB.toArray(r,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new ES(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new cd(n,e,e,Si,ui);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const a=e.bones[r];let s=n[a];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),s=new tj),this.bones.push(s),this.boneInverses.push(new dn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,a=n.length;i<a;i++){const s=n[i];e.bones.push(s.uuid);const o=r[i];e.boneInverses.push(o.toArray())}return e}}class fg extends fr{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const em=new dn,$B=new dn,lw=[],qB=new Ya,vTe=new dn,qy=new ti,Xy=new Pa;class c9 extends ti{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new fg(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,vTe)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Ya),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,em),qB.copy(e.boundingBox).applyMatrix4(em),this.boundingBox.union(qB)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Pa),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,em),Xy.copy(e.boundingSphere).applyMatrix4(em),this.boundingSphere.union(Xy)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if(qy.geometry=this.geometry,qy.material=this.material,qy.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Xy.copy(this.boundingSphere),Xy.applyMatrix4(r),e.ray.intersectsSphere(Xy)!==!1))for(let a=0;a<i;a++){this.getMatrixAt(a,em),$B.multiplyMatrices(r,em),qy.matrixWorld=$B,qy.raycast(e,lw);for(let s=0,o=lw.length;s<o;s++){const l=lw[s];l.instanceId=a,l.object=this,n.push(l)}lw.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new fg(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function xTe(t,e){return t.z-e.z}function bTe(t,e){return e.z-t.z}class wTe{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const a=r[this.index];i.push(a),this.index++,a.start=e.start,a.count=e.count,a.z=n}reset(){this.list.length=0,this.index=0}}const tm="batchId",Vu=new dn,XB=new dn,_Te=new dn,YB=new dn,vC=new px,cw=new Ya,bf=new Pa,Yy=new le,xC=new wTe,Ma=new ti,uw=[];function STe(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let a=0;a<i;a++)for(let s=0;s<r;s++)e.setComponent(a+n,s,t.getComponent(a,s))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class u9 extends ti{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,r=n*2,i){super(new In,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new cd(n,e,e,Si,ui);this._matricesTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in e.attributes){const l=e.getAttribute(o),{array:u,itemSize:f,normalized:h}=l,m=new u.constructor(r*f),y=new l.constructor(m,f,h);y.setUsage(l.usage),n.setAttribute(o,y)}if(e.getIndex()!==null){const o=r>65536?new Uint32Array(a):new Uint16Array(a);n.setIndex(new fr(o,1))}const s=i>65536?new Uint32Array(r):new Uint16Array(r);n.setAttribute(tm,new fr(s,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(tm))throw new Error(`BatchedMesh: Geometry cannot use attribute "${tm}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(r===tm)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),a=n.getAttribute(r);if(i.itemSize!==a.itemSize||i.normalized!==a.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ya);const e=this._geometryCount,n=this.boundingBox,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Vu),this.getBoundingBoxAt(i,cw).applyMatrix4(Vu),n.union(cw))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Pa);const e=this._geometryCount,n=this.boundingSphere,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Vu),this.getBoundingSphereAt(i,bf).applyMatrix4(Vu),n.union(bf))}addGeometry(e,n=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let a=null;const s=this._reservedRanges,o=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(a=s[s.length-1]),n===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=n,a===null?i.vertexStart=0:i.vertexStart=a.vertexStart+a.vertexCount;const u=e.getIndex(),f=u!==null;if(f&&(r===-1?i.indexCount=u.count:i.indexCount=r,a===null?i.indexStart=0:i.indexStart=a.indexStart+a.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const h=this._visibility,m=this._active,y=this._matricesTexture,w=this._matricesTexture.image.data;h.push(!0),m.push(!0);const b=this._geometryCount;this._geometryCount++,_Te.toArray(w,b*16),y.needsUpdate=!0,s.push(i),o.push({start:f?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Ya,sphereInitialized:!1,sphere:new Pa});const x=this.geometry.getAttribute(tm);for(let _=0;_<i.vertexCount;_++)x.setX(i.vertexStart+_,b);return x.needsUpdate=!0,this.setGeometryAt(b,e),b}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,a=r.getIndex(),s=n.getIndex(),o=this._reservedRanges[e];if(i&&s.count>o.indexCount||n.attributes.position.count>o.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,u=o.vertexCount;for(const y in r.attributes){if(y===tm)continue;const w=n.getAttribute(y),b=r.getAttribute(y);STe(w,b,l);const x=w.itemSize;for(let _=w.count,M=u;_<M;_++){const T=l+_;for(let A=0;A<x;A++)b.setComponent(T,A,0)}b.needsUpdate=!0}if(i){const y=o.indexStart;for(let w=0;w<s.count;w++)a.setX(y+w,l+s.getX(w));for(let w=s.count,b=o.indexCount;w<b;w++)a.setX(y+w,l);a.needsUpdate=!0}const f=this._bounds[e];n.boundingBox!==null?(f.box.copy(n.boundingBox),f.boxInitialized=!0):f.boxInitialized=!1,n.boundingSphere!==null?(f.sphere.copy(n.boundingSphere),f.sphereInitialized=!0):f.sphereInitialized=!1;const h=this._drawRanges[e],m=n.getAttribute("position");return h.count=i?s.count:m.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,n){if(this._active[e]===!1)return this;const i=this._bounds[e],a=i.box,s=this.geometry;if(i.boxInitialized===!1){a.makeEmpty();const o=s.index,l=s.attributes.position,u=this._drawRanges[e];for(let f=u.start,h=u.start+u.count;f<h;f++){let m=f;o&&(m=o.getX(m)),a.expandByPoint(Yy.fromBufferAttribute(l,m))}i.boxInitialized=!0}return n.copy(a),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return this;const i=this._bounds[e],a=i.sphere,s=this.geometry;if(i.sphereInitialized===!1){a.makeEmpty(),this.getBoundingBoxAt(e,cw),cw.getCenter(a.center);const o=s.index,l=s.attributes.position,u=this._drawRanges[e];let f=0;for(let h=u.start,m=u.start+u.count;h<m;h++){let y=h;o&&(y=o.getX(y)),Yy.fromBufferAttribute(l,y),f=Math.max(f,a.center.distanceToSquared(Yy))}a.radius=Math.sqrt(f),i.sphereInitialized=!0}return n.copy(a),n}setMatrixAt(e,n){const r=this._active,i=this._matricesTexture,a=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?this:(n.toArray(a,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._active,i=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||r[e]===!1?null:n.fromArray(i,e*16)}setVisibleAt(e,n){const r=this._visibility,i=this._active,a=this._geometryCount;return e>=a||i[e]===!1||r[e]===n?this:(r[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:n[e]}raycast(e,n){const r=this._visibility,i=this._active,a=this._drawRanges,s=this._geometryCount,o=this.matrixWorld,l=this.geometry;Ma.material=this.material,Ma.geometry.index=l.index,Ma.geometry.attributes=l.attributes,Ma.geometry.boundingBox===null&&(Ma.geometry.boundingBox=new Ya),Ma.geometry.boundingSphere===null&&(Ma.geometry.boundingSphere=new Pa);for(let u=0;u<s;u++){if(!r[u]||!i[u])continue;const f=a[u];Ma.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(u,Ma.matrixWorld).premultiply(o),this.getBoundingBoxAt(u,Ma.geometry.boundingBox),this.getBoundingSphereAt(u,Ma.geometry.boundingSphere),Ma.raycast(e,uw);for(let h=0,m=uw.length;h<m;h++){const y=uw[h];y.object=this,y.batchId=u,n.push(y)}uw.length=0}Ma.material=null,Ma.geometry.index=null,Ma.geometry.attributes={},Ma.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,r,i,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,l=this._visibility,u=this._multiDrawStarts,f=this._multiDrawCounts,h=this._drawRanges,m=this.perObjectFrustumCulled;m&&(YB.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),vC.setFromProjectionMatrix(YB,e.isWebGPURenderer?cg:tl));let y=0;if(this.sortObjects){XB.copy(this.matrixWorld).invert(),Yy.setFromMatrixPosition(r.matrixWorld).applyMatrix4(XB);for(let x=0,_=l.length;x<_;x++)if(l[x]){this.getMatrixAt(x,Vu),this.getBoundingSphereAt(x,bf).applyMatrix4(Vu);let M=!1;if(m&&(M=!vC.intersectsSphere(bf)),!M){const T=Yy.distanceTo(bf.center);xC.push(h[x],T)}}const w=xC.list,b=this.customSort;b===null?w.sort(a.transparent?bTe:xTe):b.call(this,w,r);for(let x=0,_=w.length;x<_;x++){const M=w[x];u[y]=M.start*o,f[y]=M.count,y++}xC.reset()}else for(let w=0,b=l.length;w<b;w++)if(l[w]){let x=!1;if(m&&(this.getMatrixAt(w,Vu),this.getBoundingSphereAt(w,bf).applyMatrix4(Vu),x=!vC.intersectsSphere(bf)),!x){const _=h[w];u[y]=_.start*o,f[y]=_.count,y++}}this._multiDrawCount=y,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,a,s){this.onBeforeRender(e,null,i,a,s)}}class Ka extends Oa{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new kt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const KB=new le,ZB=new le,JB=new dn,bC=new Ah,dw=new Pa;class md extends Xn{constructor(e=new In,n=new Ka){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,a=n.count;i<a;i++)KB.fromBufferAttribute(n,i-1),ZB.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=KB.distanceTo(ZB);e.setAttribute("lineDistance",new Vt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),dw.copy(r.boundingSphere),dw.applyMatrix4(i),dw.radius+=a,e.ray.intersectsSphere(dw)===!1)return;JB.copy(i).invert(),bC.copy(e.ray).applyMatrix4(JB);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=new le,f=new le,h=new le,m=new le,y=this.isLineSegments?2:1,w=r.index,x=r.attributes.position;if(w!==null){const _=Math.max(0,s.start),M=Math.min(w.count,s.start+s.count);for(let T=_,A=M-1;T<A;T+=y){const R=w.getX(T),N=w.getX(T+1);if(u.fromBufferAttribute(x,R),f.fromBufferAttribute(x,N),bC.distanceSqToSegment(u,f,m,h)>l)continue;m.applyMatrix4(this.matrixWorld);const k=e.ray.origin.distanceTo(m);k<e.near||k>e.far||n.push({distance:k,point:h.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,s.start),M=Math.min(x.count,s.start+s.count);for(let T=_,A=M-1;T<A;T+=y){if(u.fromBufferAttribute(x,T),f.fromBufferAttribute(x,T+1),bC.distanceSqToSegment(u,f,m,h)>l)continue;m.applyMatrix4(this.matrixWorld);const N=e.ray.origin.distanceTo(m);N<e.near||N>e.far||n.push({distance:N,point:h.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}const QB=new le,e6=new le;class Bl extends md{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,a=n.count;i<a;i+=2)QB.fromBufferAttribute(n,i),e6.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+QB.distanceTo(e6);e.setAttribute("lineDistance",new Vt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class d9 extends md{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class nj extends Oa{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new kt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const t6=new dn,CO=new Ah,fw=new Pa,hw=new le;class f9 extends Xn{constructor(e=new In,n=new nj){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),fw.copy(r.boundingSphere),fw.applyMatrix4(i),fw.radius+=a,e.ray.intersectsSphere(fw)===!1)return;t6.copy(i).invert(),CO.copy(e.ray).applyMatrix4(t6);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=r.index,h=r.attributes.position;if(u!==null){const m=Math.max(0,s.start),y=Math.min(u.count,s.start+s.count);for(let w=m,b=y;w<b;w++){const x=u.getX(w);hw.fromBufferAttribute(h,x),n6(hw,x,l,i,e,n,this)}}else{const m=Math.max(0,s.start),y=Math.min(h.count,s.start+s.count);for(let w=m,b=y;w<b;w++)hw.fromBufferAttribute(h,w),n6(hw,w,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function n6(t,e,n,r,i,a,s){const o=CO.distanceSqToPoint(t);if(o<n){const l=new le;CO.closestPointToPoint(t,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:s})}}class MTe extends _r{constructor(e,n,r,i,a,s,o,l,u){super(e,n,r,i,a,s,o,l,u),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:Gn,this.magFilter=a!==void 0?a:Gn,this.generateMipmaps=!1;const f=this;function h(){f.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class TTe extends _r{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=li,this.minFilter=li,this.generateMipmaps=!1,this.needsUpdate=!0}}class CS extends _r{constructor(e,n,r,i,a,s,o,l,u,f,h,m){super(null,s,o,l,u,f,i,a,h,m),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class ATe extends CS{constructor(e,n,r,i,a,s){super(e,n,r,a,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Fr}}class ETe extends CS{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,Il),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class CTe extends _r{constructor(e,n,r,i,a,s,o,l,u){super(e,n,r,i,a,s,o,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class al{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),a=0;n.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),a+=r.distanceTo(i),n.push(a),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const a=r.length;let s;n?s=n:s=e*r[a-1];let o=0,l=a-1,u;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),u=r[i]-s,u<0)o=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===s)return i/(a-1);const f=r[i],m=r[i+1]-f,y=(s-f)/m;return(i+y)/(a-1)}getTangent(e,n){let i=e-1e-4,a=e+1e-4;i<0&&(i=0),a>1&&(a=1);const s=this.getPoint(i),o=this.getPoint(a),l=n||(s.isVector2?new Ke:new le);return l.copy(o).sub(s).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new le,i=[],a=[],s=[],o=new le,l=new dn;for(let y=0;y<=e;y++){const w=y/e;i[y]=this.getTangentAt(w,new le)}a[0]=new le,s[0]=new le;let u=Number.MAX_VALUE;const f=Math.abs(i[0].x),h=Math.abs(i[0].y),m=Math.abs(i[0].z);f<=u&&(u=f,r.set(1,0,0)),h<=u&&(u=h,r.set(0,1,0)),m<=u&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),a[0].crossVectors(i[0],o),s[0].crossVectors(i[0],a[0]);for(let y=1;y<=e;y++){if(a[y]=a[y-1].clone(),s[y]=s[y-1].clone(),o.crossVectors(i[y-1],i[y]),o.length()>Number.EPSILON){o.normalize();const w=Math.acos(ei(i[y-1].dot(i[y]),-1,1));a[y].applyMatrix4(l.makeRotationAxis(o,w))}s[y].crossVectors(i[y],a[y])}if(n===!0){let y=Math.acos(ei(a[0].dot(a[e]),-1,1));y/=e,i[0].dot(o.crossVectors(a[0],a[e]))>0&&(y=-y);for(let w=1;w<=e;w++)a[w].applyMatrix4(l.makeRotationAxis(i[w],y*w)),s[w].crossVectors(i[w],a[w])}return{tangents:i,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class PS extends al{constructor(e=0,n=0,r=1,i=1,a=0,s=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=l}getPoint(e,n){const r=n||new Ke,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(s?a=0:a=i),this.aClockwise===!0&&!s&&(a===i?a=-i:a=a-i);const o=this.aStartAngle+e*a;let l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const f=Math.cos(this.aRotation),h=Math.sin(this.aRotation),m=l-this.aX,y=u-this.aY;l=m*f-y*h+this.aX,u=m*h+y*f+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class h9 extends PS{constructor(e,n,r,i,a,s){super(e,n,r,r,i,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function rj(){let t=0,e=0,n=0,r=0;function i(a,s,o,l){t=a,e=o,n=-3*a+3*s-2*o-l,r=2*a-2*s+o+l}return{initCatmullRom:function(a,s,o,l,u){i(s,o,u*(o-a),u*(l-s))},initNonuniformCatmullRom:function(a,s,o,l,u,f,h){let m=(s-a)/u-(o-a)/(u+f)+(o-s)/f,y=(o-s)/f-(l-s)/(f+h)+(l-o)/h;m*=f,y*=f,i(s,o,m,y)},calc:function(a){const s=a*a,o=s*a;return t+e*a+n*s+r*o}}}const pw=new le,wC=new rj,_C=new rj,SC=new rj;class p9 extends al{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new le){const r=n,i=this.points,a=i.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),l=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:l===0&&o===a-1&&(o=a-2,l=1);let u,f;this.closed||o>0?u=i[(o-1)%a]:(pw.subVectors(i[0],i[1]).add(i[0]),u=pw);const h=i[o%a],m=i[(o+1)%a];if(this.closed||o+2<a?f=i[(o+2)%a]:(pw.subVectors(i[a-1],i[a-2]).add(i[a-1]),f=pw),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let w=Math.pow(u.distanceToSquared(h),y),b=Math.pow(h.distanceToSquared(m),y),x=Math.pow(m.distanceToSquared(f),y);b<1e-4&&(b=1),w<1e-4&&(w=b),x<1e-4&&(x=b),wC.initNonuniformCatmullRom(u.x,h.x,m.x,f.x,w,b,x),_C.initNonuniformCatmullRom(u.y,h.y,m.y,f.y,w,b,x),SC.initNonuniformCatmullRom(u.z,h.z,m.z,f.z,w,b,x)}else this.curveType==="catmullrom"&&(wC.initCatmullRom(u.x,h.x,m.x,f.x,this.tension),_C.initCatmullRom(u.y,h.y,m.y,f.y,this.tension),SC.initCatmullRom(u.z,h.z,m.z,f.z,this.tension));return r.set(wC.calc(l),_C.calc(l),SC.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new le().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function r6(t,e,n,r,i){const a=(r-e)*.5,s=(i-n)*.5,o=t*t,l=t*o;return(2*n-2*r+a+s)*l+(-3*n+3*r-2*a-s)*o+a*t+n}function PTe(t,e){const n=1-t;return n*n*e}function NTe(t,e){return 2*(1-t)*t*e}function OTe(t,e){return t*t*e}function Pv(t,e,n,r){return PTe(t,e)+NTe(t,n)+OTe(t,r)}function RTe(t,e){const n=1-t;return n*n*n*e}function kTe(t,e){const n=1-t;return 3*n*n*t*e}function jTe(t,e){return 3*(1-t)*t*t*e}function ITe(t,e){return t*t*t*e}function Nv(t,e,n,r,i){return RTe(t,e)+kTe(t,n)+jTe(t,r)+ITe(t,i)}class ij extends al{constructor(e=new Ke,n=new Ke,r=new Ke,i=new Ke){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new Ke){const r=n,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(Nv(e,i.x,a.x,s.x,o.x),Nv(e,i.y,a.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class m9 extends al{constructor(e=new le,n=new le,r=new le,i=new le){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new le){const r=n,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(Nv(e,i.x,a.x,s.x,o.x),Nv(e,i.y,a.y,s.y,o.y),Nv(e,i.z,a.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class aj extends al{constructor(e=new Ke,n=new Ke){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Ke){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Ke){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class g9 extends al{constructor(e=new le,n=new le){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new le){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new le){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sj extends al{constructor(e=new Ke,n=new Ke,r=new Ke){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Ke){const r=n,i=this.v0,a=this.v1,s=this.v2;return r.set(Pv(e,i.x,a.x,s.x),Pv(e,i.y,a.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oj extends al{constructor(e=new le,n=new le,r=new le){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new le){const r=n,i=this.v0,a=this.v1,s=this.v2;return r.set(Pv(e,i.x,a.x,s.x),Pv(e,i.y,a.y,s.y),Pv(e,i.z,a.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lj extends al{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Ke){const r=n,i=this.points,a=(i.length-1)*e,s=Math.floor(a),o=a-s,l=i[s===0?s:s-1],u=i[s],f=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return r.set(r6(o,l.x,u.x,f.x,h.x),r6(o,l.y,u.y,f.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new Ke().fromArray(i))}return this}}var b_=Object.freeze({__proto__:null,ArcCurve:h9,CatmullRomCurve3:p9,CubicBezierCurve:ij,CubicBezierCurve3:m9,EllipseCurve:PS,LineCurve:aj,LineCurve3:g9,QuadraticBezierCurve:sj,QuadraticBezierCurve3:oj,SplineCurve:lj});class y9 extends al{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new b_[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=r){const s=i[a]-r,o=this.curves[a],l=o.getLength(),u=l===0?0:1-s/l;return o.getPointAt(u,n)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,a=this.curves;i<a.length;i++){const s=a[i],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(o);for(let u=0;u<l.length;u++){const f=l[u];r&&r.equals(f)||(n.push(f),r=f)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new b_[i.type]().fromJSON(i))}return this}}class D0 extends y9{constructor(e){super(),this.type="Path",this.currentPoint=new Ke,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new aj(this.currentPoint.clone(),new Ke(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const a=new sj(this.currentPoint.clone(),new Ke(e,n),new Ke(r,i));return this.curves.push(a),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,a,s){const o=new ij(this.currentPoint.clone(),new Ke(e,n),new Ke(r,i),new Ke(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new lj(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,a,s){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,n+l,r,i,a,s),this}absarc(e,n,r,i,a,s){return this.absellipse(e,n,r,r,i,a,s),this}ellipse(e,n,r,i,a,s,o,l){const u=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+u,n+f,r,i,a,s,o,l),this}absellipse(e,n,r,i,a,s,o,l){const u=new PS(e,n,r,i,a,s,o,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const f=u.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class gx extends In{constructor(e=[new Ke(0,-.5),new Ke(.5,0),new Ke(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=ei(i,0,Math.PI*2);const a=[],s=[],o=[],l=[],u=[],f=1/n,h=new le,m=new Ke,y=new le,w=new le,b=new le;let x=0,_=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:x=e[M+1].x-e[M].x,_=e[M+1].y-e[M].y,y.x=_*1,y.y=-x,y.z=_*0,b.copy(y),y.normalize(),l.push(y.x,y.y,y.z);break;case e.length-1:l.push(b.x,b.y,b.z);break;default:x=e[M+1].x-e[M].x,_=e[M+1].y-e[M].y,y.x=_*1,y.y=-x,y.z=_*0,w.copy(y),y.x+=b.x,y.y+=b.y,y.z+=b.z,y.normalize(),l.push(y.x,y.y,y.z),b.copy(w)}for(let M=0;M<=n;M++){const T=r+M*f*i,A=Math.sin(T),R=Math.cos(T);for(let N=0;N<=e.length-1;N++){h.x=e[N].x*A,h.y=e[N].y,h.z=e[N].x*R,s.push(h.x,h.y,h.z),m.x=M/n,m.y=N/(e.length-1),o.push(m.x,m.y);const O=l[3*N+0]*A,k=l[3*N+1],C=l[3*N+0]*R;u.push(O,k,C)}}for(let M=0;M<n;M++)for(let T=0;T<e.length-1;T++){const A=T+M*e.length,R=A,N=A+e.length,O=A+e.length+1,k=A+1;a.push(R,N,k),a.push(O,k,N)}this.setIndex(a),this.setAttribute("position",new Vt(s,3)),this.setAttribute("uv",new Vt(o,2)),this.setAttribute("normal",new Vt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gx(e.points,e.segments,e.phiStart,e.phiLength)}}class NS extends gx{constructor(e=1,n=1,r=4,i=8){const a=new D0;a.absarc(0,-n/2,e,Math.PI*1.5,0),a.absarc(0,n/2,e,0,Math.PI*.5),super(a.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new NS(e.radius,e.length,e.capSegments,e.radialSegments)}}class OS extends In{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const a=[],s=[],o=[],l=[],u=new le,f=new Ke;s.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let h=0,m=3;h<=n;h++,m+=3){const y=r+h/n*i;u.x=e*Math.cos(y),u.y=e*Math.sin(y),s.push(u.x,u.y,u.z),o.push(0,0,1),f.x=(s[m]/e+1)/2,f.y=(s[m+1]/e+1)/2,l.push(f.x,f.y)}for(let h=1;h<=n;h++)a.push(h,h+1,0);this.setIndex(a),this.setAttribute("position",new Vt(s,3)),this.setAttribute("normal",new Vt(o,3)),this.setAttribute("uv",new Vt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new OS(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Ng extends In{constructor(e=1,n=1,r=1,i=32,a=1,s=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:l};const u=this;i=Math.floor(i),a=Math.floor(a);const f=[],h=[],m=[],y=[];let w=0;const b=[],x=r/2;let _=0;M(),s===!1&&(e>0&&T(!0),n>0&&T(!1)),this.setIndex(f),this.setAttribute("position",new Vt(h,3)),this.setAttribute("normal",new Vt(m,3)),this.setAttribute("uv",new Vt(y,2));function M(){const A=new le,R=new le;let N=0;const O=(n-e)/r;for(let k=0;k<=a;k++){const C=[],I=k/a,F=I*(n-e)+e;for(let V=0;V<=i;V++){const W=V/i,G=W*l+o,J=Math.sin(G),ee=Math.cos(G);R.x=F*J,R.y=-I*r+x,R.z=F*ee,h.push(R.x,R.y,R.z),A.set(J,O,ee).normalize(),m.push(A.x,A.y,A.z),y.push(W,1-I),C.push(w++)}b.push(C)}for(let k=0;k<i;k++)for(let C=0;C<a;C++){const I=b[C][k],F=b[C+1][k],V=b[C+1][k+1],W=b[C][k+1];f.push(I,F,W),f.push(F,V,W),N+=6}u.addGroup(_,N,0),_+=N}function T(A){const R=w,N=new Ke,O=new le;let k=0;const C=A===!0?e:n,I=A===!0?1:-1;for(let V=1;V<=i;V++)h.push(0,x*I,0),m.push(0,I,0),y.push(.5,.5),w++;const F=w;for(let V=0;V<=i;V++){const G=V/i*l+o,J=Math.cos(G),ee=Math.sin(G);O.x=C*ee,O.y=x*I,O.z=C*J,h.push(O.x,O.y,O.z),m.push(0,I,0),N.x=J*.5+.5,N.y=ee*.5*I+.5,y.push(N.x,N.y),w++}for(let V=0;V<i;V++){const W=R+V,G=F+V;A===!0?f.push(G,G+1,W):f.push(G+1,G,W),k+=3}u.addGroup(_,k,A===!0?1:2),_+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ng(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class RS extends Ng{constructor(e=1,n=1,r=32,i=1,a=!1,s=0,o=Math.PI*2){super(0,e,n,r,i,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new RS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Md extends In{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const a=[],s=[];o(i),u(r),f(),this.setAttribute("position",new Vt(a,3)),this.setAttribute("normal",new Vt(a.slice(),3)),this.setAttribute("uv",new Vt(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(M){const T=new le,A=new le,R=new le;for(let N=0;N<n.length;N+=3)y(n[N+0],T),y(n[N+1],A),y(n[N+2],R),l(T,A,R,M)}function l(M,T,A,R){const N=R+1,O=[];for(let k=0;k<=N;k++){O[k]=[];const C=M.clone().lerp(A,k/N),I=T.clone().lerp(A,k/N),F=N-k;for(let V=0;V<=F;V++)V===0&&k===N?O[k][V]=C:O[k][V]=C.clone().lerp(I,V/F)}for(let k=0;k<N;k++)for(let C=0;C<2*(N-k)-1;C++){const I=Math.floor(C/2);C%2===0?(m(O[k][I+1]),m(O[k+1][I]),m(O[k][I])):(m(O[k][I+1]),m(O[k+1][I+1]),m(O[k+1][I]))}}function u(M){const T=new le;for(let A=0;A<a.length;A+=3)T.x=a[A+0],T.y=a[A+1],T.z=a[A+2],T.normalize().multiplyScalar(M),a[A+0]=T.x,a[A+1]=T.y,a[A+2]=T.z}function f(){const M=new le;for(let T=0;T<a.length;T+=3){M.x=a[T+0],M.y=a[T+1],M.z=a[T+2];const A=x(M)/2/Math.PI+.5,R=_(M)/Math.PI+.5;s.push(A,1-R)}w(),h()}function h(){for(let M=0;M<s.length;M+=6){const T=s[M+0],A=s[M+2],R=s[M+4],N=Math.max(T,A,R),O=Math.min(T,A,R);N>.9&&O<.1&&(T<.2&&(s[M+0]+=1),A<.2&&(s[M+2]+=1),R<.2&&(s[M+4]+=1))}}function m(M){a.push(M.x,M.y,M.z)}function y(M,T){const A=M*3;T.x=e[A+0],T.y=e[A+1],T.z=e[A+2]}function w(){const M=new le,T=new le,A=new le,R=new le,N=new Ke,O=new Ke,k=new Ke;for(let C=0,I=0;C<a.length;C+=9,I+=6){M.set(a[C+0],a[C+1],a[C+2]),T.set(a[C+3],a[C+4],a[C+5]),A.set(a[C+6],a[C+7],a[C+8]),N.set(s[I+0],s[I+1]),O.set(s[I+2],s[I+3]),k.set(s[I+4],s[I+5]),R.copy(M).add(T).add(A).divideScalar(3);const F=x(R);b(N,I+0,M,F),b(O,I+2,T,F),b(k,I+4,A,F)}}function b(M,T,A,R){R<0&&M.x===1&&(s[T]=M.x-1),A.x===0&&A.z===0&&(s[T]=R/2/Math.PI+.5)}function x(M){return Math.atan2(M.z,-M.x)}function _(M){return Math.atan2(-M.y,Math.sqrt(M.x*M.x+M.z*M.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Md(e.vertices,e.indices,e.radius,e.details)}}class kS extends Md{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new kS(e.radius,e.detail)}}const mw=new le,gw=new le,MC=new le,yw=new fs;class v9 extends In{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),a=Math.cos(rh*n),s=e.getIndex(),o=e.getAttribute("position"),l=s?s.count:o.count,u=[0,0,0],f=["a","b","c"],h=new Array(3),m={},y=[];for(let w=0;w<l;w+=3){s?(u[0]=s.getX(w),u[1]=s.getX(w+1),u[2]=s.getX(w+2)):(u[0]=w,u[1]=w+1,u[2]=w+2);const{a:b,b:x,c:_}=yw;if(b.fromBufferAttribute(o,u[0]),x.fromBufferAttribute(o,u[1]),_.fromBufferAttribute(o,u[2]),yw.getNormal(MC),h[0]=`${Math.round(b.x*i)},${Math.round(b.y*i)},${Math.round(b.z*i)}`,h[1]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,h[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let M=0;M<3;M++){const T=(M+1)%3,A=h[M],R=h[T],N=yw[f[M]],O=yw[f[T]],k=`${A}_${R}`,C=`${R}_${A}`;C in m&&m[C]?(MC.dot(m[C].normal)<=a&&(y.push(N.x,N.y,N.z),y.push(O.x,O.y,O.z)),m[C]=null):k in m||(m[k]={index0:u[M],index1:u[T],normal:MC.clone()})}}for(const w in m)if(m[w]){const{index0:b,index1:x}=m[w];mw.fromBufferAttribute(o,b),gw.fromBufferAttribute(o,x),y.push(mw.x,mw.y,mw.z),y.push(gw.x,gw.y,gw.z)}this.setAttribute("position",new Vt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class ah extends D0{constructor(e){super(e),this.uuid=Bs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new D0().fromJSON(i))}return this}}const DTe={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let a=x9(t,0,i,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,u,f,h,m,y;if(r&&(a=BTe(t,e,a,n)),t.length>80*n){o=u=t[0],l=f=t[1];for(let w=n;w<i;w+=n)h=t[w],m=t[w+1],h<o&&(o=h),m<l&&(l=m),h>u&&(u=h),m>f&&(f=m);y=Math.max(u-o,f-l),y=y!==0?32767/y:0}return L0(a,s,n,o,l,y,0),s}};function x9(t,e,n,r,i){let a,s;if(i===JTe(t,e,n,r)>0)for(a=e;a<n;a+=r)s=i6(a,t[a],t[a+1],s);else for(a=n-r;a>=e;a-=r)s=i6(a,t[a],t[a+1],s);return s&&jS(s,s.next)&&(F0(s),s=s.next),s}function xh(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(jS(n,n.next)||$r(n.prev,n,n.next)===0)){if(F0(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function L0(t,e,n,r,i,a,s){if(!t)return;!s&&a&&$Te(t,r,i,a);let o=t,l,u;for(;t.prev!==t.next;){if(l=t.prev,u=t.next,a?UTe(t,r,i,a):LTe(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(u.i/n|0),F0(t),t=u.next,o=u.next;continue}if(t=u,t===o){s?s===1?(t=FTe(xh(t),e,n),L0(t,e,n,r,i,a,2)):s===2&&zTe(t,e,n,r,i,a):L0(xh(t),e,n,r,i,a,1);break}}}function LTe(t){const e=t.prev,n=t,r=t.next;if($r(e,n,r)>=0)return!1;const i=e.x,a=n.x,s=r.x,o=e.y,l=n.y,u=r.y,f=i<a?i<s?i:s:a<s?a:s,h=o<l?o<u?o:u:l<u?l:u,m=i>a?i>s?i:s:a>s?a:s,y=o>l?o>u?o:u:l>u?l:u;let w=r.next;for(;w!==e;){if(w.x>=f&&w.x<=m&&w.y>=h&&w.y<=y&&_m(i,o,a,l,s,u,w.x,w.y)&&$r(w.prev,w,w.next)>=0)return!1;w=w.next}return!0}function UTe(t,e,n,r){const i=t.prev,a=t,s=t.next;if($r(i,a,s)>=0)return!1;const o=i.x,l=a.x,u=s.x,f=i.y,h=a.y,m=s.y,y=o<l?o<u?o:u:l<u?l:u,w=f<h?f<m?f:m:h<m?h:m,b=o>l?o>u?o:u:l>u?l:u,x=f>h?f>m?f:m:h>m?h:m,_=PO(y,w,e,n,r),M=PO(b,x,e,n,r);let T=t.prevZ,A=t.nextZ;for(;T&&T.z>=_&&A&&A.z<=M;){if(T.x>=y&&T.x<=b&&T.y>=w&&T.y<=x&&T!==i&&T!==s&&_m(o,f,l,h,u,m,T.x,T.y)&&$r(T.prev,T,T.next)>=0||(T=T.prevZ,A.x>=y&&A.x<=b&&A.y>=w&&A.y<=x&&A!==i&&A!==s&&_m(o,f,l,h,u,m,A.x,A.y)&&$r(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;T&&T.z>=_;){if(T.x>=y&&T.x<=b&&T.y>=w&&T.y<=x&&T!==i&&T!==s&&_m(o,f,l,h,u,m,T.x,T.y)&&$r(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;A&&A.z<=M;){if(A.x>=y&&A.x<=b&&A.y>=w&&A.y<=x&&A!==i&&A!==s&&_m(o,f,l,h,u,m,A.x,A.y)&&$r(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function FTe(t,e,n){let r=t;do{const i=r.prev,a=r.next.next;!jS(i,a)&&b9(i,r,r.next,a)&&U0(i,a)&&U0(a,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(a.i/n|0),F0(r),F0(r.next),r=t=a),r=r.next}while(r!==t);return xh(r)}function zTe(t,e,n,r,i,a){let s=t;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&YTe(s,o)){let l=w9(s,o);s=xh(s,s.next),l=xh(l,l.next),L0(s,e,n,r,i,a,0),L0(l,e,n,r,i,a,0);return}o=o.next}s=s.next}while(s!==t)}function BTe(t,e,n,r){const i=[];let a,s,o,l,u;for(a=0,s=e.length;a<s;a++)o=e[a]*r,l=a<s-1?e[a+1]*r:t.length,u=x9(t,o,l,r,!1),u===u.next&&(u.steiner=!0),i.push(XTe(u));for(i.sort(VTe),a=0;a<i.length;a++)n=HTe(i[a],n);return n}function VTe(t,e){return t.x-e.x}function HTe(t,e){const n=WTe(t,e);if(!n)return e;const r=w9(n,t);return xh(r,r.next),xh(n,n.next)}function WTe(t,e){let n=e,r=-1/0,i;const a=t.x,s=t.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){const m=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(m<=a&&m>r&&(r=m,i=n.x<n.next.x?n:n.next,m===a))return i}n=n.next}while(n!==e);if(!i)return null;const o=i,l=i.x,u=i.y;let f=1/0,h;n=i;do a>=n.x&&n.x>=l&&a!==n.x&&_m(s<u?a:r,s,l,u,s<u?r:a,s,n.x,n.y)&&(h=Math.abs(s-n.y)/(a-n.x),U0(n,t)&&(h<f||h===f&&(n.x>i.x||n.x===i.x&&GTe(i,n)))&&(i=n,f=h)),n=n.next;while(n!==o);return i}function GTe(t,e){return $r(t.prev,t,e.prev)<0&&$r(e.next,t,t.next)<0}function $Te(t,e,n,r){let i=t;do i.z===0&&(i.z=PO(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,qTe(i)}function qTe(t){let e,n,r,i,a,s,o,l,u=1;do{for(n=t,t=null,a=null,s=0;n;){for(s++,r=n,o=0,e=0;e<u&&(o++,r=r.nextZ,!!r);e++);for(l=u;o>0||l>0&&r;)o!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(s>1);return t}function PO(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function XTe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function _m(t,e,n,r,i,a,s,o){return(i-s)*(e-o)>=(t-s)*(a-o)&&(t-s)*(r-o)>=(n-s)*(e-o)&&(n-s)*(a-o)>=(i-s)*(r-o)}function YTe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!KTe(t,e)&&(U0(t,e)&&U0(e,t)&&ZTe(t,e)&&($r(t.prev,t,e.prev)||$r(t,e.prev,e))||jS(t,e)&&$r(t.prev,t,t.next)>0&&$r(e.prev,e,e.next)>0)}function $r(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function jS(t,e){return t.x===e.x&&t.y===e.y}function b9(t,e,n,r){const i=xw($r(t,e,n)),a=xw($r(t,e,r)),s=xw($r(n,r,t)),o=xw($r(n,r,e));return!!(i!==a&&s!==o||i===0&&vw(t,n,e)||a===0&&vw(t,r,e)||s===0&&vw(n,t,r)||o===0&&vw(n,e,r))}function vw(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function xw(t){return t>0?1:t<0?-1:0}function KTe(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&b9(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function U0(t,e){return $r(t.prev,t,t.next)<0?$r(t,e,t.next)>=0&&$r(t,t.prev,e)>=0:$r(t,e,t.prev)<0||$r(t,t.next,e)<0}function ZTe(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,a=(t.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function w9(t,e){const n=new NO(t.i,t.x,t.y),r=new NO(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function i6(t,e,n,r){const i=new NO(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function F0(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function NO(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function JTe(t,e,n,r){let i=0;for(let a=e,s=n-r;a<n;a+=r)i+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return i}class Rl{static area(e){const n=e.length;let r=0;for(let i=n-1,a=0;a<n;i=a++)r+=e[i].x*e[a].y-e[a].x*e[i].y;return r*.5}static isClockWise(e){return Rl.area(e)<0}static triangulateShape(e,n){const r=[],i=[],a=[];a6(e),s6(r,e);let s=e.length;n.forEach(a6);for(let l=0;l<n.length;l++)i.push(s),s+=n[l].length,s6(r,n[l]);const o=DTe.triangulate(r,i);for(let l=0;l<o.length;l+=3)a.push(o.slice(l,l+3));return a}}function a6(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function s6(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class IS extends In{constructor(e=new ah([new Ke(.5,.5),new Ke(-.5,.5),new Ke(-.5,-.5),new Ke(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],a=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];s(u)}this.setAttribute("position",new Vt(i,3)),this.setAttribute("uv",new Vt(a,2)),this.computeVertexNormals();function s(o){const l=[],u=n.curveSegments!==void 0?n.curveSegments:12,f=n.steps!==void 0?n.steps:1,h=n.depth!==void 0?n.depth:1;let m=n.bevelEnabled!==void 0?n.bevelEnabled:!0,y=n.bevelThickness!==void 0?n.bevelThickness:.2,w=n.bevelSize!==void 0?n.bevelSize:y-.1,b=n.bevelOffset!==void 0?n.bevelOffset:0,x=n.bevelSegments!==void 0?n.bevelSegments:3;const _=n.extrudePath,M=n.UVGenerator!==void 0?n.UVGenerator:QTe;let T,A=!1,R,N,O,k;_&&(T=_.getSpacedPoints(f),A=!0,m=!1,R=_.computeFrenetFrames(f,!1),N=new le,O=new le,k=new le),m||(x=0,y=0,w=0,b=0);const C=o.extractPoints(u);let I=C.shape;const F=C.holes;if(!Rl.isClockWise(I)){I=I.reverse();for(let Z=0,Pe=F.length;Z<Pe;Z++){const Me=F[Z];Rl.isClockWise(Me)&&(F[Z]=Me.reverse())}}const W=Rl.triangulateShape(I,F),G=I;for(let Z=0,Pe=F.length;Z<Pe;Z++){const Me=F[Z];I=I.concat(Me)}function J(Z,Pe,Me){return Pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),Z.clone().addScaledVector(Pe,Me)}const ee=I.length,ae=W.length;function $(Z,Pe,Me){let We,ke,ct;const ot=Z.x-Pe.x,ie=Z.y-Pe.y,te=Me.x-Z.x,Ae=Me.y-Z.y,Je=ot*ot+ie*ie,Qe=ot*Ae-ie*te;if(Math.abs(Qe)>Number.EPSILON){const Ze=Math.sqrt(Je),At=Math.sqrt(te*te+Ae*Ae),gt=Pe.x-ie/Ze,St=Pe.y+ot/Ze,Ft=Me.x-Ae/At,Yt=Me.y+te/At,tt=((Ft-gt)*Ae-(Yt-St)*te)/(ot*Ae-ie*te);We=gt+ot*tt-Z.x,ke=St+ie*tt-Z.y;const yn=We*We+ke*ke;if(yn<=2)return new Ke(We,ke);ct=Math.sqrt(yn/2)}else{let Ze=!1;ot>Number.EPSILON?te>Number.EPSILON&&(Ze=!0):ot<-Number.EPSILON?te<-Number.EPSILON&&(Ze=!0):Math.sign(ie)===Math.sign(Ae)&&(Ze=!0),Ze?(We=-ie,ke=ot,ct=Math.sqrt(Je)):(We=ot,ke=ie,ct=Math.sqrt(Je/2))}return new Ke(We/ct,ke/ct)}const B=[];for(let Z=0,Pe=G.length,Me=Pe-1,We=Z+1;Z<Pe;Z++,Me++,We++)Me===Pe&&(Me=0),We===Pe&&(We=0),B[Z]=$(G[Z],G[Me],G[We]);const Y=[];let X,ne=B.concat();for(let Z=0,Pe=F.length;Z<Pe;Z++){const Me=F[Z];X=[];for(let We=0,ke=Me.length,ct=ke-1,ot=We+1;We<ke;We++,ct++,ot++)ct===ke&&(ct=0),ot===ke&&(ot=0),X[We]=$(Me[We],Me[ct],Me[ot]);Y.push(X),ne=ne.concat(X)}for(let Z=0;Z<x;Z++){const Pe=Z/x,Me=y*Math.cos(Pe*Math.PI/2),We=w*Math.sin(Pe*Math.PI/2)+b;for(let ke=0,ct=G.length;ke<ct;ke++){const ot=J(G[ke],B[ke],We);Oe(ot.x,ot.y,-Me)}for(let ke=0,ct=F.length;ke<ct;ke++){const ot=F[ke];X=Y[ke];for(let ie=0,te=ot.length;ie<te;ie++){const Ae=J(ot[ie],X[ie],We);Oe(Ae.x,Ae.y,-Me)}}}const se=w+b;for(let Z=0;Z<ee;Z++){const Pe=m?J(I[Z],ne[Z],se):I[Z];A?(O.copy(R.normals[0]).multiplyScalar(Pe.x),N.copy(R.binormals[0]).multiplyScalar(Pe.y),k.copy(T[0]).add(O).add(N),Oe(k.x,k.y,k.z)):Oe(Pe.x,Pe.y,0)}for(let Z=1;Z<=f;Z++)for(let Pe=0;Pe<ee;Pe++){const Me=m?J(I[Pe],ne[Pe],se):I[Pe];A?(O.copy(R.normals[Z]).multiplyScalar(Me.x),N.copy(R.binormals[Z]).multiplyScalar(Me.y),k.copy(T[Z]).add(O).add(N),Oe(k.x,k.y,k.z)):Oe(Me.x,Me.y,h/f*Z)}for(let Z=x-1;Z>=0;Z--){const Pe=Z/x,Me=y*Math.cos(Pe*Math.PI/2),We=w*Math.sin(Pe*Math.PI/2)+b;for(let ke=0,ct=G.length;ke<ct;ke++){const ot=J(G[ke],B[ke],We);Oe(ot.x,ot.y,h+Me)}for(let ke=0,ct=F.length;ke<ct;ke++){const ot=F[ke];X=Y[ke];for(let ie=0,te=ot.length;ie<te;ie++){const Ae=J(ot[ie],X[ie],We);A?Oe(Ae.x,Ae.y+T[f-1].y,T[f-1].x+Me):Oe(Ae.x,Ae.y,h+Me)}}}ye(),Ne();function ye(){const Z=i.length/3;if(m){let Pe=0,Me=ee*Pe;for(let We=0;We<ae;We++){const ke=W[We];$e(ke[2]+Me,ke[1]+Me,ke[0]+Me)}Pe=f+x*2,Me=ee*Pe;for(let We=0;We<ae;We++){const ke=W[We];$e(ke[0]+Me,ke[1]+Me,ke[2]+Me)}}else{for(let Pe=0;Pe<ae;Pe++){const Me=W[Pe];$e(Me[2],Me[1],Me[0])}for(let Pe=0;Pe<ae;Pe++){const Me=W[Pe];$e(Me[0]+ee*f,Me[1]+ee*f,Me[2]+ee*f)}}r.addGroup(Z,i.length/3-Z,0)}function Ne(){const Z=i.length/3;let Pe=0;Ee(G,Pe),Pe+=G.length;for(let Me=0,We=F.length;Me<We;Me++){const ke=F[Me];Ee(ke,Pe),Pe+=ke.length}r.addGroup(Z,i.length/3-Z,1)}function Ee(Z,Pe){let Me=Z.length;for(;--Me>=0;){const We=Me;let ke=Me-1;ke<0&&(ke=Z.length-1);for(let ct=0,ot=f+x*2;ct<ot;ct++){const ie=ee*ct,te=ee*(ct+1),Ae=Pe+We+ie,Je=Pe+ke+ie,Qe=Pe+ke+te,Ze=Pe+We+te;Ie(Ae,Je,Qe,Ze)}}}function Oe(Z,Pe,Me){l.push(Z),l.push(Pe),l.push(Me)}function $e(Z,Pe,Me){qe(Z),qe(Pe),qe(Me);const We=i.length/3,ke=M.generateTopUV(r,i,We-3,We-2,We-1);ve(ke[0]),ve(ke[1]),ve(ke[2])}function Ie(Z,Pe,Me,We){qe(Z),qe(Pe),qe(We),qe(Pe),qe(Me),qe(We);const ke=i.length/3,ct=M.generateSideWallUV(r,i,ke-6,ke-3,ke-2,ke-1);ve(ct[0]),ve(ct[1]),ve(ct[3]),ve(ct[1]),ve(ct[2]),ve(ct[3])}function qe(Z){i.push(l[Z*3+0]),i.push(l[Z*3+1]),i.push(l[Z*3+2])}function ve(Z){a.push(Z.x),a.push(Z.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return eAe(n,r,e)}static fromJSON(e,n){const r=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=n[e.shapes[a]];r.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new b_[i.type]().fromJSON(i)),new IS(r,e.options)}}const QTe={generateTopUV:function(t,e,n,r,i){const a=e[n*3],s=e[n*3+1],o=e[r*3],l=e[r*3+1],u=e[i*3],f=e[i*3+1];return[new Ke(a,s),new Ke(o,l),new Ke(u,f)]},generateSideWallUV:function(t,e,n,r,i,a){const s=e[n*3],o=e[n*3+1],l=e[n*3+2],u=e[r*3],f=e[r*3+1],h=e[r*3+2],m=e[i*3],y=e[i*3+1],w=e[i*3+2],b=e[a*3],x=e[a*3+1],_=e[a*3+2];return Math.abs(o-f)<Math.abs(s-u)?[new Ke(s,1-l),new Ke(u,1-h),new Ke(m,1-w),new Ke(b,1-_)]:[new Ke(o,1-l),new Ke(f,1-h),new Ke(y,1-w),new Ke(x,1-_)]}};function eAe(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const a=t[r];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class yx extends Md{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,a,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new yx(e.radius,e.detail)}}class vx extends Md{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new vx(e.radius,e.detail)}}class DS extends In{constructor(e=.5,n=1,r=32,i=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:a,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const o=[],l=[],u=[],f=[];let h=e;const m=(n-e)/i,y=new le,w=new Ke;for(let b=0;b<=i;b++){for(let x=0;x<=r;x++){const _=a+x/r*s;y.x=h*Math.cos(_),y.y=h*Math.sin(_),l.push(y.x,y.y,y.z),u.push(0,0,1),w.x=(y.x/n+1)/2,w.y=(y.y/n+1)/2,f.push(w.x,w.y)}h+=m}for(let b=0;b<i;b++){const x=b*(r+1);for(let _=0;_<r;_++){const M=_+x,T=M,A=M+r+1,R=M+r+2,N=M+1;o.push(T,A,N),o.push(A,R,N)}}this.setIndex(o),this.setAttribute("position",new Vt(l,3)),this.setAttribute("normal",new Vt(u,3)),this.setAttribute("uv",new Vt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new DS(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class LS extends In{constructor(e=new ah([new Ke(0,.5),new Ke(-.5,-.5),new Ke(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],a=[],s=[];let o=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let f=0;f<e.length;f++)u(e[f]),this.addGroup(o,l,f),o+=l,l=0;this.setIndex(r),this.setAttribute("position",new Vt(i,3)),this.setAttribute("normal",new Vt(a,3)),this.setAttribute("uv",new Vt(s,2));function u(f){const h=i.length/3,m=f.extractPoints(n);let y=m.shape;const w=m.holes;Rl.isClockWise(y)===!1&&(y=y.reverse());for(let x=0,_=w.length;x<_;x++){const M=w[x];Rl.isClockWise(M)===!0&&(w[x]=M.reverse())}const b=Rl.triangulateShape(y,w);for(let x=0,_=w.length;x<_;x++){const M=w[x];y=y.concat(M)}for(let x=0,_=y.length;x<_;x++){const M=y[x];i.push(M.x,M.y,0),a.push(0,0,1),s.push(M.x,M.y)}for(let x=0,_=b.length;x<_;x++){const M=b[x],T=M[0]+h,A=M[1]+h,R=M[2]+h;r.push(T,A,R),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return tAe(n,e)}static fromJSON(e,n){const r=[];for(let i=0,a=e.shapes.length;i<a;i++){const s=n[e.shapes[i]];r.push(s)}return new LS(r,e.curveSegments)}}function tAe(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class xx extends In{constructor(e=1,n=32,r=16,i=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:a,thetaStart:s,thetaLength:o},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(s+o,Math.PI);let u=0;const f=[],h=new le,m=new le,y=[],w=[],b=[],x=[];for(let _=0;_<=r;_++){const M=[],T=_/r;let A=0;_===0&&s===0?A=.5/n:_===r&&l===Math.PI&&(A=-.5/n);for(let R=0;R<=n;R++){const N=R/n;h.x=-e*Math.cos(i+N*a)*Math.sin(s+T*o),h.y=e*Math.cos(s+T*o),h.z=e*Math.sin(i+N*a)*Math.sin(s+T*o),w.push(h.x,h.y,h.z),m.copy(h).normalize(),b.push(m.x,m.y,m.z),x.push(N+A,1-T),M.push(u++)}f.push(M)}for(let _=0;_<r;_++)for(let M=0;M<n;M++){const T=f[_][M+1],A=f[_][M],R=f[_+1][M],N=f[_+1][M+1];(_!==0||s>0)&&y.push(T,A,N),(_!==r-1||l<Math.PI)&&y.push(A,R,N)}this.setIndex(y),this.setAttribute("position",new Vt(w,3)),this.setAttribute("normal",new Vt(b,3)),this.setAttribute("uv",new Vt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xx(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class US extends Md{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new US(e.radius,e.detail)}}class FS extends In{constructor(e=1,n=.4,r=12,i=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:a},r=Math.floor(r),i=Math.floor(i);const s=[],o=[],l=[],u=[],f=new le,h=new le,m=new le;for(let y=0;y<=r;y++)for(let w=0;w<=i;w++){const b=w/i*a,x=y/r*Math.PI*2;h.x=(e+n*Math.cos(x))*Math.cos(b),h.y=(e+n*Math.cos(x))*Math.sin(b),h.z=n*Math.sin(x),o.push(h.x,h.y,h.z),f.x=e*Math.cos(b),f.y=e*Math.sin(b),m.subVectors(h,f).normalize(),l.push(m.x,m.y,m.z),u.push(w/i),u.push(y/r)}for(let y=1;y<=r;y++)for(let w=1;w<=i;w++){const b=(i+1)*y+w-1,x=(i+1)*(y-1)+w-1,_=(i+1)*(y-1)+w,M=(i+1)*y+w;s.push(b,x,M),s.push(x,_,M)}this.setIndex(s),this.setAttribute("position",new Vt(o,3)),this.setAttribute("normal",new Vt(l,3)),this.setAttribute("uv",new Vt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new FS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class zS extends In{constructor(e=1,n=.4,r=64,i=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:a,q:s},r=Math.floor(r),i=Math.floor(i);const o=[],l=[],u=[],f=[],h=new le,m=new le,y=new le,w=new le,b=new le,x=new le,_=new le;for(let T=0;T<=r;++T){const A=T/r*a*Math.PI*2;M(A,a,s,e,y),M(A+.01,a,s,e,w),x.subVectors(w,y),_.addVectors(w,y),b.crossVectors(x,_),_.crossVectors(b,x),b.normalize(),_.normalize();for(let R=0;R<=i;++R){const N=R/i*Math.PI*2,O=-n*Math.cos(N),k=n*Math.sin(N);h.x=y.x+(O*_.x+k*b.x),h.y=y.y+(O*_.y+k*b.y),h.z=y.z+(O*_.z+k*b.z),l.push(h.x,h.y,h.z),m.subVectors(h,y).normalize(),u.push(m.x,m.y,m.z),f.push(T/r),f.push(R/i)}}for(let T=1;T<=r;T++)for(let A=1;A<=i;A++){const R=(i+1)*(T-1)+(A-1),N=(i+1)*T+(A-1),O=(i+1)*T+A,k=(i+1)*(T-1)+A;o.push(R,N,k),o.push(N,O,k)}this.setIndex(o),this.setAttribute("position",new Vt(l,3)),this.setAttribute("normal",new Vt(u,3)),this.setAttribute("uv",new Vt(f,2));function M(T,A,R,N,O){const k=Math.cos(T),C=Math.sin(T),I=R/A*T,F=Math.cos(I);O.x=N*(2+F)*.5*k,O.y=N*(2+F)*C*.5,O.z=N*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class BS extends In{constructor(e=new oj(new le(-1,-1,0),new le(-1,1,0),new le(1,1,0)),n=64,r=1,i=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:a};const s=e.computeFrenetFrames(n,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new le,l=new le,u=new Ke;let f=new le;const h=[],m=[],y=[],w=[];b(),this.setIndex(w),this.setAttribute("position",new Vt(h,3)),this.setAttribute("normal",new Vt(m,3)),this.setAttribute("uv",new Vt(y,2));function b(){for(let T=0;T<n;T++)x(T);x(a===!1?n:0),M(),_()}function x(T){f=e.getPointAt(T/n,f);const A=s.normals[T],R=s.binormals[T];for(let N=0;N<=i;N++){const O=N/i*Math.PI*2,k=Math.sin(O),C=-Math.cos(O);l.x=C*A.x+k*R.x,l.y=C*A.y+k*R.y,l.z=C*A.z+k*R.z,l.normalize(),m.push(l.x,l.y,l.z),o.x=f.x+r*l.x,o.y=f.y+r*l.y,o.z=f.z+r*l.z,h.push(o.x,o.y,o.z)}}function _(){for(let T=1;T<=n;T++)for(let A=1;A<=i;A++){const R=(i+1)*(T-1)+(A-1),N=(i+1)*T+(A-1),O=(i+1)*T+A,k=(i+1)*(T-1)+A;w.push(R,N,k),w.push(N,O,k)}}function M(){for(let T=0;T<=n;T++)for(let A=0;A<=i;A++)u.x=T/n,u.y=A/i,y.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new BS(new b_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class _9 extends In{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new le,a=new le;if(e.index!==null){const s=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,f=l.length;u<f;++u){const h=l[u],m=h.start,y=h.count;for(let w=m,b=m+y;w<b;w+=3)for(let x=0;x<3;x++){const _=o.getX(w+x),M=o.getX(w+(x+1)%3);i.fromBufferAttribute(s,_),a.fromBufferAttribute(s,M),o6(i,a,r)===!0&&(n.push(i.x,i.y,i.z),n.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,l=s.count/3;o<l;o++)for(let u=0;u<3;u++){const f=3*o+u,h=3*o+(u+1)%3;i.fromBufferAttribute(s,f),a.fromBufferAttribute(s,h),o6(i,a,r)===!0&&(n.push(i.x,i.y,i.z),n.push(a.x,a.y,a.z))}}this.setAttribute("position",new Vt(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function o6(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var l6=Object.freeze({__proto__:null,BoxGeometry:Eh,CapsuleGeometry:NS,CircleGeometry:OS,ConeGeometry:RS,CylinderGeometry:Ng,DodecahedronGeometry:kS,EdgesGeometry:v9,ExtrudeGeometry:IS,IcosahedronGeometry:yx,LatheGeometry:gx,OctahedronGeometry:vx,PlaneGeometry:Ch,PolyhedronGeometry:Md,RingGeometry:DS,ShapeGeometry:LS,SphereGeometry:xx,TetrahedronGeometry:US,TorusGeometry:FS,TorusKnotGeometry:zS,TubeGeometry:BS,WireframeGeometry:_9});class S9 extends Oa{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new kt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class M9 extends Ws{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class cj extends Oa{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new kt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class uj extends cj{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ke(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ei(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new kt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new kt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new kt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class T9 extends Oa{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new kt(16777215),this.specular=new kt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=cx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class A9 extends Oa{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new kt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class E9 extends Oa{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class C9 extends Oa{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new kt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=cx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class P9 extends Oa{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new kt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sd,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class N9 extends Ka{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Yf(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function O9(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function R9(t){function e(i,a){return t[i]-t[a]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function OO(t,e,n){const r=t.length,i=new t.constructor(r);for(let a=0,s=0;s!==r;++a){const o=n[a]*e;for(let l=0;l!==e;++l)i[s++]=t[o+l]}return i}function dj(t,e,n,r){let i=1,a=t[0];for(;a!==void 0&&a[r]===void 0;)a=t[i++];if(a===void 0)return;let s=a[r];if(s!==void 0)if(Array.isArray(s))do s=a[r],s!==void 0&&(e.push(a.time),n.push.apply(n,s)),a=t[i++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[r],s!==void 0&&(e.push(a.time),s.toArray(n,n.length)),a=t[i++];while(a!==void 0);else do s=a[r],s!==void 0&&(e.push(a.time),n.push(s)),a=t[i++];while(a!==void 0)}function nAe(t,e,n,r,i=30){const a=t.clone();a.name=e;const s=[];for(let l=0;l<a.tracks.length;++l){const u=a.tracks[l],f=u.getValueSize(),h=[],m=[];for(let y=0;y<u.times.length;++y){const w=u.times[y]*i;if(!(w<n||w>=r)){h.push(u.times[y]);for(let b=0;b<f;++b)m.push(u.values[y*f+b])}}h.length!==0&&(u.times=Yf(h,u.times.constructor),u.values=Yf(m,u.values.constructor),s.push(u))}a.tracks=s;let o=1/0;for(let l=0;l<a.tracks.length;++l)o>a.tracks[l].times[0]&&(o=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*o);return a.resetDuration(),a}function rAe(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,a=e/r;for(let s=0;s<i;++s){const o=n.tracks[s],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const u=t.tracks.find(function(_){return _.name===o.name&&_.ValueTypeName===l});if(u===void 0)continue;let f=0;const h=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=h/3);let m=0;const y=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=y/3);const w=o.times.length-1;let b;if(a<=o.times[0]){const _=f,M=h-f;b=o.values.slice(_,M)}else if(a>=o.times[w]){const _=w*h+f,M=_+h-f;b=o.values.slice(_,M)}else{const _=o.createInterpolant(),M=f,T=h-f;_.evaluate(a),b=_.resultBuffer.slice(M,T)}l==="quaternion"&&new Ca().fromArray(b).normalize().conjugate().toArray(b);const x=u.times.length;for(let _=0;_<x;++_){const M=_*y+m;if(l==="quaternion")Ca.multiplyQuaternionsFlat(u.values,M,b,0,u.values,M);else{const T=y-m*2;for(let A=0;A<T;++A)u.values[M+A]-=b[A]}}}return t.blendMode=Vk,t}const iAe={convertArray:Yf,isTypedArray:O9,getKeyframeOrder:R9,sortedArray:OO,flattenJSON:dj,subclip:nAe,makeClipAdditive:rAe};class bx{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],a=n[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<a)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(a=i,i=n[++r],e<i)break t}s=n.length;break n}if(!(e>=a)){const o=n[1];e<o&&(r=2,a=o);for(let l=r-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=a,a=n[--r-1],e>=a)break t}s=r,r=0;break n}break e}for(;r<s;){const o=r+s>>>1;e<n[o]?s=o:r=o+1}if(i=n[r],a=n[r-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i;for(let s=0;s!==i;++s)n[s]=r[a+s];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class k9 extends bx{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Gf,endingEnd:Gf}}intervalChanged_(e,n,r){const i=this.parameterPositions;let a=e-2,s=e+1,o=i[a],l=i[s];if(o===void 0)switch(this.getSettings_().endingStart){case $f:a=e,o=2*n-r;break;case N0:a=i.length-2,o=n+i[a]-i[a+1];break;default:a=e,o=r}if(l===void 0)switch(this.getSettings_().endingEnd){case $f:s=e,l=2*r-n;break;case N0:s=1,l=r+i[1]-i[0];break;default:s=e-1,l=n}const u=(r-n)*.5,f=this.valueSize;this._weightPrev=u/(n-o),this._weightNext=u/(l-r),this._offsetPrev=a*f,this._offsetNext=s*f}interpolate_(e,n,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,f=this._offsetPrev,h=this._offsetNext,m=this._weightPrev,y=this._weightNext,w=(r-n)/(i-n),b=w*w,x=b*w,_=-m*x+2*m*b-m*w,M=(1+m)*x+(-1.5-2*m)*b+(-.5+m)*w+1,T=(-1-y)*x+(1.5+y)*b+.5*w,A=y*x-y*b;for(let R=0;R!==o;++R)a[R]=_*s[f+R]+M*s[u+R]+T*s[l+R]+A*s[h+R];return a}}class fj extends bx{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,f=(r-n)/(i-n),h=1-f;for(let m=0;m!==o;++m)a[m]=s[u+m]*h+s[l+m]*f;return a}}class j9 extends bx{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class sl{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Yf(n,this.TimeBufferType),this.values=Yf(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:Yf(e.times,Array),values:Yf(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new j9(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new fj(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new k9(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case C0:n=this.InterpolantFactoryMethodDiscrete;break;case P0:n=this.InterpolantFactoryMethodLinear;break;case qw:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return C0;case this.InterpolantFactoryMethodLinear:return P0;case this.InterpolantFactoryMethodSmooth:return qw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let a=0,s=i-1;for(;a!==i&&r[a]<e;)++a;for(;s!==-1&&r[s]>n;)--s;if(++s,a!==0||s!==i){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=r.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,a=r.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const l=r[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,s),e=!1;break}s=l}if(i!==void 0&&O9(i))for(let o=0,l=i.length;o!==l;++o){const u=i[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===qw,a=e.length-1;let s=1;for(let o=1;o<a;++o){let l=!1;const u=e[o],f=e[o+1];if(u!==f&&(o!==1||u!==e[0]))if(i)l=!0;else{const h=o*r,m=h-r,y=h+r;for(let w=0;w!==r;++w){const b=n[h+w];if(b!==n[m+w]||b!==n[y+w]){l=!0;break}}}if(l){if(o!==s){e[s]=e[o];const h=o*r,m=s*r;for(let y=0;y!==r;++y)n[m+y]=n[h+y]}++s}}if(a>0){e[s]=e[a];for(let o=a*r,l=s*r,u=0;u!==r;++u)n[l+u]=n[o+u];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=n.slice(0,s*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}sl.prototype.TimeBufferType=Float32Array;sl.prototype.ValueBufferType=Float32Array;sl.prototype.DefaultInterpolation=P0;class Ph extends sl{}Ph.prototype.ValueTypeName="bool";Ph.prototype.ValueBufferType=Array;Ph.prototype.DefaultInterpolation=C0;Ph.prototype.InterpolantFactoryMethodLinear=void 0;Ph.prototype.InterpolantFactoryMethodSmooth=void 0;class hj extends sl{}hj.prototype.ValueTypeName="color";class z0 extends sl{}z0.prototype.ValueTypeName="number";class I9 extends bx{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=(r-n)/(i-n);let u=e*o;for(let f=u+o;u!==f;u+=4)Ca.slerpFlat(a,0,s,u-o,s,u,l);return a}}class Og extends sl{InterpolantFactoryMethodLinear(e){return new I9(this.times,this.values,this.getValueSize(),e)}}Og.prototype.ValueTypeName="quaternion";Og.prototype.DefaultInterpolation=P0;Og.prototype.InterpolantFactoryMethodSmooth=void 0;class Nh extends sl{}Nh.prototype.ValueTypeName="string";Nh.prototype.ValueBufferType=Array;Nh.prototype.DefaultInterpolation=C0;Nh.prototype.InterpolantFactoryMethodLinear=void 0;Nh.prototype.InterpolantFactoryMethodSmooth=void 0;class B0 extends sl{}B0.prototype.ValueTypeName="vector";class V0{constructor(e,n=-1,r,i=vS){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Bs(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,o=r.length;s!==o;++s)n.push(sAe(r[s]).scale(i));const a=new this(e.name,e.duration,n,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,s=r.length;a!==s;++a)n.push(sl.toJSON(r[a]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const a=n.length,s=[];for(let o=0;o<a;o++){let l=[],u=[];l.push((o+a-1)%a,o,(o+1)%a),u.push(0,1,0);const f=R9(l);l=OO(l,1,f),u=OO(u,1,f),!i&&l[0]===0&&(l.push(a),u.push(u[0])),s.push(new z0(".morphTargetInfluences["+n[o].name+"]",l,u).scale(1/r))}return new this(e,-1,s)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const u=e[o],f=u.name.match(a);if(f&&f.length>1){const h=f[1];let m=i[h];m||(i[h]=m=[]),m.push(u)}}const s=[];for(const o in i)s.push(this.CreateFromMorphTargetSequence(o,i[o],n,r));return s}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,m,y,w,b){if(y.length!==0){const x=[],_=[];dj(y,x,_,w),x.length!==0&&b.push(new h(m,x,_))}},i=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const m=u[h].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const y={};let w;for(w=0;w<m.length;w++)if(m[w].morphTargets)for(let b=0;b<m[w].morphTargets.length;b++)y[m[w].morphTargets[b]]=-1;for(const b in y){const x=[],_=[];for(let M=0;M!==m[w].morphTargets.length;++M){const T=m[w];x.push(T.time),_.push(T.morphTarget===b?1:0)}i.push(new z0(".morphTargetInfluence["+b+"]",x,_))}l=y.length*s}else{const y=".bones["+n[h].name+"]";r(B0,y+".position",m,"pos",i),r(Og,y+".quaternion",m,"rot",i),r(B0,y+".scale",m,"scl",i)}}return i.length===0?null:new this(a,l,i,o)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const a=this.tracks[r];n=Math.max(n,a.times[a.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function aAe(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return z0;case"vector":case"vector2":case"vector3":case"vector4":return B0;case"color":return hj;case"quaternion":return Og;case"bool":case"boolean":return Ph;case"string":return Nh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function sAe(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=aAe(t.type);if(t.times===void 0){const n=[],r=[];dj(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Dc={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class VS{constructor(e,n,r){const i=this;let a=!1,s=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(f){o++,a===!1&&i.onStart!==void 0&&i.onStart(f,s,o),a=!0},this.itemEnd=function(f){s++,i.onProgress!==void 0&&i.onProgress(f,s,o),s===o&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(f){i.onError!==void 0&&i.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,h){return u.push(f,h),this},this.removeHandler=function(f){const h=u.indexOf(f);return h!==-1&&u.splice(h,2),this},this.getHandler=function(f){for(let h=0,m=u.length;h<m;h+=2){const y=u[h],w=u[h+1];if(y.global&&(y.lastIndex=0),y.test(f))return w}return null}}}const D9=new VS;class Za{constructor(e){this.manager=e!==void 0?e:D9,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,a){r.load(e,i,n,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Za.DEFAULT_MATERIAL_NAME="__DEFAULT";const Cc={};class oAe extends Error{constructor(e,n){super(e),this.response=n}}class Vs extends Za{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=Dc.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(a),this.manager.itemEnd(e)},0),a;if(Cc[e]!==void 0){Cc[e].push({onLoad:n,onProgress:r,onError:i});return}Cc[e]=[],Cc[e].push({onLoad:n,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const f=Cc[e],h=u.body.getReader(),m=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),y=m?parseInt(m):0,w=y!==0;let b=0;const x=new ReadableStream({start(_){M();function M(){h.read().then(({done:T,value:A})=>{if(T)_.close();else{b+=A.byteLength;const R=new ProgressEvent("progress",{lengthComputable:w,loaded:b,total:y});for(let N=0,O=f.length;N<O;N++){const k=f[N];k.onProgress&&k.onProgress(R)}_.enqueue(A),M()}})}}});return new Response(x)}else throw new oAe(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,o));case"json":return u.json();default:if(o===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(o),m=h&&h[1]?h[1].toLowerCase():void 0,y=new TextDecoder(m);return u.arrayBuffer().then(w=>y.decode(w))}}}).then(u=>{Dc.add(e,u);const f=Cc[e];delete Cc[e];for(let h=0,m=f.length;h<m;h++){const y=f[h];y.onLoad&&y.onLoad(u)}}).catch(u=>{const f=Cc[e];if(f===void 0)throw this.manager.itemError(e),u;delete Cc[e];for(let h=0,m=f.length;h<m;h++){const y=f[h];y.onError&&y.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class lAe extends Za{constructor(e){super(e)}load(e,n,r,i){const a=this,s=new Vs(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=V0.parse(e[r]);n.push(i)}return n}}class cAe extends Za{constructor(e){super(e)}load(e,n,r,i){const a=this,s=[],o=new CS,l=new Vs(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(a.withCredentials);let u=0;function f(h){l.load(e[h],function(m){const y=a.parse(m,!0);s[h]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},u+=1,u===6&&(y.mipmapCount===1&&(o.minFilter=Gn),o.image=s,o.format=y.format,o.needsUpdate=!0,n&&n(o))},r,i)}if(Array.isArray(e))for(let h=0,m=e.length;h<m;++h)f(h);else l.load(e,function(h){const m=a.parse(h,!0);if(m.isCubemap){const y=m.mipmaps.length/m.mipmapCount;for(let w=0;w<y;w++){s[w]={mipmaps:[]};for(let b=0;b<m.mipmapCount;b++)s[w].mipmaps.push(m.mipmaps[w*m.mipmapCount+b]),s[w].format=m.format,s[w].width=m.width,s[w].height=m.height}o.image=s}else o.image.width=m.width,o.image.height=m.height,o.mipmaps=m.mipmaps;m.mipmapCount===1&&(o.minFilter=Gn),o.format=m.format,o.needsUpdate=!0,n&&n(o)},r,i);return o}}class H0 extends Za{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Dc.get(e);if(s!==void 0)return a.manager.itemStart(e),setTimeout(function(){n&&n(s),a.manager.itemEnd(e)},0),s;const o=I0("img");function l(){f(),Dc.add(e,this),n&&n(this),a.manager.itemEnd(e)}function u(h){f(),i&&i(h),a.manager.itemError(e),a.manager.itemEnd(e)}function f(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o}}class L9 extends Za{constructor(e){super(e)}load(e,n,r,i){const a=new hx;a.colorSpace=wi;const s=new H0(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function l(u){s.load(e[u],function(f){a.images[u]=f,o++,o===6&&(a.needsUpdate=!0,n&&n(a))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return a}}class pj extends Za{constructor(e){super(e)}load(e,n,r,i){const a=this,s=new cd,o=new Vs(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(l){let u;try{u=a.parse(l)}catch(f){if(i!==void 0)i(f);else{console.error(f);return}}u.image!==void 0?s.image=u.image:u.data!==void 0&&(s.image.width=u.width,s.image.height=u.height,s.image.data=u.data),s.wrapS=u.wrapS!==void 0?u.wrapS:Fr,s.wrapT=u.wrapT!==void 0?u.wrapT:Fr,s.magFilter=u.magFilter!==void 0?u.magFilter:Gn,s.minFilter=u.minFilter!==void 0?u.minFilter:Gn,s.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?s.colorSpace=u.colorSpace:u.encoding!==void 0&&(s.encoding=u.encoding),u.flipY!==void 0&&(s.flipY=u.flipY),u.format!==void 0&&(s.format=u.format),u.type!==void 0&&(s.type=u.type),u.mipmaps!==void 0&&(s.mipmaps=u.mipmaps,s.minFilter=pd),u.mipmapCount===1&&(s.minFilter=Gn),u.generateMipmaps!==void 0&&(s.generateMipmaps=u.generateMipmaps),s.needsUpdate=!0,n&&n(s,u)},r,i),s}}class uAe extends Za{constructor(e){super(e)}load(e,n,r,i){const a=new _r,s=new H0(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,n!==void 0&&n(a)},r,i),a}}class Td extends Xn{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new kt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class U9 extends Td{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Xn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new kt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const TC=new dn,c6=new le,u6=new le;class mj{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ke(512,512),this.map=null,this.mapPass=null,this.matrix=new dn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new px,this._frameExtents=new Ke(1,1),this._viewportCount=1,this._viewports=[new dr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;c6.setFromMatrixPosition(e.matrixWorld),n.position.copy(c6),u6.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(u6),n.updateMatrixWorld(),TC.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TC),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(TC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class dAe extends mj{constructor(){super(new ci(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=ug*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||n.far;(r!==n.fov||i!==n.aspect||a!==n.far)&&(n.fov=r,n.aspect=i,n.far=a,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class F9 extends Td{constructor(e,n,r=0,i=Math.PI/3,a=0,s=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Xn.DEFAULT_UP),this.updateMatrix(),this.target=new Xn,this.distance=r,this.angle=i,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new dAe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const d6=new dn,Ky=new le,AC=new le;class fAe extends mj{constructor(){super(new ci(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ke(4,2),this._viewportCount=6,this._viewports=[new dr(2,1,1,1),new dr(0,1,1,1),new dr(3,1,1,1),new dr(1,1,1,1),new dr(3,0,1,1),new dr(1,0,1,1)],this._cubeDirections=[new le(1,0,0),new le(-1,0,0),new le(0,0,1),new le(0,0,-1),new le(0,1,0),new le(0,-1,0)],this._cubeUps=[new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,0,1),new le(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,a=e.distance||r.far;a!==r.far&&(r.far=a,r.updateProjectionMatrix()),Ky.setFromMatrixPosition(e.matrixWorld),r.position.copy(Ky),AC.copy(r.position),AC.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(AC),r.updateMatrixWorld(),i.makeTranslation(-Ky.x,-Ky.y,-Ky.z),d6.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(d6)}}class z9 extends Td{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new fAe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class hAe extends mj{constructor(){super(new zc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class B9 extends Td{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Xn.DEFAULT_UP),this.updateMatrix(),this.target=new Xn,this.shadow=new hAe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class V9 extends Td{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class H9 extends Td{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class W9{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new le)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.282095),n.addScaledVector(s[1],.488603*i),n.addScaledVector(s[2],.488603*a),n.addScaledVector(s[3],.488603*r),n.addScaledVector(s[4],1.092548*(r*i)),n.addScaledVector(s[5],1.092548*(i*a)),n.addScaledVector(s[6],.315392*(3*a*a-1)),n.addScaledVector(s[7],1.092548*(r*a)),n.addScaledVector(s[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.886227),n.addScaledVector(s[1],2*.511664*i),n.addScaledVector(s[2],2*.511664*a),n.addScaledVector(s[3],2*.511664*r),n.addScaledVector(s[4],2*.429043*r*i),n.addScaledVector(s[5],2*.429043*i*a),n.addScaledVector(s[6],.743125*a*a-.247708),n.addScaledVector(s[7],2*.429043*r*a),n.addScaledVector(s[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,a=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*a,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*a,n[6]=.315392*(3*a*a-1),n[7]=1.092548*r*a,n[8]=.546274*(r*r-i*i)}}class G9 extends Td{constructor(e=new W9,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class HS extends Za{constructor(e){super(e),this.textures={}}load(e,n,r,i){const a=this,s=new Vs(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(a){return n[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),n[a]}const i=HS.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new kt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(i.uniforms[a]={},s.type){case"t":i.uniforms[a].value=r(s.value);break;case"c":i.uniforms[a].value=new kt().setHex(s.value);break;case"v2":i.uniforms[a].value=new Ke().fromArray(s.value);break;case"v3":i.uniforms[a].value=new le().fromArray(s.value);break;case"v4":i.uniforms[a].value=new dr().fromArray(s.value);break;case"m3":i.uniforms[a].value=new jn().fromArray(s.value);break;case"m4":i.uniforms[a].value=new dn().fromArray(s.value);break;default:i.uniforms[a].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)i.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),i.normalScale=new Ke().fromArray(a)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ke().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:S9,SpriteMaterial:ej,RawShaderMaterial:M9,ShaderMaterial:Ws,PointsMaterial:nj,MeshPhysicalMaterial:uj,MeshStandardMaterial:cj,MeshPhongMaterial:T9,MeshToonMaterial:A9,MeshNormalMaterial:E9,MeshLambertMaterial:C9,MeshDepthMaterial:Jk,MeshDistanceMaterial:Qk,MeshBasicMaterial:nu,MeshMatcapMaterial:P9,LineDashedMaterial:N9,LineBasicMaterial:Ka,Material:Oa};return new n[e]}}class RO{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class $9 extends In{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class q9 extends Za{constructor(e){super(e)}load(e,n,r,i){const a=this,s=new Vs(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(y,w){if(n[w]!==void 0)return n[w];const x=y.interleavedBuffers[w],_=a(y,x.buffer),M=vm(x.type,_),T=new AS(M,x.stride);return T.uuid=x.uuid,n[w]=T,T}function a(y,w){if(r[w]!==void 0)return r[w];const x=y.arrayBuffers[w],_=new Uint32Array(x).buffer;return r[w]=_,_}const s=e.isInstancedBufferGeometry?new $9:new In,o=e.data.index;if(o!==void 0){const y=vm(o.type,o.array);s.setIndex(new fr(y,1))}const l=e.data.attributes;for(const y in l){const w=l[y];let b;if(w.isInterleavedBufferAttribute){const x=i(e.data,w.data);b=new vh(x,w.itemSize,w.offset,w.normalized)}else{const x=vm(w.type,w.array),_=w.isInstancedBufferAttribute?fg:fr;b=new _(x,w.itemSize,w.normalized)}w.name!==void 0&&(b.name=w.name),w.usage!==void 0&&b.setUsage(w.usage),s.setAttribute(y,b)}const u=e.data.morphAttributes;if(u)for(const y in u){const w=u[y],b=[];for(let x=0,_=w.length;x<_;x++){const M=w[x];let T;if(M.isInterleavedBufferAttribute){const A=i(e.data,M.data);T=new vh(A,M.itemSize,M.offset,M.normalized)}else{const A=vm(M.type,M.array);T=new fr(A,M.itemSize,M.normalized)}M.name!==void 0&&(T.name=M.name),b.push(T)}s.morphAttributes[y]=b}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let y=0,w=h.length;y!==w;++y){const b=h[y];s.addGroup(b.start,b.count,b.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const y=new le;m.center!==void 0&&y.fromArray(m.center),s.boundingSphere=new Pa(y,m.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class pAe extends Za{constructor(e){super(e)}load(e,n,r,i){const a=this,s=this.path===""?RO.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new Vs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){i!==void 0&&i(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const f=u.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(u,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?RO.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const a=new Vs(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,n),o=JSON.parse(s),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(o)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){n!==void 0&&n(u)}),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,a,l,o,r),f=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,f),n!==void 0){let h=!1;for(const m in s)if(s[m].data instanceof HTMLImageElement){h=!0;break}h===!1&&n(u)}return u}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,o,s,n),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const a=new ah().fromJSON(e[r]);n[a.uuid]=a}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(a){a.isBone&&(i[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new ES().fromJSON(e[a],i);r[o.uuid]=o}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new q9;for(let a=0,s=e.length;a<s;a++){let o;const l=e[a];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(l);break;default:l.type in l6?o=l6[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),r[l.uuid]=o}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const a=new HS;a.setTextures(n);for(let s=0,o=e.length;s<o;s++){const l=e[s];r[l.uuid]===void 0&&(r[l.uuid]=a.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],a=V0.parse(i);n[a.uuid]=a}return n}parseImages(e,n){const r=this,i={};let a;function s(l){return r.manager.itemStart(l),a.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const u=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return s(f)}else return l.data?{data:vm(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new VS(n);a=new H0(l),a.setCrossOrigin(this.crossOrigin);for(let u=0,f=e.length;u<f;u++){const h=e[u],m=h.url;if(Array.isArray(m)){const y=[];for(let w=0,b=m.length;w<b;w++){const x=m[w],_=o(x);_!==null&&(_ instanceof HTMLImageElement?y.push(_):y.push(new cd(_.data,_.width,_.height)))}i[h.uuid]=new qf(y)}else{const y=o(h.url);i[h.uuid]=new qf(y)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function a(s){if(typeof s=="string"){const o=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:n.resourcePath+o;return await i.loadAsync(l)}else return s.data?{data:vm(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new H0(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const l=e[s],u=l.url;if(Array.isArray(u)){const f=[];for(let h=0,m=u.length;h<m;h++){const y=u[h],w=await a(y);w!==null&&(w instanceof HTMLImageElement?f.push(w):f.push(new cd(w.data,w.width,w.height)))}r[l.uuid]=new qf(f)}else{const f=await a(l.url);r[l.uuid]=new qf(f)}}}return r}parseTextures(e,n){function r(a,s){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const i={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),n[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=n[o.image],u=l.data;let f;Array.isArray(u)?(f=new hx,u.length===6&&(f.needsUpdate=!0)):(u&&u.data?f=new cd:f=new _r,u&&(f.needsUpdate=!0)),f.source=l,f.uuid=o.uuid,o.name!==void 0&&(f.name=o.name),o.mapping!==void 0&&(f.mapping=r(o.mapping,mAe)),o.channel!==void 0&&(f.channel=o.channel),o.offset!==void 0&&f.offset.fromArray(o.offset),o.repeat!==void 0&&f.repeat.fromArray(o.repeat),o.center!==void 0&&f.center.fromArray(o.center),o.rotation!==void 0&&(f.rotation=o.rotation),o.wrap!==void 0&&(f.wrapS=r(o.wrap[0],f6),f.wrapT=r(o.wrap[1],f6)),o.format!==void 0&&(f.format=o.format),o.internalFormat!==void 0&&(f.internalFormat=o.internalFormat),o.type!==void 0&&(f.type=o.type),o.colorSpace!==void 0&&(f.colorSpace=o.colorSpace),o.encoding!==void 0&&(f.encoding=o.encoding),o.minFilter!==void 0&&(f.minFilter=r(o.minFilter,h6)),o.magFilter!==void 0&&(f.magFilter=r(o.magFilter,h6)),o.anisotropy!==void 0&&(f.anisotropy=o.anisotropy),o.flipY!==void 0&&(f.flipY=o.flipY),o.generateMipmaps!==void 0&&(f.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(f.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(f.compareFunction=o.compareFunction),o.userData!==void 0&&(f.userData=o.userData),i[o.uuid]=f}return i}parseObject(e,n,r,i,a){let s;function o(m){return n[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),n[m]}function l(m){if(m!==void 0){if(Array.isArray(m)){const y=[];for(let w=0,b=m.length;w<b;w++){const x=m[w];r[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),y.push(r[x])}return y}return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),r[m]}}function u(m){return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),i[m]}let f,h;switch(e.type){case"Scene":s=new mx,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new kt(e.background):s.background=u(e.background)),e.environment!==void 0&&(s.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new TS(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new MS(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":s=new ci(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new zc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new V9(e.color,e.intensity);break;case"DirectionalLight":s=new B9(e.color,e.intensity);break;case"PointLight":s=new z9(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new H9(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new F9(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new U9(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new G9().fromJSON(e);break;case"SkinnedMesh":f=o(e.geometry),h=l(e.material),s=new l9(f,h),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":f=o(e.geometry),h=l(e.material),s=new ti(f,h);break;case"InstancedMesh":f=o(e.geometry),h=l(e.material);const m=e.count,y=e.instanceMatrix,w=e.instanceColor;s=new c9(f,h,m),s.instanceMatrix=new fg(new Float32Array(y.array),16),w!==void 0&&(s.instanceColor=new fg(new Float32Array(w.array),w.itemSize));break;case"BatchedMesh":f=o(e.geometry),h=l(e.material),s=new u9(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,h),s.geometry=f,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._visibility=e.visibility,s._active=e.active,s._bounds=e.bounds.map(b=>{const x=new Ya;x.min.fromArray(b.boxMin),x.max.fromArray(b.boxMax);const _=new Pa;return _.radius=b.sphereRadius,_.center.fromArray(b.sphereCenter),{boxInitialized:b.boxInitialized,box:x,sphereInitialized:b.sphereInitialized,sphere:_}}),s._maxGeometryCount=e.maxGeometryCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._geometryCount=e.geometryCount,s._matricesTexture=u(e.matricesTexture.uuid);break;case"LOD":s=new o9;break;case"Line":s=new md(o(e.geometry),l(e.material));break;case"LineLoop":s=new d9(o(e.geometry),l(e.material));break;case"LineSegments":s=new Bl(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new f9(o(e.geometry),l(e.material));break;case"Sprite":s=new s9(l(e.material));break;case"Group":s=new wm;break;case"Bone":s=new tj;break;default:s=new Xn}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let y=0;y<m.length;y++)s.add(this.parseObject(m[y],n,r,i,a))}if(e.animations!==void 0){const m=e.animations;for(let y=0;y<m.length;y++){const w=m[y];s.animations.push(a[w])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const m=e.levels;for(let y=0;y<m.length;y++){const w=m[y],b=s.getObjectByProperty("uuid",w.object);b!==void 0&&s.addLevel(b,w.distance,w.hysteresis)}}return s}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const mAe={UVMapping:fd,CubeReflectionMapping:Il,CubeRefractionMapping:hd,EquirectangularReflectionMapping:lg,EquirectangularRefractionMapping:T0,CubeUVReflectionMapping:Cg},f6={RepeatWrapping:A0,ClampToEdgeWrapping:Fr,MirroredRepeatWrapping:E0},h6={NearestFilter:li,NearestMipmapNearestFilter:y_,NearestMipmapLinearFilter:Av,LinearFilter:Gn,LinearMipmapNearestFilter:Rk,LinearMipmapLinearFilter:pd};class gAe extends Za{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=Dc.get(e);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(u=>{n&&n(u),a.manager.itemEnd(e)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){n&&n(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const l=fetch(e,o).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(u){return Dc.add(e,u),n&&n(u),a.manager.itemEnd(e),u}).catch(function(u){i&&i(u),Dc.remove(e),a.manager.itemError(e),a.manager.itemEnd(e)});Dc.add(e,l),a.manager.itemStart(e)}}let bw;class gj{static getContext(){return bw===void 0&&(bw=new(window.AudioContext||window.webkitAudioContext)),bw}static setContext(e){bw=e}}class yAe extends Za{constructor(e){super(e)}load(e,n,r,i){const a=this,s=new Vs(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const u=l.slice(0);gj.getContext().decodeAudioData(u,function(h){n(h)}).catch(o)}catch(u){o(u)}},r,i);function o(l){i?i(l):console.error(l),a.manager.itemError(e)}}}const p6=new dn,m6=new dn,wf=new dn;class vAe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ci,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ci,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,wf.copy(e.projectionMatrix);const i=n.eyeSep/2,a=i*n.near/n.focus,s=n.near*Math.tan(rh*n.fov*.5)/n.zoom;let o,l;m6.elements[12]=-i,p6.elements[12]=i,o=-s*n.aspect+a,l=s*n.aspect+a,wf.elements[0]=2*n.near/(l-o),wf.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(wf),o=-s*n.aspect-a,l=s*n.aspect-a,wf.elements[0]=2*n.near/(l-o),wf.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(wf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(m6),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(p6)}}class yj{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=g6(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=g6();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function g6(){return(typeof performance>"u"?Date:performance).now()}const _f=new le,y6=new Ca,xAe=new le,Sf=new le;class bAe extends Xn{constructor(){super(),this.type="AudioListener",this.context=gj.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new yj}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_f,y6,xAe),Sf.set(0,0,-1).applyQuaternion(y6),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(_f.x,i),n.positionY.linearRampToValueAtTime(_f.y,i),n.positionZ.linearRampToValueAtTime(_f.z,i),n.forwardX.linearRampToValueAtTime(Sf.x,i),n.forwardY.linearRampToValueAtTime(Sf.y,i),n.forwardZ.linearRampToValueAtTime(Sf.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(_f.x,_f.y,_f.z),n.setOrientation(Sf.x,Sf.y,Sf.z,r.x,r.y,r.z)}}class X9 extends Xn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Mf=new le,v6=new Ca,wAe=new le,Tf=new le;class _Ae extends X9{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Mf,v6,wAe),Tf.set(0,0,1).applyQuaternion(v6);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Mf.x,r),n.positionY.linearRampToValueAtTime(Mf.y,r),n.positionZ.linearRampToValueAtTime(Mf.z,r),n.orientationX.linearRampToValueAtTime(Tf.x,r),n.orientationY.linearRampToValueAtTime(Tf.y,r),n.orientationZ.linearRampToValueAtTime(Tf.z,r)}else n.setPosition(Mf.x,Mf.y,Mf.z),n.setOrientation(Tf.x,Tf.y,Tf.z)}}class SAe{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class Y9{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,a,s;switch(n){case"quaternion":i=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,a=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==i;++o)r[a+o]=r[o];s=n}else{s+=n;const o=n/s;this._mixBufferRegion(r,a,0,o,i)}this.cumulativeWeight=s}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-a,n)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,u=n+n;l!==u;++l)if(r[l]!==r[l+n]){o.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let a=r,s=i;a!==s;++a)n[a]=n[i+a%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,a){if(i>=.5)for(let s=0;s!==a;++s)e[n+s]=e[r+s]}_slerp(e,n,r,i){Ca.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,a){const s=this._workIndex*a;Ca.multiplyQuaternionsFlat(e,s,e,n,e,r),Ca.slerpFlat(e,n,e,n,e,s,i)}_lerp(e,n,r,i,a){const s=1-i;for(let o=0;o!==a;++o){const l=n+o;e[l]=e[l]*s+e[r+o]*i}}_lerpAdditive(e,n,r,i,a){for(let s=0;s!==a;++s){const o=n+s;e[o]=e[o]+e[r+s]*i}}}const vj="\\[\\]\\.:\\/",MAe=new RegExp("["+vj+"]","g"),xj="[^"+vj+"]",TAe="[^"+vj.replace("\\.","")+"]",AAe=/((?:WC+[\/:])*)/.source.replace("WC",xj),EAe=/(WCOD+)?/.source.replace("WCOD",TAe),CAe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",xj),PAe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",xj),NAe=new RegExp("^"+AAe+EAe+CAe+PAe+"$"),OAe=["material","materials","bones","map"];class RAe{constructor(e,n,r){const i=r||Wn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=r.length;i!==a;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Wn{constructor(e,n,r){this.path=n,this.parsedPath=r||Wn.parseTrackName(n),this.node=Wn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Wn.Composite(e,n,r):new Wn(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(MAe,"")}static parseTrackName(e){const n=NAe.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=r.nodeName.substring(i+1);OAe.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===n||o.uuid===n)return o;const l=r(o.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let a=n.propertyIndex;if(e||(e=Wn.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===u){u=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const s=e[i];if(s===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Wn.Composite=RAe;Wn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Wn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Wn.prototype.GetterByBindingType=[Wn.prototype._getValue_direct,Wn.prototype._getValue_array,Wn.prototype._getValue_arrayElement,Wn.prototype._getValue_toArray];Wn.prototype.SetterByBindingTypeAndVersioning=[[Wn.prototype._setValue_direct,Wn.prototype._setValue_direct_setNeedsUpdate,Wn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Wn.prototype._setValue_array,Wn.prototype._setValue_array_setNeedsUpdate,Wn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Wn.prototype._setValue_arrayElement,Wn.prototype._setValue_arrayElement_setNeedsUpdate,Wn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Wn.prototype._setValue_fromArray,Wn.prototype._setValue_fromArray_setNeedsUpdate,Wn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class kAe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Bs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length;let o,l=e.length,u=this.nCachedObjects_;for(let f=0,h=arguments.length;f!==h;++f){const m=arguments[f],y=m.uuid;let w=n[y];if(w===void 0){w=l++,n[y]=w,e.push(m);for(let b=0,x=s;b!==x;++b)a[b].push(new Wn(m,r[b],i[b]))}else if(w<u){o=e[w];const b=--u,x=e[b];n[x.uuid]=w,e[w]=x,n[y]=b,e[b]=m;for(let _=0,M=s;_!==M;++_){const T=a[_],A=T[b];let R=T[w];T[w]=A,R===void 0&&(R=new Wn(m,r[_],i[_])),T[b]=R}}else e[w]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const l=arguments[s],u=l.uuid,f=n[u];if(f!==void 0&&f>=a){const h=a++,m=e[h];n[m.uuid]=f,e[f]=m,n[u]=h,e[h]=l;for(let y=0,w=i;y!==w;++y){const b=r[y],x=b[h],_=b[f];b[f]=x,b[h]=_}}}this.nCachedObjects_=a}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],f=u.uuid,h=n[f];if(h!==void 0)if(delete n[f],h<a){const m=--a,y=e[m],w=--s,b=e[w];n[y.uuid]=h,e[h]=y,n[b.uuid]=m,e[m]=b,e.pop();for(let x=0,_=i;x!==_;++x){const M=r[x],T=M[m],A=M[w];M[h]=T,M[m]=A,M.pop()}}else{const m=--s,y=e[m];m>0&&(n[y.uuid]=h),e[h]=y,e.pop();for(let w=0,b=i;w!==b;++w){const x=r[w];x[h]=x[m],x.pop()}}}this.nCachedObjects_=a}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const a=this._bindings;if(i!==void 0)return a[i];const s=this._paths,o=this._parsedPaths,l=this._objects,u=l.length,f=this.nCachedObjects_,h=new Array(u);i=a.length,r[e]=i,s.push(e),o.push(n),a.push(h);for(let m=f,y=l.length;m!==y;++m){const w=l[m];h[m]=new Wn(w,e,n)}return h}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,l=s[o],u=e[o];n[u]=r,s[r]=l,s.pop(),a[r]=a[o],a.pop(),i[r]=i[o],i.pop()}}}class K9{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const a=n.tracks,s=a.length,o=new Array(s),l={endingStart:Gf,endingEnd:Gf};for(let u=0;u!==s;++u){const f=a[u].createInterpolant(null);o[u]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=O7,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,a=e._clip.duration,s=a/i,o=i/a;e.warp(1,s,n),this.warp(o,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,a=i.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=a,l[1]=a+r,u[0]=e/s,u[1]=n/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const l=(e-a)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const s=this._updateTime(n),o=this._updateWeight(e);if(o>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case Vk:for(let f=0,h=l.length;f!==h;++f)l[f].evaluate(s),u[f].accumulateAdditive(o);break;case vS:default:for(let f=0,h=l.length;f!==h;++f)l[f].evaluate(s),u[f].accumulate(i,o)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,a=this._loopCount;const s=r===R7;if(e===0)return a===-1?i:s&&(a&1)===1?n-i:i;if(r===N7){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=n||i<0){const o=Math.floor(i/n);i-=n*o,a+=Math.abs(o);const l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(s&&(a&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=$f,i.endingEnd=$f):(e?i.endingStart=this.zeroSlopeAtStart?$f:Gf:i.endingStart=N0,n?i.endingEnd=this.zeroSlopeAtEnd?$f:Gf:i.endingEnd=N0)}_scheduleFading(e,n,r){const i=this._mixer,a=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=a,l[0]=n,o[1]=a+e,l[1]=r,this}}const jAe=new Float32Array(1);class IAe extends tu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,a=i.length,s=e._propertyBindings,o=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let f=u[l];f===void 0&&(f={},u[l]=f);for(let h=0;h!==a;++h){const m=i[h],y=m.name;let w=f[y];if(w!==void 0)++w.referenceCount,s[h]=w;else{if(w=s[h],w!==void 0){w._cacheIndex===null&&(++w.referenceCount,this._addInactiveBinding(w,l,y));continue}const b=n&&n._propertyBindings[h].binding.parsedPath;w=new Y9(Wn.create(r,y,b),m.ValueTypeName,m.getValueSize()),++w.referenceCount,this._addInactiveBinding(w,l,y),s[h]=w}o[h].resultBuffer=w.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const a=n[r];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const a=n[r];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,a=this._actionsByClip;let s=a[n];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[n]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],l=o.knownActions,u=l[l.length-1],f=e._byClipCacheIndex;u._byClipCacheIndex=f,l[f]=u,l.pop(),e._byClipCacheIndex=null;const h=o.actionByRoot,m=(e._localRoot||this._root).uuid;delete h[m],l.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const a=n[r];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,a=n[i];e._cacheIndex=i,n[i]=e,a._cacheIndex=r,n[r]=a}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,a=n[i];e._cacheIndex=i,n[i]=e,a._cacheIndex=r,n[r]=a}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,a=this._bindings;let s=i[n];s===void 0&&(s={},i[n]=s),s[r]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,a=r.path,s=this._bindingsByRootAndName,o=s[i],l=n[n.length-1],u=e._cacheIndex;l._cacheIndex=u,n[u]=l,n.pop(),delete o[a],Object.keys(o).length===0&&delete s[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,a=n[i];e._cacheIndex=i,n[i]=e,a._cacheIndex=r,n[r]=a}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,a=n[i];e._cacheIndex=i,n[i]=e,a._cacheIndex=r,n[r]=a}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new fj(new Float32Array(2),new Float32Array(2),1,jAe),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=n[i];e.__cacheIndex=i,n[i]=e,a.__cacheIndex=r,n[r]=a}clipAction(e,n,r){const i=n||this._root,a=i.uuid;let s=typeof e=="string"?V0.findByName(i,e):e;const o=s!==null?s.uuid:e,l=this._actionsByClip[o];let u=null;if(r===void 0&&(s!==null?r=s.blendMode:r=vS),l!==void 0){const h=l.actionByRoot[a];if(h!==void 0&&h.blendMode===r)return h;u=l.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;const f=new K9(this,s,n,r);return this._bindAction(f,u),this._addInactiveAction(f,o,a),f}existingAction(e,n){const r=n||this._root,i=r.uuid,a=typeof e=="string"?V0.findByName(r,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let u=0;u!==r;++u)n[u]._update(i,e,a,s);const o=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)o[u].apply(s);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,a=i[r];if(a!==void 0){const s=a.knownActions;for(let o=0,l=s.length;o!==l;++o){const u=s[o];this._deactivateAction(u);const f=u._cacheIndex,h=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=f,n[f]=h,n.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const s in r){const o=r[s].actionByRoot,l=o[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,a=i[n];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class bj{constructor(e){this.value=e}clone(){return new bj(this.value.clone===void 0?this.value:this.value.clone())}}let DAe=0;class LAe extends tu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:DAe++}),this.name="",this.usage=j0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const a=Array.isArray(n[r])?n[r]:[n[r]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class UAe extends AS{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class FAe{constructor(e,n,r,i,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class wj{constructor(e,n,r=0,i=1/0){this.ray=new Ah(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new ih,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return kO(e,this,r,n),r.sort(x6),r}intersectObjects(e,n=!0,r=[]){for(let i=0,a=e.length;i<a;i++)kO(e[i],this,r,n);return r.sort(x6),r}}function x6(t,e){return t.distance-e.distance}function kO(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let a=0,s=i.length;a<s;a++)kO(i[a],e,n,!0)}}class jO{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(ei(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class zAe{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const b6=new Ke;class BAe{constructor(e=new Ke(1/0,1/0),n=new Ke(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=b6.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,b6).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const w6=new le,ww=new le;class VAe{constructor(e=new le,n=new le){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){w6.subVectors(e,this.start),ww.subVectors(this.end,this.start);const r=ww.dot(ww);let a=ww.dot(w6)/r;return n&&(a=ei(a,0,1)),a}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _6=new le;class HAe extends Xn{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new In,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,l=32;s<l;s++,o++){const u=s/l*Math.PI*2,f=o/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(f),Math.sin(f),1)}r.setAttribute("position",new Vt(i,3));const a=new Ka({fog:!1,toneMapped:!1});this.cone=new Bl(r,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),_6.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_6),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Hu=new le,_w=new dn,EC=new dn;class WAe extends Bl{constructor(e){const n=Z9(e),r=new In,i=[],a=[],s=new kt(0,0,1),o=new kt(0,1,0);for(let u=0;u<n.length;u++){const f=n[u];f.parent&&f.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(s.r,s.g,s.b),a.push(o.r,o.g,o.b))}r.setAttribute("position",new Vt(i,3)),r.setAttribute("color",new Vt(a,3));const l=new Ka({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");EC.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<n.length;a++){const o=n[a];o.parent&&o.parent.isBone&&(_w.multiplyMatrices(EC,o.matrixWorld),Hu.setFromMatrixPosition(_w),i.setXYZ(s,Hu.x,Hu.y,Hu.z),_w.multiplyMatrices(EC,o.parent.matrixWorld),Hu.setFromMatrixPosition(_w),i.setXYZ(s+1,Hu.x,Hu.y,Hu.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Z9(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,Z9(t.children[n]));return e}class GAe extends ti{constructor(e,n,r){const i=new xx(n,4,2),a=new nu({wireframe:!0,fog:!1,toneMapped:!1});super(i,a),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const $Ae=new le,S6=new kt,M6=new kt;class qAe extends Xn{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new vx(n);i.rotateY(Math.PI*.5),this.material=new nu({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=i.getAttribute("position"),s=new Float32Array(a.count*3);i.setAttribute("color",new fr(s,3)),this.add(new ti(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");S6.copy(this.light.color),M6.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const a=r<i/2?S6:M6;n.setXYZ(r,a.r,a.g,a.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt($Ae.setFromMatrixPosition(this.light.matrixWorld).negate())}}class XAe extends Bl{constructor(e=10,n=10,r=4473924,i=8947848){r=new kt(r),i=new kt(i);const a=n/2,s=e/n,o=e/2,l=[],u=[];for(let m=0,y=0,w=-o;m<=n;m++,w+=s){l.push(-o,0,w,o,0,w),l.push(w,0,-o,w,0,o);const b=m===a?r:i;b.toArray(u,y),y+=3,b.toArray(u,y),y+=3,b.toArray(u,y),y+=3,b.toArray(u,y),y+=3}const f=new In;f.setAttribute("position",new Vt(l,3)),f.setAttribute("color",new Vt(u,3));const h=new Ka({vertexColors:!0,toneMapped:!1});super(f,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class YAe extends Bl{constructor(e=10,n=16,r=8,i=64,a=4473924,s=8947848){a=new kt(a),s=new kt(s);const o=[],l=[];if(n>1)for(let h=0;h<n;h++){const m=h/n*(Math.PI*2),y=Math.sin(m)*e,w=Math.cos(m)*e;o.push(0,0,0),o.push(y,0,w);const b=h&1?a:s;l.push(b.r,b.g,b.b),l.push(b.r,b.g,b.b)}for(let h=0;h<r;h++){const m=h&1?a:s,y=e-e/r*h;for(let w=0;w<i;w++){let b=w/i*(Math.PI*2),x=Math.sin(b)*y,_=Math.cos(b)*y;o.push(x,0,_),l.push(m.r,m.g,m.b),b=(w+1)/i*(Math.PI*2),x=Math.sin(b)*y,_=Math.cos(b)*y,o.push(x,0,_),l.push(m.r,m.g,m.b)}}const u=new In;u.setAttribute("position",new Vt(o,3)),u.setAttribute("color",new Vt(l,3));const f=new Ka({vertexColors:!0,toneMapped:!1});super(u,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const T6=new le,Sw=new le,A6=new le;class KAe extends Xn{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new In;i.setAttribute("position",new Vt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const a=new Ka({fog:!1,toneMapped:!1});this.lightPlane=new md(i,a),this.add(this.lightPlane),i=new In,i.setAttribute("position",new Vt([0,0,0,0,0,1],3)),this.targetLine=new md(i,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),T6.setFromMatrixPosition(this.light.matrixWorld),Sw.setFromMatrixPosition(this.light.target.matrixWorld),A6.subVectors(Sw,T6),this.lightPlane.lookAt(Sw),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Sw),this.targetLine.scale.z=A6.length()}}const Mw=new le,Zr=new fx;class ZAe extends Bl{constructor(e){const n=new In,r=new Ka({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(w,b){l(w),l(b)}function l(w){i.push(0,0,0),a.push(0,0,0),s[w]===void 0&&(s[w]=[]),s[w].push(i.length/3-1)}n.setAttribute("position",new Vt(i,3)),n.setAttribute("color",new Vt(a,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const u=new kt(16755200),f=new kt(16711680),h=new kt(43775),m=new kt(16777215),y=new kt(3355443);this.setColors(u,f,h,m,y)}setColors(e,n,r,i,a){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,n.r,n.g,n.b),o.setXYZ(25,n.r,n.g,n.b),o.setXYZ(26,n.r,n.g,n.b),o.setXYZ(27,n.r,n.g,n.b),o.setXYZ(28,n.r,n.g,n.b),o.setXYZ(29,n.r,n.g,n.b),o.setXYZ(30,n.r,n.g,n.b),o.setXYZ(31,n.r,n.g,n.b),o.setXYZ(32,r.r,r.g,r.b),o.setXYZ(33,r.r,r.g,r.b),o.setXYZ(34,r.r,r.g,r.b),o.setXYZ(35,r.r,r.g,r.b),o.setXYZ(36,r.r,r.g,r.b),o.setXYZ(37,r.r,r.g,r.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Zr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),oi("c",n,e,Zr,0,0,-1),oi("t",n,e,Zr,0,0,1),oi("n1",n,e,Zr,-r,-i,-1),oi("n2",n,e,Zr,r,-i,-1),oi("n3",n,e,Zr,-r,i,-1),oi("n4",n,e,Zr,r,i,-1),oi("f1",n,e,Zr,-r,-i,1),oi("f2",n,e,Zr,r,-i,1),oi("f3",n,e,Zr,-r,i,1),oi("f4",n,e,Zr,r,i,1),oi("u1",n,e,Zr,r*.7,i*1.1,-1),oi("u2",n,e,Zr,-r*.7,i*1.1,-1),oi("u3",n,e,Zr,0,i*2,-1),oi("cf1",n,e,Zr,-r,0,1),oi("cf2",n,e,Zr,r,0,1),oi("cf3",n,e,Zr,0,-i,1),oi("cf4",n,e,Zr,0,i,1),oi("cn1",n,e,Zr,-r,0,-1),oi("cn2",n,e,Zr,r,0,-1),oi("cn3",n,e,Zr,0,-i,-1),oi("cn4",n,e,Zr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function oi(t,e,n,r,i,a,s){Mw.set(i,a,s).unproject(r);const o=e[t];if(o!==void 0){const l=n.getAttribute("position");for(let u=0,f=o.length;u<f;u++)l.setXYZ(o[u],Mw.x,Mw.y,Mw.z)}}const Tw=new Ya;class JAe extends Bl{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),a=new In;a.setIndex(new fr(r,1)),a.setAttribute("position",new fr(i,3)),super(a,new Ka({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Tw.setFromObject(this.object),Tw.isEmpty())return;const n=Tw.min,r=Tw.max,i=this.geometry.attributes.position,a=i.array;a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=n.x,a[4]=r.y,a[5]=r.z,a[6]=n.x,a[7]=n.y,a[8]=r.z,a[9]=r.x,a[10]=n.y,a[11]=r.z,a[12]=r.x,a[13]=r.y,a[14]=n.z,a[15]=n.x,a[16]=r.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=r.x,a[22]=n.y,a[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class QAe extends Bl{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new In;a.setIndex(new fr(r,1)),a.setAttribute("position",new Vt(i,3)),super(a,new Ka({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class eEe extends md{constructor(e,n=1,r=16776960){const i=r,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new In;s.setAttribute("position",new Vt(a,3)),s.computeBoundingSphere(),super(s,new Ka({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new In;l.setAttribute("position",new Vt(o,3)),l.computeBoundingSphere(),this.add(new ti(l,new nu({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const E6=new le;let Aw,CC;class tEe extends Xn{constructor(e=new le(0,0,1),n=new le(0,0,0),r=1,i=16776960,a=r*.2,s=a*.2){super(),this.type="ArrowHelper",Aw===void 0&&(Aw=new In,Aw.setAttribute("position",new Vt([0,0,0,0,1,0],3)),CC=new Ng(0,.5,1,5,1),CC.translate(0,-.5,0)),this.position.copy(n),this.line=new md(Aw,new Ka({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ti(CC,new nu({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{E6.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(E6,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class nEe extends Bl{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new In;i.setAttribute("position",new Vt(n,3)),i.setAttribute("color",new Vt(r,3));const a=new Ka({vertexColors:!0,toneMapped:!1});super(i,a),this.type="AxesHelper"}setColors(e,n,r){const i=new kt,a=this.geometry.attributes.color.array;return i.set(e),i.toArray(a,0),i.toArray(a,3),i.set(n),i.toArray(a,6),i.toArray(a,9),i.set(r),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class rEe{constructor(){this.type="ShapePath",this.color=new kt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new D0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,a,s){return this.currentPath.bezierCurveTo(e,n,r,i,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(_){const M=[];for(let T=0,A=_.length;T<A;T++){const R=_[T],N=new ah;N.curves=R.curves,M.push(N)}return M}function r(_,M){const T=M.length;let A=!1;for(let R=T-1,N=0;N<T;R=N++){let O=M[R],k=M[N],C=k.x-O.x,I=k.y-O.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(O=M[N],C=-C,k=M[R],I=-I),_.y<O.y||_.y>k.y)continue;if(_.y===O.y){if(_.x===O.x)return!0}else{const F=I*(_.x-O.x)-C*(_.y-O.y);if(F===0)return!0;if(F<0)continue;A=!A}}else{if(_.y!==O.y)continue;if(k.x<=_.x&&_.x<=O.x||O.x<=_.x&&_.x<=k.x)return!0}}return A}const i=Rl.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,l;const u=[];if(a.length===1)return o=a[0],l=new ah,l.curves=o.curves,u.push(l),u;let f=!i(a[0].getPoints());f=e?!f:f;const h=[],m=[];let y=[],w=0,b;m[w]=void 0,y[w]=[];for(let _=0,M=a.length;_<M;_++)o=a[_],b=o.getPoints(),s=i(b),s=e?!s:s,s?(!f&&m[w]&&w++,m[w]={s:new ah,p:b},m[w].s.curves=o.curves,f&&w++,y[w]=[]):y[w].push({h:o,p:b[0]});if(!m[0])return n(a);if(m.length>1){let _=!1,M=0;for(let T=0,A=m.length;T<A;T++)h[T]=[];for(let T=0,A=m.length;T<A;T++){const R=y[T];for(let N=0;N<R.length;N++){const O=R[N];let k=!0;for(let C=0;C<m.length;C++)r(O.p,m[C].p)&&(T!==C&&M++,k?(k=!1,h[C].push(O)):_=!0);k&&h[T].push(O)}}M>0&&_===!1&&(y=h)}let x;for(let _=0,M=m.length;_<M;_++){l=m[_].s,u.push(l),x=y[_];for(let T=0,A=x.length;T<A;T++)l.holes.push(x[T].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:lx}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=lx);const iEe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Ok,AddEquation:Zu,AddOperation:v7,AdditiveAnimationBlendMode:Vk,AdditiveBlending:GN,AgXToneMapping:S7,AlphaFormat:T7,AlwaysCompare:V7,AlwaysDepth:d7,AlwaysStencilFunc:SO,AmbientLight:V9,AnimationAction:K9,AnimationClip:V0,AnimationLoader:lAe,AnimationMixer:IAe,AnimationObjectGroup:kAe,AnimationUtils:iAe,ArcCurve:h9,ArrayCamera:r9,ArrowHelper:tEe,AttachedBindMode:KN,Audio:X9,AudioAnalyser:SAe,AudioContext:gj,AudioListener:bAe,AudioLoader:yAe,AxesHelper:nEe,BackSide:Xa,BasicDepthPacking:k7,BasicShadowMap:q$,BatchedMesh:u9,Bone:tj,BooleanKeyframeTrack:Ph,Box2:BAe,Box3:Ya,Box3Helper:QAe,BoxGeometry:Eh,BoxHelper:JAe,BufferAttribute:fr,BufferGeometry:In,BufferGeometryLoader:q9,ByteType:kk,Cache:Dc,Camera:fx,CameraHelper:ZAe,CanvasTexture:CTe,CapsuleGeometry:NS,CatmullRomCurve3:p9,CineonToneMapping:w7,CircleGeometry:OS,ClampToEdgeWrapping:Fr,Clock:yj,Color:kt,ColorKeyframeTrack:hj,ColorManagement:ur,CompressedArrayTexture:ATe,CompressedCubeTexture:ETe,CompressedTexture:CS,CompressedTextureLoader:cAe,ConeGeometry:RS,ConstantAlphaFactor:l7,ConstantColorFactor:s7,CubeCamera:Y7,CubeReflectionMapping:Il,CubeRefractionMapping:hd,CubeTexture:hx,CubeTextureLoader:L9,CubeUVReflectionMapping:Cg,CubicBezierCurve:ij,CubicBezierCurve3:m9,CubicInterpolant:k9,CullFaceBack:WN,CullFaceFront:$$,CullFaceFrontBack:ybe,CullFaceNone:G$,Curve:al,CurvePath:y9,CustomBlending:X$,CustomToneMapping:_7,CylinderGeometry:Ng,Cylindrical:zAe,Data3DTexture:qk,DataArrayTexture:bS,DataTexture:cd,DataTextureLoader:pj,DataUtils:Xf,DecrementStencilOp:Cbe,DecrementWrapStencilOp:Nbe,DefaultLoadingManager:D9,DepthFormat:od,DepthStencilFormat:yh,DepthTexture:wS,DetachedBindMode:M7,DirectionalLight:B9,DirectionalLightHelper:KAe,DiscreteInterpolant:j9,DisplayP3ColorSpace:xS,DodecahedronGeometry:kS,DoubleSide:el,DstAlphaFactor:t7,DstColorFactor:r7,DynamicCopyUsage:Gbe,DynamicDrawUsage:Fbe,DynamicReadUsage:Vbe,EdgesGeometry:v9,EllipseCurve:PS,EqualCompare:U7,EqualDepth:h7,EqualStencilFunc:jbe,EquirectangularReflectionMapping:lg,EquirectangularRefractionMapping:T0,Euler:dx,EventDispatcher:tu,ExtrudeGeometry:IS,FileLoader:Vs,Float16BufferAttribute:Owe,Float32BufferAttribute:Vt,Float64BufferAttribute:Rwe,FloatType:ui,Fog:TS,FogExp2:MS,FramebufferTexture:TTe,FrontSide:Yc,Frustum:px,GLBufferAttribute:FAe,GLSL1:qbe,GLSL3:MO,GreaterCompare:F7,GreaterDepth:m7,GreaterEqualCompare:B7,GreaterEqualDepth:p7,GreaterEqualStencilFunc:Ube,GreaterStencilFunc:Dbe,GridHelper:XAe,Group:wm,HalfFloatType:zi,HemisphereLight:U9,HemisphereLightHelper:qAe,IcosahedronGeometry:yx,ImageBitmapLoader:gAe,ImageLoader:H0,ImageUtils:$k,IncrementStencilOp:Ebe,IncrementWrapStencilOp:Pbe,InstancedBufferAttribute:fg,InstancedBufferGeometry:$9,InstancedInterleavedBuffer:UAe,InstancedMesh:c9,Int16BufferAttribute:Pwe,Int32BufferAttribute:Nwe,Int8BufferAttribute:Awe,IntType:yS,InterleavedBuffer:AS,InterleavedBufferAttribute:vh,Interpolant:bx,InterpolateDiscrete:C0,InterpolateLinear:P0,InterpolateSmooth:qw,InvertStencilOp:Obe,KeepStencilOp:jf,KeyframeTrack:sl,LOD:o9,LatheGeometry:gx,Layers:ih,LessCompare:L7,LessDepth:f7,LessEqualCompare:Wk,LessEqualDepth:M0,LessEqualStencilFunc:Ibe,LessStencilFunc:kbe,Light:Td,LightProbe:G9,Line:md,Line3:VAe,LineBasicMaterial:Ka,LineCurve:aj,LineCurve3:g9,LineDashedMaterial:N9,LineLoop:d9,LineSegments:Bl,LinearDisplayP3ColorSpace:ux,LinearEncoding:Hk,LinearFilter:Gn,LinearInterpolant:fj,LinearMipMapLinearFilter:ZN,LinearMipMapNearestFilter:wbe,LinearMipmapLinearFilter:pd,LinearMipmapNearestFilter:Rk,LinearSRGBColorSpace:Hs,LinearToneMapping:x7,LinearTransfer:O0,Loader:Za,LoaderUtils:RO,LoadingManager:VS,LoopOnce:N7,LoopPingPong:R7,LoopRepeat:O7,LuminanceAlphaFormat:E7,LuminanceFormat:A7,MOUSE:Rf,Material:Oa,MaterialLoader:HS,MathUtils:lwe,Matrix3:jn,Matrix4:dn,MaxEquation:YN,Mesh:ti,MeshBasicMaterial:nu,MeshDepthMaterial:Jk,MeshDistanceMaterial:Qk,MeshLambertMaterial:C9,MeshMatcapMaterial:P9,MeshNormalMaterial:E9,MeshPhongMaterial:T9,MeshPhysicalMaterial:uj,MeshStandardMaterial:cj,MeshToonMaterial:A9,MinEquation:XN,MirroredRepeatWrapping:E0,MixOperation:y7,MultiplyBlending:qN,MultiplyOperation:cx,NearestFilter:li,NearestMipMapLinearFilter:bbe,NearestMipMapNearestFilter:xbe,NearestMipmapLinearFilter:Av,NearestMipmapNearestFilter:y_,NeverCompare:D7,NeverDepth:u7,NeverStencilFunc:Rbe,NoBlending:Nl,NoColorSpace:Ls,NoToneMapping:Ol,NormalAnimationBlendMode:vS,NormalBlending:nh,NotEqualCompare:z7,NotEqualDepth:g7,NotEqualStencilFunc:Lbe,NumberKeyframeTrack:z0,Object3D:Xn,ObjectLoader:pAe,ObjectSpaceNormalMap:I7,OctahedronGeometry:vx,OneFactor:J$,OneMinusConstantAlphaFactor:c7,OneMinusConstantColorFactor:o7,OneMinusDstAlphaFactor:n7,OneMinusDstColorFactor:i7,OneMinusSrcAlphaFactor:g_,OneMinusSrcColorFactor:e7,OrthographicCamera:zc,P3Primaries:k0,PCFShadowMap:mS,PCFSoftShadowMap:Tv,PMREMGenerator:AO,Path:D0,PerspectiveCamera:ci,Plane:Nc,PlaneGeometry:Ch,PlaneHelper:eEe,PointLight:z9,PointLightHelper:GAe,Points:f9,PointsMaterial:nj,PolarGridHelper:YAe,PolyhedronGeometry:Md,PositionalAudio:_Ae,PropertyBinding:Wn,PropertyMixer:Y9,QuadraticBezierCurve:sj,QuadraticBezierCurve3:oj,Quaternion:Ca,QuaternionKeyframeTrack:Og,QuaternionLinearInterpolant:I9,RED_GREEN_RGTC2_Format:wO,RED_RGTC1_Format:P7,REVISION:lx,RGBADepthPacking:j7,RGBAFormat:Si,RGBAIntegerFormat:zk,RGBA_ASTC_10x10_Format:mO,RGBA_ASTC_10x5_Format:fO,RGBA_ASTC_10x6_Format:hO,RGBA_ASTC_10x8_Format:pO,RGBA_ASTC_12x10_Format:gO,RGBA_ASTC_12x12_Format:yO,RGBA_ASTC_4x4_Format:iO,RGBA_ASTC_5x4_Format:aO,RGBA_ASTC_5x5_Format:sO,RGBA_ASTC_6x5_Format:oO,RGBA_ASTC_6x6_Format:lO,RGBA_ASTC_8x5_Format:cO,RGBA_ASTC_8x6_Format:uO,RGBA_ASTC_8x8_Format:dO,RGBA_BPTC_Format:$w,RGBA_ETC2_EAC_Format:rO,RGBA_PVRTC_2BPPV1_Format:tO,RGBA_PVRTC_4BPPV1_Format:eO,RGBA_S3TC_DXT1_Format:Hw,RGBA_S3TC_DXT3_Format:Ww,RGBA_S3TC_DXT5_Format:Gw,RGB_BPTC_SIGNED_Format:vO,RGB_BPTC_UNSIGNED_Format:xO,RGB_ETC1_Format:Bk,RGB_ETC2_Format:nO,RGB_PVRTC_2BPPV1_Format:QN,RGB_PVRTC_4BPPV1_Format:JN,RGB_S3TC_DXT1_Format:Vw,RGFormat:C7,RGIntegerFormat:Fk,RawShaderMaterial:M9,Ray:Ah,Raycaster:wj,Rec709Primaries:R0,RectAreaLight:H9,RedFormat:Lk,RedIntegerFormat:Uk,ReinhardToneMapping:b7,RenderTarget:G7,RepeatWrapping:A0,ReplaceStencilOp:Abe,ReverseSubtractEquation:K$,RingGeometry:DS,SIGNED_RED_GREEN_RGTC2_Format:_O,SIGNED_RED_RGTC1_Format:bO,SRGBColorSpace:wi,SRGBTransfer:Ar,Scene:mx,ShaderChunk:En,ShaderLib:Zo,ShaderMaterial:Ws,ShadowMaterial:S9,Shape:ah,ShapeGeometry:LS,ShapePath:rEe,ShapeUtils:Rl,ShortType:jk,Skeleton:ES,SkeletonHelper:WAe,SkinnedMesh:l9,Source:qf,Sphere:Pa,SphereGeometry:xx,Spherical:jO,SphericalHarmonics3:W9,SplineCurve:lj,SpotLight:F9,SpotLightHelper:HAe,Sprite:s9,SpriteMaterial:ej,SrcAlphaFactor:m_,SrcAlphaSaturateFactor:a7,SrcColorFactor:Q$,StaticCopyUsage:Wbe,StaticDrawUsage:j0,StaticReadUsage:Bbe,StereoCamera:vAe,StreamCopyUsage:$be,StreamDrawUsage:zbe,StreamReadUsage:Hbe,StringKeyframeTrack:Nh,SubtractEquation:Y$,SubtractiveBlending:$N,TOUCH:kf,TangentSpaceNormalMap:Sd,TetrahedronGeometry:US,Texture:_r,TextureLoader:uAe,TorusGeometry:FS,TorusKnotGeometry:zS,Triangle:fs,TriangleFanDrawMode:Mbe,TriangleStripDrawMode:Sbe,TrianglesDrawMode:_be,TubeGeometry:BS,TwoPassDoubleSide:vbe,UVMapping:fd,Uint16BufferAttribute:Xk,Uint32BufferAttribute:Yk,Uint8BufferAttribute:Ewe,Uint8ClampedBufferAttribute:Cwe,Uniform:bj,UniformsGroup:LAe,UniformsLib:bt,UniformsUtils:X7,UnsignedByteType:zs,UnsignedInt248Type:sd,UnsignedIntType:Sl,UnsignedShort4444Type:Ik,UnsignedShort5551Type:Dk,UnsignedShortType:gS,VSMShadowMap:Xo,Vector2:Ke,Vector3:le,Vector4:dr,VectorKeyframeTrack:B0,VideoTexture:MTe,WebGL1Renderer:i9,WebGL3DRenderTarget:pwe,WebGLArrayRenderTarget:hwe,WebGLCoordinateSystem:tl,WebGLCubeRenderTarget:Kk,WebGLMultipleRenderTargets:mwe,WebGLRenderTarget:ys,WebGLRenderer:SS,WebGLUtils:n9,WebGPUCoordinateSystem:cg,WireframeGeometry:_9,WrapAroundEnding:N0,ZeroCurvatureEnding:Gf,ZeroFactor:Z$,ZeroSlopeEnding:$f,ZeroStencilOp:Tbe,_SRGBAFormat:v_,createCanvasElement:W7,sRGBEncoding:ld},Symbol.toStringTag,{value:"Module"}));var PC={exports:{}},Wu={};var C6;function aEe(){return C6||(C6=1,Wu.ConcurrentRoot=1,Wu.ContinuousEventPriority=4,Wu.DefaultEventPriority=16,Wu.DiscreteEventPriority=1,Wu.IdleEventPriority=536870912,Wu.LegacyRoot=0),Wu}var P6;function sEe(){return P6||(P6=1,PC.exports=aEe()),PC.exports}var Sm=sEe();function oEe(t){let e;const n=new Set,r=(u,f)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const m=e;e=f?h:Object.assign({},e,h),n.forEach(y=>y(e,m))}},i=()=>e,a=(u,f=i,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=f(e);function y(){const w=f(e);if(!h(m,w)){const b=m;u(m=w,b)}}return n.add(y),()=>n.delete(y)},l={setState:r,getState:i,subscribe:(u,f,h)=>f||h?a(u,f,h):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return e=t(r,i,l),l}const lEe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),N6=lEe?L.useEffect:L.useLayoutEffect;function J9(t){const e=typeof t=="function"?oEe(t):t,n=(r=e.getState,i=Object.is)=>{const[,a]=L.useReducer(x=>x+1,0),s=e.getState(),o=L.useRef(s),l=L.useRef(r),u=L.useRef(i),f=L.useRef(!1),h=L.useRef();h.current===void 0&&(h.current=r(s));let m,y=!1;(o.current!==s||l.current!==r||u.current!==i||f.current)&&(m=r(s),y=!i(h.current,m)),N6(()=>{y&&(h.current=m),o.current=s,l.current=r,u.current=i,f.current=!1});const w=L.useRef(s);N6(()=>{const x=()=>{try{const M=e.getState(),T=l.current(M);u.current(h.current,T)||(o.current=M,h.current=T,a())}catch{f.current=!0,a()}},_=e.subscribe(x);return e.getState()!==w.current&&x(),_},[]);const b=y?m:h.current;return L.useDebugValue(b),b};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}const cEe=t=>typeof t=="object"&&typeof t.then=="function",Kf=[];function Q9(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}function eq(t,e=null,n=!1,r={}){e===null&&(e=[t]);for(const a of Kf)if(Q9(e,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return r.lifespan&&r.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,r.lifespan)),a.response;if(!n)throw a.promise}const i={keys:e,equal:r.equal,remove:()=>{const a=Kf.indexOf(i);a!==-1&&Kf.splice(a,1)},promise:(cEe(t)?t:t(...e)).then(a=>{i.response=a,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(a=>i.error=a)};if(Kf.push(i),!n)throw i.promise}const uEe=(t,e,n)=>eq(t,e,!1,n),dEe=(t,e,n)=>void eq(t,e,!0,n),fEe=t=>{if(t===void 0||t.length===0)Kf.splice(0,Kf.length);else{const e=Kf.find(n=>Q9(t,n.keys,n.equal));e&&e.remove()}};var NC={exports:{}},OC={exports:{}},RC={};var O6;function hEe(){return O6||(O6=1,(function(t){function e($,B){var Y=$.length;$.push(B);e:for(;0<Y;){var X=Y-1>>>1,ne=$[X];if(0<i(ne,B))$[X]=B,$[Y]=ne,Y=X;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var B=$[0],Y=$.pop();if(Y!==B){$[0]=Y;e:for(var X=0,ne=$.length,se=ne>>>1;X<se;){var ye=2*(X+1)-1,Ne=$[ye],Ee=ye+1,Oe=$[Ee];if(0>i(Ne,Y))Ee<ne&&0>i(Oe,Ne)?($[X]=Oe,$[Ee]=Y,X=Ee):($[X]=Ne,$[ye]=Y,X=ye);else if(Ee<ne&&0>i(Oe,Y))$[X]=Oe,$[Ee]=Y,X=Ee;else break e}}return B}function i($,B){var Y=$.sortIndex-B.sortIndex;return Y!==0?Y:$.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],u=[],f=1,h=null,m=3,y=!1,w=!1,b=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T($){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=$)r(u),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(u)}}function A($){if(b=!1,T($),!w)if(n(l)!==null)w=!0,ee(R);else{var B=n(u);B!==null&&ae(A,B.startTime-$)}}function R($,B){w=!1,b&&(b=!1,_(k),k=-1),y=!0;var Y=m;try{for(T(B),h=n(l);h!==null&&(!(h.expirationTime>B)||$&&!F());){var X=h.callback;if(typeof X=="function"){h.callback=null,m=h.priorityLevel;var ne=X(h.expirationTime<=B);B=t.unstable_now(),typeof ne=="function"?h.callback=ne:h===n(l)&&r(l),T(B)}else r(l);h=n(l)}if(h!==null)var se=!0;else{var ye=n(u);ye!==null&&ae(A,ye.startTime-B),se=!1}return se}finally{h=null,m=Y,y=!1}}var N=!1,O=null,k=-1,C=5,I=-1;function F(){return!(t.unstable_now()-I<C)}function V(){if(O!==null){var $=t.unstable_now();I=$;var B=!0;try{B=O(!0,$)}finally{B?W():(N=!1,O=null)}}else N=!1}var W;if(typeof M=="function")W=function(){M(V)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,J=G.port2;G.port1.onmessage=V,W=function(){J.postMessage(null)}}else W=function(){x(V,0)};function ee($){O=$,N||(N=!0,W())}function ae($,B){k=x(function(){$(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,ee(R))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var Y=m;m=B;try{return $()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,B){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Y=m;m=$;try{return B()}finally{m=Y}},t.unstable_scheduleCallback=function($,B,Y){var X=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?X+Y:X):Y=X,$){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Y+ne,$={id:f++,callback:B,priorityLevel:$,startTime:Y,expirationTime:ne,sortIndex:-1},Y>X?($.sortIndex=Y,e(u,$),n(l)===null&&$===n(u)&&(b?(_(k),k=-1):b=!0,ae(A,Y-X))):($.sortIndex=ne,e(l,$),w||y||(w=!0,ee(R))),$},t.unstable_shouldYield=F,t.unstable_wrapCallback=function($){var B=m;return function(){var Y=m;m=B;try{return $.apply(this,arguments)}finally{m=Y}}}})(RC)),RC}var R6;function pEe(){return R6||(R6=1,OC.exports=hEe()),OC.exports}var kC,k6;function mEe(){return k6||(k6=1,kC=function(e){var n={},r=w_(),i=pEe(),a=Object.assign;function s(g){for(var v="https://reactjs.org/docs/error-decoder.html?invariant="+g,E=1;E<arguments.length;E++)v+="&args[]="+encodeURIComponent(arguments[E]);return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),R=Symbol.iterator;function N(g){return g===null||typeof g!="object"?null:(g=R&&g[R]||g["@@iterator"],typeof g=="function"?g:null)}function O(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case f:return"Fragment";case u:return"Portal";case m:return"Profiler";case h:return"StrictMode";case x:return"Suspense";case _:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case w:return(g.displayName||"Context")+".Consumer";case y:return(g._context.displayName||"Context")+".Provider";case b:var v=g.render;return g=g.displayName,g||(g=v.displayName||v.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case M:return v=g.displayName||null,v!==null?v:O(g.type)||"Memo";case T:v=g._payload,g=g._init;try{return O(g(v))}catch{}}return null}function k(g){var v=g.type;switch(g.tag){case 24:return"Cache";case 9:return(v.displayName||"Context")+".Consumer";case 10:return(v._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=v.render,g=g.displayName||g.name||"",v.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return v;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O(v);case 8:return v===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v}return null}function C(g){var v=g,E=g;if(g.alternate)for(;v.return;)v=v.return;else{g=v;do v=g,(v.flags&4098)!==0&&(E=v.return),g=v.return;while(g)}return v.tag===3?E:null}function I(g){if(C(g)!==g)throw Error(s(188))}function F(g){var v=g.alternate;if(!v){if(v=C(g),v===null)throw Error(s(188));return v!==g?null:g}for(var E=g,j=v;;){var U=E.return;if(U===null)break;var H=U.alternate;if(H===null){if(j=U.return,j!==null){E=j;continue}break}if(U.child===H.child){for(H=U.child;H;){if(H===E)return I(U),g;if(H===j)return I(U),v;H=H.sibling}throw Error(s(188))}if(E.return!==j.return)E=U,j=H;else{for(var ue=!1,Se=U.child;Se;){if(Se===E){ue=!0,E=U,j=H;break}if(Se===j){ue=!0,j=U,E=H;break}Se=Se.sibling}if(!ue){for(Se=H.child;Se;){if(Se===E){ue=!0,E=H,j=U;break}if(Se===j){ue=!0,j=H,E=U;break}Se=Se.sibling}if(!ue)throw Error(s(189))}}if(E.alternate!==j)throw Error(s(190))}if(E.tag!==3)throw Error(s(188));return E.stateNode.current===E?g:v}function V(g){return g=F(g),g!==null?W(g):null}function W(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var v=W(g);if(v!==null)return v;g=g.sibling}return null}function G(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){if(g.tag!==4){var v=G(g);if(v!==null)return v}g=g.sibling}return null}var J=Array.isArray,ee=e.getPublicInstance,ae=e.getRootHostContext,$=e.getChildHostContext,B=e.prepareForCommit,Y=e.resetAfterCommit,X=e.createInstance,ne=e.appendInitialChild,se=e.finalizeInitialChildren,ye=e.prepareUpdate,Ne=e.shouldSetTextContent,Ee=e.createTextInstance,Oe=e.scheduleTimeout,$e=e.cancelTimeout,Ie=e.noTimeout,qe=e.isPrimaryRenderer,ve=e.supportsMutation,Z=e.supportsPersistence,Pe=e.supportsHydration,Me=e.getInstanceFromNode,We=e.preparePortalMount,ke=e.getCurrentEventPriority,ct=e.detachDeletedInstance,ot=e.supportsMicrotasks,ie=e.scheduleMicrotask,te=e.supportsTestSelectors,Ae=e.findFiberRoot,Je=e.getBoundingRect,Qe=e.getTextContent,Ze=e.isHiddenSubtree,At=e.matchAccessibilityRole,gt=e.setFocusIfFocusable,St=e.setupIntersectionObserver,Ft=e.appendChild,Yt=e.appendChildToContainer,tt=e.commitTextUpdate,yn=e.commitMount,gn=e.commitUpdate,$t=e.insertBefore,Mt=e.insertInContainerBefore,Et=e.removeChild,me=e.removeChildFromContainer,Ge=e.resetTextContent,dt=e.hideInstance,wt=e.hideTextInstance,Ce=e.unhideInstance,ge=e.unhideTextInstance,ut=e.clearContainer,vt=e.cloneInstance,Gt=e.createContainerChildSet,It=e.appendChildToContainerChildSet,wn=e.finalizeContainerChildren,On=e.replaceContainerChildren,Vn=e.cloneHiddenInstance,ir=e.cloneHiddenTextInstance,Tn=e.canHydrateInstance,Vr=e.canHydrateTextInstance,di=e.canHydrateSuspenseInstance,Gs=e.isSuspenseInstancePending,xs=e.isSuspenseInstanceFallback,ta=e.registerSuspenseInstanceRetry,Ti=e.getNextHydratableSibling,fn=e.getFirstHydratableChild,Vl=e.getFirstHydratableChildWithinContainer,ru=e.getFirstHydratableChildWithinSuspenseInstance,K=e.hydrateInstance,re=e.hydrateTextInstance,be=e.hydrateSuspenseInstance,q=e.getNextHydratableInstanceAfterSuspenseInstance,oe=e.commitHydratedContainer,ce=e.commitHydratedSuspenseInstance,pe=e.clearSuspenseBoundary,he=e.clearSuspenseBoundaryFromContainer,Ue=e.shouldDeleteUnhydratedTailInstances,ze=e.didNotMatchHydratedContainerTextInstance,Ve=e.didNotMatchHydratedTextInstance,De;function Ct(g){if(De===void 0)try{throw Error()}catch(E){var v=E.stack.trim().match(/\n( *(at )?)/);De=v&&v[1]||""}return`
`+De+g}var nt=!1;function it(g,v){if(!g||nt)return"";nt=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(v)if(v=function(){throw Error()},Object.defineProperty(v.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(v,[])}catch(ft){var j=ft}Reflect.construct(g,[],v)}else{try{v.call()}catch(ft){j=ft}g.call(v.prototype)}else{try{throw Error()}catch(ft){j=ft}g()}}catch(ft){if(ft&&j&&typeof ft.stack=="string"){for(var U=ft.stack.split(`
`),H=j.stack.split(`
`),ue=U.length-1,Se=H.length-1;1<=ue&&0<=Se&&U[ue]!==H[Se];)Se--;for(;1<=ue&&0<=Se;ue--,Se--)if(U[ue]!==H[Se]){if(ue!==1||Se!==1)do if(ue--,Se--,0>Se||U[ue]!==H[Se]){var He=`
`+U[ue].replace(" at new "," at ");return g.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",g.displayName)),He}while(1<=ue&&0<=Se);break}}}finally{nt=!1,Error.prepareStackTrace=E}return(g=g?g.displayName||g.name:"")?Ct(g):""}var Pt=Object.prototype.hasOwnProperty,Wt=[],qt=-1;function nn(g){return{current:g}}function xt(g){0>qt||(g.current=Wt[qt],Wt[qt]=null,qt--)}function yt(g,v){qt++,Wt[qt]=g.current,g.current=v}var tn={},Kt=nn(tn),rn=nn(!1),Kn=tn;function vr(g,v){var E=g.type.contextTypes;if(!E)return tn;var j=g.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===v)return j.__reactInternalMemoizedMaskedChildContext;var U={},H;for(H in E)U[H]=v[H];return j&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=v,g.__reactInternalMemoizedMaskedChildContext=U),U}function ar(g){return g=g.childContextTypes,g!=null}function Rn(){xt(rn),xt(Kt)}function _n(g,v,E){if(Kt.current!==tn)throw Error(s(168));yt(Kt,v),yt(rn,E)}function Or(g,v,E){var j=g.stateNode;if(v=v.childContextTypes,typeof j.getChildContext!="function")return E;j=j.getChildContext();for(var U in j)if(!(U in v))throw Error(s(108,k(g)||"Unknown",U));return a({},E,j)}function vn(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||tn,Kn=Kt.current,yt(Kt,g),yt(rn,rn.current),!0}function kn(g,v,E){var j=g.stateNode;if(!j)throw Error(s(169));E?(g=Or(g,v,Kn),j.__reactInternalMemoizedMergedChildContext=g,xt(rn),xt(Kt),yt(Kt,g)):xt(rn),yt(rn,E)}var sr=Math.clz32?Math.clz32:$s,pa=Math.log,ri=Math.LN2;function $s(g){return g>>>=0,g===0?32:31-(pa(g)/ri|0)|0}var iu=64,zn=4194304;function au(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function Ad(g,v){var E=g.pendingLanes;if(E===0)return 0;var j=0,U=g.suspendedLanes,H=g.pingedLanes,ue=E&268435455;if(ue!==0){var Se=ue&~U;Se!==0?j=au(Se):(H&=ue,H!==0&&(j=au(H)))}else ue=E&~U,ue!==0?j=au(ue):H!==0&&(j=au(H));if(j===0)return 0;if(v!==0&&v!==j&&(v&U)===0&&(U=j&-j,H=v&-v,U>=H||U===16&&(H&4194240)!==0))return v;if((j&4)!==0&&(j|=E&16),v=g.entangledLanes,v!==0)for(g=g.entanglements,v&=j;0<v;)E=31-sr(v),U=1<<E,j|=g[E],v&=~U;return j}function kg(g,v){switch(g){case 1:case 2:case 4:return v+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sx(g,v){for(var E=g.suspendedLanes,j=g.pingedLanes,U=g.expirationTimes,H=g.pendingLanes;0<H;){var ue=31-sr(H),Se=1<<ue,He=U[ue];He===-1?((Se&E)===0||(Se&j)!==0)&&(U[ue]=kg(Se,v)):He<=v&&(g.expiredLanes|=Se),H&=~Se}}function Oh(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function Rh(g){for(var v=[],E=0;31>E;E++)v.push(g);return v}function Hl(g,v,E){g.pendingLanes|=v,v!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,v=31-sr(v),g[v]=E}function kh(g,v){var E=g.pendingLanes&~v;g.pendingLanes=v,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=v,g.mutableReadLanes&=v,g.entangledLanes&=v,v=g.entanglements;var j=g.eventTimes;for(g=g.expirationTimes;0<E;){var U=31-sr(E),H=1<<U;v[U]=0,j[U]=-1,g[U]=-1,E&=~H}}function qs(g,v){var E=g.entangledLanes|=v;for(g=g.entanglements;E;){var j=31-sr(E),U=1<<j;U&v|g[j]&v&&(g[j]|=v),E&=~U}}var An=0;function vo(g){return g&=-g,1<g?4<g?(g&268435455)!==0?16:536870912:4:1}var Wl=i.unstable_scheduleCallback,su=i.unstable_cancelCallback,ol=i.unstable_shouldYield,GS=i.unstable_requestPaint,ii=i.unstable_now,Gl=i.unstable_ImmediatePriority,$S=i.unstable_UserBlockingPriority,jh=i.unstable_NormalPriority,Ih=i.unstable_IdlePriority,Ed=null,Xs=null;function Cd(g){if(Xs&&typeof Xs.onCommitFiberRoot=="function")try{Xs.onCommitFiberRoot(Ed,g,void 0,(g.current.flags&128)===128)}catch{}}function Pd(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var na=typeof Object.is=="function"?Object.is:Pd,Ja=null,Dh=!1,jg=!1;function Lh(g){Ja===null?Ja=[g]:Ja.push(g)}function Uh(g){Dh=!0,Lh(g)}function Qa(){if(!jg&&Ja!==null){jg=!0;var g=0,v=An;try{var E=Ja;for(An=1;g<E.length;g++){var j=E[g];do j=j(!0);while(j!==null)}Ja=null,Dh=!1}catch(U){throw Ja!==null&&(Ja=Ja.slice(g+1)),Wl(Gl,Qa),U}finally{An=v,jg=!1}}return null}var Mx=o.ReactCurrentBatchConfig;function bs(g,v){if(na(g,v))return!0;if(typeof g!="object"||g===null||typeof v!="object"||v===null)return!1;var E=Object.keys(g),j=Object.keys(v);if(E.length!==j.length)return!1;for(j=0;j<E.length;j++){var U=E[j];if(!Pt.call(v,U)||!na(g[U],v[U]))return!1}return!0}function Ig(g){switch(g.tag){case 5:return Ct(g.type);case 16:return Ct("Lazy");case 13:return Ct("Suspense");case 19:return Ct("SuspenseList");case 0:case 2:case 15:return g=it(g.type,!1),g;case 11:return g=it(g.type.render,!1),g;case 1:return g=it(g.type,!0),g;default:return""}}function ma(g,v){if(g&&g.defaultProps){v=a({},v),g=g.defaultProps;for(var E in g)v[E]===void 0&&(v[E]=g[E]);return v}return v}var Nd=nn(null),$l=null,xo=null,Fh=null;function ra(){Fh=xo=$l=null}function ql(g,v,E){qe?(yt(Nd,v._currentValue),v._currentValue=E):(yt(Nd,v._currentValue2),v._currentValue2=E)}function Od(g){var v=Nd.current;xt(Nd),qe?g._currentValue=v:g._currentValue2=v}function Xl(g,v,E){for(;g!==null;){var j=g.alternate;if((g.childLanes&v)!==v?(g.childLanes|=v,j!==null&&(j.childLanes|=v)):j!==null&&(j.childLanes&v)!==v&&(j.childLanes|=v),g===E)break;g=g.return}}function ou(g,v){$l=g,Fh=xo=null,g=g.dependencies,g!==null&&g.firstContext!==null&&((g.lanes&v)!==0&&(mi=!0),g.firstContext=null)}function ga(g){var v=qe?g._currentValue:g._currentValue2;if(Fh!==g)if(g={context:g,memoizedValue:v,next:null},xo===null){if($l===null)throw Error(s(308));xo=g,$l.dependencies={lanes:0,firstContext:g}}else xo=xo.next=g;return v}var es=null,ts=!1;function lu(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dg(g,v){g=g.updateQueue,v.updateQueue===g&&(v.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function bo(g,v){return{eventTime:g,lane:v,tag:0,payload:null,callback:null,next:null}}function ll(g,v){var E=g.updateQueue;E!==null&&(E=E.shared,Wr!==null&&(g.mode&1)!==0&&(Sn&2)===0?(g=E.interleaved,g===null?(v.next=v,es===null?es=[E]:es.push(E)):(v.next=g.next,g.next=v),E.interleaved=v):(g=E.pending,g===null?v.next=v:(v.next=g.next,g.next=v),E.pending=v))}function zh(g,v,E){if(v=v.updateQueue,v!==null&&(v=v.shared,(E&4194240)!==0)){var j=v.lanes;j&=g.pendingLanes,E|=j,v.lanes=E,qs(g,E)}}function Bh(g,v){var E=g.updateQueue,j=g.alternate;if(j!==null&&(j=j.updateQueue,E===j)){var U=null,H=null;if(E=E.firstBaseUpdate,E!==null){do{var ue={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};H===null?U=H=ue:H=H.next=ue,E=E.next}while(E!==null);H===null?U=H=v:H=H.next=v}else U=H=v;E={baseState:j.baseState,firstBaseUpdate:U,lastBaseUpdate:H,shared:j.shared,effects:j.effects},g.updateQueue=E;return}g=E.lastBaseUpdate,g===null?E.firstBaseUpdate=v:g.next=v,E.lastBaseUpdate=v}function Vh(g,v,E,j){var U=g.updateQueue;ts=!1;var H=U.firstBaseUpdate,ue=U.lastBaseUpdate,Se=U.shared.pending;if(Se!==null){U.shared.pending=null;var He=Se,ft=He.next;He.next=null,ue===null?H=ft:ue.next=ft,ue=He;var Rt=g.alternate;Rt!==null&&(Rt=Rt.updateQueue,Se=Rt.lastBaseUpdate,Se!==ue&&(Se===null?Rt.firstBaseUpdate=ft:Se.next=ft,Rt.lastBaseUpdate=He))}if(H!==null){var hn=U.baseState;ue=0,Rt=ft=He=null,Se=H;do{var Xt=Se.lane,Mn=Se.eventTime;if((j&Xt)===Xt){Rt!==null&&(Rt=Rt.next={eventTime:Mn,lane:0,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null});e:{var Tt=g,Oi=Se;switch(Xt=v,Mn=E,Oi.tag){case 1:if(Tt=Oi.payload,typeof Tt=="function"){hn=Tt.call(Mn,hn,Xt);break e}hn=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=Oi.payload,Xt=typeof Tt=="function"?Tt.call(Mn,hn,Xt):Tt,Xt==null)break e;hn=a({},hn,Xt);break e;case 2:ts=!0}}Se.callback!==null&&Se.lane!==0&&(g.flags|=64,Xt=U.effects,Xt===null?U.effects=[Se]:Xt.push(Se))}else Mn={eventTime:Mn,lane:Xt,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null},Rt===null?(ft=Rt=Mn,He=hn):Rt=Rt.next=Mn,ue|=Xt;if(Se=Se.next,Se===null){if(Se=U.shared.pending,Se===null)break;Xt=Se,Se=Xt.next,Xt.next=null,U.lastBaseUpdate=Xt,U.shared.pending=null}}while(!0);if(Rt===null&&(He=hn),U.baseState=He,U.firstBaseUpdate=ft,U.lastBaseUpdate=Rt,v=U.shared.interleaved,v!==null){U=v;do ue|=U.lane,U=U.next;while(U!==v)}else H===null&&(U.shared.lanes=0);Js|=ue,g.lanes=ue,g.memoizedState=hn}}function Tx(g,v,E){if(g=v.effects,v.effects=null,g!==null)for(v=0;v<g.length;v++){var j=g[v],U=j.callback;if(U!==null){if(j.callback=null,j=E,typeof U!="function")throw Error(s(191,U));U.call(j)}}}var Ax=new r.Component().refs;function Lg(g,v,E,j){v=g.memoizedState,E=E(j,v),E=E==null?v:a({},v,E),g.memoizedState=E,g.lanes===0&&(g.updateQueue.baseState=E)}var Hh={isMounted:function(g){return(g=g._reactInternals)?C(g)===g:!1},enqueueSetState:function(g,v,E){g=g._reactInternals;var j=Bn(),U=Es(g),H=bo(j,U);H.payload=v,E!=null&&(H.callback=E),ll(g,H),v=$i(g,U,j),v!==null&&zh(v,g,U)},enqueueReplaceState:function(g,v,E){g=g._reactInternals;var j=Bn(),U=Es(g),H=bo(j,U);H.tag=1,H.payload=v,E!=null&&(H.callback=E),ll(g,H),v=$i(g,U,j),v!==null&&zh(v,g,U)},enqueueForceUpdate:function(g,v){g=g._reactInternals;var E=Bn(),j=Es(g),U=bo(E,j);U.tag=2,v!=null&&(U.callback=v),ll(g,U),v=$i(g,j,E),v!==null&&zh(v,g,j)}};function Ug(g,v,E,j,U,H,ue){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(j,H,ue):v.prototype&&v.prototype.isPureReactComponent?!bs(E,j)||!bs(U,H):!0}function Ex(g,v,E){var j=!1,U=tn,H=v.contextType;return typeof H=="object"&&H!==null?H=ga(H):(U=ar(v)?Kn:Kt.current,j=v.contextTypes,H=(j=j!=null)?vr(g,U):tn),v=new v(E,H),g.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Hh,g.stateNode=v,v._reactInternals=g,j&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=U,g.__reactInternalMemoizedMaskedChildContext=H),v}function Cx(g,v,E,j){g=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(E,j),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(E,j),v.state!==g&&Hh.enqueueReplaceState(v,v.state,null)}function Fg(g,v,E,j){var U=g.stateNode;U.props=E,U.state=g.memoizedState,U.refs=Ax,lu(g);var H=v.contextType;typeof H=="object"&&H!==null?U.context=ga(H):(H=ar(v)?Kn:Kt.current,U.context=vr(g,H)),U.state=g.memoizedState,H=v.getDerivedStateFromProps,typeof H=="function"&&(Lg(g,v,H,E),U.state=g.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(v=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),v!==U.state&&Hh.enqueueReplaceState(U,U.state,null),Vh(g,E,U,j),U.state=g.memoizedState),typeof U.componentDidMount=="function"&&(g.flags|=4194308)}var cu=[],cl=0,Wh=null,Gh=0,ns=[],Ra=0,Yl=null,wo=1,_o="";function Kl(g,v){cu[cl++]=Gh,cu[cl++]=Wh,Wh=g,Gh=v}function Px(g,v,E){ns[Ra++]=wo,ns[Ra++]=_o,ns[Ra++]=Yl,Yl=g;var j=wo;g=_o;var U=32-sr(j)-1;j&=~(1<<U),E+=1;var H=32-sr(v)+U;if(30<H){var ue=U-U%5;H=(j&(1<<ue)-1).toString(32),j>>=ue,U-=ue,wo=1<<32-sr(v)+U|E<<U|j,_o=H+g}else wo=1<<H|E<<U|j,_o=g}function zg(g){g.return!==null&&(Kl(g,1),Px(g,1,0))}function Bg(g){for(;g===Wh;)Wh=cu[--cl],cu[cl]=null,Gh=cu[--cl],cu[cl]=null;for(;g===Yl;)Yl=ns[--Ra],ns[Ra]=null,_o=ns[--Ra],ns[Ra]=null,wo=ns[--Ra],ns[Ra]=null}var ia=null,Ai=null,Mr=!1,uu=!1,rs=null;function Vg(g,v){var E=Fa(5,null,null,0);E.elementType="DELETED",E.stateNode=v,E.return=g,v=g.deletions,v===null?(g.deletions=[E],g.flags|=16):v.push(E)}function Hg(g,v){switch(g.tag){case 5:return v=Tn(v,g.type,g.pendingProps),v!==null?(g.stateNode=v,ia=g,Ai=fn(v),!0):!1;case 6:return v=Vr(v,g.pendingProps),v!==null?(g.stateNode=v,ia=g,Ai=null,!0):!1;case 13:if(v=di(v),v!==null){var E=Yl!==null?{id:wo,overflow:_o}:null;return g.memoizedState={dehydrated:v,treeContext:E,retryLane:1073741824},E=Fa(18,null,null,0),E.stateNode=v,E.return=g,g.child=E,ia=g,Ai=null,!0}return!1;default:return!1}}function $h(g){return(g.mode&1)!==0&&(g.flags&128)===0}function ul(g){if(Mr){var v=Ai;if(v){var E=v;if(!Hg(g,v)){if($h(g))throw Error(s(418));v=Ti(E);var j=ia;v&&Hg(g,v)?Vg(j,E):(g.flags=g.flags&-4097|2,Mr=!1,ia=g)}}else{if($h(g))throw Error(s(418));g.flags=g.flags&-4097|2,Mr=!1,ia=g}}}function Nx(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;ia=g}function Rd(g){if(!Pe||g!==ia)return!1;if(!Mr)return Nx(g),Mr=!0,!1;if(g.tag!==3&&(g.tag!==5||Ue(g.type)&&!Ne(g.type,g.memoizedProps))){var v=Ai;if(v){if($h(g)){for(g=Ai;g;)g=Ti(g);throw Error(s(418))}for(;v;)Vg(g,v),v=Ti(v)}}if(Nx(g),g.tag===13){if(!Pe)throw Error(s(316));if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));Ai=q(g)}else Ai=ia?Ti(g.stateNode):null;return!0}function du(){Pe&&(Ai=ia=null,uu=Mr=!1)}function qh(g){rs===null?rs=[g]:rs.push(g)}function fu(g,v,E){if(g=E.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(E._owner){if(E=E._owner,E){if(E.tag!==1)throw Error(s(309));var j=E.stateNode}if(!j)throw Error(s(147,g));var U=j,H=""+g;return v!==null&&v.ref!==null&&typeof v.ref=="function"&&v.ref._stringRef===H?v.ref:(v=function(ue){var Se=U.refs;Se===Ax&&(Se=U.refs={}),ue===null?delete Se[H]:Se[H]=ue},v._stringRef=H,v)}if(typeof g!="string")throw Error(s(284));if(!E._owner)throw Error(s(290,g))}return g}function dl(g,v){throw g=Object.prototype.toString.call(v),Error(s(31,g==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":g))}function hu(g){var v=g._init;return v(g._payload)}function Ox(g){function v(Le,Te){if(g){var Be=Le.deletions;Be===null?(Le.deletions=[Te],Le.flags|=16):Be.push(Te)}}function E(Le,Te){if(!g)return null;for(;Te!==null;)v(Le,Te),Te=Te.sibling;return null}function j(Le,Te){for(Le=new Map;Te!==null;)Te.key!==null?Le.set(Te.key,Te):Le.set(Te.index,Te),Te=Te.sibling;return Le}function U(Le,Te){return Le=Do(Le,Te),Le.index=0,Le.sibling=null,Le}function H(Le,Te,Be){return Le.index=Be,g?(Be=Le.alternate,Be!==null?(Be=Be.index,Be<Te?(Le.flags|=2,Te):Be):(Le.flags|=2,Te)):(Le.flags|=1048576,Te)}function ue(Le){return g&&Le.alternate===null&&(Le.flags|=2),Le}function Se(Le,Te,Be,_t){return Te===null||Te.tag!==6?(Te=bp(Be,Le.mode,_t),Te.return=Le,Te):(Te=U(Te,Be),Te.return=Le,Te)}function He(Le,Te,Be,_t){var Bt=Be.type;return Bt===f?Rt(Le,Te,Be.props.children,_t,Be.key):Te!==null&&(Te.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===T&&hu(Bt)===Te.type)?(_t=U(Te,Be.props),_t.ref=fu(Le,Te,Be),_t.return=Le,_t):(_t=xp(Be.type,Be.key,Be.props,null,Le.mode,_t),_t.ref=fu(Le,Te,Be),_t.return=Le,_t)}function ft(Le,Te,Be,_t){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==Be.containerInfo||Te.stateNode.implementation!==Be.implementation?(Te=wp(Be,Le.mode,_t),Te.return=Le,Te):(Te=U(Te,Be.children||[]),Te.return=Le,Te)}function Rt(Le,Te,Be,_t,Bt){return Te===null||Te.tag!==7?(Te=vc(Be,Le.mode,_t,Bt),Te.return=Le,Te):(Te=U(Te,Be),Te.return=Le,Te)}function hn(Le,Te,Be){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Te=bp(""+Te,Le.mode,Be),Te.return=Le,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case l:return Be=xp(Te.type,Te.key,Te.props,null,Le.mode,Be),Be.ref=fu(Le,null,Te),Be.return=Le,Be;case u:return Te=wp(Te,Le.mode,Be),Te.return=Le,Te;case T:var _t=Te._init;return hn(Le,_t(Te._payload),Be)}if(J(Te)||N(Te))return Te=vc(Te,Le.mode,Be,null),Te.return=Le,Te;dl(Le,Te)}return null}function Xt(Le,Te,Be,_t){var Bt=Te!==null?Te.key:null;if(typeof Be=="string"&&Be!==""||typeof Be=="number")return Bt!==null?null:Se(Le,Te,""+Be,_t);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case l:return Be.key===Bt?He(Le,Te,Be,_t):null;case u:return Be.key===Bt?ft(Le,Te,Be,_t):null;case T:return Bt=Be._init,Xt(Le,Te,Bt(Be._payload),_t)}if(J(Be)||N(Be))return Bt!==null?null:Rt(Le,Te,Be,_t,null);dl(Le,Be)}return null}function Mn(Le,Te,Be,_t,Bt){if(typeof _t=="string"&&_t!==""||typeof _t=="number")return Le=Le.get(Be)||null,Se(Te,Le,""+_t,Bt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case l:return Le=Le.get(_t.key===null?Be:_t.key)||null,He(Te,Le,_t,Bt);case u:return Le=Le.get(_t.key===null?Be:_t.key)||null,ft(Te,Le,_t,Bt);case T:var xn=_t._init;return Mn(Le,Te,Be,xn(_t._payload),Bt)}if(J(_t)||N(_t))return Le=Le.get(Be)||null,Rt(Te,Le,_t,Bt,null);dl(Te,_t)}return null}function Tt(Le,Te,Be,_t){for(var Bt=null,xn=null,pn=Te,Fn=Te=0,Yr=null;pn!==null&&Fn<Be.length;Fn++){pn.index>Fn?(Yr=pn,pn=null):Yr=pn.sibling;var Un=Xt(Le,pn,Be[Fn],_t);if(Un===null){pn===null&&(pn=Yr);break}g&&pn&&Un.alternate===null&&v(Le,pn),Te=H(Un,Te,Fn),xn===null?Bt=Un:xn.sibling=Un,xn=Un,pn=Yr}if(Fn===Be.length)return E(Le,pn),Mr&&Kl(Le,Fn),Bt;if(pn===null){for(;Fn<Be.length;Fn++)pn=hn(Le,Be[Fn],_t),pn!==null&&(Te=H(pn,Te,Fn),xn===null?Bt=pn:xn.sibling=pn,xn=pn);return Mr&&Kl(Le,Fn),Bt}for(pn=j(Le,pn);Fn<Be.length;Fn++)Yr=Mn(pn,Le,Fn,Be[Fn],_t),Yr!==null&&(g&&Yr.alternate!==null&&pn.delete(Yr.key===null?Fn:Yr.key),Te=H(Yr,Te,Fn),xn===null?Bt=Yr:xn.sibling=Yr,xn=Yr);return g&&pn.forEach(function(Lo){return v(Le,Lo)}),Mr&&Kl(Le,Fn),Bt}function Oi(Le,Te,Be,_t){var Bt=N(Be);if(typeof Bt!="function")throw Error(s(150));if(Be=Bt.call(Be),Be==null)throw Error(s(151));for(var xn=Bt=null,pn=Te,Fn=Te=0,Yr=null,Un=Be.next();pn!==null&&!Un.done;Fn++,Un=Be.next()){pn.index>Fn?(Yr=pn,pn=null):Yr=pn.sibling;var Lo=Xt(Le,pn,Un.value,_t);if(Lo===null){pn===null&&(pn=Yr);break}g&&pn&&Lo.alternate===null&&v(Le,pn),Te=H(Lo,Te,Fn),xn===null?Bt=Lo:xn.sibling=Lo,xn=Lo,pn=Yr}if(Un.done)return E(Le,pn),Mr&&Kl(Le,Fn),Bt;if(pn===null){for(;!Un.done;Fn++,Un=Be.next())Un=hn(Le,Un.value,_t),Un!==null&&(Te=H(Un,Te,Fn),xn===null?Bt=Un:xn.sibling=Un,xn=Un);return Mr&&Kl(Le,Fn),Bt}for(pn=j(Le,pn);!Un.done;Fn++,Un=Be.next())Un=Mn(pn,Le,Fn,Un.value,_t),Un!==null&&(g&&Un.alternate!==null&&pn.delete(Un.key===null?Fn:Un.key),Te=H(Un,Te,Fn),xn===null?Bt=Un:xn.sibling=Un,xn=Un);return g&&pn.forEach(function(by){return v(Le,by)}),Mr&&Kl(Le,Fn),Bt}function za(Le,Te,Be,_t){if(typeof Be=="object"&&Be!==null&&Be.type===f&&Be.key===null&&(Be=Be.props.children),typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case l:e:{for(var Bt=Be.key,xn=Te;xn!==null;){if(xn.key===Bt){if(Bt=Be.type,Bt===f){if(xn.tag===7){E(Le,xn.sibling),Te=U(xn,Be.props.children),Te.return=Le,Le=Te;break e}}else if(xn.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===T&&hu(Bt)===xn.type){E(Le,xn.sibling),Te=U(xn,Be.props),Te.ref=fu(Le,xn,Be),Te.return=Le,Le=Te;break e}E(Le,xn);break}else v(Le,xn);xn=xn.sibling}Be.type===f?(Te=vc(Be.props.children,Le.mode,_t,Be.key),Te.return=Le,Le=Te):(_t=xp(Be.type,Be.key,Be.props,null,Le.mode,_t),_t.ref=fu(Le,Te,Be),_t.return=Le,Le=_t)}return ue(Le);case u:e:{for(xn=Be.key;Te!==null;){if(Te.key===xn)if(Te.tag===4&&Te.stateNode.containerInfo===Be.containerInfo&&Te.stateNode.implementation===Be.implementation){E(Le,Te.sibling),Te=U(Te,Be.children||[]),Te.return=Le,Le=Te;break e}else{E(Le,Te);break}else v(Le,Te);Te=Te.sibling}Te=wp(Be,Le.mode,_t),Te.return=Le,Le=Te}return ue(Le);case T:return xn=Be._init,za(Le,Te,xn(Be._payload),_t)}if(J(Be))return Tt(Le,Te,Be,_t);if(N(Be))return Oi(Le,Te,Be,_t);dl(Le,Be)}return typeof Be=="string"&&Be!==""||typeof Be=="number"?(Be=""+Be,Te!==null&&Te.tag===6?(E(Le,Te.sibling),Te=U(Te,Be),Te.return=Le,Le=Te):(E(Le,Te),Te=bp(Be,Le.mode,_t),Te.return=Le,Le=Te),ue(Le)):E(Le,Te)}return za}var So=Ox(!0),Rx=Ox(!1),pu={},ya=nn(pu),Zl=nn(pu),Jl=nn(pu);function ws(g){if(g===pu)throw Error(s(174));return g}function Xh(g,v){yt(Jl,v),yt(Zl,g),yt(ya,pu),g=ae(v),xt(ya),yt(ya,g)}function mu(){xt(ya),xt(Zl),xt(Jl)}function kx(g){var v=ws(Jl.current),E=ws(ya.current);v=$(E,g.type,v),E!==v&&(yt(Zl,g),yt(ya,v))}function Wg(g){Zl.current===g&&(xt(ya),xt(Zl))}var Rr=nn(0);function Yh(g){for(var v=g;v!==null;){if(v.tag===13){var E=v.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||Gs(E)||xs(E)))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===g)break;for(;v.sibling===null;){if(v.return===null||v.return===g)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var ka=[];function Ql(){for(var g=0;g<ka.length;g++){var v=ka[g];qe?v._workInProgressVersionPrimary=null:v._workInProgressVersionSecondary=null}ka.length=0}var kd=o.ReactCurrentDispatcher,ja=o.ReactCurrentBatchConfig,ec=0,kr=null,fi=null,hi=null,Kh=!1,Ys=!1,tc=0,jd=0;function pi(){throw Error(s(321))}function Zh(g,v){if(v===null)return!1;for(var E=0;E<v.length&&E<g.length;E++)if(!na(g[E],v[E]))return!1;return!0}function gu(g,v,E,j,U,H){if(ec=H,kr=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,kd.current=g===null||g.memoizedState===null?Kg:Zg,g=E(j,U),Ys){H=0;do{if(Ys=!1,tc=0,25<=H)throw Error(s(301));H+=1,hi=fi=null,v.updateQueue=null,kd.current=Jg,g=E(j,U)}while(Ys)}if(kd.current=bu,v=fi!==null&&fi.next!==null,ec=0,hi=fi=kr=null,Kh=!1,v)throw Error(s(300));return g}function fl(){var g=tc!==0;return tc=0,g}function _s(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?kr.memoizedState=hi=g:hi=hi.next=g,hi}function Ss(){if(fi===null){var g=kr.alternate;g=g!==null?g.memoizedState:null}else g=fi.next;var v=hi===null?kr.memoizedState:hi.next;if(v!==null)hi=v,fi=g;else{if(g===null)throw Error(s(310));fi=g,g={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},hi===null?kr.memoizedState=hi=g:hi=hi.next=g}return hi}function Ks(g,v){return typeof v=="function"?v(g):v}function Id(g){var v=Ss(),E=v.queue;if(E===null)throw Error(s(311));E.lastRenderedReducer=g;var j=fi,U=j.baseQueue,H=E.pending;if(H!==null){if(U!==null){var ue=U.next;U.next=H.next,H.next=ue}j.baseQueue=U=H,E.pending=null}if(U!==null){H=U.next,j=j.baseState;var Se=ue=null,He=null,ft=H;do{var Rt=ft.lane;if((ec&Rt)===Rt)He!==null&&(He=He.next={lane:0,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null}),j=ft.hasEagerState?ft.eagerState:g(j,ft.action);else{var hn={lane:Rt,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null};He===null?(Se=He=hn,ue=j):He=He.next=hn,kr.lanes|=Rt,Js|=Rt}ft=ft.next}while(ft!==null&&ft!==H);He===null?ue=j:He.next=Se,na(j,v.memoizedState)||(mi=!0),v.memoizedState=j,v.baseState=ue,v.baseQueue=He,E.lastRenderedState=j}if(g=E.interleaved,g!==null){U=g;do H=U.lane,kr.lanes|=H,Js|=H,U=U.next;while(U!==g)}else U===null&&(E.lanes=0);return[v.memoizedState,E.dispatch]}function Dd(g){var v=Ss(),E=v.queue;if(E===null)throw Error(s(311));E.lastRenderedReducer=g;var j=E.dispatch,U=E.pending,H=v.memoizedState;if(U!==null){E.pending=null;var ue=U=U.next;do H=g(H,ue.action),ue=ue.next;while(ue!==U);na(H,v.memoizedState)||(mi=!0),v.memoizedState=H,v.baseQueue===null&&(v.baseState=H),E.lastRenderedState=H}return[H,j]}function Gg(){}function $g(g,v){var E=kr,j=Ss(),U=v(),H=!na(j.memoizedState,U);if(H&&(j.memoizedState=U,mi=!0),j=j.queue,yu(Mo.bind(null,E,j,g),[g]),j.getSnapshot!==v||H||hi!==null&&hi.memoizedState.tag&1){if(E.flags|=2048,Ud(9,Xg.bind(null,E,j,U,v),void 0,null),Wr===null)throw Error(s(349));(ec&30)!==0||qg(E,v,U)}return U}function qg(g,v,E){g.flags|=16384,g={getSnapshot:v,value:E},v=kr.updateQueue,v===null?(v={lastEffect:null,stores:null},kr.updateQueue=v,v.stores=[g]):(E=v.stores,E===null?v.stores=[g]:E.push(g))}function Xg(g,v,E,j){v.value=E,v.getSnapshot=j,Jh(v)&&$i(g,1,-1)}function Mo(g,v,E){return E(function(){Jh(v)&&$i(g,1,-1)})}function Jh(g){var v=g.getSnapshot;g=g.value;try{var E=v();return!na(g,E)}catch{return!0}}function Ld(g){var v=_s();return typeof g=="function"&&(g=g()),v.memoizedState=v.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:g},v.queue=g,g=g.dispatch=qS.bind(null,kr,g),[v.memoizedState,g]}function Ud(g,v,E,j){return g={tag:g,create:v,destroy:E,deps:j,next:null},v=kr.updateQueue,v===null?(v={lastEffect:null,stores:null},kr.updateQueue=v,v.lastEffect=g.next=g):(E=v.lastEffect,E===null?v.lastEffect=g.next=g:(j=E.next,E.next=g,g.next=j,v.lastEffect=g)),g}function jx(){return Ss().memoizedState}function hl(g,v,E,j){var U=_s();kr.flags|=g,U.memoizedState=Ud(1|v,E,void 0,j===void 0?null:j)}function Qh(g,v,E,j){var U=Ss();j=j===void 0?null:j;var H=void 0;if(fi!==null){var ue=fi.memoizedState;if(H=ue.destroy,j!==null&&Zh(j,ue.deps)){U.memoizedState=Ud(v,E,H,j);return}}kr.flags|=g,U.memoizedState=Ud(1|v,E,H,j)}function ep(g,v){return hl(8390656,8,g,v)}function yu(g,v){return Qh(2048,8,g,v)}function pr(g,v){return Qh(4,2,g,v)}function tp(g,v){return Qh(4,4,g,v)}function Fd(g,v){if(typeof v=="function")return g=g(),v(g),function(){v(null)};if(v!=null)return g=g(),v.current=g,function(){v.current=null}}function vu(g,v,E){return E=E!=null?E.concat([g]):null,Qh(4,4,Fd.bind(null,v,g),E)}function np(){}function rp(g,v){var E=Ss();v=v===void 0?null:v;var j=E.memoizedState;return j!==null&&v!==null&&Zh(v,j[1])?j[0]:(E.memoizedState=[g,v],g)}function xu(g,v){var E=Ss();v=v===void 0?null:v;var j=E.memoizedState;return j!==null&&v!==null&&Zh(v,j[1])?j[0]:(g=g(),E.memoizedState=[g,v],g)}function ip(g,v){var E=An;An=E!==0&&4>E?E:4,g(!0);var j=ja.transition;ja.transition={};try{g(!1),v()}finally{An=E,ja.transition=j}}function nc(){return Ss().memoizedState}function Ix(g,v,E){var j=Es(g);E={lane:j,action:E,hasEagerState:!1,eagerState:null,next:null},Dx(g)?Yg(v,E):(zd(g,v,E),E=Bn(),g=$i(g,j,E),g!==null&&Bd(g,v,j))}function qS(g,v,E){var j=Es(g),U={lane:j,action:E,hasEagerState:!1,eagerState:null,next:null};if(Dx(g))Yg(v,U);else{zd(g,v,U);var H=g.alternate;if(g.lanes===0&&(H===null||H.lanes===0)&&(H=v.lastRenderedReducer,H!==null))try{var ue=v.lastRenderedState,Se=H(ue,E);if(U.hasEagerState=!0,U.eagerState=Se,na(Se,ue))return}catch{}finally{}E=Bn(),g=$i(g,j,E),g!==null&&Bd(g,v,j)}}function Dx(g){var v=g.alternate;return g===kr||v!==null&&v===kr}function Yg(g,v){Ys=Kh=!0;var E=g.pending;E===null?v.next=v:(v.next=E.next,E.next=v),g.pending=v}function zd(g,v,E){Wr!==null&&(g.mode&1)!==0&&(Sn&2)===0?(g=v.interleaved,g===null?(E.next=E,es===null?es=[v]:es.push(v)):(E.next=g.next,g.next=E),v.interleaved=E):(g=v.pending,g===null?E.next=E:(E.next=g.next,g.next=E),v.pending=E)}function Bd(g,v,E){if((E&4194240)!==0){var j=v.lanes;j&=g.pendingLanes,E|=j,v.lanes=E,qs(g,E)}}var bu={readContext:ga,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},Kg={readContext:ga,useCallback:function(g,v){return _s().memoizedState=[g,v===void 0?null:v],g},useContext:ga,useEffect:ep,useImperativeHandle:function(g,v,E){return E=E!=null?E.concat([g]):null,hl(4194308,4,Fd.bind(null,v,g),E)},useLayoutEffect:function(g,v){return hl(4194308,4,g,v)},useInsertionEffect:function(g,v){return hl(4,2,g,v)},useMemo:function(g,v){var E=_s();return v=v===void 0?null:v,g=g(),E.memoizedState=[g,v],g},useReducer:function(g,v,E){var j=_s();return v=E!==void 0?E(v):v,j.memoizedState=j.baseState=v,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:v},j.queue=g,g=g.dispatch=Ix.bind(null,kr,g),[j.memoizedState,g]},useRef:function(g){var v=_s();return g={current:g},v.memoizedState=g},useState:Ld,useDebugValue:np,useDeferredValue:function(g){var v=Ld(g),E=v[0],j=v[1];return ep(function(){var U=ja.transition;ja.transition={};try{j(g)}finally{ja.transition=U}},[g]),E},useTransition:function(){var g=Ld(!1),v=g[0];return g=ip.bind(null,g[1]),_s().memoizedState=g,[v,g]},useMutableSource:function(){},useSyncExternalStore:function(g,v,E){var j=kr,U=_s();if(Mr){if(E===void 0)throw Error(s(407));E=E()}else{if(E=v(),Wr===null)throw Error(s(349));(ec&30)!==0||qg(j,v,E)}U.memoizedState=E;var H={value:E,getSnapshot:v};return U.queue=H,ep(Mo.bind(null,j,H,g),[g]),j.flags|=2048,Ud(9,Xg.bind(null,j,H,E,v),void 0,null),E},useId:function(){var g=_s(),v=Wr.identifierPrefix;if(Mr){var E=_o,j=wo;E=(j&~(1<<32-sr(j)-1)).toString(32)+E,v=":"+v+"R"+E,E=tc++,0<E&&(v+="H"+E.toString(32)),v+=":"}else E=jd++,v=":"+v+"r"+E.toString(32)+":";return g.memoizedState=v},unstable_isNewReconciler:!1},Zg={readContext:ga,useCallback:rp,useContext:ga,useEffect:yu,useImperativeHandle:vu,useInsertionEffect:pr,useLayoutEffect:tp,useMemo:xu,useReducer:Id,useRef:jx,useState:function(){return Id(Ks)},useDebugValue:np,useDeferredValue:function(g){var v=Id(Ks),E=v[0],j=v[1];return yu(function(){var U=ja.transition;ja.transition={};try{j(g)}finally{ja.transition=U}},[g]),E},useTransition:function(){var g=Id(Ks)[0],v=Ss().memoizedState;return[g,v]},useMutableSource:Gg,useSyncExternalStore:$g,useId:nc,unstable_isNewReconciler:!1},Jg={readContext:ga,useCallback:rp,useContext:ga,useEffect:yu,useImperativeHandle:vu,useInsertionEffect:pr,useLayoutEffect:tp,useMemo:xu,useReducer:Dd,useRef:jx,useState:function(){return Dd(Ks)},useDebugValue:np,useDeferredValue:function(g){var v=Dd(Ks),E=v[0],j=v[1];return yu(function(){var U=ja.transition;ja.transition={};try{j(g)}finally{ja.transition=U}},[g]),E},useTransition:function(){var g=Dd(Ks)[0],v=Ss().memoizedState;return[g,v]},useMutableSource:Gg,useSyncExternalStore:$g,useId:nc,unstable_isNewReconciler:!1};function Qg(g,v){try{var E="",j=v;do E+=Ig(j),j=j.return;while(j);var U=E}catch(H){U=`
Error generating stack: `+H.message+`
`+H.stack}return{value:g,source:v,stack:U}}function ap(g,v){try{console.error(v.value)}catch(E){setTimeout(function(){throw E})}}var XS=typeof WeakMap=="function"?WeakMap:Map;function Lx(g,v,E){E=bo(-1,E),E.tag=3,E.payload={element:null};var j=v.value;return E.callback=function(){Au||(Au=!0,br=j),ap(g,v)},E}function sp(g,v,E){E=bo(-1,E),E.tag=3;var j=g.type.getDerivedStateFromError;if(typeof j=="function"){var U=v.value;E.payload=function(){return j(U)},E.callback=function(){ap(g,v)}}var H=g.stateNode;return H!==null&&typeof H.componentDidCatch=="function"&&(E.callback=function(){ap(g,v),typeof j!="function"&&(As===null?As=new Set([this]):As.add(this));var ue=v.stack;this.componentDidCatch(v.value,{componentStack:ue!==null?ue:""})}),E}function To(g,v,E){var j=g.pingCache;if(j===null){j=g.pingCache=new XS;var U=new Set;j.set(v,U)}else U=j.get(v),U===void 0&&(U=new Set,j.set(v,U));U.has(E)||(U.add(E),g=yy.bind(null,g,v,E),v.then(g,g))}function ey(g){do{var v;if((v=g.tag===13)&&(v=g.memoizedState,v=v!==null?v.dehydrated!==null:!0),v)return g;g=g.return}while(g!==null);return null}function rc(g,v,E,j,U){return(g.mode&1)===0?(g===v?g.flags|=65536:(g.flags|=128,E.flags|=131072,E.flags&=-52805,E.tag===1&&(E.alternate===null?E.tag=17:(v=bo(-1,1),v.tag=2,ll(E,v))),E.lanes|=1),g):(g.flags|=65536,g.lanes=U,g)}function ai(g){g.flags|=4}function wu(g,v){if(g!==null&&g.child===v.child)return!0;if((v.flags&16)!==0)return!1;for(g=v.child;g!==null;){if((g.flags&12854)!==0||(g.subtreeFlags&12854)!==0)return!1;g=g.sibling}return!0}var Ia,ic,op,lp;if(ve)Ia=function(g,v){for(var E=v.child;E!==null;){if(E.tag===5||E.tag===6)ne(g,E.stateNode);else if(E.tag!==4&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===v)break;for(;E.sibling===null;){if(E.return===null||E.return===v)return;E=E.return}E.sibling.return=E.return,E=E.sibling}},ic=function(){},op=function(g,v,E,j,U){if(g=g.memoizedProps,g!==j){var H=v.stateNode,ue=ws(ya.current);E=ye(H,E,g,j,U,ue),(v.updateQueue=E)&&ai(v)}},lp=function(g,v,E,j){E!==j&&ai(v)};else if(Z){Ia=function(g,v,E,j){for(var U=v.child;U!==null;){if(U.tag===5){var H=U.stateNode;E&&j&&(H=Vn(H,U.type,U.memoizedProps,U)),ne(g,H)}else if(U.tag===6)H=U.stateNode,E&&j&&(H=ir(H,U.memoizedProps,U)),ne(g,H);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)H=U.child,H!==null&&(H.return=U),Ia(g,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===v)break;for(;U.sibling===null;){if(U.return===null||U.return===v)return;U=U.return}U.sibling.return=U.return,U=U.sibling}};var pl=function(g,v,E,j){for(var U=v.child;U!==null;){if(U.tag===5){var H=U.stateNode;E&&j&&(H=Vn(H,U.type,U.memoizedProps,U)),It(g,H)}else if(U.tag===6)H=U.stateNode,E&&j&&(H=ir(H,U.memoizedProps,U)),It(g,H);else if(U.tag!==4){if(U.tag===22&&U.memoizedState!==null)H=U.child,H!==null&&(H.return=U),pl(g,U,!0,!0);else if(U.child!==null){U.child.return=U,U=U.child;continue}}if(U===v)break;for(;U.sibling===null;){if(U.return===null||U.return===v)return;U=U.return}U.sibling.return=U.return,U=U.sibling}};ic=function(g,v){var E=v.stateNode;if(!wu(g,v)){g=E.containerInfo;var j=Gt(g);pl(j,v,!1,!1),E.pendingChildren=j,ai(v),wn(g,j)}},op=function(g,v,E,j,U){var H=g.stateNode,ue=g.memoizedProps;if((g=wu(g,v))&&ue===j)v.stateNode=H;else{var Se=v.stateNode,He=ws(ya.current),ft=null;ue!==j&&(ft=ye(Se,E,ue,j,U,He)),g&&ft===null?v.stateNode=H:(H=vt(H,ft,E,ue,j,v,g,Se),se(H,E,j,U,He)&&ai(v),v.stateNode=H,g?ai(v):Ia(H,v,!1,!1))}},lp=function(g,v,E,j){E!==j?(g=ws(Jl.current),E=ws(ya.current),v.stateNode=Ee(j,g,E,v),ai(v)):v.stateNode=g.stateNode}}else ic=function(){},op=function(){},lp=function(){};function Ao(g,v){if(!Mr)switch(g.tailMode){case"hidden":v=g.tail;for(var E=null;v!==null;)v.alternate!==null&&(E=v),v=v.sibling;E===null?g.tail=null:E.sibling=null;break;case"collapsed":E=g.tail;for(var j=null;E!==null;)E.alternate!==null&&(j=E),E=E.sibling;j===null?v||g.tail===null?g.tail=null:g.tail.sibling=null:j.sibling=null}}function Hr(g){var v=g.alternate!==null&&g.alternate.child===g.child,E=0,j=0;if(v)for(var U=g.child;U!==null;)E|=U.lanes|U.childLanes,j|=U.subtreeFlags&14680064,j|=U.flags&14680064,U.return=g,U=U.sibling;else for(U=g.child;U!==null;)E|=U.lanes|U.childLanes,j|=U.subtreeFlags,j|=U.flags,U.return=g,U=U.sibling;return g.subtreeFlags|=j,g.childLanes=E,v}function cp(g,v,E){var j=v.pendingProps;switch(Bg(v),v.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hr(v),null;case 1:return ar(v.type)&&Rn(),Hr(v),null;case 3:return j=v.stateNode,mu(),xt(rn),xt(Kt),Ql(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(g===null||g.child===null)&&(Rd(v)?ai(v):g===null||g.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,rs!==null&&(ef(rs),rs=null))),ic(g,v),Hr(v),null;case 5:Wg(v),E=ws(Jl.current);var U=v.type;if(g!==null&&v.stateNode!=null)op(g,v,U,j,E),g.ref!==v.ref&&(v.flags|=512,v.flags|=2097152);else{if(!j){if(v.stateNode===null)throw Error(s(166));return Hr(v),null}if(g=ws(ya.current),Rd(v)){if(!Pe)throw Error(s(175));g=K(v.stateNode,v.type,v.memoizedProps,E,g,v,!uu),v.updateQueue=g,g!==null&&ai(v)}else{var H=X(U,j,E,g,v);Ia(H,v,!1,!1),v.stateNode=H,se(H,U,j,E,g)&&ai(v)}v.ref!==null&&(v.flags|=512,v.flags|=2097152)}return Hr(v),null;case 6:if(g&&v.stateNode!=null)lp(g,v,g.memoizedProps,j);else{if(typeof j!="string"&&v.stateNode===null)throw Error(s(166));if(g=ws(Jl.current),E=ws(ya.current),Rd(v)){if(!Pe)throw Error(s(176));if(g=v.stateNode,j=v.memoizedProps,(E=re(g,j,v,!uu))&&(U=ia,U!==null))switch(H=(U.mode&1)!==0,U.tag){case 3:ze(U.stateNode.containerInfo,g,j,H);break;case 5:Ve(U.type,U.memoizedProps,U.stateNode,g,j,H)}E&&ai(v)}else v.stateNode=Ee(j,g,E,v)}return Hr(v),null;case 13:if(xt(Rr),j=v.memoizedState,Mr&&Ai!==null&&(v.mode&1)!==0&&(v.flags&128)===0){for(g=Ai;g;)g=Ti(g);return du(),v.flags|=98560,v}if(j!==null&&j.dehydrated!==null){if(j=Rd(v),g===null){if(!j)throw Error(s(318));if(!Pe)throw Error(s(344));if(g=v.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));be(g,v)}else du(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;return Hr(v),null}return rs!==null&&(ef(rs),rs=null),(v.flags&128)!==0?(v.lanes=E,v):(j=j!==null,E=!1,g===null?Rd(v):E=g.memoizedState!==null,j&&!E&&(v.child.flags|=8192,(v.mode&1)!==0&&(g===null||(Rr.current&1)!==0?Lr===0&&(Lr=3):gp())),v.updateQueue!==null&&(v.flags|=4),Hr(v),null);case 4:return mu(),ic(g,v),g===null&&We(v.stateNode.containerInfo),Hr(v),null;case 10:return Od(v.type._context),Hr(v),null;case 17:return ar(v.type)&&Rn(),Hr(v),null;case 19:if(xt(Rr),U=v.memoizedState,U===null)return Hr(v),null;if(j=(v.flags&128)!==0,H=U.rendering,H===null)if(j)Ao(U,!1);else{if(Lr!==0||g!==null&&(g.flags&128)!==0)for(g=v.child;g!==null;){if(H=Yh(g),H!==null){for(v.flags|=128,Ao(U,!1),g=H.updateQueue,g!==null&&(v.updateQueue=g,v.flags|=4),v.subtreeFlags=0,g=E,j=v.child;j!==null;)E=j,U=g,E.flags&=14680066,H=E.alternate,H===null?(E.childLanes=0,E.lanes=U,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=H.childLanes,E.lanes=H.lanes,E.child=H.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=H.memoizedProps,E.memoizedState=H.memoizedState,E.updateQueue=H.updateQueue,E.type=H.type,U=H.dependencies,E.dependencies=U===null?null:{lanes:U.lanes,firstContext:U.firstContext}),j=j.sibling;return yt(Rr,Rr.current&1|2),v.child}g=g.sibling}U.tail!==null&&ii()>yl&&(v.flags|=128,j=!0,Ao(U,!1),v.lanes=4194304)}else{if(!j)if(g=Yh(H),g!==null){if(v.flags|=128,j=!0,g=g.updateQueue,g!==null&&(v.updateQueue=g,v.flags|=4),Ao(U,!0),U.tail===null&&U.tailMode==="hidden"&&!H.alternate&&!Mr)return Hr(v),null}else 2*ii()-U.renderingStartTime>yl&&E!==1073741824&&(v.flags|=128,j=!0,Ao(U,!1),v.lanes=4194304);U.isBackwards?(H.sibling=v.child,v.child=H):(g=U.last,g!==null?g.sibling=H:v.child=H,U.last=H)}return U.tail!==null?(v=U.tail,U.rendering=v,U.tail=v.sibling,U.renderingStartTime=ii(),v.sibling=null,g=Rr.current,yt(Rr,j?g&1|2:g&1),v):(Hr(v),null);case 22:case 23:return tf(),j=v.memoizedState!==null,g!==null&&g.memoizedState!==null!==j&&(v.flags|=8192),j&&(v.mode&1)!==0?(Gi&1073741824)!==0&&(Hr(v),ve&&v.subtreeFlags&6&&(v.flags|=8192)):Hr(v),null;case 24:return null;case 25:return null}throw Error(s(156,v.tag))}var ty=o.ReactCurrentOwner,mi=!1;function Dr(g,v,E,j){v.child=g===null?Rx(v,null,E,j):So(v,g.child,E,j)}function mr(g,v,E,j,U){E=E.render;var H=v.ref;return ou(v,U),j=gu(g,v,E,j,H,U),E=fl(),g!==null&&!mi?(v.updateQueue=g.updateQueue,v.flags&=-2053,g.lanes&=~U,va(g,v,U)):(Mr&&E&&zg(v),v.flags|=1,Dr(g,v,j,U),v.child)}function or(g,v,E,j,U){if(g===null){var H=E.type;return typeof H=="function"&&!vp(H)&&H.defaultProps===void 0&&E.compare===null&&E.defaultProps===void 0?(v.tag=15,v.type=H,Eo(g,v,H,j,U)):(g=xp(E.type,null,j,v,v.mode,U),g.ref=v.ref,g.return=v,v.child=g)}if(H=g.child,(g.lanes&U)===0){var ue=H.memoizedProps;if(E=E.compare,E=E!==null?E:bs,E(ue,j)&&g.ref===v.ref)return va(g,v,U)}return v.flags|=1,g=Do(H,j),g.ref=v.ref,g.return=v,v.child=g}function Eo(g,v,E,j,U){if(g!==null&&bs(g.memoizedProps,j)&&g.ref===v.ref)if(mi=!1,(g.lanes&U)!==0)(g.flags&131072)!==0&&(mi=!0);else return v.lanes=g.lanes,va(g,v,U);return Co(g,v,E,j,U)}function Ei(g,v,E){var j=v.pendingProps,U=j.children,H=g!==null?g.memoizedState:null;if(j.mode==="hidden")if((v.mode&1)===0)v.memoizedState={baseLanes:0,cachePool:null},yt(hc,Gi),Gi|=E;else if((E&1073741824)!==0)v.memoizedState={baseLanes:0,cachePool:null},j=H!==null?H.baseLanes:E,yt(hc,Gi),Gi|=j;else return g=H!==null?H.baseLanes|E:E,v.lanes=v.childLanes=1073741824,v.memoizedState={baseLanes:g,cachePool:null},v.updateQueue=null,yt(hc,Gi),Gi|=g,null;else H!==null?(j=H.baseLanes|E,v.memoizedState=null):j=E,yt(hc,Gi),Gi|=j;return Dr(g,v,U,E),v.child}function aa(g,v){var E=v.ref;(g===null&&E!==null||g!==null&&g.ref!==E)&&(v.flags|=512,v.flags|=2097152)}function Co(g,v,E,j,U){var H=ar(E)?Kn:Kt.current;return H=vr(v,H),ou(v,U),E=gu(g,v,E,j,H,U),j=fl(),g!==null&&!mi?(v.updateQueue=g.updateQueue,v.flags&=-2053,g.lanes&=~U,va(g,v,U)):(Mr&&j&&zg(v),v.flags|=1,Dr(g,v,E,U),v.child)}function ac(g,v,E,j,U){if(ar(E)){var H=!0;vn(v)}else H=!1;if(ou(v,U),v.stateNode===null)g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2),Ex(v,E,j),Fg(v,E,j,U),j=!0;else if(g===null){var ue=v.stateNode,Se=v.memoizedProps;ue.props=Se;var He=ue.context,ft=E.contextType;typeof ft=="object"&&ft!==null?ft=ga(ft):(ft=ar(E)?Kn:Kt.current,ft=vr(v,ft));var Rt=E.getDerivedStateFromProps,hn=typeof Rt=="function"||typeof ue.getSnapshotBeforeUpdate=="function";hn||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(Se!==j||He!==ft)&&Cx(v,ue,j,ft),ts=!1;var Xt=v.memoizedState;ue.state=Xt,Vh(v,j,ue,U),He=v.memoizedState,Se!==j||Xt!==He||rn.current||ts?(typeof Rt=="function"&&(Lg(v,E,Rt,j),He=v.memoizedState),(Se=ts||Ug(v,E,Se,j,Xt,He,ft))?(hn||typeof ue.UNSAFE_componentWillMount!="function"&&typeof ue.componentWillMount!="function"||(typeof ue.componentWillMount=="function"&&ue.componentWillMount(),typeof ue.UNSAFE_componentWillMount=="function"&&ue.UNSAFE_componentWillMount()),typeof ue.componentDidMount=="function"&&(v.flags|=4194308)):(typeof ue.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=j,v.memoizedState=He),ue.props=j,ue.state=He,ue.context=ft,j=Se):(typeof ue.componentDidMount=="function"&&(v.flags|=4194308),j=!1)}else{ue=v.stateNode,Dg(g,v),Se=v.memoizedProps,ft=v.type===v.elementType?Se:ma(v.type,Se),ue.props=ft,hn=v.pendingProps,Xt=ue.context,He=E.contextType,typeof He=="object"&&He!==null?He=ga(He):(He=ar(E)?Kn:Kt.current,He=vr(v,He));var Mn=E.getDerivedStateFromProps;(Rt=typeof Mn=="function"||typeof ue.getSnapshotBeforeUpdate=="function")||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(Se!==hn||Xt!==He)&&Cx(v,ue,j,He),ts=!1,Xt=v.memoizedState,ue.state=Xt,Vh(v,j,ue,U);var Tt=v.memoizedState;Se!==hn||Xt!==Tt||rn.current||ts?(typeof Mn=="function"&&(Lg(v,E,Mn,j),Tt=v.memoizedState),(ft=ts||Ug(v,E,ft,j,Xt,Tt,He)||!1)?(Rt||typeof ue.UNSAFE_componentWillUpdate!="function"&&typeof ue.componentWillUpdate!="function"||(typeof ue.componentWillUpdate=="function"&&ue.componentWillUpdate(j,Tt,He),typeof ue.UNSAFE_componentWillUpdate=="function"&&ue.UNSAFE_componentWillUpdate(j,Tt,He)),typeof ue.componentDidUpdate=="function"&&(v.flags|=4),typeof ue.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof ue.componentDidUpdate!="function"||Se===g.memoizedProps&&Xt===g.memoizedState||(v.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||Se===g.memoizedProps&&Xt===g.memoizedState||(v.flags|=1024),v.memoizedProps=j,v.memoizedState=Tt),ue.props=j,ue.state=Tt,ue.context=He,j=ft):(typeof ue.componentDidUpdate!="function"||Se===g.memoizedProps&&Xt===g.memoizedState||(v.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||Se===g.memoizedProps&&Xt===g.memoizedState||(v.flags|=1024),j=!1)}return Wi(g,v,E,j,H,U)}function Wi(g,v,E,j,U,H){aa(g,v);var ue=(v.flags&128)!==0;if(!j&&!ue)return U&&kn(v,E,!1),va(g,v,H);j=v.stateNode,ty.current=v;var Se=ue&&typeof E.getDerivedStateFromError!="function"?null:j.render();return v.flags|=1,g!==null&&ue?(v.child=So(v,g.child,null,H),v.child=So(v,null,Se,H)):Dr(g,v,Se,H),v.memoizedState=j.state,U&&kn(v,E,!0),v.child}function Vd(g){var v=g.stateNode;v.pendingContext?_n(g,v.pendingContext,v.pendingContext!==v.context):v.context&&_n(g,v.context,!1),Xh(g,v.containerInfo)}function ny(g,v,E,j,U){return du(),qh(U),v.flags|=256,Dr(g,v,E,j),v.child}var Hd={dehydrated:null,treeContext:null,retryLane:0};function sc(g){return{baseLanes:g,cachePool:null}}function ry(g,v,E){var j=v.pendingProps,U=Rr.current,H=!1,ue=(v.flags&128)!==0,Se;if((Se=ue)||(Se=g!==null&&g.memoizedState===null?!1:(U&2)!==0),Se?(H=!0,v.flags&=-129):(g===null||g.memoizedState!==null)&&(U|=1),yt(Rr,U&1),g===null)return ul(v),g=v.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?((v.mode&1)===0?v.lanes=1:xs(g)?v.lanes=8:v.lanes=1073741824,null):(U=j.children,g=j.fallback,H?(j=v.mode,H=v.child,U={mode:"hidden",children:U},(j&1)===0&&H!==null?(H.childLanes=0,H.pendingProps=U):H=af(U,j,0,null),g=vc(g,j,E,null),H.return=v,g.return=v,H.sibling=g,v.child=H,v.child.memoizedState=sc(E),v.memoizedState=Hd,g):Ms(v,U));if(U=g.memoizedState,U!==null){if(Se=U.dehydrated,Se!==null){if(ue)return v.flags&256?(v.flags&=-257,Gd(g,v,E,Error(s(422)))):v.memoizedState!==null?(v.child=g.child,v.flags|=128,null):(H=j.fallback,U=v.mode,j=af({mode:"visible",children:j.children},U,0,null),H=vc(H,U,E,null),H.flags|=2,j.return=v,H.return=v,j.sibling=H,v.child=j,(v.mode&1)!==0&&So(v,g.child,null,E),v.child.memoizedState=sc(E),v.memoizedState=Hd,H);if((v.mode&1)===0)v=Gd(g,v,E,null);else if(xs(Se))v=Gd(g,v,E,Error(s(419)));else if(j=(E&g.childLanes)!==0,mi||j){if(j=Wr,j!==null){switch(E&-E){case 4:H=2;break;case 16:H=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:H=32;break;case 536870912:H=268435456;break;default:H=0}j=(H&(j.suspendedLanes|E))!==0?0:H,j!==0&&j!==U.retryLane&&(U.retryLane=j,$i(g,j,-1))}gp(),v=Gd(g,v,E,Error(s(421)))}else Gs(Se)?(v.flags|=128,v.child=g.child,v=Vx.bind(null,g),ta(Se,v),v=null):(E=U.treeContext,Pe&&(Ai=ru(Se),ia=v,Mr=!0,rs=null,uu=!1,E!==null&&(ns[Ra++]=wo,ns[Ra++]=_o,ns[Ra++]=Yl,wo=E.id,_o=E.overflow,Yl=v)),v=Ms(v,v.pendingProps.children),v.flags|=4096);return v}return H?(j=up(g,v,j.children,j.fallback,E),H=v.child,U=g.child.memoizedState,H.memoizedState=U===null?sc(E):{baseLanes:U.baseLanes|E,cachePool:null},H.childLanes=g.childLanes&~E,v.memoizedState=Hd,j):(E=Wd(g,v,j.children,E),v.memoizedState=null,E)}return H?(j=up(g,v,j.children,j.fallback,E),H=v.child,U=g.child.memoizedState,H.memoizedState=U===null?sc(E):{baseLanes:U.baseLanes|E,cachePool:null},H.childLanes=g.childLanes&~E,v.memoizedState=Hd,j):(E=Wd(g,v,j.children,E),v.memoizedState=null,E)}function Ms(g,v){return v=af({mode:"visible",children:v},g.mode,0,null),v.return=g,g.child=v}function Wd(g,v,E,j){var U=g.child;return g=U.sibling,E=Do(U,{mode:"visible",children:E}),(v.mode&1)===0&&(E.lanes=j),E.return=v,E.sibling=null,g!==null&&(j=v.deletions,j===null?(v.deletions=[g],v.flags|=16):j.push(g)),v.child=E}function up(g,v,E,j,U){var H=v.mode;g=g.child;var ue=g.sibling,Se={mode:"hidden",children:E};return(H&1)===0&&v.child!==g?(E=v.child,E.childLanes=0,E.pendingProps=Se,v.deletions=null):(E=Do(g,Se),E.subtreeFlags=g.subtreeFlags&14680064),ue!==null?j=Do(ue,j):(j=vc(j,H,U,null),j.flags|=2),j.return=v,E.return=v,E.sibling=j,v.child=E,j}function Gd(g,v,E,j){return j!==null&&qh(j),So(v,g.child,null,E),g=Ms(v,v.pendingProps.children),g.flags|=2,v.memoizedState=null,g}function Ux(g,v,E){g.lanes|=v;var j=g.alternate;j!==null&&(j.lanes|=v),Xl(g.return,v,E)}function Zs(g,v,E,j,U){var H=g.memoizedState;H===null?g.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:j,tail:E,tailMode:U}:(H.isBackwards=v,H.rendering=null,H.renderingStartTime=0,H.last=j,H.tail=E,H.tailMode=U)}function oc(g,v,E){var j=v.pendingProps,U=j.revealOrder,H=j.tail;if(Dr(g,v,j.children,E),j=Rr.current,(j&2)!==0)j=j&1|2,v.flags|=128;else{if(g!==null&&(g.flags&128)!==0)e:for(g=v.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&Ux(g,E,v);else if(g.tag===19)Ux(g,E,v);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===v)break e;for(;g.sibling===null;){if(g.return===null||g.return===v)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}j&=1}if(yt(Rr,j),(v.mode&1)===0)v.memoizedState=null;else switch(U){case"forwards":for(E=v.child,U=null;E!==null;)g=E.alternate,g!==null&&Yh(g)===null&&(U=E),E=E.sibling;E=U,E===null?(U=v.child,v.child=null):(U=E.sibling,E.sibling=null),Zs(v,!1,U,E,H);break;case"backwards":for(E=null,U=v.child,v.child=null;U!==null;){if(g=U.alternate,g!==null&&Yh(g)===null){v.child=U;break}g=U.sibling,U.sibling=E,E=U,U=g}Zs(v,!0,E,null,H);break;case"together":Zs(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function va(g,v,E){if(g!==null&&(v.dependencies=g.dependencies),Js|=v.lanes,(E&v.childLanes)===0)return null;if(g!==null&&v.child!==g.child)throw Error(s(153));if(v.child!==null){for(g=v.child,E=Do(g,g.pendingProps),v.child=E,E.return=v;g.sibling!==null;)g=g.sibling,E=E.sibling=Do(g,g.pendingProps),E.return=v;E.sibling=null}return v.child}function dp(g,v,E){switch(v.tag){case 3:Vd(v),du();break;case 5:kx(v);break;case 1:ar(v.type)&&vn(v);break;case 4:Xh(v,v.stateNode.containerInfo);break;case 10:ql(v,v.type._context,v.memoizedProps.value);break;case 13:var j=v.memoizedState;if(j!==null)return j.dehydrated!==null?(yt(Rr,Rr.current&1),v.flags|=128,null):(E&v.child.childLanes)!==0?ry(g,v,E):(yt(Rr,Rr.current&1),g=va(g,v,E),g!==null?g.sibling:null);yt(Rr,Rr.current&1);break;case 19:if(j=(E&v.childLanes)!==0,(g.flags&128)!==0){if(j)return oc(g,v,E);v.flags|=128}var U=v.memoizedState;if(U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),yt(Rr,Rr.current),j)break;return null;case 22:case 23:return v.lanes=0,Ei(g,v,E)}return va(g,v,E)}function fp(g,v){switch(Bg(v),v.tag){case 1:return ar(v.type)&&Rn(),g=v.flags,g&65536?(v.flags=g&-65537|128,v):null;case 3:return mu(),xt(rn),xt(Kt),Ql(),g=v.flags,(g&65536)!==0&&(g&128)===0?(v.flags=g&-65537|128,v):null;case 5:return Wg(v),null;case 13:if(xt(Rr),g=v.memoizedState,g!==null&&g.dehydrated!==null){if(v.alternate===null)throw Error(s(340));du()}return g=v.flags,g&65536?(v.flags=g&-65537|128,v):null;case 19:return xt(Rr),null;case 4:return mu(),null;case 10:return Od(v.type._context),null;case 22:case 23:return tf(),null;case 24:return null;default:return null}}var sa=!1,gi=!1,lc=typeof WeakSet=="function"?WeakSet:Set,mt=null;function is(g,v){var E=g.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(j){la(g,v,j)}else E.current=null}function Po(g,v,E){try{E()}catch(j){la(g,v,j)}}var iy=!1;function ay(g,v){for(B(g.containerInfo),mt=v;mt!==null;)if(g=mt,v=g.child,(g.subtreeFlags&1028)!==0&&v!==null)v.return=g,mt=v;else for(;mt!==null;){g=mt;try{var E=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var j=E.memoizedProps,U=E.memoizedState,H=g.stateNode,ue=H.getSnapshotBeforeUpdate(g.elementType===g.type?j:ma(g.type,j),U);H.__reactInternalSnapshotBeforeUpdate=ue}break;case 3:ve&&ut(g.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Se){la(g,g.return,Se)}if(v=g.sibling,v!==null){v.return=g.return,mt=v;break}mt=g.return}return E=iy,iy=!1,E}function No(g,v,E){var j=v.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var U=j=j.next;do{if((U.tag&g)===g){var H=U.destroy;U.destroy=void 0,H!==void 0&&Po(v,E,H)}U=U.next}while(U!==j)}}function Ci(g,v){if(v=v.updateQueue,v=v!==null?v.lastEffect:null,v!==null){var E=v=v.next;do{if((E.tag&g)===g){var j=E.create;E.destroy=j()}E=E.next}while(E!==v)}}function oa(g){var v=g.ref;if(v!==null){var E=g.stateNode;switch(g.tag){case 5:g=ee(E);break;default:g=E}typeof v=="function"?v(g):v.current=g}}function xr(g,v,E){if(Xs&&typeof Xs.onCommitFiberUnmount=="function")try{Xs.onCommitFiberUnmount(Ed,v)}catch{}switch(v.tag){case 0:case 11:case 14:case 15:if(g=v.updateQueue,g!==null&&(g=g.lastEffect,g!==null)){var j=g=g.next;do{var U=j,H=U.destroy;U=U.tag,H!==void 0&&((U&2)!==0||(U&4)!==0)&&Po(v,E,H),j=j.next}while(j!==g)}break;case 1:if(is(v,E),g=v.stateNode,typeof g.componentWillUnmount=="function")try{g.props=v.memoizedProps,g.state=v.memoizedState,g.componentWillUnmount()}catch(ue){la(v,E,ue)}break;case 5:is(v,E);break;case 4:ve?ly(g,v,E):Z&&Z&&(v=v.stateNode.containerInfo,E=Gt(v),On(v,E))}}function as(g,v,E){for(var j=v;;)if(xr(g,j,E),j.child===null||ve&&j.tag===4){if(j===v)break;for(;j.sibling===null;){if(j.return===null||j.return===v)return;j=j.return}j.sibling.return=j.return,j=j.sibling}else j.child.return=j,j=j.child}function sy(g){var v=g.alternate;v!==null&&(g.alternate=null,sy(v)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(v=g.stateNode,v!==null&&ct(v)),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function oy(g){return g.tag===5||g.tag===3||g.tag===4}function hp(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||oy(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function pp(g){if(ve){e:{for(var v=g.return;v!==null;){if(oy(v))break e;v=v.return}throw Error(s(160))}var E=v;switch(E.tag){case 5:v=E.stateNode,E.flags&32&&(Ge(v),E.flags&=-33),E=hp(g),_u(g,E,v);break;case 3:case 4:v=E.stateNode.containerInfo,E=hp(g),mp(g,E,v);break;default:throw Error(s(161))}}}function mp(g,v,E){var j=g.tag;if(j===5||j===6)g=g.stateNode,v?Mt(E,g,v):Yt(E,g);else if(j!==4&&(g=g.child,g!==null))for(mp(g,v,E),g=g.sibling;g!==null;)mp(g,v,E),g=g.sibling}function _u(g,v,E){var j=g.tag;if(j===5||j===6)g=g.stateNode,v?$t(E,g,v):Ft(E,g);else if(j!==4&&(g=g.child,g!==null))for(_u(g,v,E),g=g.sibling;g!==null;)_u(g,v,E),g=g.sibling}function ly(g,v,E){for(var j=v,U=!1,H,ue;;){if(!U){U=j.return;e:for(;;){if(U===null)throw Error(s(160));switch(H=U.stateNode,U.tag){case 5:ue=!1;break e;case 3:H=H.containerInfo,ue=!0;break e;case 4:H=H.containerInfo,ue=!0;break e}U=U.return}U=!0}if(j.tag===5||j.tag===6)as(g,j,E),ue?me(H,j.stateNode):Et(H,j.stateNode);else if(j.tag===18)ue?he(H,j.stateNode):pe(H,j.stateNode);else if(j.tag===4){if(j.child!==null){H=j.stateNode.containerInfo,ue=!0,j.child.return=j,j=j.child;continue}}else if(xr(g,j,E),j.child!==null){j.child.return=j,j=j.child;continue}if(j===v)break;for(;j.sibling===null;){if(j.return===null||j.return===v)return;j=j.return,j.tag===4&&(U=!1)}j.sibling.return=j.return,j=j.sibling}}function ml(g,v){if(ve){switch(v.tag){case 0:case 11:case 14:case 15:No(3,v,v.return),Ci(3,v),No(5,v,v.return);return;case 1:return;case 5:var E=v.stateNode;if(E!=null){var j=v.memoizedProps;g=g!==null?g.memoizedProps:j;var U=v.type,H=v.updateQueue;v.updateQueue=null,H!==null&&gn(E,H,U,g,j,v)}return;case 6:if(v.stateNode===null)throw Error(s(162));E=v.memoizedProps,tt(v.stateNode,g!==null?g.memoizedProps:E,E);return;case 3:Pe&&g!==null&&g.memoizedState.isDehydrated&&oe(v.stateNode.containerInfo);return;case 12:return;case 13:Su(v);return;case 19:Su(v);return;case 17:return}throw Error(s(163))}switch(v.tag){case 0:case 11:case 14:case 15:No(3,v,v.return),Ci(3,v),No(5,v,v.return);return;case 12:return;case 13:Su(v);return;case 19:Su(v);return;case 3:Pe&&g!==null&&g.memoizedState.isDehydrated&&oe(v.stateNode.containerInfo);break;case 22:case 23:return}e:if(Z){switch(v.tag){case 1:case 5:case 6:break e;case 3:case 4:v=v.stateNode,On(v.containerInfo,v.pendingChildren);break e}throw Error(s(163))}}function Su(g){var v=g.updateQueue;if(v!==null){g.updateQueue=null;var E=g.stateNode;E===null&&(E=g.stateNode=new lc),v.forEach(function(j){var U=Hx.bind(null,g,j);E.has(j)||(E.add(j),j.then(U,U))})}}function YS(g,v){for(mt=v;mt!==null;){v=mt;var E=v.deletions;if(E!==null)for(var j=0;j<E.length;j++){var U=E[j];try{var H=g;ve?ly(H,U,v):as(H,U,v);var ue=U.alternate;ue!==null&&(ue.return=null),U.return=null}catch(Bt){la(U,v,Bt)}}if(E=v.child,(v.subtreeFlags&12854)!==0&&E!==null)E.return=v,mt=E;else for(;mt!==null;){v=mt;try{var Se=v.flags;if(Se&32&&ve&&Ge(v.stateNode),Se&512){var He=v.alternate;if(He!==null){var ft=He.ref;ft!==null&&(typeof ft=="function"?ft(null):ft.current=null)}}if(Se&8192)switch(v.tag){case 13:if(v.memoizedState!==null){var Rt=v.alternate;(Rt===null||Rt.memoizedState===null)&&(Jd=ii())}break;case 22:var hn=v.memoizedState!==null,Xt=v.alternate,Mn=Xt!==null&&Xt.memoizedState!==null;if(E=v,ve){e:if(j=E,U=hn,H=null,ve)for(var Tt=j;;){if(Tt.tag===5){if(H===null){H=Tt;var Oi=Tt.stateNode;U?dt(Oi):Ce(Tt.stateNode,Tt.memoizedProps)}}else if(Tt.tag===6){if(H===null){var za=Tt.stateNode;U?wt(za):ge(za,Tt.memoizedProps)}}else if((Tt.tag!==22&&Tt.tag!==23||Tt.memoizedState===null||Tt===j)&&Tt.child!==null){Tt.child.return=Tt,Tt=Tt.child;continue}if(Tt===j)break;for(;Tt.sibling===null;){if(Tt.return===null||Tt.return===j)break e;H===Tt&&(H=null),Tt=Tt.return}H===Tt&&(H=null),Tt.sibling.return=Tt.return,Tt=Tt.sibling}}if(hn&&!Mn&&(E.mode&1)!==0){mt=E;for(var Le=E.child;Le!==null;){for(E=mt=Le;mt!==null;){j=mt;var Te=j.child;switch(j.tag){case 0:case 11:case 14:case 15:No(4,j,j.return);break;case 1:is(j,j.return);var Be=j.stateNode;if(typeof Be.componentWillUnmount=="function"){var _t=j.return;try{Be.props=j.memoizedProps,Be.state=j.memoizedState,Be.componentWillUnmount()}catch(Bt){la(j,_t,Bt)}}break;case 5:is(j,j.return);break;case 22:if(j.memoizedState!==null){uy(E);continue}}Te!==null?(Te.return=j,mt=Te):uy(E)}Le=Le.sibling}}}switch(Se&4102){case 2:pp(v),v.flags&=-3;break;case 6:pp(v),v.flags&=-3,ml(v.alternate,v);break;case 4096:v.flags&=-4097;break;case 4100:v.flags&=-4097,ml(v.alternate,v);break;case 4:ml(v.alternate,v)}}catch(Bt){la(v,v.return,Bt)}if(E=v.sibling,E!==null){E.return=v.return,mt=E;break}mt=v.return}}}function $d(g,v,E){mt=g,qd(g)}function qd(g,v,E){for(var j=(g.mode&1)!==0;mt!==null;){var U=mt,H=U.child;if(U.tag===22&&j){var ue=U.memoizedState!==null||sa;if(!ue){var Se=U.alternate,He=Se!==null&&Se.memoizedState!==null||gi;Se=sa;var ft=gi;if(sa=ue,(gi=He)&&!ft)for(mt=U;mt!==null;)ue=mt,He=ue.child,ue.tag===22&&ue.memoizedState!==null?cc(U):He!==null?(He.return=ue,mt=He):cc(U);for(;H!==null;)mt=H,qd(H),H=H.sibling;mt=U,sa=Se,gi=ft}cy(g)}else(U.subtreeFlags&8772)!==0&&H!==null?(H.return=U,mt=H):cy(g)}}function cy(g){for(;mt!==null;){var v=mt;if((v.flags&8772)!==0){var E=v.alternate;try{if((v.flags&8772)!==0)switch(v.tag){case 0:case 11:case 15:gi||Ci(5,v);break;case 1:var j=v.stateNode;if(v.flags&4&&!gi)if(E===null)j.componentDidMount();else{var U=v.elementType===v.type?E.memoizedProps:ma(v.type,E.memoizedProps);j.componentDidUpdate(U,E.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var H=v.updateQueue;H!==null&&Tx(v,H,j);break;case 3:var ue=v.updateQueue;if(ue!==null){if(E=null,v.child!==null)switch(v.child.tag){case 5:E=ee(v.child.stateNode);break;case 1:E=v.child.stateNode}Tx(v,ue,E)}break;case 5:var Se=v.stateNode;E===null&&v.flags&4&&yn(Se,v.type,v.memoizedProps,v);break;case 6:break;case 4:break;case 12:break;case 13:if(Pe&&v.memoizedState===null){var He=v.alternate;if(He!==null){var ft=He.memoizedState;if(ft!==null){var Rt=ft.dehydrated;Rt!==null&&ce(Rt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(s(163))}gi||v.flags&512&&oa(v)}catch(hn){la(v,v.return,hn)}}if(v===g){mt=null;break}if(E=v.sibling,E!==null){E.return=v.return,mt=E;break}mt=v.return}}function uy(g){for(;mt!==null;){var v=mt;if(v===g){mt=null;break}var E=v.sibling;if(E!==null){E.return=v.return,mt=E;break}mt=v.return}}function cc(g){for(;mt!==null;){var v=mt;try{switch(v.tag){case 0:case 11:case 15:var E=v.return;try{Ci(4,v)}catch(He){la(v,E,He)}break;case 1:var j=v.stateNode;if(typeof j.componentDidMount=="function"){var U=v.return;try{j.componentDidMount()}catch(He){la(v,U,He)}}var H=v.return;try{oa(v)}catch(He){la(v,H,He)}break;case 5:var ue=v.return;try{oa(v)}catch(He){la(v,ue,He)}}}catch(He){la(v,v.return,He)}if(v===g){mt=null;break}var Se=v.sibling;if(Se!==null){Se.return=v.return,mt=Se;break}mt=v.return}}var Xd=0,uc=1,dc=2,Oo=3,Mu=4;if(typeof Symbol=="function"&&Symbol.for){var fc=Symbol.for;Xd=fc("selector.component"),uc=fc("selector.has_pseudo_class"),dc=fc("selector.role"),Oo=fc("selector.test_id"),Mu=fc("selector.text")}function Yd(g){var v=Me(g);if(v!=null){if(typeof v.memoizedProps["data-testname"]!="string")throw Error(s(364));return v}if(g=Ae(g),g===null)throw Error(s(362));return g.stateNode.current}function Kd(g,v){switch(v.$$typeof){case Xd:if(g.type===v.value)return!0;break;case uc:e:{v=v.value,g=[g,0];for(var E=0;E<g.length;){var j=g[E++],U=g[E++],H=v[U];if(j.tag!==5||!Ze(j)){for(;H!=null&&Kd(j,H);)U++,H=v[U];if(U===v.length){v=!0;break e}else for(j=j.child;j!==null;)g.push(j,U),j=j.sibling}}v=!1}return v;case dc:if(g.tag===5&&At(g.stateNode,v.value))return!0;break;case Mu:if((g.tag===5||g.tag===6)&&(g=Qe(g),g!==null&&0<=g.indexOf(v.value)))return!0;break;case Oo:if(g.tag===5&&(g=g.memoizedProps["data-testname"],typeof g=="string"&&g.toLowerCase()===v.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function gl(g){switch(g.$$typeof){case Xd:return"<"+(O(g.value)||"Unknown")+">";case uc:return":has("+(gl(g)||"")+")";case dc:return'[role="'+g.value+'"]';case Mu:return'"'+g.value+'"';case Oo:return'[data-testname="'+g.value+'"]';default:throw Error(s(365))}}function Da(g,v){var E=[];g=[g,0];for(var j=0;j<g.length;){var U=g[j++],H=g[j++],ue=v[H];if(U.tag!==5||!Ze(U)){for(;ue!=null&&Kd(U,ue);)H++,ue=v[H];if(H===v.length)E.push(U);else for(U=U.child;U!==null;)g.push(U,H),U=U.sibling}}return E}function Ro(g,v){if(!te)throw Error(s(363));g=Yd(g),g=Da(g,v),v=[],g=Array.from(g);for(var E=0;E<g.length;){var j=g[E++];if(j.tag===5)Ze(j)||v.push(j.stateNode);else for(j=j.child;j!==null;)g.push(j),j=j.sibling}return v}var dy=Math.ceil,Zd=o.ReactCurrentDispatcher,Ts=o.ReactCurrentOwner,Jn=o.ReactCurrentBatchConfig,Sn=0,Wr=null,Qn=null,Tr=0,Gi=0,hc=nn(0),Lr=0,Tu=null,Js=0,La=0,pc=0,ko=null,Xr=null,Jd=0,yl=1/0;function mc(){yl=ii()+500}var Au=!1,br=null,As=null,Eu=!1,Qs=null,gc=0,yc=0,jo=null,gr=-1,Ur=0;function Bn(){return(Sn&6)!==0?ii():gr!==-1?gr:gr=ii()}function Es(g){return(g.mode&1)===0?1:(Sn&2)!==0&&Tr!==0?Tr&-Tr:Mx.transition!==null?(Ur===0&&(g=iu,iu<<=1,(iu&4194240)===0&&(iu=64),Ur=g),Ur):(g=An,g!==0?g:ke())}function $i(g,v,E){if(50<yc)throw yc=0,jo=null,Error(s(185));var j=vl(g,v);return j===null?null:(Hl(j,v,E),((Sn&2)===0||j!==Wr)&&(j===Wr&&((Sn&2)===0&&(La|=v),Lr===4&&Ni(j,Tr)),xa(j,E),v===1&&Sn===0&&(g.mode&1)===0&&(mc(),Dh&&Qa())),j)}function vl(g,v){g.lanes|=v;var E=g.alternate;for(E!==null&&(E.lanes|=v),E=g,g=g.return;g!==null;)g.childLanes|=v,E=g.alternate,E!==null&&(E.childLanes|=v),E=g,g=g.return;return E.tag===3?E.stateNode:null}function xa(g,v){var E=g.callbackNode;Sx(g,v);var j=Ad(g,g===Wr?Tr:0);if(j===0)E!==null&&su(E),g.callbackNode=null,g.callbackPriority=0;else if(v=j&-j,g.callbackPriority!==v){if(E!=null&&su(E),v===1)g.tag===0?Uh(Ua.bind(null,g)):Lh(Ua.bind(null,g)),ot?ie(function(){Sn===0&&Qa()}):Wl(Gl,Qa),E=null;else{switch(vo(j)){case 1:E=Gl;break;case 4:E=$S;break;case 16:E=jh;break;case 536870912:E=Ih;break;default:E=jh}E=yp(E,Pi.bind(null,g))}g.callbackPriority=v,g.callbackNode=E}}function Pi(g,v){if(gr=-1,Ur=0,(Sn&6)!==0)throw Error(s(327));var E=g.callbackNode;if(eo()&&g.callbackNode!==E)return null;var j=Ad(g,g===Wr?Tr:0);if(j===0)return null;if((j&30)!==0||(j&g.expiredLanes)!==0||v)v=nf(g,j);else{v=j;var U=Sn;Sn|=2;var H=py();(Wr!==g||Tr!==v)&&(mc(),Io(g,v));do try{zx();break}catch(Se){hy(g,Se)}while(!0);ra(),Zd.current=H,Sn=U,Qn!==null?v=0:(Wr=null,Tr=0,v=Lr)}if(v!==0){if(v===2&&(U=Oh(g),U!==0&&(j=U,v=Qd(g,U))),v===1)throw E=Tu,Io(g,0),Ni(g,j),xa(g,ii()),E;if(v===6)Ni(g,j);else{if(U=g.current.alternate,(j&30)===0&&!fy(U)&&(v=nf(g,j),v===2&&(H=Oh(g),H!==0&&(j=H,v=Qd(g,H))),v===1))throw E=Tu,Io(g,0),Ni(g,j),xa(g,ii()),E;switch(g.finishedWork=U,g.finishedLanes=j,v){case 0:case 1:throw Error(s(345));case 2:Cs(g,Xr);break;case 3:if(Ni(g,j),(j&130023424)===j&&(v=Jd+500-ii(),10<v)){if(Ad(g,0)!==0)break;if(U=g.suspendedLanes,(U&j)!==j){Bn(),g.pingedLanes|=g.suspendedLanes&U;break}g.timeoutHandle=Oe(Cs.bind(null,g,Xr),v);break}Cs(g,Xr);break;case 4:if(Ni(g,j),(j&4194240)===j)break;for(v=g.eventTimes,U=-1;0<j;){var ue=31-sr(j);H=1<<ue,ue=v[ue],ue>U&&(U=ue),j&=~H}if(j=U,j=ii()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*dy(j/1960))-j,10<j){g.timeoutHandle=Oe(Cs.bind(null,g,Xr),j);break}Cs(g,Xr);break;case 5:Cs(g,Xr);break;default:throw Error(s(329))}}}return xa(g,ii()),g.callbackNode===E?Pi.bind(null,g):null}function Qd(g,v){var E=ko;return g.current.memoizedState.isDehydrated&&(Io(g,v).flags|=256),g=nf(g,v),g!==2&&(v=Xr,Xr=E,v!==null&&ef(v)),g}function ef(g){Xr===null?Xr=g:Xr.push.apply(Xr,g)}function fy(g){for(var v=g;;){if(v.flags&16384){var E=v.updateQueue;if(E!==null&&(E=E.stores,E!==null))for(var j=0;j<E.length;j++){var U=E[j],H=U.getSnapshot;U=U.value;try{if(!na(H(),U))return!1}catch{return!1}}}if(E=v.child,v.subtreeFlags&16384&&E!==null)E.return=v,v=E;else{if(v===g)break;for(;v.sibling===null;){if(v.return===null||v.return===g)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function Ni(g,v){for(v&=~pc,v&=~La,g.suspendedLanes|=v,g.pingedLanes&=~v,g=g.expirationTimes;0<v;){var E=31-sr(v),j=1<<E;g[E]=-1,v&=~j}}function Ua(g){if((Sn&6)!==0)throw Error(s(327));eo();var v=Ad(g,0);if((v&1)===0)return xa(g,ii()),null;var E=nf(g,v);if(g.tag!==0&&E===2){var j=Oh(g);j!==0&&(v=j,E=Qd(g,j))}if(E===1)throw E=Tu,Io(g,0),Ni(g,v),xa(g,ii()),E;if(E===6)throw Error(s(345));return g.finishedWork=g.current.alternate,g.finishedLanes=v,Cs(g,Xr),xa(g,ii()),null}function Cu(g){Qs!==null&&Qs.tag===0&&(Sn&6)===0&&eo();var v=Sn;Sn|=1;var E=Jn.transition,j=An;try{if(Jn.transition=null,An=1,g)return g()}finally{An=j,Jn.transition=E,Sn=v,(Sn&6)===0&&Qa()}}function tf(){Gi=hc.current,xt(hc)}function Io(g,v){g.finishedWork=null,g.finishedLanes=0;var E=g.timeoutHandle;if(E!==Ie&&(g.timeoutHandle=Ie,$e(E)),Qn!==null)for(E=Qn.return;E!==null;){var j=E;switch(Bg(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&Rn();break;case 3:mu(),xt(rn),xt(Kt),Ql();break;case 5:Wg(j);break;case 4:mu();break;case 13:xt(Rr);break;case 19:xt(Rr);break;case 10:Od(j.type._context);break;case 22:case 23:tf()}E=E.return}if(Wr=g,Qn=g=Do(g.current,null),Tr=Gi=v,Lr=0,Tu=null,pc=La=Js=0,Xr=ko=null,es!==null){for(v=0;v<es.length;v++)if(E=es[v],j=E.interleaved,j!==null){E.interleaved=null;var U=j.next,H=E.pending;if(H!==null){var ue=H.next;H.next=U,j.next=ue}E.pending=j}es=null}return g}function hy(g,v){do{var E=Qn;try{if(ra(),kd.current=bu,Kh){for(var j=kr.memoizedState;j!==null;){var U=j.queue;U!==null&&(U.pending=null),j=j.next}Kh=!1}if(ec=0,hi=fi=kr=null,Ys=!1,tc=0,Ts.current=null,E===null||E.return===null){Lr=1,Tu=v,Qn=null;break}e:{var H=g,ue=E.return,Se=E,He=v;if(v=Tr,Se.flags|=32768,He!==null&&typeof He=="object"&&typeof He.then=="function"){var ft=He,Rt=Se,hn=Rt.tag;if((Rt.mode&1)===0&&(hn===0||hn===11||hn===15)){var Xt=Rt.alternate;Xt?(Rt.updateQueue=Xt.updateQueue,Rt.memoizedState=Xt.memoizedState,Rt.lanes=Xt.lanes):(Rt.updateQueue=null,Rt.memoizedState=null)}var Mn=ey(ue);if(Mn!==null){Mn.flags&=-257,rc(Mn,ue,Se,H,v),Mn.mode&1&&To(H,ft,v),v=Mn,He=ft;var Tt=v.updateQueue;if(Tt===null){var Oi=new Set;Oi.add(He),v.updateQueue=Oi}else Tt.add(He);break e}else{if((v&1)===0){To(H,ft,v),gp();break e}He=Error(s(426))}}else if(Mr&&Se.mode&1){var za=ey(ue);if(za!==null){(za.flags&65536)===0&&(za.flags|=256),rc(za,ue,Se,H,v),qh(He);break e}}H=He,Lr!==4&&(Lr=2),ko===null?ko=[H]:ko.push(H),He=Qg(He,Se),Se=ue;do{switch(Se.tag){case 3:Se.flags|=65536,v&=-v,Se.lanes|=v;var Le=Lx(Se,He,v);Bh(Se,Le);break e;case 1:H=He;var Te=Se.type,Be=Se.stateNode;if((Se.flags&128)===0&&(typeof Te.getDerivedStateFromError=="function"||Be!==null&&typeof Be.componentDidCatch=="function"&&(As===null||!As.has(Be)))){Se.flags|=65536,v&=-v,Se.lanes|=v;var _t=sp(Se,H,v);Bh(Se,_t);break e}}Se=Se.return}while(Se!==null)}gy(E)}catch(Bt){v=Bt,Qn===E&&E!==null&&(Qn=E=E.return);continue}break}while(!0)}function py(){var g=Zd.current;return Zd.current=bu,g===null?bu:g}function gp(){(Lr===0||Lr===3||Lr===2)&&(Lr=4),Wr===null||(Js&268435455)===0&&(La&268435455)===0||Ni(Wr,Tr)}function nf(g,v){var E=Sn;Sn|=2;var j=py();Wr===g&&Tr===v||Io(g,v);do try{Fx();break}catch(U){hy(g,U)}while(!0);if(ra(),Sn=E,Zd.current=j,Qn!==null)throw Error(s(261));return Wr=null,Tr=0,Lr}function Fx(){for(;Qn!==null;)my(Qn)}function zx(){for(;Qn!==null&&!ol();)my(Qn)}function my(g){var v=xy(g.alternate,g,Gi);g.memoizedProps=g.pendingProps,v===null?gy(g):Qn=v,Ts.current=null}function gy(g){var v=g;do{var E=v.alternate;if(g=v.return,(v.flags&32768)===0){if(E=cp(E,v,Gi),E!==null){Qn=E;return}}else{if(E=fp(E,v),E!==null){E.flags&=32767,Qn=E;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{Lr=6,Qn=null;return}}if(v=v.sibling,v!==null){Qn=v;return}Qn=v=g}while(v!==null);Lr===0&&(Lr=5)}function Cs(g,v){var E=An,j=Jn.transition;try{Jn.transition=null,An=1,Bx(g,v,E)}finally{Jn.transition=j,An=E}return null}function Bx(g,v,E){do eo();while(Qs!==null);if((Sn&6)!==0)throw Error(s(327));var j=g.finishedWork,U=g.finishedLanes;if(j===null)return null;if(g.finishedWork=null,g.finishedLanes=0,j===g.current)throw Error(s(177));g.callbackNode=null,g.callbackPriority=0;var H=j.lanes|j.childLanes;if(kh(g,H),g===Wr&&(Qn=Wr=null,Tr=0),(j.subtreeFlags&2064)===0&&(j.flags&2064)===0||Eu||(Eu=!0,yp(jh,function(){return eo(),null})),H=(j.flags&15990)!==0,(j.subtreeFlags&15990)!==0||H){H=Jn.transition,Jn.transition=null;var ue=An;An=1;var Se=Sn;Sn|=4,Ts.current=null,ay(g,j),YS(g,j),Y(g.containerInfo),g.current=j,$d(j),GS(),Sn=Se,An=ue,Jn.transition=H}else g.current=j;if(Eu&&(Eu=!1,Qs=g,gc=U),H=g.pendingLanes,H===0&&(As=null),Cd(j.stateNode),xa(g,ii()),v!==null)for(E=g.onRecoverableError,j=0;j<v.length;j++)E(v[j]);if(Au)throw Au=!1,g=br,br=null,g;return(gc&1)!==0&&g.tag!==0&&eo(),H=g.pendingLanes,(H&1)!==0?g===jo?yc++:(yc=0,jo=g):yc=0,Qa(),null}function eo(){if(Qs!==null){var g=vo(gc),v=Jn.transition,E=An;try{if(Jn.transition=null,An=16>g?16:g,Qs===null)var j=!1;else{if(g=Qs,Qs=null,gc=0,(Sn&6)!==0)throw Error(s(331));var U=Sn;for(Sn|=4,mt=g.current;mt!==null;){var H=mt,ue=H.child;if((mt.flags&16)!==0){var Se=H.deletions;if(Se!==null){for(var He=0;He<Se.length;He++){var ft=Se[He];for(mt=ft;mt!==null;){var Rt=mt;switch(Rt.tag){case 0:case 11:case 15:No(8,Rt,H)}var hn=Rt.child;if(hn!==null)hn.return=Rt,mt=hn;else for(;mt!==null;){Rt=mt;var Xt=Rt.sibling,Mn=Rt.return;if(sy(Rt),Rt===ft){mt=null;break}if(Xt!==null){Xt.return=Mn,mt=Xt;break}mt=Mn}}}var Tt=H.alternate;if(Tt!==null){var Oi=Tt.child;if(Oi!==null){Tt.child=null;do{var za=Oi.sibling;Oi.sibling=null,Oi=za}while(Oi!==null)}}mt=H}}if((H.subtreeFlags&2064)!==0&&ue!==null)ue.return=H,mt=ue;else e:for(;mt!==null;){if(H=mt,(H.flags&2048)!==0)switch(H.tag){case 0:case 11:case 15:No(9,H,H.return)}var Le=H.sibling;if(Le!==null){Le.return=H.return,mt=Le;break e}mt=H.return}}var Te=g.current;for(mt=Te;mt!==null;){ue=mt;var Be=ue.child;if((ue.subtreeFlags&2064)!==0&&Be!==null)Be.return=ue,mt=Be;else e:for(ue=Te;mt!==null;){if(Se=mt,(Se.flags&2048)!==0)try{switch(Se.tag){case 0:case 11:case 15:Ci(9,Se)}}catch(Bt){la(Se,Se.return,Bt)}if(Se===ue){mt=null;break e}var _t=Se.sibling;if(_t!==null){_t.return=Se.return,mt=_t;break e}mt=Se.return}}if(Sn=U,Qa(),Xs&&typeof Xs.onPostCommitFiberRoot=="function")try{Xs.onPostCommitFiberRoot(Ed,g)}catch{}j=!0}return j}finally{An=E,Jn.transition=v}}return!1}function rf(g,v,E){v=Qg(E,v),v=Lx(g,v,1),ll(g,v),v=Bn(),g=vl(g,1),g!==null&&(Hl(g,1,v),xa(g,v))}function la(g,v,E){if(g.tag===3)rf(g,g,E);else for(;v!==null;){if(v.tag===3){rf(v,g,E);break}else if(v.tag===1){var j=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(As===null||!As.has(j))){g=Qg(E,g),g=sp(v,g,1),ll(v,g),g=Bn(),v=vl(v,1),v!==null&&(Hl(v,1,g),xa(v,g));break}}v=v.return}}function yy(g,v,E){var j=g.pingCache;j!==null&&j.delete(v),v=Bn(),g.pingedLanes|=g.suspendedLanes&E,Wr===g&&(Tr&E)===E&&(Lr===4||Lr===3&&(Tr&130023424)===Tr&&500>ii()-Jd?Io(g,0):pc|=E),xa(g,v)}function vy(g,v){v===0&&((g.mode&1)===0?v=1:(v=zn,zn<<=1,(zn&130023424)===0&&(zn=4194304)));var E=Bn();g=vl(g,v),g!==null&&(Hl(g,v,E),xa(g,E))}function Vx(g){var v=g.memoizedState,E=0;v!==null&&(E=v.retryLane),vy(g,E)}function Hx(g,v){var E=0;switch(g.tag){case 13:var j=g.stateNode,U=g.memoizedState;U!==null&&(E=U.retryLane);break;case 19:j=g.stateNode;break;default:throw Error(s(314))}j!==null&&j.delete(v),vy(g,E)}var xy;xy=function(g,v,E){if(g!==null)if(g.memoizedProps!==v.pendingProps||rn.current)mi=!0;else{if((g.lanes&E)===0&&(v.flags&128)===0)return mi=!1,dp(g,v,E);mi=(g.flags&131072)!==0}else mi=!1,Mr&&(v.flags&1048576)!==0&&Px(v,Gh,v.index);switch(v.lanes=0,v.tag){case 2:var j=v.type;g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2),g=v.pendingProps;var U=vr(v,Kt.current);ou(v,E),U=gu(null,v,j,g,U,E);var H=fl();return v.flags|=1,typeof U=="object"&&U!==null&&typeof U.render=="function"&&U.$$typeof===void 0?(v.tag=1,v.memoizedState=null,v.updateQueue=null,ar(j)?(H=!0,vn(v)):H=!1,v.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,lu(v),U.updater=Hh,v.stateNode=U,U._reactInternals=v,Fg(v,j,g,E),v=Wi(null,v,j,!0,H,E)):(v.tag=0,Mr&&H&&zg(v),Dr(null,v,U,E),v=v.child),v;case 16:j=v.elementType;e:{switch(g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2),g=v.pendingProps,U=j._init,j=U(j._payload),v.type=j,U=v.tag=KS(j),g=ma(j,g),U){case 0:v=Co(null,v,j,g,E);break e;case 1:v=ac(null,v,j,g,E);break e;case 11:v=mr(null,v,j,g,E);break e;case 14:v=or(null,v,j,ma(j.type,g),E);break e}throw Error(s(306,j,""))}return v;case 0:return j=v.type,U=v.pendingProps,U=v.elementType===j?U:ma(j,U),Co(g,v,j,U,E);case 1:return j=v.type,U=v.pendingProps,U=v.elementType===j?U:ma(j,U),ac(g,v,j,U,E);case 3:e:{if(Vd(v),g===null)throw Error(s(387));j=v.pendingProps,H=v.memoizedState,U=H.element,Dg(g,v),Vh(v,j,null,E);var ue=v.memoizedState;if(j=ue.element,Pe&&H.isDehydrated)if(H={element:j,isDehydrated:!1,cache:ue.cache,transitions:ue.transitions},v.updateQueue.baseState=H,v.memoizedState=H,v.flags&256){U=Error(s(423)),v=ny(g,v,j,E,U);break e}else if(j!==U){U=Error(s(424)),v=ny(g,v,j,E,U);break e}else for(Pe&&(Ai=Vl(v.stateNode.containerInfo),ia=v,Mr=!0,rs=null,uu=!1),E=Rx(v,null,j,E),v.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(du(),j===U){v=va(g,v,E);break e}Dr(g,v,j,E)}v=v.child}return v;case 5:return kx(v),g===null&&ul(v),j=v.type,U=v.pendingProps,H=g!==null?g.memoizedProps:null,ue=U.children,Ne(j,U)?ue=null:H!==null&&Ne(j,H)&&(v.flags|=32),aa(g,v),Dr(g,v,ue,E),v.child;case 6:return g===null&&ul(v),null;case 13:return ry(g,v,E);case 4:return Xh(v,v.stateNode.containerInfo),j=v.pendingProps,g===null?v.child=So(v,null,j,E):Dr(g,v,j,E),v.child;case 11:return j=v.type,U=v.pendingProps,U=v.elementType===j?U:ma(j,U),mr(g,v,j,U,E);case 7:return Dr(g,v,v.pendingProps,E),v.child;case 8:return Dr(g,v,v.pendingProps.children,E),v.child;case 12:return Dr(g,v,v.pendingProps.children,E),v.child;case 10:e:{if(j=v.type._context,U=v.pendingProps,H=v.memoizedProps,ue=U.value,ql(v,j,ue),H!==null)if(na(H.value,ue)){if(H.children===U.children&&!rn.current){v=va(g,v,E);break e}}else for(H=v.child,H!==null&&(H.return=v);H!==null;){var Se=H.dependencies;if(Se!==null){ue=H.child;for(var He=Se.firstContext;He!==null;){if(He.context===j){if(H.tag===1){He=bo(-1,E&-E),He.tag=2;var ft=H.updateQueue;if(ft!==null){ft=ft.shared;var Rt=ft.pending;Rt===null?He.next=He:(He.next=Rt.next,Rt.next=He),ft.pending=He}}H.lanes|=E,He=H.alternate,He!==null&&(He.lanes|=E),Xl(H.return,E,v),Se.lanes|=E;break}He=He.next}}else if(H.tag===10)ue=H.type===v.type?null:H.child;else if(H.tag===18){if(ue=H.return,ue===null)throw Error(s(341));ue.lanes|=E,Se=ue.alternate,Se!==null&&(Se.lanes|=E),Xl(ue,E,v),ue=H.sibling}else ue=H.child;if(ue!==null)ue.return=H;else for(ue=H;ue!==null;){if(ue===v){ue=null;break}if(H=ue.sibling,H!==null){H.return=ue.return,ue=H;break}ue=ue.return}H=ue}Dr(g,v,U.children,E),v=v.child}return v;case 9:return U=v.type,j=v.pendingProps.children,ou(v,E),U=ga(U),j=j(U),v.flags|=1,Dr(g,v,j,E),v.child;case 14:return j=v.type,U=ma(j,v.pendingProps),U=ma(j.type,U),or(g,v,j,U,E);case 15:return Eo(g,v,v.type,v.pendingProps,E);case 17:return j=v.type,U=v.pendingProps,U=v.elementType===j?U:ma(j,U),g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2),v.tag=1,ar(j)?(g=!0,vn(v)):g=!1,ou(v,E),Ex(v,j,U),Fg(v,j,U,E),Wi(null,v,j,!0,g,E);case 19:return oc(g,v,E);case 22:return Ei(g,v,E)}throw Error(s(156,v.tag))};function yp(g,v){return Wl(g,v)}function Wx(g,v,E,j){this.tag=g,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fa(g,v,E,j){return new Wx(g,v,E,j)}function vp(g){return g=g.prototype,!(!g||!g.isReactComponent)}function KS(g){if(typeof g=="function")return vp(g)?1:0;if(g!=null){if(g=g.$$typeof,g===b)return 11;if(g===M)return 14}return 2}function Do(g,v){var E=g.alternate;return E===null?(E=Fa(g.tag,v,g.key,g.mode),E.elementType=g.elementType,E.type=g.type,E.stateNode=g.stateNode,E.alternate=g,g.alternate=E):(E.pendingProps=v,E.type=g.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=g.flags&14680064,E.childLanes=g.childLanes,E.lanes=g.lanes,E.child=g.child,E.memoizedProps=g.memoizedProps,E.memoizedState=g.memoizedState,E.updateQueue=g.updateQueue,v=g.dependencies,E.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},E.sibling=g.sibling,E.index=g.index,E.ref=g.ref,E}function xp(g,v,E,j,U,H){var ue=2;if(j=g,typeof g=="function")vp(g)&&(ue=1);else if(typeof g=="string")ue=5;else e:switch(g){case f:return vc(E.children,U,H,v);case h:ue=8,U|=8;break;case m:return g=Fa(12,E,v,U|2),g.elementType=m,g.lanes=H,g;case x:return g=Fa(13,E,v,U),g.elementType=x,g.lanes=H,g;case _:return g=Fa(19,E,v,U),g.elementType=_,g.lanes=H,g;case A:return af(E,U,H,v);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case y:ue=10;break e;case w:ue=9;break e;case b:ue=11;break e;case M:ue=14;break e;case T:ue=16,j=null;break e}throw Error(s(130,g==null?g:typeof g,""))}return v=Fa(ue,E,v,U),v.elementType=g,v.type=j,v.lanes=H,v}function vc(g,v,E,j){return g=Fa(7,g,j,v),g.lanes=E,g}function af(g,v,E,j){return g=Fa(22,g,j,v),g.elementType=A,g.lanes=E,g.stateNode={},g}function bp(g,v,E){return g=Fa(6,g,null,v),g.lanes=E,g}function wp(g,v,E){return v=Fa(4,g.children!==null?g.children:[],g.key,v),v.lanes=E,v.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},v}function _p(g,v,E,j,U){this.tag=v,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ie,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rh(0),this.expirationTimes=Rh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rh(0),this.identifierPrefix=j,this.onRecoverableError=U,Pe&&(this.mutableSourceEagerHydrationData=null)}function Gx(g,v,E,j,U,H,ue,Se,He){return g=new _p(g,v,E,Se,He),v===1?(v=1,H===!0&&(v|=8)):v=0,H=Fa(3,null,null,v),g.current=H,H.stateNode=g,H.memoizedState={element:j,isDehydrated:E,cache:null,transitions:null},lu(H),g}function $x(g){if(!g)return tn;g=g._reactInternals;e:{if(C(g)!==g||g.tag!==1)throw Error(s(170));var v=g;do{switch(v.tag){case 3:v=v.stateNode.context;break e;case 1:if(ar(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break e}}v=v.return}while(v!==null);throw Error(s(171))}if(g.tag===1){var E=g.type;if(ar(E))return Or(g,E,v)}return v}function qx(g){var v=g._reactInternals;if(v===void 0)throw typeof g.render=="function"?Error(s(188)):(g=Object.keys(g).join(","),Error(s(268,g)));return g=V(v),g===null?null:g.stateNode}function ss(g,v){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var E=g.retryLane;g.retryLane=E!==0&&E<v?E:v}}function sf(g,v){ss(g,v),(g=g.alternate)&&ss(g,v)}function Sp(g){return g=V(g),g===null?null:g.stateNode}function Xx(){return null}return n.attemptContinuousHydration=function(g){if(g.tag===13){var v=Bn();$i(g,134217728,v),sf(g,134217728)}},n.attemptHydrationAtCurrentPriority=function(g){if(g.tag===13){var v=Bn(),E=Es(g);$i(g,E,v),sf(g,E)}},n.attemptSynchronousHydration=function(g){switch(g.tag){case 3:var v=g.stateNode;if(v.current.memoizedState.isDehydrated){var E=au(v.pendingLanes);E!==0&&(qs(v,E|1),xa(v,ii()),(Sn&6)===0&&(mc(),Qa()))}break;case 13:var j=Bn();Cu(function(){return $i(g,1,j)}),sf(g,1)}},n.batchedUpdates=function(g,v){var E=Sn;Sn|=1;try{return g(v)}finally{Sn=E,Sn===0&&(mc(),Dh&&Qa())}},n.createComponentSelector=function(g){return{$$typeof:Xd,value:g}},n.createContainer=function(g,v,E,j,U,H,ue){return Gx(g,v,!1,null,E,j,U,H,ue)},n.createHasPseudoClassSelector=function(g){return{$$typeof:uc,value:g}},n.createHydrationContainer=function(g,v,E,j,U,H,ue,Se,He){return g=Gx(E,j,!0,g,U,H,ue,Se,He),g.context=$x(null),E=g.current,j=Bn(),U=Es(E),H=bo(j,U),H.callback=v??null,ll(E,H),g.current.lanes=U,Hl(g,U,j),xa(g,j),g},n.createPortal=function(g,v,E){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:j==null?null:""+j,children:g,containerInfo:v,implementation:E}},n.createRoleSelector=function(g){return{$$typeof:dc,value:g}},n.createTestNameSelector=function(g){return{$$typeof:Oo,value:g}},n.createTextSelector=function(g){return{$$typeof:Mu,value:g}},n.deferredUpdates=function(g){var v=An,E=Jn.transition;try{return Jn.transition=null,An=16,g()}finally{An=v,Jn.transition=E}},n.discreteUpdates=function(g,v,E,j,U){var H=An,ue=Jn.transition;try{return Jn.transition=null,An=1,g(v,E,j,U)}finally{An=H,Jn.transition=ue,Sn===0&&mc()}},n.findAllNodes=Ro,n.findBoundingRects=function(g,v){if(!te)throw Error(s(363));v=Ro(g,v),g=[];for(var E=0;E<v.length;E++)g.push(Je(v[E]));for(v=g.length-1;0<v;v--){E=g[v];for(var j=E.x,U=j+E.width,H=E.y,ue=H+E.height,Se=v-1;0<=Se;Se--)if(v!==Se){var He=g[Se],ft=He.x,Rt=ft+He.width,hn=He.y,Xt=hn+He.height;if(j>=ft&&H>=hn&&U<=Rt&&ue<=Xt){g.splice(v,1);break}else if(j!==ft||E.width!==He.width||Xt<H||hn>ue){if(!(H!==hn||E.height!==He.height||Rt<j||ft>U)){ft>j&&(He.width+=ft-j,He.x=j),Rt<U&&(He.width=U-ft),g.splice(v,1);break}}else{hn>H&&(He.height+=hn-H,He.y=H),Xt<ue&&(He.height=ue-hn),g.splice(v,1);break}}}return g},n.findHostInstance=qx,n.findHostInstanceWithNoPortals=function(g){return g=F(g),g=g!==null?G(g):null,g===null?null:g.stateNode},n.findHostInstanceWithWarning=function(g){return qx(g)},n.flushControlled=function(g){var v=Sn;Sn|=1;var E=Jn.transition,j=An;try{Jn.transition=null,An=1,g()}finally{An=j,Jn.transition=E,Sn=v,Sn===0&&(mc(),Qa())}},n.flushPassiveEffects=eo,n.flushSync=Cu,n.focusWithin=function(g,v){if(!te)throw Error(s(363));for(g=Yd(g),v=Da(g,v),v=Array.from(v),g=0;g<v.length;){var E=v[g++];if(!Ze(E)){if(E.tag===5&&gt(E.stateNode))return!0;for(E=E.child;E!==null;)v.push(E),E=E.sibling}}return!1},n.getCurrentUpdatePriority=function(){return An},n.getFindAllNodesFailureDescription=function(g,v){if(!te)throw Error(s(363));var E=0,j=[];g=[Yd(g),0];for(var U=0;U<g.length;){var H=g[U++],ue=g[U++],Se=v[ue];if((H.tag!==5||!Ze(H))&&(Kd(H,Se)&&(j.push(gl(Se)),ue++,ue>E&&(E=ue)),ue<v.length))for(H=H.child;H!==null;)g.push(H,ue),H=H.sibling}if(E<v.length){for(g=[];E<v.length;E++)g.push(gl(v[E]));return`findAllNodes was able to match part of the selector:
  `+(j.join(" > ")+`

No matching component was found for:
  `)+g.join(" > ")}return null},n.getPublicRootInstance=function(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return ee(g.child.stateNode);default:return g.child.stateNode}},n.injectIntoDevTools=function(g){if(g={bundleType:g.bundleType,version:g.version,rendererPackageName:g.rendererPackageName,rendererConfig:g.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:Sp,findFiberByHostInstance:g.findFiberByHostInstance||Xx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")g=!1;else{var v=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(v.isDisabled||!v.supportsFiber)g=!0;else{try{Ed=v.inject(g),Xs=v}catch{}g=!!v.checkDCE}}return g},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(g,v,E,j){if(!te)throw Error(s(363));g=Ro(g,v);var U=St(g,E,j).disconnect;return{disconnect:function(){U()}}},n.registerMutableSourceForHydration=function(g,v){var E=v._getVersion;E=E(v._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[v,E]:g.mutableSourceEagerHydrationData.push(v,E)},n.runWithPriority=function(g,v){var E=An;try{return An=g,v()}finally{An=E}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(g,v,E,j){var U=v.current,H=Bn(),ue=Es(U);return E=$x(E),v.context===null?v.context=E:v.pendingContext=E,v=bo(H,ue),v.payload={element:g},j=j===void 0?null:j,j!==null&&(v.callback=j),ll(U,v),g=$i(U,ue,H),g!==null&&zh(g,U,ue),ue},n}),kC}var j6;function gEe(){return j6||(j6=1,NC.exports=mEe()),NC.exports}var yEe=gEe();const vEe=Zn(yEe);var jC={exports:{}},IC={};var I6;function xEe(){return I6||(I6=1,(function(t){function e($,B){var Y=$.length;$.push(B);e:for(;0<Y;){var X=Y-1>>>1,ne=$[X];if(0<i(ne,B))$[X]=B,$[Y]=ne,Y=X;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var B=$[0],Y=$.pop();if(Y!==B){$[0]=Y;e:for(var X=0,ne=$.length,se=ne>>>1;X<se;){var ye=2*(X+1)-1,Ne=$[ye],Ee=ye+1,Oe=$[Ee];if(0>i(Ne,Y))Ee<ne&&0>i(Oe,Ne)?($[X]=Oe,$[Ee]=Y,X=Ee):($[X]=Ne,$[ye]=Y,X=ye);else if(Ee<ne&&0>i(Oe,Y))$[X]=Oe,$[Ee]=Y,X=Ee;else break e}}return B}function i($,B){var Y=$.sortIndex-B.sortIndex;return Y!==0?Y:$.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],u=[],f=1,h=null,m=3,y=!1,w=!1,b=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T($){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=$)r(u),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(u)}}function A($){if(b=!1,T($),!w)if(n(l)!==null)w=!0,ee(R);else{var B=n(u);B!==null&&ae(A,B.startTime-$)}}function R($,B){w=!1,b&&(b=!1,_(k),k=-1),y=!0;var Y=m;try{for(T(B),h=n(l);h!==null&&(!(h.expirationTime>B)||$&&!F());){var X=h.callback;if(typeof X=="function"){h.callback=null,m=h.priorityLevel;var ne=X(h.expirationTime<=B);B=t.unstable_now(),typeof ne=="function"?h.callback=ne:h===n(l)&&r(l),T(B)}else r(l);h=n(l)}if(h!==null)var se=!0;else{var ye=n(u);ye!==null&&ae(A,ye.startTime-B),se=!1}return se}finally{h=null,m=Y,y=!1}}var N=!1,O=null,k=-1,C=5,I=-1;function F(){return!(t.unstable_now()-I<C)}function V(){if(O!==null){var $=t.unstable_now();I=$;var B=!0;try{B=O(!0,$)}finally{B?W():(N=!1,O=null)}}else N=!1}var W;if(typeof M=="function")W=function(){M(V)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,J=G.port2;G.port1.onmessage=V,W=function(){J.postMessage(null)}}else W=function(){x(V,0)};function ee($){O=$,N||(N=!0,W())}function ae($,B){k=x(function(){$(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,ee(R))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var Y=m;m=B;try{return $()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,B){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Y=m;m=$;try{return B()}finally{m=Y}},t.unstable_scheduleCallback=function($,B,Y){var X=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?X+Y:X):Y=X,$){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Y+ne,$={id:f++,callback:B,priorityLevel:$,startTime:Y,expirationTime:ne,sortIndex:-1},Y>X?($.sortIndex=Y,e(u,$),n(l)===null&&$===n(u)&&(b?(_(k),k=-1):b=!0,ae(A,Y-X))):($.sortIndex=ne,e(l,$),w||y||(w=!0,ee(R))),$},t.unstable_shouldYield=F,t.unstable_wrapCallback=function($){var B=m;return function(){var Y=m;m=B;try{return $.apply(this,arguments)}finally{m=Y}}}})(IC)),IC}var D6;function bEe(){return D6||(D6=1,jC.exports=xEe()),jC.exports}var L6=bEe();const _j={},tq=t=>void Object.assign(_j,t);function wEe(t,e){function n(f,{args:h=[],attach:m,...y},w){let b=`${f[0].toUpperCase()}${f.slice(1)}`,x;if(f==="primitive"){if(y.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const _=y.object;x=im(_,{type:f,root:w,attach:m,primitive:!0})}else{const _=_j[b];if(!_)throw new Error(`R3F: ${b} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");x=im(new _(...h),{type:f,root:w,attach:m,memoizedProps:{args:h}})}return x.__r3f.attach===void 0&&(x.isBufferGeometry?x.__r3f.attach="geometry":x.isMaterial&&(x.__r3f.attach="material")),b!=="inject"&&UC(x,y),x}function r(f,h){let m=!1;if(h){var y,w;(y=h.__r3f)!=null&&y.attach?LC(f,h,h.__r3f.attach):h.isObject3D&&f.isObject3D&&(f.add(h),m=!0),m||(w=f.__r3f)==null||w.objects.push(h),h.__r3f||im(h,{}),h.__r3f.parent=f,DO(h),am(h)}}function i(f,h,m){let y=!1;if(h){var w,b;if((w=h.__r3f)!=null&&w.attach)LC(f,h,h.__r3f.attach);else if(h.isObject3D&&f.isObject3D){h.parent=f,h.dispatchEvent({type:"added"}),f.dispatchEvent({type:"childadded",child:h});const x=f.children.filter(M=>M!==h),_=x.indexOf(m);f.children=[...x.slice(0,_),h,...x.slice(_)],y=!0}y||(b=f.__r3f)==null||b.objects.push(h),h.__r3f||im(h,{}),h.__r3f.parent=f,DO(h),am(h)}}function a(f,h,m=!1){f&&[...f].forEach(y=>s(h,y,m))}function s(f,h,m){if(h){var y,w,b;if(h.__r3f&&(h.__r3f.parent=null),(y=f.__r3f)!=null&&y.objects&&(f.__r3f.objects=f.__r3f.objects.filter(A=>A!==h)),(w=h.__r3f)!=null&&w.attach)V6(f,h,h.__r3f.attach);else if(h.isObject3D&&f.isObject3D){var x;f.remove(h),(x=h.__r3f)!=null&&x.root&&CEe(Yw(h),h)}const M=(b=h.__r3f)==null?void 0:b.primitive,T=!M&&(m===void 0?h.dispose!==null:m);if(!M){var _;a((_=h.__r3f)==null?void 0:_.objects,h,T),a(h.children,h,T)}if(delete h.__r3f,T&&h.dispose&&h.type!=="Scene"){const A=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?L6.unstable_scheduleCallback(L6.unstable_IdlePriority,A):A()}am(f)}}function o(f,h,m,y){var w;const b=(w=f.__r3f)==null?void 0:w.parent;if(!b)return;const x=n(h,m,f.__r3f.root);if(f.children){for(const _ of f.children)_.__r3f&&r(x,_);f.children=f.children.filter(_=>!_.__r3f)}f.__r3f.objects.forEach(_=>r(x,_)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||s(b,f),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),r(b,x),x.raycast&&x.__r3f.eventCount&&Yw(x).getState().internal.interaction.push(x),[y,y.alternate].forEach(_=>{_!==null&&(_.stateNode=x,_.ref&&(typeof _.ref=="function"?_.ref(x):_.ref.current=x))})}const l=()=>{};return{reconciler:vEe({createInstance:n,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,h)=>{if(!h)return;const m=f.getState().scene;m.__r3f&&(m.__r3f.root=f,r(m,h))},removeChildFromContainer:(f,h)=>{h&&s(f.getState().scene,h)},insertInContainerBefore:(f,h,m)=>{if(!h||!m)return;const y=f.getState().scene;y.__r3f&&i(y,h,m)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var h;return!!((h=f?.__r3f)!=null?h:{}).handlers},prepareUpdate(f,h,m,y){var w;if(((w=f?.__r3f)!=null?w:{}).primitive&&y.object&&y.object!==f)return[!0];{const{args:x=[],children:_,...M}=y,{args:T=[],children:A,...R}=m;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((O,k)=>O!==T[k]))return[!0];const N=lq(f,M,R,!0);return N.changes.length?[!1,N]:null}},commitUpdate(f,[h,m],y,w,b,x){h?o(f,y,b,x):UC(f,m)},commitMount(f,h,m,y){var w;const b=(w=f.__r3f)!=null?w:{};f.raycast&&b.handlers&&b.eventCount&&Yw(f).getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>im(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var h;const{attach:m,parent:y}=(h=f.__r3f)!=null?h:{};m&&y&&V6(y,f,m),f.isObject3D&&(f.visible=!1),am(f)},unhideInstance(f,h){var m;const{attach:y,parent:w}=(m=f.__r3f)!=null?m:{};y&&w&&LC(w,f,y),(f.isObject3D&&h.visible==null||h.visible)&&(f.visible=!0),am(f)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Sm.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Pr.fun(performance.now)?performance.now:Pr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Pr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Pr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:UC}}var U6,F6;const DC=t=>"colorSpace"in t||"outputColorSpace"in t,nq=()=>{var t;return(t=_j.ColorManagement)!=null?t:null},rq=t=>t&&t.isOrthographicCamera,_Ee=t=>t&&t.hasOwnProperty("current"),wx=typeof window<"u"&&((U6=window.document)!=null&&U6.createElement||((F6=window.navigator)==null?void 0:F6.product)==="ReactNative")?L.useLayoutEffect:L.useEffect;function iq(t){const e=L.useRef(t);return wx(()=>void(e.current=t),[t]),e}function SEe({set:t}){return wx(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class aq extends L.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}aq.getDerivedStateFromError=()=>({error:!0});const sq="__default",z6=new Map,MEe=t=>t&&!!t.memoized&&!!t.changes;function oq(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const Zy=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function Yw(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Pr={obj:t=>t===Object(t)&&!Pr.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Pr.str(t)||Pr.num(t)||Pr.boo(t))return t===e;const a=Pr.obj(t);if(a&&r==="reference")return t===e;const s=Pr.arr(t);if(s&&n==="reference")return t===e;if((s||a)&&t===e)return!0;let o;for(o in t)if(!(o in e))return!1;if(a&&n==="shallow"&&r==="shallow"){for(o in i?e:t)if(!Pr.equ(t[o],e[o],{strict:i,objects:"reference"}))return!1}else for(o in i?e:t)if(t[o]!==e[o])return!1;if(Pr.und(o)){if(s&&t.length===0&&e.length===0||a&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function TEe(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function AEe(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function im(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function IO(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((a,s)=>a[s],t),{target:n,key:i}}else return{target:n,key:e}}const B6=/-\d+$/;function LC(t,e,n){if(Pr.str(n)){if(B6.test(n)){const a=n.replace(B6,""),{target:s,key:o}=IO(t,a);Array.isArray(s[o])||(s[o]=[])}const{target:r,key:i}=IO(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function V6(t,e,n){var r,i;if(Pr.str(n)){const{target:a,key:s}=IO(t,n),o=e.__r3f.previousAttach;o===void 0?delete a[s]:a[s]=o}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function lq(t,{children:e,key:n,ref:r,...i},{children:a,key:s,ref:o,...l}={},u=!1){const f=t.__r3f,h=Object.entries(i),m=[];if(u){const w=Object.keys(l);for(let b=0;b<w.length;b++)i.hasOwnProperty(w[b])||h.unshift([w[b],sq+"remove"])}h.forEach(([w,b])=>{var x;if((x=t.__r3f)!=null&&x.primitive&&w==="object"||Pr.equ(b,l[w]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(w))return m.push([w,b,!0,[]]);let _=[];w.includes("-")&&(_=w.split("-")),m.push([w,b,!1,_]);for(const M in i){const T=i[M];M.startsWith(`${w}-`)&&m.push([M,T,!1,M.split("-")])}});const y={...i};return f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.args&&(y.args=f.memoizedProps.args),f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.attach&&(y.attach=f.memoizedProps.attach),{memoized:y,changes:m}}function UC(t,e){var n;const r=t.__r3f,i=r?.root,a=i==null||i.getState==null?void 0:i.getState(),{memoized:s,changes:o}=MEe(e)?e:lq(t,e),l=r?.eventCount;t.__r3f&&(t.__r3f.memoizedProps=s);for(let m=0;m<o.length;m++){let[y,w,b,x]=o[m];if(DC(t)){const A="srgb",R="srgb-linear";y==="encoding"?(y="colorSpace",w=w===3001?A:R):y==="outputEncoding"&&(y="outputColorSpace",w=w===3001?A:R)}let _=t,M=_[y];if(x.length&&(M=x.reduce((T,A)=>T[A],t),!(M&&M.set))){const[T,...A]=x.reverse();_=A.reverse().reduce((R,N)=>R[N],t),y=T}if(w===sq+"remove")if(_.constructor){let T=z6.get(_.constructor);T||(T=new _.constructor,z6.set(_.constructor,T)),w=T[y]}else w=0;if(b&&r)w?r.handlers[y]=w:delete r.handlers[y],r.eventCount=Object.keys(r.handlers).length;else if(M&&M.set&&(M.copy||M instanceof ih)){if(Array.isArray(w))M.fromArray?M.fromArray(w):M.set(...w);else if(M.copy&&w&&w.constructor&&M.constructor===w.constructor)M.copy(w);else if(w!==void 0){var u;const T=(u=M)==null?void 0:u.isColor;!T&&M.setScalar?M.setScalar(w):M instanceof ih&&w instanceof ih?M.mask=w.mask:M.set(w),!nq()&&a&&!a.linear&&T&&M.convertSRGBToLinear()}}else{var f;if(_[y]=w,(f=_[y])!=null&&f.isTexture&&_[y].format===Si&&_[y].type===zs&&a){const T=_[y];DC(T)&&DC(a.gl)?T.colorSpace=a.gl.outputColorSpace:T.encoding=a.gl.outputEncoding}}am(t)}if(r&&r.parent&&t.raycast&&l!==r.eventCount){const m=Yw(t).getState().internal,y=m.interaction.indexOf(t);y>-1&&m.interaction.splice(y,1),r.eventCount&&m.interaction.push(t)}return!(o.length===1&&o[0][0]==="onUpdate")&&o.length&&(n=t.__r3f)!=null&&n.parent&&DO(t),t}function am(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function DO(t){t.onUpdate==null||t.onUpdate(t)}function cq(t,e){t.manual||(rq(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function Ew(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function EEe(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Sm.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Sm.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Sm.ContinuousEventPriority;default:return Sm.DefaultEventPriority}}function uq(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function CEe(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{uq(n.capturedMap,e,r,i)})}function PEe(t){function e(l){const{internal:u}=t.getState(),f=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(f*f+h*h))}function n(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(f=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+f]}))}function r(l,u){const f=t.getState(),h=new Set,m=[],y=u?u(f.internal.interaction):f.internal.interaction;for(let _=0;_<y.length;_++){const M=Zy(y[_]);M&&(M.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(l,f);function w(_){const M=Zy(_);if(!M||!M.events.enabled||M.raycaster.camera===null)return[];if(M.raycaster.camera===void 0){var T;M.events.compute==null||M.events.compute(l,M,(T=M.previousRoot)==null?void 0:T.getState()),M.raycaster.camera===void 0&&(M.raycaster.camera=null)}return M.raycaster.camera?M.raycaster.intersectObject(_,!0):[]}let b=y.flatMap(w).sort((_,M)=>{const T=Zy(_.object),A=Zy(M.object);return!T||!A?_.distance-M.distance:A.events.priority-T.events.priority||_.distance-M.distance}).filter(_=>{const M=Ew(_);return h.has(M)?!1:(h.add(M),!0)});f.events.filter&&(b=f.events.filter(b,f));for(const _ of b){let M=_.object;for(;M;){var x;(x=M.__r3f)!=null&&x.eventCount&&m.push({..._,eventObject:M}),M=M.parent}}if("pointerId"in l&&f.internal.capturedMap.has(l.pointerId))for(let _ of f.internal.capturedMap.get(l.pointerId).values())h.has(Ew(_.intersection))||m.push(_.intersection);return m}function i(l,u,f,h){const m=t.getState();if(l.length){const y={stopped:!1};for(const w of l){const b=Zy(w.object)||m,{raycaster:x,pointer:_,camera:M,internal:T}=b,A=new le(_.x,_.y,0).unproject(M),R=I=>{var F,V;return(F=(V=T.capturedMap.get(I))==null?void 0:V.has(w.eventObject))!=null?F:!1},N=I=>{const F={intersection:w,target:u.target};T.capturedMap.has(I)?T.capturedMap.get(I).set(w.eventObject,F):T.capturedMap.set(I,new Map([[w.eventObject,F]])),u.target.setPointerCapture(I)},O=I=>{const F=T.capturedMap.get(I);F&&uq(T.capturedMap,w.eventObject,F,I)};let k={};for(let I in u){let F=u[I];typeof F!="function"&&(k[I]=F)}let C={...w,...k,pointer:_,intersections:l,stopped:y.stopped,delta:f,unprojectedPoint:A,ray:x.ray,camera:M,stopPropagation(){const I="pointerId"in u&&T.capturedMap.get(u.pointerId);if((!I||I.has(w.eventObject))&&(C.stopped=y.stopped=!0,T.hovered.size&&Array.from(T.hovered.values()).find(F=>F.eventObject===w.eventObject))){const F=l.slice(0,l.indexOf(w));a([...F,w])}},target:{hasPointerCapture:R,setPointerCapture:N,releasePointerCapture:O},currentTarget:{hasPointerCapture:R,setPointerCapture:N,releasePointerCapture:O},nativeEvent:u};if(h(C),y.stopped===!0)break}}return l}function a(l){const{internal:u}=t.getState();for(const f of u.hovered.values())if(!l.length||!l.find(h=>h.object===f.object&&h.index===f.index&&h.instanceId===f.instanceId)){const m=f.eventObject.__r3f,y=m?.handlers;if(u.hovered.delete(Ew(f)),m!=null&&m.eventCount){const w={...f,intersections:l};y.onPointerOut==null||y.onPointerOut(w),y.onPointerLeave==null||y.onPointerLeave(w)}}}function s(l,u){for(let f=0;f<u.length;f++){const h=u[f].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return u=>{const{internal:f}=t.getState();"pointerId"in u&&f.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(u.pointerId)&&(f.capturedMap.delete(u.pointerId),a([]))})}}return function(f){const{onPointerMissed:h,internal:m}=t.getState();m.lastEvent.current=f;const y=l==="onPointerMove",w=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=r(f,y?n:void 0),_=w?e(f):0;l==="onPointerDown"&&(m.initialClick=[f.offsetX,f.offsetY],m.initialHits=x.map(T=>T.eventObject)),w&&!x.length&&_<=2&&(s(f,m.interaction),h&&h(f)),y&&a(x);function M(T){const A=T.eventObject,R=A.__r3f,N=R?.handlers;if(R!=null&&R.eventCount)if(y){if(N.onPointerOver||N.onPointerEnter||N.onPointerOut||N.onPointerLeave){const O=Ew(T),k=m.hovered.get(O);k?k.stopped&&T.stopPropagation():(m.hovered.set(O,T),N.onPointerOver==null||N.onPointerOver(T),N.onPointerEnter==null||N.onPointerEnter(T))}N.onPointerMove==null||N.onPointerMove(T)}else{const O=N[l];O?(!w||m.initialHits.includes(A))&&(s(f,m.interaction.filter(k=>!m.initialHits.includes(k))),O(T)):w&&m.initialHits.includes(A)&&s(f,m.interaction.filter(k=>!m.initialHits.includes(k)))}}i(x,f,_,M)}}return{handlePointer:o}}const NEe=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],dq=t=>!!(t!=null&&t.render),Sj=L.createContext(null),OEe=(t,e)=>{const n=J9((o,l)=>{const u=new le,f=new le,h=new le;function m(_=l().camera,M=f,T=l().size){const{width:A,height:R,top:N,left:O}=T,k=A/R;M.isVector3?h.copy(M):h.set(...M);const C=_.getWorldPosition(u).distanceTo(h);if(rq(_))return{width:A/_.zoom,height:R/_.zoom,top:N,left:O,factor:1,distance:C,aspect:k};{const I=_.fov*Math.PI/180,F=2*Math.tan(I/2)*C,V=F*(A/R);return{width:V,height:F,top:N,left:O,factor:A/V,distance:C,aspect:k}}}let y;const w=_=>o(M=>({performance:{...M.performance,current:_}})),b=new Ke;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(_=1)=>t(l(),_),advance:(_,M)=>e(_,M,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new yj,pointer:b,mouse:b,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const _=l();y&&clearTimeout(y),_.performance.current!==_.performance.min&&w(_.performance.min),y=setTimeout(()=>w(l().performance.max),_.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:_=>o(M=>({...M,events:{...M.events,..._}})),setSize:(_,M,T,A,R)=>{const N=l().camera,O={width:_,height:M,top:A||0,left:R||0,updateStyle:T};o(k=>({size:O,viewport:{...k.viewport,...m(N,f,O)}}))},setDpr:_=>o(M=>{const T=oq(_);return{viewport:{...M.viewport,dpr:T,initialDpr:M.viewport.initialDpr||T}}}),setFrameloop:(_="always")=>{const M=l().clock;M.stop(),M.elapsedTime=0,_!=="never"&&(M.start(),M.elapsedTime=0),o(()=>({frameloop:_}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:L.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(_,M,T)=>{const A=l().internal;return A.priority=A.priority+(M>0?1:0),A.subscribers.push({ref:_,priority:M,store:T}),A.subscribers=A.subscribers.sort((R,N)=>R.priority-N.priority),()=>{const R=l().internal;R!=null&&R.subscribers&&(R.priority=R.priority-(M>0?1:0),R.subscribers=R.subscribers.filter(N=>N.ref!==_))}}}}}),r=n.getState();let i=r.size,a=r.viewport.dpr,s=r.camera;return n.subscribe(()=>{const{camera:o,size:l,viewport:u,gl:f,set:h}=n.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==a){var m;i=l,a=u.dpr,cq(o,l),f.setPixelRatio(u.dpr);const y=(m=l.updateStyle)!=null?m:typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(l.width,l.height,y)}o!==s&&(s=o,h(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(o)}})))}),n.subscribe(o=>t(o)),n};let Cw,REe=new Set,kEe=new Set,jEe=new Set;function FC(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function Jy(t,e){switch(t){case"before":return FC(REe,e);case"after":return FC(kEe,e);case"tail":return FC(jEe,e)}}let zC,BC;function VC(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),zC=e.internal.subscribers,Cw=0;Cw<zC.length;Cw++)BC=zC[Cw],BC.ref.current(BC.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function IEe(t){let e=!1,n=!1,r,i,a;function s(u){i=requestAnimationFrame(s),e=!0,r=0,Jy("before",u),n=!0;for(const h of t.values()){var f;a=h.store.getState(),a.internal.active&&(a.frameloop==="always"||a.internal.frames>0)&&!((f=a.gl.xr)!=null&&f.isPresenting)&&(r+=VC(u,a))}if(n=!1,Jy("after",u),r===0)return Jy("tail",u),e=!1,cancelAnimationFrame(i)}function o(u,f=1){var h;if(!u)return t.forEach(m=>o(m.store.getState(),f));(h=u.gl.xr)!=null&&h.isPresenting||!u.internal.active||u.frameloop==="never"||(f>1?u.internal.frames=Math.min(60,u.internal.frames+f):n?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(s)))}function l(u,f=!0,h,m){if(f&&Jy("before",u),h)VC(u,h,m);else for(const y of t.values())VC(u,y.store.getState());f&&Jy("after",u)}return{loop:s,invalidate:o,advance:l}}function Mj(){const t=L.useContext(Sj);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Ji(t=n=>n,e){return Mj()(t,e)}function Rg(t,e=0){const n=Mj(),r=n.getState().internal.subscribe,i=iq(t);return wx(()=>r(i,e,n),[e,r,n]),null}const H6=new WeakMap;function fq(t,e){return function(n,...r){let i=H6.get(n);return i||(i=new n,H6.set(n,i)),t&&t(i),Promise.all(r.map(a=>new Promise((s,o)=>i.load(a,l=>{l.scene&&Object.assign(l,TEe(l.scene)),s(l)},e,l=>o(new Error(`Could not load ${a}: ${l?.message}`))))))}}function hg(t,e,n,r){const i=Array.isArray(e)?e:[e],a=uEe(fq(n,r),[t,...i],{equal:Pr.equ});return Array.isArray(e)?a:a[0]}hg.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return dEe(fq(n),[t,...r])};hg.clear=function(t,e){const n=Array.isArray(e)?e:[e];return fEe([t,...n])};const pg=new Map,{invalidate:W6,advance:G6}=IEe(pg),{reconciler:W0,applyProps:Xu}=wEe(pg,EEe),nm={objects:"shallow",strict:!1},DEe=(t,e)=>{const n=typeof t=="function"?t(e):t;return dq(n)?n:new SS({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function LEe(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:a,left:s,updateStyle:o=n}=e;return{width:r,height:i,top:a,left:s,updateStyle:o}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:a,left:s}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:a,left:s,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function UEe(t){const e=pg.get(t),n=e?.fiber,r=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,a=r||OEe(W6,G6),s=n||W0.createContainer(a,Sm.ConcurrentRoot,null,!1,null,"",i,null);e||pg.set(t,{fiber:s,store:a});let o,l=!1,u;return{configure(f={}){let{gl:h,size:m,scene:y,events:w,onCreated:b,shadows:x=!1,linear:_=!1,flat:M=!1,legacy:T=!1,orthographic:A=!1,frameloop:R="always",dpr:N=[1,2],performance:O,raycaster:k,camera:C,onPointerMissed:I}=f,F=a.getState(),V=F.gl;F.gl||F.set({gl:V=DEe(h,t)});let W=F.raycaster;W||F.set({raycaster:W=new wj});const{params:G,...J}=k||{};if(Pr.equ(J,W,nm)||Xu(W,{...J}),Pr.equ(G,W.params,nm)||Xu(W,{params:{...W.params,...G}}),!F.camera||F.camera===u&&!Pr.equ(u,C,nm)){u=C;const Y=C instanceof fx,X=Y?C:A?new zc(0,0,0,0,.1,1e3):new ci(75,0,.1,1e3);Y||(X.position.z=5,C&&(Xu(X,C),("aspect"in C||"left"in C||"right"in C||"bottom"in C||"top"in C)&&(X.manual=!0,X.updateProjectionMatrix())),!F.camera&&!(C!=null&&C.rotation)&&X.lookAt(0,0,0)),F.set({camera:X}),W.camera=X}if(!F.scene){let Y;y!=null&&y.isScene?Y=y:(Y=new mx,y&&Xu(Y,y)),F.set({scene:im(Y)})}if(!F.xr){var ee;const Y=(se,ye)=>{const Ne=a.getState();Ne.frameloop!=="never"&&G6(se,!0,Ne,ye)},X=()=>{const se=a.getState();se.gl.xr.enabled=se.gl.xr.isPresenting,se.gl.xr.setAnimationLoop(se.gl.xr.isPresenting?Y:null),se.gl.xr.isPresenting||W6(se)},ne={connect(){const se=a.getState().gl;se.xr.addEventListener("sessionstart",X),se.xr.addEventListener("sessionend",X)},disconnect(){const se=a.getState().gl;se.xr.removeEventListener("sessionstart",X),se.xr.removeEventListener("sessionend",X)}};typeof((ee=V.xr)==null?void 0:ee.addEventListener)=="function"&&ne.connect(),F.set({xr:ne})}if(V.shadowMap){const Y=V.shadowMap.enabled,X=V.shadowMap.type;if(V.shadowMap.enabled=!!x,Pr.boo(x))V.shadowMap.type=Tv;else if(Pr.str(x)){var ae;const ne={basic:q$,percentage:mS,soft:Tv,variance:Xo};V.shadowMap.type=(ae=ne[x])!=null?ae:Tv}else Pr.obj(x)&&Object.assign(V.shadowMap,x);(Y!==V.shadowMap.enabled||X!==V.shadowMap.type)&&(V.shadowMap.needsUpdate=!0)}const $=nq();$&&("enabled"in $?$.enabled=!T:"legacyMode"in $&&($.legacyMode=T)),l||Xu(V,{outputEncoding:_?3e3:3001,toneMapping:M?Ol:Ok}),F.legacy!==T&&F.set(()=>({legacy:T})),F.linear!==_&&F.set(()=>({linear:_})),F.flat!==M&&F.set(()=>({flat:M})),h&&!Pr.fun(h)&&!dq(h)&&!Pr.equ(h,V,nm)&&Xu(V,h),w&&!F.events.handlers&&F.set({events:w(a)});const B=LEe(t,m);return Pr.equ(B,F.size,nm)||F.setSize(B.width,B.height,B.updateStyle,B.top,B.left),N&&F.viewport.dpr!==oq(N)&&F.setDpr(N),F.frameloop!==R&&F.setFrameloop(R),F.onPointerMissed||F.set({onPointerMissed:I}),O&&!Pr.equ(O,F.performance,nm)&&F.set(Y=>({performance:{...Y.performance,...O}})),o=b,l=!0,this},render(f){return l||this.configure(),W0.updateContainer(c.jsx(FEe,{store:a,children:f,onCreated:o,rootElement:t}),s,null,()=>{}),a},unmount(){hq(t)}}}function FEe({store:t,children:e,onCreated:n,rootElement:r}){return wx(()=>{const i=t.getState();i.set(a=>({internal:{...a.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),c.jsx(Sj.Provider,{value:t,children:e})}function hq(t,e){const n=pg.get(t),r=n?.fiber;if(r){const i=n?.store.getState();i&&(i.internal.active=!1),W0.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var a,s,o,l;i.events.disconnect==null||i.events.disconnect(),(a=i.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=i.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),AEe(i),pg.delete(t)}catch{}},500)})}}function zEe(t,e,n){return c.jsx(BEe,{children:t,container:e,state:n},e.uuid)}function BEe({state:t={},children:e,container:n}){const{events:r,size:i,...a}=t,s=Mj(),[o]=L.useState(()=>new wj),[l]=L.useState(()=>new Ke),u=L.useCallback((h,m)=>{const y={...h};Object.keys(h).forEach(b=>{(NEe.includes(b)||h[b]!==m[b]&&m[b])&&delete y[b]});let w;if(m&&i){const b=m.camera;w=h.viewport.getCurrentViewport(b,new le,i),b!==h.camera&&cq(b,i)}return{...y,scene:n,raycaster:o,pointer:l,mouse:l,previousRoot:s,events:{...h.events,...m?.events,...r},size:{...h.size,...i},viewport:{...h.viewport,...w},...a}},[t]),[f]=L.useState(()=>{const h=s.getState();return J9((y,w)=>({...h,scene:n,raycaster:o,pointer:l,mouse:l,previousRoot:s,events:{...h.events,...r},size:{...h.size,...i},...a,set:y,get:w,setEvents:b=>y(x=>({...x,events:{...x.events,...b}}))}))});return L.useEffect(()=>{const h=s.subscribe(m=>f.setState(y=>u(m,y)));return()=>{h()}},[u]),L.useEffect(()=>{f.setState(h=>u(s.getState(),h))},[u]),L.useEffect(()=>()=>{f.destroy()},[]),c.jsx(c.Fragment,{children:W0.createPortal(c.jsx(Sj.Provider,{value:f,children:e}),f,null)})}W0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:L.version});const HC={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function VEe(t){const{handlePointer:e}=PEe(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(HC).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:a}=t.getState();a.disconnect==null||a.disconnect(),i(s=>({events:{...s.events,connected:n}})),Object.entries((r=a.handlers)!=null?r:[]).forEach(([s,o])=>{const[l,u]=HC[s];n.addEventListener(l,o,{passive:u})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([a,s])=>{if(r&&r.connected instanceof HTMLElement){const[o]=HC[a];r.connected.removeEventListener(o,s)}}),n(a=>({events:{...a.events,connected:void 0}}))}}}}function $6(t,e){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...r),e)}}function HEe({debounce:t,scroll:e,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,s]=L.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=L.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),l=t?typeof t=="number"?t:t.scroll:null,u=t?typeof t=="number"?t:t.resize:null,f=L.useRef(!1);L.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[h,m,y]=L.useMemo(()=>{const _=()=>{if(!o.current.element)return;const{left:M,top:T,width:A,height:R,bottom:N,right:O,x:k,y:C}=o.current.element.getBoundingClientRect(),I={left:M,top:T,width:A,height:R,bottom:N,right:O,x:k,y:C};o.current.element instanceof HTMLElement&&r&&(I.height=o.current.element.offsetHeight,I.width=o.current.element.offsetWidth),Object.freeze(I),f.current&&!qEe(o.current.lastBounds,I)&&s(o.current.lastBounds=I)};return[_,u?$6(_,u):_,l?$6(_,l):_]},[s,r,l,u]);function w(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",y,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function b(){o.current.element&&(o.current.resizeObserver=new i(y),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(_=>_.addEventListener("scroll",y,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const x=_=>{!_||_===o.current.element||(w(),o.current.element=_,o.current.scrollContainers=pq(_),b())};return GEe(y,!!e),WEe(m),L.useEffect(()=>{w(),b()},[e,y,m]),L.useEffect(()=>w,[]),[x,a,h]}function WEe(t){L.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function GEe(t,e){L.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function pq(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(a=>a==="auto"||a==="scroll")&&e.push(t),[...e,...pq(t.parentElement)]}const $Ee=["x","y","top","bottom","left","right","width","height"],qEe=(t,e)=>$Ee.every(n=>t[n]===e[n]);var XEe=Object.defineProperty,YEe=Object.defineProperties,KEe=Object.getOwnPropertyDescriptors,q6=Object.getOwnPropertySymbols,ZEe=Object.prototype.hasOwnProperty,JEe=Object.prototype.propertyIsEnumerable,X6=(t,e,n)=>e in t?XEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Y6=(t,e)=>{for(var n in e||(e={}))ZEe.call(e,n)&&X6(t,n,e[n]);if(q6)for(var n of q6(e))JEe.call(e,n)&&X6(t,n,e[n]);return t},QEe=(t,e)=>YEe(t,KEe(e)),K6,Z6;typeof window<"u"&&((K6=window.document)!=null&&K6.createElement||((Z6=window.navigator)==null?void 0:Z6.product)==="ReactNative")?L.useLayoutEffect:L.useEffect;function mq(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=t.child;for(;r;){const i=mq(r,e,n);if(i)return i;r=r.sibling}}function gq(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const J6=console.error;console.error=function(){const t=[...arguments].join("");if(t?.startsWith("Warning:")&&t.includes("useContext")){console.error=J6;return}return J6.apply(this,arguments)};const Tj=gq(L.createContext(null));class yq extends L.Component{render(){return L.createElement(Tj.Provider,{value:this._reactInternals},this.props.children)}}function e2e(){const t=L.useContext(Tj);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=L.useId();return L.useMemo(()=>{for(const r of[t,t?.alternate]){if(!r)continue;const i=mq(r,!1,a=>{let s=a.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[t,e])}function t2e(){const t=e2e(),[e]=L.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==Tj&&!e.has(i)&&e.set(i,L.useContext(gq(i)))}n=n.return}return e}function n2e(){const t=t2e();return L.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>L.createElement(e,null,L.createElement(n.Provider,QEe(Y6({},r),{value:t.get(n)}))),e=>L.createElement(yq,Y6({},e))),[t])}const r2e=L.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:a,events:s=VEe,eventSource:o,eventPrefix:l,shadows:u,linear:f,flat:h,legacy:m,orthographic:y,frameloop:w,dpr:b,performance:x,raycaster:_,camera:M,scene:T,onPointerMissed:A,onCreated:R,...N},O){L.useMemo(()=>tq(iEe),[]);const k=n2e(),[C,I]=HEe({scroll:!0,debounce:{scroll:50,resize:0},...r}),F=L.useRef(null),V=L.useRef(null);L.useImperativeHandle(O,()=>F.current);const W=iq(A),[G,J]=L.useState(!1),[ee,ae]=L.useState(!1);if(G)throw G;if(ee)throw ee;const $=L.useRef(null);wx(()=>{const Y=F.current;I.width>0&&I.height>0&&Y&&($.current||($.current=UEe(Y)),$.current.configure({gl:a,events:s,shadows:u,linear:f,flat:h,legacy:m,orthographic:y,frameloop:w,dpr:b,performance:x,raycaster:_,camera:M,scene:T,size:I,onPointerMissed:(...X)=>W.current==null?void 0:W.current(...X),onCreated:X=>{X.events.connect==null||X.events.connect(o?_Ee(o)?o.current:o:V.current),l&&X.setEvents({compute:(ne,se)=>{const ye=ne[l+"X"],Ne=ne[l+"Y"];se.pointer.set(ye/se.size.width*2-1,-(Ne/se.size.height)*2+1),se.raycaster.setFromCamera(se.pointer,se.camera)}}),R?.(X)}}),$.current.render(c.jsx(k,{children:c.jsx(aq,{set:ae,children:c.jsx(L.Suspense,{fallback:c.jsx(SEe,{set:J}),children:e??null})})})))}),L.useEffect(()=>{const Y=F.current;if(Y)return()=>hq(Y)},[]);const B=o?"none":"auto";return c.jsx("div",{ref:V,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:B,...i},...N,children:c.jsx("div",{ref:C,style:{width:"100%",height:"100%"},children:c.jsx("canvas",{ref:F,style:{display:"block"},children:n})})})}),i2e=L.forwardRef(function(e,n){return c.jsx(yq,{children:c.jsx(r2e,{...e,ref:n})})}),vq=parseInt(lx.replace(/\D+/g,""));var co=Uint8Array,td=Uint16Array,LO=Uint32Array,xq=new co([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bq=new co([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a2e=new co([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wq=function(t,e){for(var n=new td(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new LO(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return[n,i]},_q=wq(xq,2),Sq=_q[0],s2e=_q[1];Sq[28]=258,s2e[258]=28;var o2e=wq(bq,0),l2e=o2e[0],UO=new td(32768);for(var Ir=0;Ir<32768;++Ir){var Gu=(Ir&43690)>>>1|(Ir&21845)<<1;Gu=(Gu&52428)>>>2|(Gu&13107)<<2,Gu=(Gu&61680)>>>4|(Gu&3855)<<4,UO[Ir]=((Gu&65280)>>>8|(Gu&255)<<8)>>>1}var Ov=(function(t,e,n){for(var r=t.length,i=0,a=new td(e);i<r;++i)++a[t[i]-1];var s=new td(e);for(i=0;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(n){o=new td(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],f=e-t[i],h=s[t[i]-1]++<<f,m=h|(1<<f)-1;h<=m;++h)o[UO[h]>>>l]=u}else for(o=new td(r),i=0;i<r;++i)t[i]&&(o[i]=UO[s[t[i]-1]++]>>>15-t[i]);return o}),_x=new co(288);for(var Ir=0;Ir<144;++Ir)_x[Ir]=8;for(var Ir=144;Ir<256;++Ir)_x[Ir]=9;for(var Ir=256;Ir<280;++Ir)_x[Ir]=7;for(var Ir=280;Ir<288;++Ir)_x[Ir]=8;var Mq=new co(32);for(var Ir=0;Ir<32;++Ir)Mq[Ir]=5;var c2e=Ov(_x,9,1),u2e=Ov(Mq,5,1),WC=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},$o=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},GC=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},d2e=function(t){return(t/8|0)+(t&7&&1)},f2e=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof td?td:t instanceof LO?LO:co)(n-e);return r.set(t.subarray(e,n)),r},h2e=function(t,e,n){var r=t.length;if(!r||n&&!n.l&&r<5)return e||new co(0);var i=!e||n,a=!n||n.i;n||(n={}),e||(e=new co(r*3));var s=function(Ee){var Oe=e.length;if(Ee>Oe){var $e=new co(Math.max(Oe*2,Ee));$e.set(e),e=$e}},o=n.f||0,l=n.p||0,u=n.b||0,f=n.l,h=n.d,m=n.m,y=n.n,w=r*8;do{if(!f){n.f=o=$o(t,l,1);var b=$o(t,l+1,3);if(l+=3,b)if(b==1)f=c2e,h=u2e,m=9,y=5;else if(b==2){var T=$o(t,l,31)+257,A=$o(t,l+10,15)+4,R=T+$o(t,l+5,31)+1;l+=14;for(var N=new co(R),O=new co(19),k=0;k<A;++k)O[a2e[k]]=$o(t,l+k*3,7);l+=A*3;for(var C=WC(O),I=(1<<C)-1,F=Ov(O,C,1),k=0;k<R;){var V=F[$o(t,l,I)];l+=V&15;var x=V>>>4;if(x<16)N[k++]=x;else{var W=0,G=0;for(x==16?(G=3+$o(t,l,3),l+=2,W=N[k-1]):x==17?(G=3+$o(t,l,7),l+=3):x==18&&(G=11+$o(t,l,127),l+=7);G--;)N[k++]=W}}var J=N.subarray(0,T),ee=N.subarray(T);m=WC(J),y=WC(ee),f=Ov(J,m,1),h=Ov(ee,y,1)}else throw"invalid block type";else{var x=d2e(l)+4,_=t[x-4]|t[x-3]<<8,M=x+_;if(M>r){if(a)throw"unexpected EOF";break}i&&s(u+_),e.set(t.subarray(x,M),u),n.b=u+=_,n.p=l=M*8;continue}if(l>w){if(a)throw"unexpected EOF";break}}i&&s(u+131072);for(var ae=(1<<m)-1,$=(1<<y)-1,B=l;;B=l){var W=f[GC(t,l)&ae],Y=W>>>4;if(l+=W&15,l>w){if(a)throw"unexpected EOF";break}if(!W)throw"invalid length/literal";if(Y<256)e[u++]=Y;else if(Y==256){B=l,f=null;break}else{var X=Y-254;if(Y>264){var k=Y-257,ne=xq[k];X=$o(t,l,(1<<ne)-1)+Sq[k],l+=ne}var se=h[GC(t,l)&$],ye=se>>>4;if(!se)throw"invalid distance";l+=se&15;var ee=l2e[ye];if(ye>3){var ne=bq[ye];ee+=GC(t,l)&(1<<ne)-1,l+=ne}if(l>w){if(a)throw"unexpected EOF";break}i&&s(u+131072);for(var Ne=u+X;u<Ne;u+=4)e[u]=e[u-ee],e[u+1]=e[u+1-ee],e[u+2]=e[u+2-ee],e[u+3]=e[u+3-ee];u=Ne}}n.l=f,n.p=B,n.b=u,f&&(o=1,n.m=m,n.d=h,n.n=y)}while(!o);return u==e.length?e:f2e(e,0,u)},p2e=new co(0),m2e=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Pw(t,e){return h2e((m2e(t),t.subarray(2,-4)),e)}var g2e=typeof TextDecoder<"u"&&new TextDecoder,y2e=0;try{g2e.decode(p2e,{stream:!0}),y2e=1}catch{}const v2e=t=>t&&t.isCubeTexture;class x2e extends ti{constructor(e,n){var r,i;const a=v2e(e),o=((i=a?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(o)),u=Math.pow(2,l),f=3*Math.max(u,112),h=4*u,m=[a?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/f}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${l}.0`],y=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,w=m.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${vq>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,b={map:{value:e},height:{value:n?.height||15},radius:{value:n?.radius||100}},x=new yx(1,16),_=new Ws({uniforms:b,fragmentShader:w,vertexShader:y,side:el});super(x,_)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var b2e=Object.defineProperty,w2e=(t,e,n)=>e in t?b2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_2e=(t,e,n)=>(w2e(t,e+"",n),n);class S2e{constructor(){_2e(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(n);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}}var M2e=Object.defineProperty,T2e=(t,e,n)=>e in t?M2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qt=(t,e,n)=>(T2e(t,typeof e!="symbol"?e+"":e,n),n);const Nw=new Ah,Q6=new Nc,A2e=Math.cos(70*(Math.PI/180)),e8=(t,e)=>(t%e+e)%e;let E2e=class extends S2e{constructor(e,n){super(),Qt(this,"object"),Qt(this,"domElement"),Qt(this,"enabled",!0),Qt(this,"target",new le),Qt(this,"minDistance",0),Qt(this,"maxDistance",1/0),Qt(this,"minZoom",0),Qt(this,"maxZoom",1/0),Qt(this,"minPolarAngle",0),Qt(this,"maxPolarAngle",Math.PI),Qt(this,"minAzimuthAngle",-1/0),Qt(this,"maxAzimuthAngle",1/0),Qt(this,"enableDamping",!1),Qt(this,"dampingFactor",.05),Qt(this,"enableZoom",!0),Qt(this,"zoomSpeed",1),Qt(this,"enableRotate",!0),Qt(this,"rotateSpeed",1),Qt(this,"enablePan",!0),Qt(this,"panSpeed",1),Qt(this,"screenSpacePanning",!0),Qt(this,"keyPanSpeed",7),Qt(this,"zoomToCursor",!1),Qt(this,"autoRotate",!1),Qt(this,"autoRotateSpeed",2),Qt(this,"reverseOrbit",!1),Qt(this,"reverseHorizontalOrbit",!1),Qt(this,"reverseVerticalOrbit",!1),Qt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Qt(this,"mouseButtons",{LEFT:Rf.ROTATE,MIDDLE:Rf.DOLLY,RIGHT:Rf.PAN}),Qt(this,"touches",{ONE:kf.ROTATE,TWO:kf.DOLLY_PAN}),Qt(this,"target0"),Qt(this,"position0"),Qt(this,"zoom0"),Qt(this,"_domElementKeyEvents",null),Qt(this,"getPolarAngle"),Qt(this,"getAzimuthalAngle"),Qt(this,"setPolarAngle"),Qt(this,"setAzimuthalAngle"),Qt(this,"getDistance"),Qt(this,"getZoomScale"),Qt(this,"listenToKeyEvents"),Qt(this,"stopListenToKeyEvents"),Qt(this,"saveState"),Qt(this,"reset"),Qt(this,"update"),Qt(this,"connect"),Qt(this,"dispose"),Qt(this,"dollyIn"),Qt(this,"dollyOut"),Qt(this,"getScale"),Qt(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=me=>{let Ge=e8(me,2*Math.PI),dt=f.phi;dt<0&&(dt+=2*Math.PI),Ge<0&&(Ge+=2*Math.PI);let wt=Math.abs(Ge-dt);2*Math.PI-wt<wt&&(Ge<dt?Ge+=2*Math.PI:dt+=2*Math.PI),h.phi=Ge-dt,r.update()},this.setAzimuthalAngle=me=>{let Ge=e8(me,2*Math.PI),dt=f.theta;dt<0&&(dt+=2*Math.PI),Ge<0&&(Ge+=2*Math.PI);let wt=Math.abs(Ge-dt);2*Math.PI-wt<wt&&(Ge<dt?Ge+=2*Math.PI:dt+=2*Math.PI),h.theta=Ge-dt,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=me=>{me.addEventListener("keydown",Ft),this._domElementKeyEvents=me},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ft),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=o.NONE},this.update=(()=>{const me=new le,Ge=new le(0,1,0),dt=new Ca().setFromUnitVectors(e.up,Ge),wt=dt.clone().invert(),Ce=new le,ge=new Ca,ut=2*Math.PI;return function(){const Gt=r.object.position;dt.setFromUnitVectors(e.up,Ge),wt.copy(dt).invert(),me.copy(Gt).sub(r.target),me.applyQuaternion(dt),f.setFromVector3(me),r.autoRotate&&l===o.NONE&&G(V()),r.enableDamping?(f.theta+=h.theta*r.dampingFactor,f.phi+=h.phi*r.dampingFactor):(f.theta+=h.theta,f.phi+=h.phi);let It=r.minAzimuthAngle,wn=r.maxAzimuthAngle;isFinite(It)&&isFinite(wn)&&(It<-Math.PI?It+=ut:It>Math.PI&&(It-=ut),wn<-Math.PI?wn+=ut:wn>Math.PI&&(wn-=ut),It<=wn?f.theta=Math.max(It,Math.min(wn,f.theta)):f.theta=f.theta>(It+wn)/2?Math.max(It,f.theta):Math.min(wn,f.theta)),f.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,f.phi)),f.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(y,r.dampingFactor):r.target.add(y),r.zoomToCursor&&C||r.object.isOrthographicCamera?f.radius=se(f.radius):f.radius=se(f.radius*m),me.setFromSpherical(f),me.applyQuaternion(wt),Gt.copy(r.target).add(me),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(h.theta*=1-r.dampingFactor,h.phi*=1-r.dampingFactor,y.multiplyScalar(1-r.dampingFactor)):(h.set(0,0,0),y.set(0,0,0));let On=!1;if(r.zoomToCursor&&C){let Vn=null;if(r.object instanceof ci&&r.object.isPerspectiveCamera){const ir=me.length();Vn=se(ir*m);const Tn=ir-Vn;r.object.position.addScaledVector(O,Tn),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const ir=new le(k.x,k.y,0);ir.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/m)),r.object.updateProjectionMatrix(),On=!0;const Tn=new le(k.x,k.y,0);Tn.unproject(r.object),r.object.position.sub(Tn).add(ir),r.object.updateMatrixWorld(),Vn=me.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Vn!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Vn).add(r.object.position):(Nw.origin.copy(r.object.position),Nw.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Nw.direction))<A2e?e.lookAt(r.target):(Q6.setFromNormalAndCoplanarPoint(r.object.up,r.target),Nw.intersectPlane(Q6,r.target))))}else r.object instanceof zc&&r.object.isOrthographicCamera&&(On=m!==1,On&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/m)),r.object.updateProjectionMatrix()));return m=1,C=!1,On||Ce.distanceToSquared(r.object.position)>u||8*(1-ge.dot(r.object.quaternion))>u?(r.dispatchEvent(i),Ce.copy(r.object.position),ge.copy(r.object.quaternion),On=!1,!0):!1}})(),this.connect=me=>{r.domElement=me,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",yn),r.domElement.addEventListener("pointerdown",Je),r.domElement.addEventListener("pointercancel",Ze),r.domElement.addEventListener("wheel",St)},this.dispose=()=>{var me,Ge,dt,wt,Ce,ge;r.domElement&&(r.domElement.style.touchAction="auto"),(me=r.domElement)==null||me.removeEventListener("contextmenu",yn),(Ge=r.domElement)==null||Ge.removeEventListener("pointerdown",Je),(dt=r.domElement)==null||dt.removeEventListener("pointercancel",Ze),(wt=r.domElement)==null||wt.removeEventListener("wheel",St),(Ce=r.domElement)==null||Ce.ownerDocument.removeEventListener("pointermove",Qe),(ge=r.domElement)==null||ge.ownerDocument.removeEventListener("pointerup",Ze),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Ft)};const r=this,i={type:"change"},a={type:"start"},s={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=o.NONE;const u=1e-6,f=new jO,h=new jO;let m=1;const y=new le,w=new Ke,b=new Ke,x=new Ke,_=new Ke,M=new Ke,T=new Ke,A=new Ke,R=new Ke,N=new Ke,O=new le,k=new Ke;let C=!1;const I=[],F={};function V(){return 2*Math.PI/60/60*r.autoRotateSpeed}function W(){return Math.pow(.95,r.zoomSpeed)}function G(me){r.reverseOrbit||r.reverseHorizontalOrbit?h.theta+=me:h.theta-=me}function J(me){r.reverseOrbit||r.reverseVerticalOrbit?h.phi+=me:h.phi-=me}const ee=(()=>{const me=new le;return function(dt,wt){me.setFromMatrixColumn(wt,0),me.multiplyScalar(-dt),y.add(me)}})(),ae=(()=>{const me=new le;return function(dt,wt){r.screenSpacePanning===!0?me.setFromMatrixColumn(wt,1):(me.setFromMatrixColumn(wt,0),me.crossVectors(r.object.up,me)),me.multiplyScalar(dt),y.add(me)}})(),$=(()=>{const me=new le;return function(dt,wt){const Ce=r.domElement;if(Ce&&r.object instanceof ci&&r.object.isPerspectiveCamera){const ge=r.object.position;me.copy(ge).sub(r.target);let ut=me.length();ut*=Math.tan(r.object.fov/2*Math.PI/180),ee(2*dt*ut/Ce.clientHeight,r.object.matrix),ae(2*wt*ut/Ce.clientHeight,r.object.matrix)}else Ce&&r.object instanceof zc&&r.object.isOrthographicCamera?(ee(dt*(r.object.right-r.object.left)/r.object.zoom/Ce.clientWidth,r.object.matrix),ae(wt*(r.object.top-r.object.bottom)/r.object.zoom/Ce.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function B(me){r.object instanceof ci&&r.object.isPerspectiveCamera||r.object instanceof zc&&r.object.isOrthographicCamera?m=me:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Y(me){B(m/me)}function X(me){B(m*me)}function ne(me){if(!r.zoomToCursor||!r.domElement)return;C=!0;const Ge=r.domElement.getBoundingClientRect(),dt=me.clientX-Ge.left,wt=me.clientY-Ge.top,Ce=Ge.width,ge=Ge.height;k.x=dt/Ce*2-1,k.y=-(wt/ge)*2+1,O.set(k.x,k.y,1).unproject(r.object).sub(r.object.position).normalize()}function se(me){return Math.max(r.minDistance,Math.min(r.maxDistance,me))}function ye(me){w.set(me.clientX,me.clientY)}function Ne(me){ne(me),A.set(me.clientX,me.clientY)}function Ee(me){_.set(me.clientX,me.clientY)}function Oe(me){b.set(me.clientX,me.clientY),x.subVectors(b,w).multiplyScalar(r.rotateSpeed);const Ge=r.domElement;Ge&&(G(2*Math.PI*x.x/Ge.clientHeight),J(2*Math.PI*x.y/Ge.clientHeight)),w.copy(b),r.update()}function $e(me){R.set(me.clientX,me.clientY),N.subVectors(R,A),N.y>0?Y(W()):N.y<0&&X(W()),A.copy(R),r.update()}function Ie(me){M.set(me.clientX,me.clientY),T.subVectors(M,_).multiplyScalar(r.panSpeed),$(T.x,T.y),_.copy(M),r.update()}function qe(me){ne(me),me.deltaY<0?X(W()):me.deltaY>0&&Y(W()),r.update()}function ve(me){let Ge=!1;switch(me.code){case r.keys.UP:$(0,r.keyPanSpeed),Ge=!0;break;case r.keys.BOTTOM:$(0,-r.keyPanSpeed),Ge=!0;break;case r.keys.LEFT:$(r.keyPanSpeed,0),Ge=!0;break;case r.keys.RIGHT:$(-r.keyPanSpeed,0),Ge=!0;break}Ge&&(me.preventDefault(),r.update())}function Z(){if(I.length==1)w.set(I[0].pageX,I[0].pageY);else{const me=.5*(I[0].pageX+I[1].pageX),Ge=.5*(I[0].pageY+I[1].pageY);w.set(me,Ge)}}function Pe(){if(I.length==1)_.set(I[0].pageX,I[0].pageY);else{const me=.5*(I[0].pageX+I[1].pageX),Ge=.5*(I[0].pageY+I[1].pageY);_.set(me,Ge)}}function Me(){const me=I[0].pageX-I[1].pageX,Ge=I[0].pageY-I[1].pageY,dt=Math.sqrt(me*me+Ge*Ge);A.set(0,dt)}function We(){r.enableZoom&&Me(),r.enablePan&&Pe()}function ke(){r.enableZoom&&Me(),r.enableRotate&&Z()}function ct(me){if(I.length==1)b.set(me.pageX,me.pageY);else{const dt=Et(me),wt=.5*(me.pageX+dt.x),Ce=.5*(me.pageY+dt.y);b.set(wt,Ce)}x.subVectors(b,w).multiplyScalar(r.rotateSpeed);const Ge=r.domElement;Ge&&(G(2*Math.PI*x.x/Ge.clientHeight),J(2*Math.PI*x.y/Ge.clientHeight)),w.copy(b)}function ot(me){if(I.length==1)M.set(me.pageX,me.pageY);else{const Ge=Et(me),dt=.5*(me.pageX+Ge.x),wt=.5*(me.pageY+Ge.y);M.set(dt,wt)}T.subVectors(M,_).multiplyScalar(r.panSpeed),$(T.x,T.y),_.copy(M)}function ie(me){const Ge=Et(me),dt=me.pageX-Ge.x,wt=me.pageY-Ge.y,Ce=Math.sqrt(dt*dt+wt*wt);R.set(0,Ce),N.set(0,Math.pow(R.y/A.y,r.zoomSpeed)),Y(N.y),A.copy(R)}function te(me){r.enableZoom&&ie(me),r.enablePan&&ot(me)}function Ae(me){r.enableZoom&&ie(me),r.enableRotate&&ct(me)}function Je(me){var Ge,dt;r.enabled!==!1&&(I.length===0&&((Ge=r.domElement)==null||Ge.ownerDocument.addEventListener("pointermove",Qe),(dt=r.domElement)==null||dt.ownerDocument.addEventListener("pointerup",Ze)),gn(me),me.pointerType==="touch"?Yt(me):At(me))}function Qe(me){r.enabled!==!1&&(me.pointerType==="touch"?tt(me):gt(me))}function Ze(me){var Ge,dt,wt;$t(me),I.length===0&&((Ge=r.domElement)==null||Ge.releasePointerCapture(me.pointerId),(dt=r.domElement)==null||dt.ownerDocument.removeEventListener("pointermove",Qe),(wt=r.domElement)==null||wt.ownerDocument.removeEventListener("pointerup",Ze)),r.dispatchEvent(s),l=o.NONE}function At(me){let Ge;switch(me.button){case 0:Ge=r.mouseButtons.LEFT;break;case 1:Ge=r.mouseButtons.MIDDLE;break;case 2:Ge=r.mouseButtons.RIGHT;break;default:Ge=-1}switch(Ge){case Rf.DOLLY:if(r.enableZoom===!1)return;Ne(me),l=o.DOLLY;break;case Rf.ROTATE:if(me.ctrlKey||me.metaKey||me.shiftKey){if(r.enablePan===!1)return;Ee(me),l=o.PAN}else{if(r.enableRotate===!1)return;ye(me),l=o.ROTATE}break;case Rf.PAN:if(me.ctrlKey||me.metaKey||me.shiftKey){if(r.enableRotate===!1)return;ye(me),l=o.ROTATE}else{if(r.enablePan===!1)return;Ee(me),l=o.PAN}break;default:l=o.NONE}l!==o.NONE&&r.dispatchEvent(a)}function gt(me){if(r.enabled!==!1)switch(l){case o.ROTATE:if(r.enableRotate===!1)return;Oe(me);break;case o.DOLLY:if(r.enableZoom===!1)return;$e(me);break;case o.PAN:if(r.enablePan===!1)return;Ie(me);break}}function St(me){r.enabled===!1||r.enableZoom===!1||l!==o.NONE&&l!==o.ROTATE||(me.preventDefault(),r.dispatchEvent(a),qe(me),r.dispatchEvent(s))}function Ft(me){r.enabled===!1||r.enablePan===!1||ve(me)}function Yt(me){switch(Mt(me),I.length){case 1:switch(r.touches.ONE){case kf.ROTATE:if(r.enableRotate===!1)return;Z(),l=o.TOUCH_ROTATE;break;case kf.PAN:if(r.enablePan===!1)return;Pe(),l=o.TOUCH_PAN;break;default:l=o.NONE}break;case 2:switch(r.touches.TWO){case kf.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;We(),l=o.TOUCH_DOLLY_PAN;break;case kf.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ke(),l=o.TOUCH_DOLLY_ROTATE;break;default:l=o.NONE}break;default:l=o.NONE}l!==o.NONE&&r.dispatchEvent(a)}function tt(me){switch(Mt(me),l){case o.TOUCH_ROTATE:if(r.enableRotate===!1)return;ct(me),r.update();break;case o.TOUCH_PAN:if(r.enablePan===!1)return;ot(me),r.update();break;case o.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;te(me),r.update();break;case o.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ae(me),r.update();break;default:l=o.NONE}}function yn(me){r.enabled!==!1&&me.preventDefault()}function gn(me){I.push(me)}function $t(me){delete F[me.pointerId];for(let Ge=0;Ge<I.length;Ge++)if(I[Ge].pointerId==me.pointerId){I.splice(Ge,1);return}}function Mt(me){let Ge=F[me.pointerId];Ge===void 0&&(Ge=new Ke,F[me.pointerId]=Ge),Ge.set(me.pageX,me.pageY)}function Et(me){const Ge=me.pointerId===I[0].pointerId?I[1]:I[0];return F[Ge.pointerId]}this.dollyIn=(me=W())=>{X(me),r.update()},this.dollyOut=(me=W())=>{Y(me),r.update()},this.getScale=()=>m,this.setScale=me=>{B(me),r.update()},this.getZoomScale=()=>W(),n!==void 0&&this.connect(n),this.update()}};class C2e extends pj{constructor(e){super(e),this.type=zi}parse(e){const s=function(k,C){switch(k){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(C||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(C||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(C||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(C||""))}},h=function(k,C,I){C=C||1024;let V=k.pos,W=-1,G=0,J="",ee=String.fromCharCode.apply(null,new Uint16Array(k.subarray(V,V+128)));for(;0>(W=ee.indexOf(`
`))&&G<C&&V<k.byteLength;)J+=ee,G+=ee.length,V+=128,ee+=String.fromCharCode.apply(null,new Uint16Array(k.subarray(V,V+128)));return-1<W?(k.pos+=G+W+1,J+ee.slice(0,W)):!1},m=function(k){const C=/^#\?(\S+)/,I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,F=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,V=/^\s*FORMAT=(\S+)\s*$/,W=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,G={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let J,ee;for((k.pos>=k.byteLength||!(J=h(k)))&&s(1,"no header found"),(ee=J.match(C))||s(3,"bad initial token"),G.valid|=1,G.programtype=ee[1],G.string+=J+`
`;J=h(k),J!==!1;){if(G.string+=J+`
`,J.charAt(0)==="#"){G.comments+=J+`
`;continue}if((ee=J.match(I))&&(G.gamma=parseFloat(ee[1])),(ee=J.match(F))&&(G.exposure=parseFloat(ee[1])),(ee=J.match(V))&&(G.valid|=2,G.format=ee[1]),(ee=J.match(W))&&(G.valid|=4,G.height=parseInt(ee[1],10),G.width=parseInt(ee[2],10)),G.valid&2&&G.valid&4)break}return G.valid&2||s(3,"missing format specifier"),G.valid&4||s(3,"missing image size specifier"),G},y=function(k,C,I){const F=C;if(F<8||F>32767||k[0]!==2||k[1]!==2||k[2]&128)return new Uint8Array(k);F!==(k[2]<<8|k[3])&&s(3,"wrong scanline width");const V=new Uint8Array(4*C*I);V.length||s(4,"unable to allocate buffer space");let W=0,G=0;const J=4*F,ee=new Uint8Array(4),ae=new Uint8Array(J);let $=I;for(;$>0&&G<k.byteLength;){G+4>k.byteLength&&s(1),ee[0]=k[G++],ee[1]=k[G++],ee[2]=k[G++],ee[3]=k[G++],(ee[0]!=2||ee[1]!=2||(ee[2]<<8|ee[3])!=F)&&s(3,"bad rgbe scanline format");let B=0,Y;for(;B<J&&G<k.byteLength;){Y=k[G++];const ne=Y>128;if(ne&&(Y-=128),(Y===0||B+Y>J)&&s(3,"bad scanline data"),ne){const se=k[G++];for(let ye=0;ye<Y;ye++)ae[B++]=se}else ae.set(k.subarray(G,G+Y),B),B+=Y,G+=Y}const X=F;for(let ne=0;ne<X;ne++){let se=0;V[W]=ae[ne+se],se+=F,V[W+1]=ae[ne+se],se+=F,V[W+2]=ae[ne+se],se+=F,V[W+3]=ae[ne+se],W+=4}$--}return V},w=function(k,C,I,F){const V=k[C+3],W=Math.pow(2,V-128)/255;I[F+0]=k[C+0]*W,I[F+1]=k[C+1]*W,I[F+2]=k[C+2]*W,I[F+3]=1},b=function(k,C,I,F){const V=k[C+3],W=Math.pow(2,V-128)/255;I[F+0]=Xf.toHalfFloat(Math.min(k[C+0]*W,65504)),I[F+1]=Xf.toHalfFloat(Math.min(k[C+1]*W,65504)),I[F+2]=Xf.toHalfFloat(Math.min(k[C+2]*W,65504)),I[F+3]=Xf.toHalfFloat(1)},x=new Uint8Array(e);x.pos=0;const _=m(x),M=_.width,T=_.height,A=y(x.subarray(x.pos),M,T);let R,N,O;switch(this.type){case ui:O=A.length/4;const k=new Float32Array(O*4);for(let I=0;I<O;I++)w(A,I*4,k,I*4);R=k,N=ui;break;case zi:O=A.length/4;const C=new Uint16Array(O*4);for(let I=0;I<O;I++)b(A,I*4,C,I*4);R=C,N=zi;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:M,height:T,data:R,header:_.string,gamma:_.gamma,exposure:_.exposure,type:N}}setDataType(e){return this.type=e,this}load(e,n,r,i){function a(s,o){switch(s.type){case ui:case zi:"colorSpace"in s?s.colorSpace="srgb-linear":s.encoding=3e3,s.minFilter=Gn,s.magFilter=Gn,s.generateMipmaps=!1,s.flipY=!0;break}n&&n(s,o)}return super.load(e,a,r,i)}}const Qy=vq>=152;class P2e extends pj{constructor(e){super(e),this.type=zi}parse(e){const C=Math.pow(2.7182818,2.2);function I(K,re){for(var be=0,q=0;q<65536;++q)(q==0||K[q>>3]&1<<(q&7))&&(re[be++]=q);for(var oe=be-1;be<65536;)re[be++]=0;return oe}function F(K){for(var re=0;re<16384;re++)K[re]={},K[re].len=0,K[re].lit=0,K[re].p=null}const V={l:0,c:0,lc:0};function W(K,re,be,q,oe){for(;be<K;)re=re<<8|Et(q,oe),be+=8;be-=K,V.l=re>>be&(1<<K)-1,V.c=re,V.lc=be}const G=new Array(59);function J(K){for(var re=0;re<=58;++re)G[re]=0;for(var re=0;re<65537;++re)G[K[re]]+=1;for(var be=0,re=58;re>0;--re){var q=be+G[re]>>1;G[re]=be,be=q}for(var re=0;re<65537;++re){var oe=K[re];oe>0&&(K[re]=oe|G[oe]++<<6)}}function ee(K,re,be,q,oe,ce,pe){for(var he=be,Ue=0,ze=0;oe<=ce;oe++){if(he.value-be.value>q)return!1;W(6,Ue,ze,K,he);var Ve=V.l;if(Ue=V.c,ze=V.lc,pe[oe]=Ve,Ve==63){if(he.value-be.value>q)throw"Something wrong with hufUnpackEncTable";W(8,Ue,ze,K,he);var De=V.l+6;if(Ue=V.c,ze=V.lc,oe+De>ce+1)throw"Something wrong with hufUnpackEncTable";for(;De--;)pe[oe++]=0;oe--}else if(Ve>=59){var De=Ve-59+2;if(oe+De>ce+1)throw"Something wrong with hufUnpackEncTable";for(;De--;)pe[oe++]=0;oe--}}J(pe)}function ae(K){return K&63}function $(K){return K>>6}function B(K,re,be,q){for(;re<=be;re++){var oe=$(K[re]),ce=ae(K[re]);if(oe>>ce)throw"Invalid table entry";if(ce>14){var pe=q[oe>>ce-14];if(pe.len)throw"Invalid table entry";if(pe.lit++,pe.p){var he=pe.p;pe.p=new Array(pe.lit);for(var Ue=0;Ue<pe.lit-1;++Ue)pe.p[Ue]=he[Ue]}else pe.p=new Array(1);pe.p[pe.lit-1]=re}else if(ce)for(var ze=0,Ue=1<<14-ce;Ue>0;Ue--){var pe=q[(oe<<14-ce)+ze];if(pe.len||pe.p)throw"Invalid table entry";pe.len=ce,pe.lit=re,ze++}}return!0}const Y={c:0,lc:0};function X(K,re,be,q){K=K<<8|Et(be,q),re+=8,Y.c=K,Y.lc=re}const ne={c:0,lc:0};function se(K,re,be,q,oe,ce,pe,he,Ue,ze){if(K==re){q<8&&(X(be,q,oe,pe),be=Y.c,q=Y.lc),q-=8;var Ve=be>>q,Ve=new Uint8Array([Ve])[0];if(Ue.value+Ve>ze)return!1;for(var De=he[Ue.value-1];Ve-- >0;)he[Ue.value++]=De}else if(Ue.value<ze)he[Ue.value++]=K;else return!1;ne.c=be,ne.lc=q}function ye(K){return K&65535}function Ne(K){var re=ye(K);return re>32767?re-65536:re}const Ee={a:0,b:0};function Oe(K,re){var be=Ne(K),q=Ne(re),oe=q,ce=be+(oe&1)+(oe>>1),pe=ce,he=ce-oe;Ee.a=pe,Ee.b=he}function $e(K,re){var be=ye(K),q=ye(re),oe=be-(q>>1)&65535,ce=q+oe-32768&65535;Ee.a=ce,Ee.b=oe}function Ie(K,re,be,q,oe,ce,pe){for(var he=pe<16384,Ue=be>oe?oe:be,ze=1,Ve;ze<=Ue;)ze<<=1;for(ze>>=1,Ve=ze,ze>>=1;ze>=1;){for(var De=0,Ct=De+ce*(oe-Ve),nt=ce*ze,it=ce*Ve,Pt=q*ze,Wt=q*Ve,qt,nn,xt,yt;De<=Ct;De+=it){for(var tn=De,Kt=De+q*(be-Ve);tn<=Kt;tn+=Wt){var rn=tn+Pt,Kn=tn+nt,vr=Kn+Pt;he?(Oe(K[tn+re],K[Kn+re]),qt=Ee.a,xt=Ee.b,Oe(K[rn+re],K[vr+re]),nn=Ee.a,yt=Ee.b,Oe(qt,nn),K[tn+re]=Ee.a,K[rn+re]=Ee.b,Oe(xt,yt),K[Kn+re]=Ee.a,K[vr+re]=Ee.b):($e(K[tn+re],K[Kn+re]),qt=Ee.a,xt=Ee.b,$e(K[rn+re],K[vr+re]),nn=Ee.a,yt=Ee.b,$e(qt,nn),K[tn+re]=Ee.a,K[rn+re]=Ee.b,$e(xt,yt),K[Kn+re]=Ee.a,K[vr+re]=Ee.b)}if(be&ze){var Kn=tn+nt;he?Oe(K[tn+re],K[Kn+re]):$e(K[tn+re],K[Kn+re]),qt=Ee.a,K[Kn+re]=Ee.b,K[tn+re]=qt}}if(oe&ze)for(var tn=De,Kt=De+q*(be-Ve);tn<=Kt;tn+=Wt){var rn=tn+Pt;he?Oe(K[tn+re],K[rn+re]):$e(K[tn+re],K[rn+re]),qt=Ee.a,K[rn+re]=Ee.b,K[tn+re]=qt}Ve=ze,ze>>=1}return De}function qe(K,re,be,q,oe,ce,pe,he,Ue,ze){for(var Ve=0,De=0,Ct=he,nt=Math.trunc(oe.value+(ce+7)/8);oe.value<nt;)for(X(Ve,De,be,oe),Ve=Y.c,De=Y.lc;De>=14;){var it=Ve>>De-14&16383,Pt=re[it];if(Pt.len)De-=Pt.len,se(Pt.lit,pe,Ve,De,be,q,oe,Ue,ze,Ct),Ve=ne.c,De=ne.lc;else{if(!Pt.p)throw"hufDecode issues";var Wt;for(Wt=0;Wt<Pt.lit;Wt++){for(var qt=ae(K[Pt.p[Wt]]);De<qt&&oe.value<nt;)X(Ve,De,be,oe),Ve=Y.c,De=Y.lc;if(De>=qt&&$(K[Pt.p[Wt]])==(Ve>>De-qt&(1<<qt)-1)){De-=qt,se(Pt.p[Wt],pe,Ve,De,be,q,oe,Ue,ze,Ct),Ve=ne.c,De=ne.lc;break}}if(Wt==Pt.lit)throw"hufDecode issues"}}var nn=8-ce&7;for(Ve>>=nn,De-=nn;De>0;){var Pt=re[Ve<<14-De&16383];if(Pt.len)De-=Pt.len,se(Pt.lit,pe,Ve,De,be,q,oe,Ue,ze,Ct),Ve=ne.c,De=ne.lc;else throw"hufDecode issues"}return!0}function ve(K,re,be,q,oe,ce){var pe={value:0},he=be.value,Ue=Mt(re,be),ze=Mt(re,be);be.value+=4;var Ve=Mt(re,be);if(be.value+=4,Ue<0||Ue>=65537||ze<0||ze>=65537)throw"Something wrong with HUF_ENCSIZE";var De=new Array(65537),Ct=new Array(16384);F(Ct);var nt=q-(be.value-he);if(ee(K,re,be,nt,Ue,ze,De),Ve>8*(q-(be.value-he)))throw"Something wrong with hufUncompress";B(De,Ue,ze,Ct),qe(De,Ct,K,re,be,Ve,ze,ce,oe,pe)}function Z(K,re,be){for(var q=0;q<be;++q)re[q]=K[re[q]]}function Pe(K){for(var re=1;re<K.length;re++){var be=K[re-1]+K[re]-128;K[re]=be}}function Me(K,re){for(var be=0,q=Math.floor((K.length+1)/2),oe=0,ce=K.length-1;!(oe>ce||(re[oe++]=K[be++],oe>ce));)re[oe++]=K[q++]}function We(K){for(var re=K.byteLength,be=new Array,q=0,oe=new DataView(K);re>0;){var ce=oe.getInt8(q++);if(ce<0){var pe=-ce;re-=pe+1;for(var he=0;he<pe;he++)be.push(oe.getUint8(q++))}else{var pe=ce;re-=2;for(var Ue=oe.getUint8(q++),he=0;he<pe+1;he++)be.push(Ue)}}return be}function ke(K,re,be,q,oe,ce){var rn=new DataView(ce.buffer),pe=be[K.idx[0]].width,he=be[K.idx[0]].height,Ue=3,ze=Math.floor(pe/8),Ve=Math.ceil(pe/8),De=Math.ceil(he/8),Ct=pe-(Ve-1)*8,nt=he-(De-1)*8,it={value:0},Pt=new Array(Ue),Wt=new Array(Ue),qt=new Array(Ue),nn=new Array(Ue),xt=new Array(Ue);for(let _n=0;_n<Ue;++_n)xt[_n]=re[K.idx[_n]],Pt[_n]=_n<1?0:Pt[_n-1]+Ve*De,Wt[_n]=new Float32Array(64),qt[_n]=new Uint16Array(64),nn[_n]=new Uint16Array(Ve*64);for(let _n=0;_n<De;++_n){var yt=8;_n==De-1&&(yt=nt);var tn=8;for(let vn=0;vn<Ve;++vn){vn==Ve-1&&(tn=Ct);for(let kn=0;kn<Ue;++kn)qt[kn].fill(0),qt[kn][0]=oe[Pt[kn]++],ct(it,q,qt[kn]),ot(qt[kn],Wt[kn]),ie(Wt[kn]);te(Wt);for(let kn=0;kn<Ue;++kn)Ae(Wt[kn],nn[kn],vn*64)}let Or=0;for(let vn=0;vn<Ue;++vn){const kn=be[K.idx[vn]].type;for(let sr=8*_n;sr<8*_n+yt;++sr){Or=xt[vn][sr];for(let pa=0;pa<ze;++pa){const ri=pa*64+(sr&7)*8;rn.setUint16(Or+0*kn,nn[vn][ri+0],!0),rn.setUint16(Or+2*kn,nn[vn][ri+1],!0),rn.setUint16(Or+4*kn,nn[vn][ri+2],!0),rn.setUint16(Or+6*kn,nn[vn][ri+3],!0),rn.setUint16(Or+8*kn,nn[vn][ri+4],!0),rn.setUint16(Or+10*kn,nn[vn][ri+5],!0),rn.setUint16(Or+12*kn,nn[vn][ri+6],!0),rn.setUint16(Or+14*kn,nn[vn][ri+7],!0),Or+=16*kn}}if(ze!=Ve)for(let sr=8*_n;sr<8*_n+yt;++sr){const pa=xt[vn][sr]+8*ze*2*kn,ri=ze*64+(sr&7)*8;for(let $s=0;$s<tn;++$s)rn.setUint16(pa+$s*2*kn,nn[vn][ri+$s],!0)}}}for(var Kt=new Uint16Array(pe),rn=new DataView(ce.buffer),Kn=0;Kn<Ue;++Kn){be[K.idx[Kn]].decoded=!0;var vr=be[K.idx[Kn]].type;if(be[Kn].type==2)for(var ar=0;ar<he;++ar){const _n=xt[Kn][ar];for(var Rn=0;Rn<pe;++Rn)Kt[Rn]=rn.getUint16(_n+Rn*2*vr,!0);for(var Rn=0;Rn<pe;++Rn)rn.setFloat32(_n+Rn*2*vr,Ce(Kt[Rn]),!0)}}}function ct(K,re,be){for(var q,oe=1;oe<64;)q=re[K.value],q==65280?oe=64:q>>8==255?oe+=q&255:(be[oe]=q,oe++),K.value++}function ot(K,re){re[0]=Ce(K[0]),re[1]=Ce(K[1]),re[2]=Ce(K[5]),re[3]=Ce(K[6]),re[4]=Ce(K[14]),re[5]=Ce(K[15]),re[6]=Ce(K[27]),re[7]=Ce(K[28]),re[8]=Ce(K[2]),re[9]=Ce(K[4]),re[10]=Ce(K[7]),re[11]=Ce(K[13]),re[12]=Ce(K[16]),re[13]=Ce(K[26]),re[14]=Ce(K[29]),re[15]=Ce(K[42]),re[16]=Ce(K[3]),re[17]=Ce(K[8]),re[18]=Ce(K[12]),re[19]=Ce(K[17]),re[20]=Ce(K[25]),re[21]=Ce(K[30]),re[22]=Ce(K[41]),re[23]=Ce(K[43]),re[24]=Ce(K[9]),re[25]=Ce(K[11]),re[26]=Ce(K[18]),re[27]=Ce(K[24]),re[28]=Ce(K[31]),re[29]=Ce(K[40]),re[30]=Ce(K[44]),re[31]=Ce(K[53]),re[32]=Ce(K[10]),re[33]=Ce(K[19]),re[34]=Ce(K[23]),re[35]=Ce(K[32]),re[36]=Ce(K[39]),re[37]=Ce(K[45]),re[38]=Ce(K[52]),re[39]=Ce(K[54]),re[40]=Ce(K[20]),re[41]=Ce(K[22]),re[42]=Ce(K[33]),re[43]=Ce(K[38]),re[44]=Ce(K[46]),re[45]=Ce(K[51]),re[46]=Ce(K[55]),re[47]=Ce(K[60]),re[48]=Ce(K[21]),re[49]=Ce(K[34]),re[50]=Ce(K[37]),re[51]=Ce(K[47]),re[52]=Ce(K[50]),re[53]=Ce(K[56]),re[54]=Ce(K[59]),re[55]=Ce(K[61]),re[56]=Ce(K[35]),re[57]=Ce(K[36]),re[58]=Ce(K[48]),re[59]=Ce(K[49]),re[60]=Ce(K[57]),re[61]=Ce(K[58]),re[62]=Ce(K[62]),re[63]=Ce(K[63])}function ie(K){const re=.5*Math.cos(.7853975),be=.5*Math.cos(3.14159/16),q=.5*Math.cos(3.14159/8),oe=.5*Math.cos(3*3.14159/16),ce=.5*Math.cos(5*3.14159/16),pe=.5*Math.cos(3*3.14159/8),he=.5*Math.cos(7*3.14159/16);for(var Ue=new Array(4),ze=new Array(4),Ve=new Array(4),De=new Array(4),Ct=0;Ct<8;++Ct){var nt=Ct*8;Ue[0]=q*K[nt+2],Ue[1]=pe*K[nt+2],Ue[2]=q*K[nt+6],Ue[3]=pe*K[nt+6],ze[0]=be*K[nt+1]+oe*K[nt+3]+ce*K[nt+5]+he*K[nt+7],ze[1]=oe*K[nt+1]-he*K[nt+3]-be*K[nt+5]-ce*K[nt+7],ze[2]=ce*K[nt+1]-be*K[nt+3]+he*K[nt+5]+oe*K[nt+7],ze[3]=he*K[nt+1]-ce*K[nt+3]+oe*K[nt+5]-be*K[nt+7],Ve[0]=re*(K[nt+0]+K[nt+4]),Ve[3]=re*(K[nt+0]-K[nt+4]),Ve[1]=Ue[0]+Ue[3],Ve[2]=Ue[1]-Ue[2],De[0]=Ve[0]+Ve[1],De[1]=Ve[3]+Ve[2],De[2]=Ve[3]-Ve[2],De[3]=Ve[0]-Ve[1],K[nt+0]=De[0]+ze[0],K[nt+1]=De[1]+ze[1],K[nt+2]=De[2]+ze[2],K[nt+3]=De[3]+ze[3],K[nt+4]=De[3]-ze[3],K[nt+5]=De[2]-ze[2],K[nt+6]=De[1]-ze[1],K[nt+7]=De[0]-ze[0]}for(var it=0;it<8;++it)Ue[0]=q*K[16+it],Ue[1]=pe*K[16+it],Ue[2]=q*K[48+it],Ue[3]=pe*K[48+it],ze[0]=be*K[8+it]+oe*K[24+it]+ce*K[40+it]+he*K[56+it],ze[1]=oe*K[8+it]-he*K[24+it]-be*K[40+it]-ce*K[56+it],ze[2]=ce*K[8+it]-be*K[24+it]+he*K[40+it]+oe*K[56+it],ze[3]=he*K[8+it]-ce*K[24+it]+oe*K[40+it]-be*K[56+it],Ve[0]=re*(K[it]+K[32+it]),Ve[3]=re*(K[it]-K[32+it]),Ve[1]=Ue[0]+Ue[3],Ve[2]=Ue[1]-Ue[2],De[0]=Ve[0]+Ve[1],De[1]=Ve[3]+Ve[2],De[2]=Ve[3]-Ve[2],De[3]=Ve[0]-Ve[1],K[0+it]=De[0]+ze[0],K[8+it]=De[1]+ze[1],K[16+it]=De[2]+ze[2],K[24+it]=De[3]+ze[3],K[32+it]=De[3]-ze[3],K[40+it]=De[2]-ze[2],K[48+it]=De[1]-ze[1],K[56+it]=De[0]-ze[0]}function te(K){for(var re=0;re<64;++re){var be=K[0][re],q=K[1][re],oe=K[2][re];K[0][re]=be+1.5747*oe,K[1][re]=be-.1873*q-.4682*oe,K[2][re]=be+1.8556*q}}function Ae(K,re,be){for(var q=0;q<64;++q)re[be+q]=Xf.toHalfFloat(Je(K[q]))}function Je(K){return K<=1?Math.sign(K)*Math.pow(Math.abs(K),2.2):Math.sign(K)*Math.pow(C,Math.abs(K)-1)}function Qe(K){return new DataView(K.array.buffer,K.offset.value,K.size)}function Ze(K){var re=K.viewer.buffer.slice(K.offset.value,K.offset.value+K.size),be=new Uint8Array(We(re)),q=new Uint8Array(be.length);return Pe(be),Me(be,q),new DataView(q.buffer)}function At(K){var re=K.array.slice(K.offset.value,K.offset.value+K.size),be=Pw(re),q=new Uint8Array(be.length);return Pe(be),Me(be,q),new DataView(q.buffer)}function gt(K){for(var re=K.viewer,be={value:K.offset.value},q=new Uint16Array(K.width*K.scanlineBlockSize*(K.channels*K.type)),oe=new Uint8Array(8192),ce=0,pe=new Array(K.channels),he=0;he<K.channels;he++)pe[he]={},pe[he].start=ce,pe[he].end=pe[he].start,pe[he].nx=K.width,pe[he].ny=K.lines,pe[he].size=K.type,ce+=pe[he].nx*pe[he].ny*pe[he].size;var Ue=ge(re,be),ze=ge(re,be);if(ze>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Ue<=ze)for(var he=0;he<ze-Ue+1;he++)oe[he+Ue]=me(re,be);var Ve=new Uint16Array(65536),De=I(oe,Ve),Ct=Mt(re,be);ve(K.array,re,be,Ct,q,ce);for(var he=0;he<K.channels;++he)for(var nt=pe[he],it=0;it<pe[he].size;++it)Ie(q,nt.start+it,nt.nx,nt.size,nt.ny,nt.nx*nt.size,De);Z(Ve,q,ce);for(var Pt=0,Wt=new Uint8Array(q.buffer.byteLength),qt=0;qt<K.lines;qt++)for(var nn=0;nn<K.channels;nn++){var nt=pe[nn],xt=nt.nx*nt.size,yt=new Uint8Array(q.buffer,nt.end*2,xt*2);Wt.set(yt,Pt),Pt+=xt*2,nt.end+=xt}return new DataView(Wt.buffer)}function St(K){var re=K.array.slice(K.offset.value,K.offset.value+K.size),be=Pw(re);const q=K.lines*K.channels*K.width,oe=K.type==1?new Uint16Array(q):new Uint32Array(q);let ce=0,pe=0;const he=new Array(4);for(let Ue=0;Ue<K.lines;Ue++)for(let ze=0;ze<K.channels;ze++){let Ve=0;switch(K.type){case 1:he[0]=ce,he[1]=he[0]+K.width,ce=he[1]+K.width;for(let De=0;De<K.width;++De){const Ct=be[he[0]++]<<8|be[he[1]++];Ve+=Ct,oe[pe]=Ve,pe++}break;case 2:he[0]=ce,he[1]=he[0]+K.width,he[2]=he[1]+K.width,ce=he[2]+K.width;for(let De=0;De<K.width;++De){const Ct=be[he[0]++]<<24|be[he[1]++]<<16|be[he[2]++]<<8;Ve+=Ct,oe[pe]=Ve,pe++}break}}return new DataView(oe.buffer)}function Ft(K){var re=K.viewer,be={value:K.offset.value},q=new Uint8Array(K.width*K.lines*(K.channels*K.type*2)),oe={version:Ge(re,be),unknownUncompressedSize:Ge(re,be),unknownCompressedSize:Ge(re,be),acCompressedSize:Ge(re,be),dcCompressedSize:Ge(re,be),rleCompressedSize:Ge(re,be),rleUncompressedSize:Ge(re,be),rleRawSize:Ge(re,be),totalAcUncompressedCount:Ge(re,be),totalDcUncompressedCount:Ge(re,be),acCompression:Ge(re,be)};if(oe.version<2)throw"EXRLoader.parse: "+Ti.compression+" version "+oe.version+" is unsupported";for(var ce=new Array,pe=ge(re,be)-2;pe>0;){var he=Yt(re.buffer,be),Ue=me(re,be),ze=Ue>>2&3,Ve=(Ue>>4)-1,De=new Int8Array([Ve])[0],Ct=me(re,be);ce.push({name:he,index:De,type:Ct,compression:ze}),pe-=he.length+3}for(var nt=Ti.channels,it=new Array(K.channels),Pt=0;Pt<K.channels;++Pt){var Wt=it[Pt]={},qt=nt[Pt];Wt.name=qt.name,Wt.compression=0,Wt.decoded=!1,Wt.type=qt.pixelType,Wt.pLinear=qt.pLinear,Wt.width=K.width,Wt.height=K.lines}for(var nn={idx:new Array(3)},xt=0;xt<K.channels;++xt)for(var Wt=it[xt],Pt=0;Pt<ce.length;++Pt){var yt=ce[Pt];Wt.name==yt.name&&(Wt.compression=yt.compression,yt.index>=0&&(nn.idx[yt.index]=xt),Wt.offset=xt)}if(oe.acCompressedSize>0)switch(oe.acCompression){case 0:var rn=new Uint16Array(oe.totalAcUncompressedCount);ve(K.array,re,be,oe.acCompressedSize,rn,oe.totalAcUncompressedCount);break;case 1:var tn=K.array.slice(be.value,be.value+oe.totalAcUncompressedCount),Kt=Pw(tn),rn=new Uint16Array(Kt.buffer);be.value+=oe.totalAcUncompressedCount;break}if(oe.dcCompressedSize>0){var Kn={array:K.array,offset:be,size:oe.dcCompressedSize},vr=new Uint16Array(At(Kn).buffer);be.value+=oe.dcCompressedSize}if(oe.rleRawSize>0){var tn=K.array.slice(be.value,be.value+oe.rleCompressedSize),Kt=Pw(tn),ar=We(Kt.buffer);be.value+=oe.rleCompressedSize}for(var Rn=0,_n=new Array(it.length),Pt=0;Pt<_n.length;++Pt)_n[Pt]=new Array;for(var Or=0;Or<K.lines;++Or)for(var vn=0;vn<it.length;++vn)_n[vn].push(Rn),Rn+=it[vn].width*K.type*2;ke(nn,_n,it,rn,vr,q);for(var Pt=0;Pt<it.length;++Pt){var Wt=it[Pt];if(!Wt.decoded)switch(Wt.compression){case 2:for(var kn=0,sr=0,Or=0;Or<K.lines;++Or){for(var pa=_n[Pt][kn],ri=0;ri<Wt.width;++ri){for(var $s=0;$s<2*Wt.type;++$s)q[pa++]=ar[sr+$s*Wt.width*Wt.height];sr++}kn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(q.buffer)}function Yt(K,re){for(var be=new Uint8Array(K),q=0;be[re.value+q]!=0;)q+=1;var oe=new TextDecoder().decode(be.slice(re.value,re.value+q));return re.value=re.value+q+1,oe}function tt(K,re,be){var q=new TextDecoder().decode(new Uint8Array(K).slice(re.value,re.value+be));return re.value=re.value+be,q}function yn(K,re){var be=$t(K,re),q=Mt(K,re);return[be,q]}function gn(K,re){var be=Mt(K,re),q=Mt(K,re);return[be,q]}function $t(K,re){var be=K.getInt32(re.value,!0);return re.value=re.value+4,be}function Mt(K,re){var be=K.getUint32(re.value,!0);return re.value=re.value+4,be}function Et(K,re){var be=K[re.value];return re.value=re.value+1,be}function me(K,re){var be=K.getUint8(re.value);return re.value=re.value+1,be}const Ge=function(K,re){let be;return"getBigInt64"in DataView.prototype?be=Number(K.getBigInt64(re.value,!0)):be=K.getUint32(re.value+4,!0)+Number(K.getUint32(re.value,!0)<<32),re.value+=8,be};function dt(K,re){var be=K.getFloat32(re.value,!0);return re.value+=4,be}function wt(K,re){return Xf.toHalfFloat(dt(K,re))}function Ce(K){var re=(K&31744)>>10,be=K&1023;return(K>>15?-1:1)*(re?re===31?be?NaN:1/0:Math.pow(2,re-15)*(1+be/1024):6103515625e-14*(be/1024))}function ge(K,re){var be=K.getUint16(re.value,!0);return re.value+=2,be}function ut(K,re){return Ce(ge(K,re))}function vt(K,re,be,q){for(var oe=be.value,ce=[];be.value<oe+q-1;){var pe=Yt(re,be),he=$t(K,be),Ue=me(K,be);be.value+=3;var ze=$t(K,be),Ve=$t(K,be);ce.push({name:pe,pixelType:he,pLinear:Ue,xSampling:ze,ySampling:Ve})}return be.value+=1,ce}function Gt(K,re){var be=dt(K,re),q=dt(K,re),oe=dt(K,re),ce=dt(K,re),pe=dt(K,re),he=dt(K,re),Ue=dt(K,re),ze=dt(K,re);return{redX:be,redY:q,greenX:oe,greenY:ce,blueX:pe,blueY:he,whiteX:Ue,whiteY:ze}}function It(K,re){var be=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],q=me(K,re);return be[q]}function wn(K,re){var be=Mt(K,re),q=Mt(K,re),oe=Mt(K,re),ce=Mt(K,re);return{xMin:be,yMin:q,xMax:oe,yMax:ce}}function On(K,re){var be=["INCREASING_Y"],q=me(K,re);return be[q]}function Vn(K,re){var be=dt(K,re),q=dt(K,re);return[be,q]}function ir(K,re){var be=dt(K,re),q=dt(K,re),oe=dt(K,re);return[be,q,oe]}function Tn(K,re,be,q,oe){if(q==="string"||q==="stringvector"||q==="iccProfile")return tt(re,be,oe);if(q==="chlist")return vt(K,re,be,oe);if(q==="chromaticities")return Gt(K,be);if(q==="compression")return It(K,be);if(q==="box2i")return wn(K,be);if(q==="lineOrder")return On(K,be);if(q==="float")return dt(K,be);if(q==="v2f")return Vn(K,be);if(q==="v3f")return ir(K,be);if(q==="int")return $t(K,be);if(q==="rational")return yn(K,be);if(q==="timecode")return gn(K,be);if(q==="preview")return be.value+=oe,"skipped";be.value+=oe}function Vr(K,re,be){const q={};if(K.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";q.version=K.getUint8(4);const oe=K.getUint8(5);q.spec={singleTile:!!(oe&2),longName:!!(oe&4),deepFormat:!!(oe&8),multiPart:!!(oe&16)},be.value=8;for(var ce=!0;ce;){var pe=Yt(re,be);if(pe==0)ce=!1;else{var he=Yt(re,be),Ue=Mt(K,be),ze=Tn(K,re,be,he,Ue);ze===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${he}'.`):q[pe]=ze}}if((oe&-5)!=0)throw console.error("EXRHeader:",q),"THREE.EXRLoader: provided file is currently unsupported.";return q}function di(K,re,be,q,oe){const ce={size:0,viewer:re,array:be,offset:q,width:K.dataWindow.xMax-K.dataWindow.xMin+1,height:K.dataWindow.yMax-K.dataWindow.yMin+1,channels:K.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:K.channels[0].pixelType,uncompress:null,getter:null,format:null,[Qy?"colorSpace":"encoding"]:null};switch(K.compression){case"NO_COMPRESSION":ce.lines=1,ce.uncompress=Qe;break;case"RLE_COMPRESSION":ce.lines=1,ce.uncompress=Ze;break;case"ZIPS_COMPRESSION":ce.lines=1,ce.uncompress=At;break;case"ZIP_COMPRESSION":ce.lines=16,ce.uncompress=At;break;case"PIZ_COMPRESSION":ce.lines=32,ce.uncompress=gt;break;case"PXR24_COMPRESSION":ce.lines=16,ce.uncompress=St;break;case"DWAA_COMPRESSION":ce.lines=32,ce.uncompress=Ft;break;case"DWAB_COMPRESSION":ce.lines=256,ce.uncompress=Ft;break;default:throw"EXRLoader.parse: "+K.compression+" is unsupported"}if(ce.scanlineBlockSize=ce.lines,ce.type==1)switch(oe){case ui:ce.getter=ut,ce.inputSize=2;break;case zi:ce.getter=ge,ce.inputSize=2;break}else if(ce.type==2)switch(oe){case ui:ce.getter=dt,ce.inputSize=4;break;case zi:ce.getter=wt,ce.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+ce.type+" for "+K.compression+".";ce.blockCount=(K.dataWindow.yMax+1)/ce.scanlineBlockSize;for(var pe=0;pe<ce.blockCount;pe++)Ge(re,q);ce.outputChannels=ce.channels==3?4:ce.channels;const he=ce.width*ce.height*ce.outputChannels;switch(oe){case ui:ce.byteArray=new Float32Array(he),ce.channels<ce.outputChannels&&ce.byteArray.fill(1,0,he);break;case zi:ce.byteArray=new Uint16Array(he),ce.channels<ce.outputChannels&&ce.byteArray.fill(15360,0,he);break;default:console.error("THREE.EXRLoader: unsupported type: ",oe);break}return ce.bytesPerLine=ce.width*ce.inputSize*ce.channels,ce.outputChannels==4?ce.format=Si:ce.format=Lk,Qy?ce.colorSpace="srgb-linear":ce.encoding=3e3,ce}const Gs=new DataView(e),xs=new Uint8Array(e),ta={value:0},Ti=Vr(Gs,e,ta),fn=di(Ti,Gs,xs,ta,this.type),Vl={value:0},ru={R:0,G:1,B:2,A:3,Y:0};for(let K=0;K<fn.height/fn.scanlineBlockSize;K++){const re=Mt(Gs,ta);fn.size=Mt(Gs,ta),fn.lines=re+fn.scanlineBlockSize>fn.height?fn.height-re:fn.scanlineBlockSize;const q=fn.size<fn.lines*fn.bytesPerLine?fn.uncompress(fn):Qe(fn);ta.value+=fn.size;for(let oe=0;oe<fn.scanlineBlockSize;oe++){const ce=oe+K*fn.scanlineBlockSize;if(ce>=fn.height)break;for(let pe=0;pe<fn.channels;pe++){const he=ru[Ti.channels[pe].name];for(let Ue=0;Ue<fn.width;Ue++){Vl.value=(oe*(fn.channels*fn.width)+pe*fn.width+Ue)*fn.inputSize;const ze=(fn.height-1-ce)*(fn.width*fn.outputChannels)+Ue*fn.outputChannels+he;fn.byteArray[ze]=fn.getter(q,Vl)}}}}return{header:Ti,width:fn.width,height:fn.height,data:fn.byteArray,format:fn.format,[Qy?"colorSpace":"encoding"]:fn[Qy?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,r,i){function a(s,o){Qy?s.colorSpace=o.colorSpace:s.encoding=o.encoding,s.minFilter=Gn,s.magFilter=Gn,s.generateMipmaps=!1,s.flipY=!1,n&&n(s,o)}return super.load(e,a,r,i)}}function N2e(t,e,n){const r=Ji(m=>m.size),i=Ji(m=>m.viewport),a=typeof t=="number"?t:r.width*i.dpr,s=r.height*i.dpr,o=(typeof t=="number"?n:t)||{},{samples:l=0,depth:u,...f}=o,h=L.useMemo(()=>{const m=new ys(a,s,{minFilter:Gn,magFilter:Gn,type:zi,...f});return u&&(m.depthTexture=new wS(a,s,ui)),m.samples=l,m},[]);return L.useLayoutEffect(()=>{h.setSize(a,s),l&&(h.samples=l)},[l,h,a,s]),L.useEffect(()=>()=>h.dispose(),[]),h}const O2e=t=>typeof t=="function",R2e=L.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,makeDefault:r,children:i,...a},s)=>{const o=Ji(({set:x})=>x),l=Ji(({camera:x})=>x),u=Ji(({size:x})=>x),f=L.useRef(null);L.useImperativeHandle(s,()=>f.current,[]);const h=L.useRef(null),m=N2e(e);L.useLayoutEffect(()=>{a.manual||(f.current.aspect=u.width/u.height)},[u,a]),L.useLayoutEffect(()=>{f.current.updateProjectionMatrix()});let y=0,w=null;const b=O2e(i);return Rg(x=>{b&&(n===1/0||y<n)&&(h.current.visible=!1,x.gl.setRenderTarget(m),w=x.scene.background,t&&(x.scene.background=t),x.gl.render(x.scene,f.current),x.scene.background=w,x.gl.setRenderTarget(null),h.current.visible=!0,y++)}),L.useLayoutEffect(()=>{if(r){const x=l;return o(()=>({camera:f.current})),()=>o(()=>({camera:x}))}},[f,r,o]),L.createElement(L.Fragment,null,L.createElement("perspectiveCamera",hh({ref:f},a),!b&&i),L.createElement("group",{ref:h},b&&i(m.texture)))}),k2e=L.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:a=!1,onChange:s,onStart:o,onEnd:l,...u},f)=>{const h=Ji(N=>N.invalidate),m=Ji(N=>N.camera),y=Ji(N=>N.gl),w=Ji(N=>N.events),b=Ji(N=>N.setEvents),x=Ji(N=>N.set),_=Ji(N=>N.get),M=Ji(N=>N.performance),T=e||m,A=r||w.connected||y.domElement,R=L.useMemo(()=>new E2e(T),[T]);return Rg(()=>{R.enabled&&R.update()},-1),L.useEffect(()=>(a&&R.connect(a===!0?A:a),R.connect(A),()=>void R.dispose()),[a,A,n,R,h]),L.useEffect(()=>{const N=C=>{h(),n&&M.regress(),s&&s(C)},O=C=>{o&&o(C)},k=C=>{l&&l(C)};return R.addEventListener("change",N),R.addEventListener("start",O),R.addEventListener("end",k),()=>{R.removeEventListener("start",O),R.removeEventListener("end",k),R.removeEventListener("change",N)}},[s,o,l,R,h,b]),L.useEffect(()=>{if(t){const N=_().controls;return x({controls:R}),()=>x({controls:N})}},[t,R]),L.createElement("primitive",hh({ref:f,object:R,enableDamping:i},u))}),j2e=3e3,I2e=3001;var D2e=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class L2e extends uj{constructor(e={}){super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${D2e}
      ${e.vertexShader}
    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const U2e=L.forwardRef(({speed:t=1,...e},n)=>{const[r]=L.useState(()=>new L2e);return Rg(i=>r&&(r.time=i.clock.elapsedTime*t)),L.createElement("primitive",hh({object:r,ref:n,attach:"material"},e))});function F2e(t,e){const n=t+"Geometry";return L.forwardRef(({args:r,children:i,...a},s)=>{const o=L.useRef(null);return L.useImperativeHandle(s,()=>o.current),L.useLayoutEffect(()=>void e?.(o.current)),L.createElement("mesh",hh({ref:o},a),L.createElement(n,{attach:"geometry",args:r}),i)})}const z2e=F2e("sphere"),Tq=(t,e,n)=>{let r;switch(t){case zs:r=new Uint8ClampedArray(e*n*4);break;case zi:r=new Uint16Array(e*n*4);break;case Sl:r=new Uint32Array(e*n*4);break;case kk:r=new Int8Array(e*n*4);break;case jk:r=new Int16Array(e*n*4);break;case yS:r=new Int32Array(e*n*4);break;case ui:r=new Float32Array(e*n*4);break;default:throw new Error("Unsupported data type")}return r};let Ow;const B2e=(t,e,n,r)=>{if(Ow!==void 0)return Ow;const i=new ys(1,1,r);e.setRenderTarget(i);const a=new ti(new Ch,new nu({color:16777215}));e.render(a,n),e.setRenderTarget(null);const s=Tq(t,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,s),i.dispose(),a.geometry.dispose(),a.material.dispose(),Ow=s[0]!==0,Ow};class Aj{_renderer;_rendererIsDisposable=!1;_material;_scene;_camera;_quad;_renderTarget;_width;_height;_type;_colorSpace;_supportsReadPixels=!0;constructor(e){this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const n={format:Si,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:e.renderTargetOptions?.anisotropy!==void 0?e.renderTargetOptions?.anisotropy:1,generateMipmaps:e.renderTargetOptions?.generateMipmaps!==void 0?e.renderTargetOptions?.generateMipmaps:!1,magFilter:e.renderTargetOptions?.magFilter!==void 0?e.renderTargetOptions?.magFilter:Gn,minFilter:e.renderTargetOptions?.minFilter!==void 0?e.renderTargetOptions?.minFilter:Gn,samples:e.renderTargetOptions?.samples!==void 0?e.renderTargetOptions?.samples:void 0,wrapS:e.renderTargetOptions?.wrapS!==void 0?e.renderTargetOptions?.wrapS:Fr,wrapT:e.renderTargetOptions?.wrapT!==void 0?e.renderTargetOptions?.wrapT:Fr};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=Aj.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new mx,this._camera=new zc,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!B2e(this._type,this._renderer,this._camera,n)){let r;switch(this._type){case zi:r=this._renderer.extensions.has("EXT_color_buffer_float")?ui:void 0;break}r!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${ui}`),this._type=r):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new ti(new Ch,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new ys(this.width,this.height,n),this._renderTarget.texture.mapping=e.renderTargetOptions?.mapping!==void 0?e.renderTargetOptions?.mapping:fd}static instantiateRenderer(){const e=new SS;return e.setSize(128,128),e}render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)};toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=Tq(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const n=new cd(this.toArray(),this.width,this.height,Si,this._type,e?.mapping||fd,e?.wrapS||Fr,e?.wrapT||Fr,e?.magFilter||Gn,e?.minFilter||Gn,e?.anisotropy||1,Hs);return n.generateMipmaps=e?.generateMipmaps!==void 0?e?.generateMipmaps:!1,n}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Ws&&Object.values(this.material.uniforms).forEach(n=>{n.value instanceof _r&&n.value.dispose()}),Object.values(this.material).forEach(n=>{n instanceof _r&&n.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class Aq extends Error{}class Eq extends Error{}const ev=(t,e,n)=>{const r=new RegExp(`${e}="([^"]*)"`,"i").exec(t);if(r)return r[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(t);if(i){const a=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return a&&a.length===3?a.map(s=>s.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(n!==void 0)return n;throw new Error(`Can't find ${e} in gainmap metadata`)},V2e=t=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(t):e=t.toString();let n=e.indexOf("<x:xmpmeta");for(;n!==-1;){const r=e.indexOf("x:xmpmeta>",n),i=e.slice(n,r+10);try{const a=ev(i,"hdrgm:GainMapMin","0"),s=ev(i,"hdrgm:GainMapMax"),o=ev(i,"hdrgm:Gamma","1"),l=ev(i,"hdrgm:OffsetSDR","0.015625"),u=ev(i,"hdrgm:OffsetHDR","0.015625"),f=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),h=f?f[1]:"0",m=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!m)throw new Error("Incomplete gainmap metadata");const y=m[1];return{gainMapMin:Array.isArray(a)?a.map(w=>parseFloat(w)):[parseFloat(a),parseFloat(a),parseFloat(a)],gainMapMax:Array.isArray(s)?s.map(w=>parseFloat(w)):[parseFloat(s),parseFloat(s),parseFloat(s)],gamma:Array.isArray(o)?o.map(w=>parseFloat(w)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetSdr:Array.isArray(l)?l.map(w=>parseFloat(w)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(u)?u.map(w=>parseFloat(w)):[parseFloat(u),parseFloat(u),parseFloat(u)],hdrCapacityMin:parseFloat(h),hdrCapacityMax:parseFloat(y)}}catch{}n=e.indexOf("<x:xmpmeta",r)}};class H2e{options;constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((n,r)=>{const i=this.options.debug,a=new DataView(e.buffer);if(a.getUint16(0)!==65496){r(new Error("Not a valid jpeg"));return}const s=a.byteLength;let o=2,l=0,u;for(;o<s;){if(++l>250){r(new Error(`Found no marker after ${l} loops `));return}if(a.getUint8(o)!==255){r(new Error(`Not a valid marker at offset 0x${o.toString(16)}, found: 0x${a.getUint8(o).toString(16)}`));return}if(u=a.getUint8(o+1),i&&console.log(`Marker: ${u.toString(16)}`),u===226){i&&console.log("Found APP2 marker (0xffe2)");const f=o+4;if(a.getUint32(f)===1297106432){const h=f+4;let m;if(a.getUint16(h)===18761)m=!1;else if(a.getUint16(h)===19789)m=!0;else{r(new Error("No valid endianness marker found in TIFF header"));return}if(a.getUint16(h+2,!m)!==42){r(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const y=a.getUint32(h+4,!m);if(y<8){r(new Error("Not valid TIFF data! (First offset less than 8)"));return}const w=h+y,b=a.getUint16(w,!m),x=w+2;let _=0;for(let R=x;R<x+12*b;R+=12)a.getUint16(R,!m)===45057&&(_=a.getUint32(R+8,!m));const T=w+2+b*12+4,A=[];for(let R=T;R<T+_*16;R+=16){const N={MPType:a.getUint32(R,!m),size:a.getUint32(R+4,!m),dataOffset:a.getUint32(R+8,!m),dependantImages:a.getUint32(R+12,!m),start:-1,end:-1,isFII:!1};N.dataOffset?(N.start=h+N.dataOffset,N.isFII=!1):(N.start=0,N.isFII=!0),N.end=N.start+N.size,A.push(N)}if(this.options.extractNonFII&&A.length){const R=new Blob([a]),N=[];for(const O of A){if(O.isFII&&!this.options.extractFII)continue;const k=R.slice(O.start,O.end+1,"image/jpeg");N.push(k)}n(N)}}}o+=2+a.getUint16(o+2)}})}}const W2e=async t=>{const e=V2e(t);if(!e)throw new Eq("Gain map XMP metadata not found");const r=await new H2e({extractFII:!0,extractNonFII:!0}).extract(t);if(r.length!==2)throw new Aq("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:e}},t8=t=>new Promise((e,n)=>{const r=document.createElement("img");r.onload=()=>{e(r)},r.onerror=i=>{n(i)},r.src=URL.createObjectURL(t)});class G2e extends Za{_renderer;_renderTargetOptions;_internalLoadingManager;_config;constructor(e,n){super(n),this._config=e,e.renderer&&(this._renderer=e.renderer),this._internalLoadingManager=new VS}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new _r,sdr:new _r});return this._config.createQuadRenderer({width:16,height:16,type:zi,colorSpace:Hs,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(e,n,r){const i=n?new Blob([n],{type:"image/jpeg"}):void 0,a=new Blob([e],{type:"image/jpeg"});let s,o,l=!1;if(typeof createImageBitmap>"u"){const u=await Promise.all([i?t8(i):Promise.resolve(void 0),t8(a)]);o=u[0],s=u[1],l=r==="flipY"}else{const u=await Promise.all([i?createImageBitmap(i,{imageOrientation:r||"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:r||"flipY"})]);o=u[0],s=u[1]}return{sdrImage:s,gainMapImage:o,needsFlip:l}}createTextures(e,n,r){const i=new _r(n||new ImageData(2,2),fd,Fr,Fr,Gn,ZN,Si,zs,1,Hs);i.flipY=r,i.needsUpdate=!0;const a=new _r(e,fd,Fr,Fr,Gn,ZN,Si,zs,1,wi);return a.flipY=r,a.needsUpdate=!0,{gainMap:i,sdr:a}}updateQuadRenderer(e,n,r,i,a){e.width=n.width,e.height=n.height,e.material.gainMap=r,e.material.sdr=i,e.material.gainMapMin=a.gainMapMin,e.material.gainMapMax=a.gainMapMax,e.material.offsetHdr=a.offsetHdr,e.material.offsetSdr=a.offsetSdr,e.material.gamma=a.gamma,e.material.hdrCapacityMin=a.hdrCapacityMin,e.material.hdrCapacityMax=a.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,a.hdrCapacityMax),e.material.needsUpdate=!0}}const $2e=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,q2e=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class X2e extends Ws{_maxDisplayBoost;_hdrCapacityMin;_hdrCapacityMax;constructor({gamma:e,offsetHdr:n,offsetSdr:r,gainMapMin:i,gainMapMax:a,maxDisplayBoost:s,hdrCapacityMin:o,hdrCapacityMax:l,sdr:u,gainMap:f}){super({name:"GainMapDecoderMaterial",vertexShader:$2e,fragmentShader:q2e,uniforms:{sdr:{value:u},gainMap:{value:f},gamma:{value:new le(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new le().fromArray(n)},offsetSdr:{value:new le().fromArray(r)},gainMapMin:{value:new le().fromArray(i)},gainMapMax:{value:new le().fromArray(a)},weightFactor:{value:(Math.log2(s)-o)/(l-o)}},blending:Nl,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=s,this._hdrCapacityMin=o,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const n=this.uniforms.gamma.value;n.x=1/e[0],n.y=1/e[1],n.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class Cq extends G2e{constructor(e,n){super({renderer:e,createMaterial:r=>new X2e(r),createQuadRenderer:r=>new Aj(r)},n)}async render(e,n,r,i){const{sdrImage:a,gainMapImage:s,needsFlip:o}=await this.processImages(r,i,"flipY"),{gainMap:l,sdr:u}=this.createTextures(a,s,o);this.updateQuadRenderer(e,a,l,u,n),e.render()}}class Y2e extends Cq{load([e,n,r],i,a,s){const o=this.prepareQuadRenderer();let l,u,f;const h=async()=>{if(l&&u&&f){try{await this.render(o,f,l,u)}catch(C){this.manager.itemError(e),this.manager.itemError(n),this.manager.itemError(r),typeof s=="function"&&s(C),o.disposeOnDemandRenderer();return}typeof i=="function"&&i(o),this.manager.itemEnd(e),this.manager.itemEnd(n),this.manager.itemEnd(r),o.disposeOnDemandRenderer()}};let m=!0,y=0,w=0,b=!0,x=0,_=0,M=!0,T=0,A=0;const R=()=>{if(typeof a=="function"){const C=y+x+T,I=w+_+A,F=m&&b&&M;a(new ProgressEvent("progress",{lengthComputable:F,loaded:I,total:C}))}};this.manager.itemStart(e),this.manager.itemStart(n),this.manager.itemStart(r);const N=new Vs(this._internalLoadingManager);N.setResponseType("arraybuffer"),N.setRequestHeader(this.requestHeader),N.setPath(this.path),N.setWithCredentials(this.withCredentials),N.load(e,async C=>{if(typeof C=="string")throw new Error("Invalid sdr buffer");l=C,await h()},C=>{m=C.lengthComputable,w=C.loaded,y=C.total,R()},C=>{this.manager.itemError(e),typeof s=="function"&&s(C)});const O=new Vs(this._internalLoadingManager);O.setResponseType("arraybuffer"),O.setRequestHeader(this.requestHeader),O.setPath(this.path),O.setWithCredentials(this.withCredentials),O.load(n,async C=>{if(typeof C=="string")throw new Error("Invalid gainmap buffer");u=C,await h()},C=>{b=C.lengthComputable,_=C.loaded,x=C.total,R()},C=>{this.manager.itemError(n),typeof s=="function"&&s(C)});const k=new Vs(this._internalLoadingManager);return k.setRequestHeader(this.requestHeader),k.setPath(this.path),k.setWithCredentials(this.withCredentials),k.load(r,async C=>{if(typeof C!="string")throw new Error("Invalid metadata string");f=JSON.parse(C),await h()},C=>{M=C.lengthComputable,A=C.loaded,T=C.total,R()},C=>{this.manager.itemError(r),typeof s=="function"&&s(C)}),o}}class K2e extends Cq{load(e,n,r,i){const a=this.prepareQuadRenderer(),s=new Vs(this._internalLoadingManager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(this.withCredentials),this.manager.itemStart(e),s.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const l=new Uint8Array(o);let u,f,h;try{const m=await W2e(l);u=m.sdr,f=m.gainMap,h=m.metadata}catch(m){if(m instanceof Eq||m instanceof Aq)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),h={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},u=l;else throw m}try{await this.render(a,h,u.buffer,f?.buffer)}catch(m){this.manager.itemError(e),typeof i=="function"&&i(m),a.disposeOnDemandRenderer();return}typeof n=="function"&&n(a),this.manager.itemEnd(e),a.disposeOnDemandRenderer()},r,o=>{this.manager.itemError(e),typeof i=="function"&&i(o)}),a}}const G0={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},Pq="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Pm=t=>Array.isArray(t),Ej=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function WS({files:t=Ej,path:e="",preset:n=void 0,encoding:r=void 0,extensions:i}={}){let a=null,s=!1;n&&(Cj(n),t=G0[n],e=Pq),s=Pm(t);const{extension:o,isCubemap:l}=Pj(t);if(a=Nj(o),!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);const u=Ji(y=>y.gl);L.useLayoutEffect(()=>{if(o!=="webp"&&o!=="jpg"&&o!=="jpeg")return;function y(){hg.clear(a,s?[t]:t)}u.domElement.addEventListener("webglcontextlost",y,{once:!0})},[t,u.domElement]);const f=hg(a,s?[t]:t,y=>{(o==="webp"||o==="jpg"||o==="jpeg")&&y.setRenderer(u),y.setPath==null||y.setPath(e),i&&i(y)});let h=s?f[0]:f;if(o==="jpg"||o==="jpeg"||o==="webp"){var m;h=(m=h.renderTarget)==null?void 0:m.texture}return h.mapping=l?Il:lg,"colorSpace"in h?h.colorSpace=r??l?"srgb":"srgb-linear":h.encoding=r??l?I2e:j2e,h}const Z2e={files:Ej,path:"",preset:void 0,extensions:void 0};WS.preload=t=>{const e={...Z2e,...t};let{files:n,path:r=""}=e;const{preset:i,extensions:a}=e;i&&(Cj(i),n=G0[i],r=Pq);const{extension:s}=Pj(n);if(s==="webp"||s==="jpg"||s==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const o=Nj(s);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);hg.preload(o,Pm(n)?[n]:n,l=>{l.setPath==null||l.setPath(r),a&&a(l)})};const J2e={files:Ej,preset:void 0};WS.clear=t=>{const e={...J2e,...t};let{files:n}=e;const{preset:r}=e;r&&(Cj(r),n=G0[r]);const{extension:i}=Pj(n),a=Nj(i);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+n);hg.clear(a,Pm(n)?[n]:n)};function Cj(t){if(!(t in G0))throw new Error("Preset must be one of: "+Object.keys(G0).join(", "))}function Pj(t){var e;const n=Pm(t)&&t.length===6,r=Pm(t)&&t.length===3&&t.some(s=>s.endsWith("json")),i=Pm(t)?t[0]:t;return{extension:n?"cube":r?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:n,isGainmap:r}}function Nj(t){return t==="cube"?L9:t==="hdr"?C2e:t==="exr"?P2e:t==="jpg"||t==="jpeg"?K2e:t==="webp"?Y2e:null}const Q2e=t=>t.current&&t.current.isScene,eCe=t=>Q2e(t)?t.current:t;function Oj(t,e,n,r,i={}){var a,s,o,l;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const u=eCe(e||n),f=u.background,h=u.environment,m={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(a=(s=u.backgroundRotation)==null||s.clone==null?void 0:s.clone())!==null&&a!==void 0?a:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(o=(l=u.environmentRotation)==null||l.clone==null?void 0:l.clone())!==null&&o!==void 0?o:[0,0,0]};return t!=="only"&&(u.environment=r),t&&(u.background=r),Xu(u,i),()=>{t!=="only"&&(u.environment=h),t&&(u.background=f),Xu(u,m)}}function Rj({scene:t,background:e=!1,map:n,...r}){const i=Ji(a=>a.scene);return L.useLayoutEffect(()=>{if(n)return Oj(e,t,i,n,r)}),null}function Nq({background:t=!1,scene:e,blur:n,backgroundBlurriness:r,backgroundIntensity:i,backgroundRotation:a,environmentIntensity:s,environmentRotation:o,...l}){const u=WS(l),f=Ji(h=>h.scene);return L.useLayoutEffect(()=>Oj(t,e,f,u,{backgroundBlurriness:n??r,backgroundIntensity:i,backgroundRotation:a,environmentIntensity:s,environmentRotation:o})),L.useEffect(()=>()=>{u.dispose()},[u]),null}function tCe({children:t,near:e=.1,far:n=1e3,resolution:r=256,frames:i=1,map:a,background:s=!1,blur:o,backgroundBlurriness:l,backgroundIntensity:u,backgroundRotation:f,environmentIntensity:h,environmentRotation:m,scene:y,files:w,path:b,preset:x=void 0,extensions:_}){const M=Ji(k=>k.gl),T=Ji(k=>k.scene),A=L.useRef(null),[R]=L.useState(()=>new mx),N=L.useMemo(()=>{const k=new Kk(r);return k.texture.type=zi,k},[r]);L.useEffect(()=>()=>{N.dispose()},[N]),L.useLayoutEffect(()=>{if(i===1){const k=M.autoClear;M.autoClear=!0,A.current.update(M,R),M.autoClear=k}return Oj(s,y,T,N.texture,{backgroundBlurriness:o??l,backgroundIntensity:u,backgroundRotation:f,environmentIntensity:h,environmentRotation:m})},[t,R,N.texture,y,T,s,i,M]);let O=1;return Rg(()=>{if(i===1/0||O<i){const k=M.autoClear;M.autoClear=!0,A.current.update(M,R),M.autoClear=k,O++}}),L.createElement(L.Fragment,null,zEe(L.createElement(L.Fragment,null,t,L.createElement("cubeCamera",{ref:A,args:[e,n,N]}),w||x?L.createElement(Nq,{background:!0,files:w,preset:x,path:b,extensions:_}):a?L.createElement(Rj,{background:!0,map:a,extensions:_}):null),R))}function nCe(t){var e,n,r,i;const a=WS(t),s=t.map||a;L.useMemo(()=>tq({GroundProjectedEnvImpl:x2e}),[]),L.useEffect(()=>()=>{a.dispose()},[a]);const o=L.useMemo(()=>[s],[s]),l=(e=t.ground)==null?void 0:e.height,u=(n=t.ground)==null?void 0:n.radius,f=(r=(i=t.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return L.createElement(L.Fragment,null,L.createElement(Rj,hh({},t,{map:s})),L.createElement("groundProjectedEnvImpl",{args:o,scale:f,height:l,radius:u}))}function rCe(t){return t.ground?L.createElement(nCe,t):t.map?L.createElement(Rj,t):t.children?L.createElement(tCe,t):L.createElement(Nq,t)}function iCe({typing:t,...e}){const n=L.useRef(null),[r,i]=L.useState(!1);return Rg((a,s)=>{if(n.current)if(n.current.rotation.x+=s*.2,n.current.rotation.y+=s*.3,t){const o=1+Math.sin(a.clock.elapsedTime*3)*.1;n.current.scale.setScalar(o)}else n.current.scale.setScalar(1)}),c.jsx(z2e,{ref:n,args:[1,64,64],onPointerOver:()=>i(!0),onPointerOut:()=>i(!1),...e,children:c.jsx(U2e,{color:r?"#4f46e5":"#6366f1",attach:"material",distort:.3,speed:2,roughness:.1,metalness:.8})})}function aCe({count:t=50}){const e=L.useRef([]);return Rg(n=>{e.current.forEach((r,i)=>{r&&(r.position.y=Math.sin(n.clock.elapsedTime+i)*.5,r.rotation.x+=.01,r.rotation.y+=.01)})}),c.jsx(c.Fragment,{children:Array.from({length:t}).map((n,r)=>c.jsxs("mesh",{ref:i=>e.current[r]=i,position:[(Math.random()-.5)*4,(Math.random()-.5)*4,(Math.random()-.5)*4],scale:Math.random()*.1+.05,children:[c.jsx("sphereGeometry",{args:[.1,8,8]}),c.jsx("meshStandardMaterial",{color:"#818cf8",emissive:"#6366f1",emissiveIntensity:.5,transparent:!0,opacity:.6})]},r))})}function sCe({typing:t,showParticles:e=!0}){return c.jsxs(c.Fragment,{children:[c.jsx(R2e,{makeDefault:!0,position:[0,0,5],fov:50}),c.jsx("ambientLight",{intensity:.5}),c.jsx("pointLight",{position:[10,10,10],intensity:1}),c.jsx("pointLight",{position:[-10,-10,-10],intensity:.5,color:"#818cf8"}),c.jsx(iCe,{typing:t,position:[0,0,0]}),e&&c.jsx(aCe,{count:30}),c.jsx(k2e,{enableZoom:!1,enablePan:!1,autoRotate:!0,autoRotateSpeed:1,minPolarAngle:Math.PI/3,maxPolarAngle:Math.PI/3}),c.jsx(rCe,{preset:"sunset"})]})}const oCe=({typing:t=!1,showParticles:e=!0,className:n=""})=>c.jsx("div",{className:`relative ${n}`,style:{width:"100%",height:"100%"},children:c.jsx(i2e,{style:{background:"transparent"},gl:{alpha:!0,antialias:!0},children:c.jsx(sCe,{typing:t,showParticles:e})})}),lCe=()=>{const{user:t}=Sr(),[e,n]=L.useState(!1),[r,i]=L.useState(!1),[a,s]=L.useState([]),[o,l]=L.useState(""),[u,f]=L.useState(null),[h,m]=L.useState(!1),[y,w]=L.useState(!1),[b,x]=L.useState(null),[_,M]=L.useState(!0),T=L.useRef(null),A=L.useRef(null);L.useEffect(()=>{e&&t&&(u||N())},[e,t]),L.useEffect(()=>{R()},[a]);const R=()=>{T.current?.scrollIntoView({behavior:"smooth"})},N=async()=>{try{m(!0),x(null);const F=await Zf.createSession("web");f(F.session),s(F.messages||[])}catch(F){console.error("Failed to initialize chat session",F);const V=F?.message||F?.response?.data?.message||"Failed to initialize chat";x(V),de.error(V)}finally{m(!1)}},O=async(F=null,V=[])=>{const W=F||o;if(!W?.trim()&&V.length===0||h)return;let G=u;if(!G)try{const J=await Zf.createSession("web");G=J.session,f(G),J.messages&&J.messages.length>0&&s(J.messages)}catch(J){console.error("Failed to initialize session",J);const ee=J?.message||J?.response?.data?.message||"Failed to initialize chat session";de.error(ee);return}m(!0),w(!0);try{const J=await Zf.sendMessage(W?.trim()||"",G?.sessionId,V),ee=J.userMessage||{sender:"user",content:W||"File attachment",createdAt:new Date},ae=J.botMessage||{sender:"bot",content:J.content||"I received your message.",createdAt:new Date},$={sender:ee.sender||"user",content:ee.content||W||"File attachment",createdAt:ee.createdAt||new Date,attachments:ee.attachments||(V.length>0?V.map(Y=>({filename:Y.name,path:Y.name})):[])},B={sender:ae.sender||"bot",content:ae.content||J.content||"I received your message.",createdAt:ae.createdAt||new Date,quickActions:ae.quickActions||J.quickActions||[],metadata:ae.metadata||J.metadata||{}};s(Y=>[...Y,$,B]),l(""),w(!1)}catch(J){console.error("Failed to send message",J),de.error(J.message||"Failed to send message"),w(!1)}finally{m(!1)}},k=async F=>{switch(F){case"Create Ticket":case"Create Another Ticket":await O("create ticket");break;case"Check Status":await O("Show all my open tickets");break;case"Contact Support":await O("I want to speak with a technician");break;case"FAQ":await O("What are common support questions?");break;default:["Low","Medium","High","Urgent"].includes(F)?await O(F.toLowerCase()):await O(F)}},C=F=>{const V=Array.from(F.target.files);V.length>0&&O(null,V)},I=F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),o.trim()&&!h&&O())};return t?c.jsxs(c.Fragment,{children:[!e&&c.jsxs("button",{onClick:()=>n(!0),className:"fixed bottom-6 right-6 bg-primary-600 text-white p-4 rounded-full shadow-lg hover:bg-primary-700 transition-all z-[9998] flex items-center justify-center group","aria-label":"Open chat",style:{width:"56px",height:"56px"},children:[c.jsx(rd,{size:24}),c.jsx("span",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-xs rounded-full w-3 h-3 flex items-center justify-center animate-pulse",title:"3D Avatar Enabled",children:c.jsx("span",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:"!"})]}),e&&c.jsxs("div",{className:`fixed bottom-6 right-6 bg-white rounded-lg shadow-2xl z-[9999] flex flex-col transition-all ${r?"w-80 h-14":"w-96 h-[600px] max-h-[600px]"}`,style:{boxShadow:"0 10px 40px rgba(0, 0, 0, 0.2)",maxHeight:"calc(100vh - 48px)"},children:[c.jsxs("div",{className:"bg-primary-600 text-white p-4 rounded-t-lg flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(rd,{size:20}),c.jsx("span",{className:"font-semibold",children:"Support Chat"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>M(!_),className:"p-1 hover:bg-primary-700 rounded transition-colors","aria-label":_?"Hide 3D Avatar":"Show 3D Avatar",title:_?"Hide 3D Avatar":"Show 3D Avatar",children:_?c.jsx(i1,{size:16}):c.jsx(Om,{size:16})}),c.jsx("button",{onClick:()=>i(!r),className:"p-1 hover:bg-primary-700 rounded transition-colors","aria-label":r?"Maximize":"Minimize",children:r?c.jsx(_K,{size:16}):c.jsx(MK,{size:16})}),c.jsx("button",{onClick:()=>n(!1),className:"p-1 hover:bg-primary-700 rounded transition-colors","aria-label":"Close chat",children:c.jsx(po,{size:16})})]})]}),!r&&c.jsxs(c.Fragment,{children:[b&&c.jsxs("div",{className:"bg-red-50 border-b border-red-200 px-4 py-3 flex items-center justify-between",children:[c.jsx("div",{className:"flex items-center gap-2 text-red-800 text-sm",children:c.jsxs("span",{children:[" ",b]})}),c.jsx("button",{onClick:N,className:"text-red-600 hover:text-red-800 text-sm font-medium underline",children:"Retry"})]}),_&&c.jsxs("div",{className:"h-48 bg-gradient-to-b from-primary-50 to-gray-50 border-b border-gray-200 relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0",children:c.jsx(oCe,{typing:y,showParticles:!0})}),c.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 bg-black/50 text-white text-xs px-3 py-1 rounded-full",children:y?"Thinking...":"Online"})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[a.length===0&&!h&&!b&&c.jsxs("div",{className:"text-center text-gray-500 py-8",children:[!_&&c.jsx(rd,{className:"mx-auto h-12 w-12 text-gray-400 mb-2"}),c.jsx("p",{children:"Start a conversation!"}),c.jsx("p",{className:"text-sm mt-2",children:"I can help you create tickets, check status, and answer questions."})]}),h&&a.length===0&&c.jsxs("div",{className:"text-center text-gray-500 py-8",children:[c.jsx("div",{className:"animate-spin mx-auto h-8 w-8 border-4 border-primary-600 border-t-transparent rounded-full mb-2"}),c.jsx("p",{children:"Initializing chat..."})]}),a.map((F,V)=>c.jsx("div",{className:`flex ${F.sender==="user"?"justify-end":"justify-start"}`,children:c.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${F.sender==="user"?"bg-primary-600 text-white":F.sender==="technician"?"bg-blue-100 text-blue-900":"bg-white text-gray-900 border border-gray-200"}`,children:[F.attachments&&F.attachments.length>0&&c.jsx("div",{className:"mb-2 space-y-1",children:F.attachments.map((W,G)=>c.jsxs("a",{href:`/api/uploads/${W.path}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm underline block",children:[" ",W.filename]},G))}),c.jsx("p",{className:"text-sm whitespace-pre-wrap",children:F.content}),F.metadata?.ticketId&&c.jsx("div",{className:"mt-2 pt-2 border-t border-gray-300",children:c.jsxs("a",{href:`/tickets/${F.metadata.ticketId}`,className:"text-xs underline",children:["View Ticket #",F.metadata.ticketId]})}),c.jsx("p",{className:"text-xs opacity-70 mt-1",children:new Date(F.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},V)),y&&c.jsx("div",{className:"flex justify-start",children:c.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3",children:c.jsxs("div",{className:"flex gap-1",children:[c.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),c.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),c.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),c.jsx("div",{ref:T})]}),a.length>0&&a[a.length-1]?.quickActions&&c.jsx("div",{className:"px-4 py-2 border-t border-gray-200 bg-white",children:c.jsx("div",{className:"flex flex-wrap gap-2",children:a[a.length-1].quickActions.map((F,V)=>c.jsx("button",{onClick:()=>k(F),className:"text-xs bg-primary-50 text-primary-700 px-3 py-1 rounded-full hover:bg-primary-100 transition-colors",children:F},V))})}),c.jsx("div",{className:"p-4 border-t border-gray-200 bg-white rounded-b-lg",children:c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("input",{ref:A,type:"file",multiple:!0,className:"hidden",onChange:C,accept:"image/*,.pdf,.doc,.docx"}),c.jsx("button",{onClick:()=>A.current?.click(),className:"p-2 text-gray-500 hover:text-gray-700 transition-colors","aria-label":"Attach file",children:c.jsx(R8,{size:20})}),c.jsx("textarea",{value:o,onChange:F=>l(F.target.value),onKeyPress:I,placeholder:"Type your message...",className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 resize-none focus:outline-none focus:ring-2 focus:ring-primary-500",rows:1,disabled:h}),c.jsx("button",{onClick:F=>{F.preventDefault(),F.stopPropagation(),console.log("Send button clicked",{inputMessage:o,loading:h,session:u}),o.trim()&&!h&&O()},disabled:h||!o.trim(),className:"bg-primary-600 text-white p-2 rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center","aria-label":"Send message",type:"button",children:c.jsx(WO,{size:20})})]})})]})]})]}):null},cCe=()=>{const t=Dl();return["/","/activate","/login","/mfa-login","/sso/azure","/sso/google"].includes(t.pathname)?null:c.jsx(lCe,{})};function uCe(){return c.jsx(oK,{children:c.jsx(lK,{children:c.jsx(cK,{children:c.jsx(dY,{children:c.jsx(uK,{children:c.jsxs("div",{className:"App",children:[c.jsx(cCe,{}),c.jsx(sK,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#ffffff",color:"#111827",border:"1px solid #e5e7eb",borderRadius:"0.5rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",padding:"12px 16px"},success:{duration:3e3,iconTheme:{primary:"#10b981",secondary:"#ffffff"},style:{border:"1px solid #d1fae5",background:"#f0fdf4"}},error:{duration:4e3,iconTheme:{primary:"#ef4444",secondary:"#ffffff"},style:{border:"1px solid #fee2e2",background:"#fef2f2"}}}}),c.jsxs(nY,{children:[c.jsx(Ln,{path:"/",element:c.jsx(ube,{})}),c.jsx(Ln,{path:"/activate",element:c.jsx(gbe,{})}),c.jsx(Ln,{path:"/login",element:c.jsx(jK,{})}),c.jsx(Ln,{path:"/mfa-login",element:c.jsx(HK,{})}),c.jsx(Ln,{path:"/sso/azure",element:c.jsx(IK,{})}),c.jsx(Ln,{path:"/sso/google",element:c.jsx(DK,{})}),c.jsx(Ln,{path:"/dashboard",element:c.jsx(lr,{children:c.jsx(Gme,{})})}),c.jsx(Ln,{path:"/tickets",element:c.jsx(lr,{children:c.jsx($me,{})})}),c.jsx(Ln,{path:"/tickets/search",element:c.jsx(lr,{children:c.jsx(qme,{})})}),c.jsx(Ln,{path:"/tickets/new",element:c.jsx(lr,{children:c.jsx(ege,{})})}),c.jsx(Ln,{path:"/tickets/:id",element:c.jsx(lr,{children:c.jsx(tge,{})})}),c.jsx(Ln,{path:"/profile",element:c.jsx(lr,{children:c.jsx(nge,{})})}),c.jsx(Ln,{path:"/mfa-setup",element:c.jsx(lr,{children:c.jsx(VK,{})})}),c.jsx(Ln,{path:"/settings",element:c.jsx(lr,{children:c.jsx(rge,{})})}),c.jsx(Ln,{path:"/reports",element:c.jsx(lr,{children:c.jsx(Age,{})})}),c.jsx(Ln,{path:"/admin/organizations",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(fge,{})})}),c.jsx(Ln,{path:"/admin/users",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(ige,{})})}),c.jsx(Ln,{path:"/admin/categories",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(hge,{})})}),c.jsx(Ln,{path:"/admin/roles",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(oge,{})})}),c.jsx(Ln,{path:"/admin/sla",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(pge,{})})}),c.jsx(Ln,{path:"/admin/departments",element:c.jsx(lr,{children:c.jsx(mge,{})})}),c.jsx(Ln,{path:"/admin/email",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(lge,{})})}),c.jsx(Ln,{path:"/admin/domain-rules",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(Tge,{})})}),c.jsx(Ln,{path:"/admin/email-templates",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(cge,{})})}),c.jsx(Ln,{path:"/admin/sso",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(uge,{})})}),c.jsx(Ln,{path:"/admin/logo",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(dge,{})})}),c.jsx(Ln,{path:"/admin/tickets/import",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(gge,{})})}),c.jsx(Ln,{path:"/admin/analytics",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(yge,{})})}),c.jsx(Ln,{path:"/admin/api-keys",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(vge,{})})}),c.jsx(Ln,{path:"/admin/integrations",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(xge,{})})}),c.jsx(Ln,{path:"/admin/email-automation",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(bge,{})})}),c.jsx(Ln,{path:"/admin/faq",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(_ge,{})})}),c.jsx(Ln,{path:"/admin/chat-history",element:c.jsx(lr,{children:c.jsx(Sge,{})})}),c.jsx(Ln,{path:"/admin/teams-integration",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(wge,{})})}),c.jsx(Ln,{path:"/admin/backup-restore",element:c.jsx(lr,{requireAdmin:!0,children:c.jsx(Mge,{})})}),c.jsx(Ln,{path:"*",element:c.jsx(XC,{to:"/",replace:!0})})]})]})})})})})})}dX.createRoot(document.getElementById("root")).render(c.jsx(xe.StrictMode,{children:c.jsx(uCe,{})}));
